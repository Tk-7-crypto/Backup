<template>
    <div class="slds-box slds-p-around_none">
       <article class="slds-card">
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media__body" style="display: grid;">
                            <div class="slds-card__header slds-grid">
                                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                    <div class="slds-media__figure">
                                        <lightning-icon icon-name="custom:custom18" title="custom18"
                                            size="small"></lightning-icon>
                                    </div>
                                    <div class="slds-media__body">
                                        <h4 class="slds-card__header-title">
                                            <a class="slds-card__header-link baseCard__header-title-container">
                                                <span class="slds-card__header-link" title="Files">Agreement Clause ({count})</span>
                                            </a>
                                        </h4>
                                    </div>
                                    <div class="slds-no-flex" style="margin-left: 10px;">
                                        <button class="slds-button slds-button_neutral" title="Refresh"
                                            onclick={handleRefresh} style="height: 32px;">
                                            <svg class="slds-button__icon" aria-hidden="true">
                                                <use
                                                    xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg?cache=9.28.0#refresh">
                                                </use>
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="slds-no-flex" style="margin-left: 10px;">
                                        <button class="slds-button slds-button_neutral" title="New"
                                            onclick={handleNewButton} style="height: 32px;">
                                            New
                                        </button>
                                    </div>
                                </header>
                            </div>
                        </div>
                    </div>
                </div>
            </div>                                
            <div class="slds-m-around_none slds-border_top">
                <template if:true={isLoading}>
                    <lightning-spinner></lightning-spinner>
                </template>
                <lightning-datatable 
                    class="custom-datatable"
                    key-field="Id"
                    data={clauses}
                    show-row-number-column
                    columns={columns}
                    onrowaction={onRowActionHandler}
                    hide-checkbox-column="true"
                    column-widths-mode="auto"
                    wrap-text-max-lines=2
                    >
                </lightning-datatable>
            </div>
            <template if:true={isDeleteModalOpen}>
                <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <header class="slds-modal__header">
                            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                                <lightning-icon icon-name="utility:close" alternative-text="close" size="small">
                                </lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>
                            <h2 class="slds-text-heading_medium">Delete Agreement Clause</h2>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium slds-text-align_center">
                            <p>Are you sure you want to delete this Agreement Clause?</p>
                        </div>
                        <footer class="slds-modal__footer">
                            <button class="slds-button slds-button_neutral" onclick={closeModal}>Cancel</button>
                            <button class="slds-button slds-button_brand" onclick={confirmDelete}>Delete</button>
                        </footer>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </template>
        </article>
        <footer class="slds-card__footer">
            <a class="slds-card__footer-action" onclick={handleViewAll} target="_blank">View All
                <span class="slds-assistive-text">Agreement Clause</span>
            </a>
        </footer>     
    </div>
</template>