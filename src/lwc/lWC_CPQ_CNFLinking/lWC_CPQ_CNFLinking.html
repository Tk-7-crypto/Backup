<template>
    <div class="slds-card">
        <lightning-quick-action-panel header={header}>
            <lightning-spinner if:true={spinner} variant="brand"></lightning-spinner>
            <div lwc:if={showRecords}>
                <div>
                    <lightning-layout>
                        <lightning-layout-item>
                            <c-l-w-c_-c-p-q_-custom_-data_-table
                                key-field="Id"
                                data={cnfData}
                                columns={columns}
                                draft-values={draftValues}
                                oncellchange={handleCellChange}
                                suppress-bottom-bar
                                hide-checkbox-column
                                enable-infinite-loading
                                editable>
                            </c-l-w-c_-c-p-q_-custom_-data_-table>
                        </lightning-layout-item>
                    </lightning-layout>
                    <div lwc:if={showPagination} class="slds-m-top_medium slds-align_absolute-center">
                        <lightning-button label="Previous" onclick={previousPage} disabled={disablePrevious}></lightning-button>
                        <lightning-button label="Next" class="slds-m-left_x-small" onclick={nextPage} disabled={disableNext}></lightning-button>
                    </div>
                </div>
                <div class="slds-align_absolute-center slds-m-top_small">
                    <lightning-button variant="brand" class="slds-m-left_x-small" onclick={handleFinish} label="Finish"></lightning-button>
                </div>
            </div>
            <div lwc:else>
                <lightning-layout class="slds-m-bottom_medium">
                    <lightning-layout-item>
                        <div class="slds-text-heading_small">There are no CNF records for linking on this Opportunity.</div>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </lightning-quick-action-panel>
    </div>  
</template>
