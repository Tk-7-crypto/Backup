<apex:page controller="CNT_TPA_CustomReportDashboard" tabStyle="TPA_Request__c" showHeader="true" sidebar="false" lightningstylesheets="true" cache="false" doctype="html-5.0">
<apex:slds />
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- *** Angular-JS Library reference ** -->
        <apex:includeScript value="{!$Resource.AngularJS}" />
        <!-- *** Angular-JS Library reference ** -->

          <!-- *** Jquery library reference *** -->
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'scripts/jquery-2.0.2.min.js')}"/><!-- *** Modified by C.P.Pandey under ER-2994 *** -->
        <!-- *** Jquery library reference *** -->

        <!-- Added by C.P.Pandey under ER-2872 start -->
        <!-- Added by C.P.Pandey Custom popup start -->
        <!-- *** JQuery Custom Popup Library reference *** -->
        <script src="{!URLFOR($Resource.TpaCustomPopup, 'popup.js')}" type="text/javascript"></script>
        <!-- *** JQuery Custom Popup Library reference *** -->

        <!-- *** JQuery Custom Popup Stylesheet reference *** -->
        <link href="{!URLFOR($Resource.TpaCustomPopup, 'popup.css')}" rel="stylesheet" />
        <!-- *** JQuery Custom Popup Stylesheet reference *** -->
        <!-- Added by C.P.Pandey Custom popup end -->
        <!-- Added by C.P.Pandey under ER-2872 end -->

        <link href="{!URLFOR($Resource.TPAJqueryUICss)}" rel="stylesheet" type="text/css" />  <!-- *** JQuery UI Stylesheet reference *** --> <!-- Added By Neha Under CR-11457 -->
        <script src="{!$Resource.TPAJqueryUI}" type="text/javascript" /> <!-- *** JQuery UI Library reference *** --> <!-- Added By Neha Under CR-11457 -->

        <!-- *** TPA Graphs library reference *** -->
        <script src="{!URLFOR($Resource.TpaReportsDashboards, 'highcharts.js')}" type="text/javascript"></script>
        <script src="{!URLFOR($Resource.TpaReportsDashboards, 'drilldown.src.js')}" type="text/javascript"></script>
        <script src="{!URLFOR($Resource.TpaReportsDashboards, 'exporting.js')}" type="text/javascript"></script>
        <script src="{!URLFOR($Resource.TpaReportsDashboards, 'canvas-tools.js')}" type="text/javascript"></script>
        <script src="{!URLFOR($Resource.TpaReportsDashboards, 'export-csv.js')}" type="text/javascript"></script>
        <script src="{!URLFOR($Resource.TpaReportsDashboards, 'jspdf.min.js')}" type="text/javascript"></script>
        <script src="{!URLFOR($Resource.TpaReportsDashboards, 'highcharts-export-clientside.js')}" type="text/javascript"></script>
        <!-- *** TPA Graphs library reference *** -->

        <!-- *** YUI Library Reference *** -->
        <apex:includeScript value="{!URLFOR($Resource.YUILibrary2, '/yui/build/yahoo-dom-event/yahoo-dom-event.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.YUILibrary2, '/yui/build/container/container-min.js')}" />
        <apex:includescript value="{!URLFOR($Resource.YUILibrary2, '/yui/build/animation/animation-min.js')}" />
        <apex:stylesheet value="{!URLFOR($Resource.YUILibrary2, '/yui/build/container/assets/skins/sam/container.css')}" />
        <!-- *** YUI Library Reference *** -->

          <!-- *** Added by C.P.Pandey under ER-2994 start *** -->
        <apex:stylesheet value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/styles/jqx.base.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/styles/jqx.office.css')}" />
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxcore.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxdata.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxbuttons.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxscrollbar.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxlistbox.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxdropdownlist.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxmenu.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.filter.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.sort.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.grouping.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.selection.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxpanel.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxcalendar.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxdatetimeinput.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxcheckbox.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/globalization/globalize.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.columnsresize.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxdata.export.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.export.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.pager.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxtooltip.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'scripts/demos.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'scripts/generatedata.js')}"/>
        <!-- *** Added by C.P.Pandey under ER-2994 end *** -->

        <!-- Added by C.P.Pandey under ER-2872 start -->
        <!-- *** Multi Select Control CSS reference *** -->
        <link href="{!URLFOR($Resource.TpaMultiSelect, 'select2.css')}" rel="stylesheet" />
        <!-- *** Multi Select Control CSS reference *** -->

        <!-- *** Multi Select Control Javascript Library reference *** -->
        <script src="{!URLFOR($Resource.TpaMultiSelect, 'select2.js')}" type="text/javascript"></script>
        <!-- *** Multi Select Control Javascript Library reference *** -->
        <!-- Added by C.P.Pandey under ER-2872 end -->

        <!-- Added by C.P.Pandey under ER-2994 start -->
        <script src="{!$Resource.TPA_Fixed_Header}" type="text/javascript"></script>
        <style type="text/css">
            .tableWrapper {
                height: 300px;
                overflow-x:hidden;
            }
            #s2id_ddReqStatuses {
                float:left;
                margin-right:5px !important;
            }
        </style>
        <!-- Added by C.P.Pandey under ER-2994 end -->

        <!-- ****** AngularJS script Start ****** -->
        <script type="text/javascript">
            //*** set apex remote call timeout from visualforce page ***//
            Visualforce.remoting.timeout = 120000;

            var myapp = angular.module('TpaReportDashboard', []);
            var requestStatusesTemp = []; //Added by Neha under CR-11457
            <!-- Page Controller Start -->
            var contrl = myapp.controller('controllerPage',['$scope', '$filter', '$log', '$window', 'callServerMethods', function ($scope, $filter, $log, $window, callServerMethods)
            {
                $scope.rootObj = {};
                $scope.$log = $log;
                $scope.rootObj.getReportDashboardValuesManualReview = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.getReportDashboardValuesManualReview}';
                $scope.rootObj.getReportDashboardValues = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.getReportDashboardValues}';
                $scope.rootObj.getReportDashboardValuesPart2 = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.getReportDashboardValuesPart2}'; //Added by Neha under CR-11457
                $scope.rootObj.getReportDashboardValuesPart3 = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.getReportDashboardValuesPart3}'; //Added by Neha under CR-11457
                $scope.rootObj.getReportDashboardValuesPart4 = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.getReportDashboardValuesPart4}'; //Added by Neha under CR-11457
                $scope.rootObj.getReportDashboardValuesPart5 = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.getReportDashboardValuesPart5}';
                $scope.rootObj.getReportDashboardValuesPart6 = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.getReportDashboardValuesPart6}';
                $scope.rootObj.getPrimSecOfferingsByCountryValues = '{!$RemoteAction.CNT_TPA_CustomReportDashboard.loadPrimSecOfferingsByCountryDbResult}'; //Added by C.P.Pandey under ER-2994
                $scope.rootObj.inputObj = {};
                $scope.rootObj.sfdcErrorResult = '';
                //Modified by C.P.Pandey under ER-2872 start
                $scope.rootObj.requestLocationsTemp = {!RequestLocations};
                $scope.rootObj.requestStatusesTemp = []; //Added by Neha under CR-11457
                $scope.rootObj.requestLocationsData = [];
                $scope.rootObj.tmpJsonObjLoc1 = {};
                $scope.rootObj.tmpJsonObjLoc2 = {};
                $scope.rootObj.tmpArrayLoc = [];
                $scope.rootObj.mapCountryCodesWithAllValues = {!strMapCountryCodesWithAllValues};

                $scope.rootObj.tmpJsonObjLoc2['id'] = "All";
                $scope.rootObj.tmpJsonObjLoc2['text'] = "All";
                $scope.rootObj.tmpArrayLoc.push(angular.copy($scope.rootObj.tmpJsonObjLoc2));
                $scope.rootObj.tmpJsonObjLoc2['id'] = "All excluding US";
                $scope.rootObj.tmpJsonObjLoc2['text'] = "All excluding US";
                $scope.rootObj.tmpArrayLoc.push(angular.copy($scope.rootObj.tmpJsonObjLoc2));
                $scope.rootObj.tmpJsonObjLoc2 = {};
                $scope.rootObj.tmpJsonObjLoc1['id'] = "";
                $scope.rootObj.tmpJsonObjLoc1['text'] = "";
                $scope.rootObj.tmpJsonObjLoc1['children'] = angular.copy($scope.rootObj.tmpArrayLoc);
                $scope.rootObj.tmpArrayLoc = [];
                $scope.rootObj.requestLocationsData.push(angular.copy($scope.rootObj.tmpJsonObjLoc1));
                $scope.rootObj.primSecOffCallCounter = 0; //Added by C.P.Pandey under ER-2994

                $.each($scope.rootObj.requestLocationsTemp, function(k, v){
                    if(v != '-- Countries --' && v != '-- Business Units --')
                    {
                        $scope.rootObj.tmpJsonObjLoc2 = {};
                        $scope.rootObj.tmpJsonObjLoc2['id'] = v;
                        $scope.rootObj.tmpJsonObjLoc2['text'] = v;
                        $scope.rootObj.tmpArrayLoc.push(angular.copy($scope.rootObj.tmpJsonObjLoc2));
                    }
                    else
                    {
                        $scope.rootObj.tmpJsonObjLoc1 = {};
                        $scope.rootObj.tmpJsonObjLoc1['id'] = v;
                        $scope.rootObj.tmpJsonObjLoc1['text'] = v;
                        $scope.rootObj.tmpJsonObjLoc1['children'] = angular.copy($scope.rootObj.tmpArrayLoc);
                        $scope.rootObj.tmpArrayLoc = [];
                        $scope.rootObj.requestLocationsData.push(angular.copy($scope.rootObj.tmpJsonObjLoc1));
                    }
                });
                //Modified by C.P.Pandey under ER-2872 end
                $scope.rootObj.reportSettings = {!reportDashboardSettingMapSerialize};
                $scope.rootObj.durationValue = 6;
                $scope.rootObj.forecastedNumber = 100;//Added by C.P.Pandey under ER-2872
                $scope.rootObj.isBUSelected = false;//Added by C.P.Pandey under ER-2872
                $scope.rootObj.isAllTypeSelected = false; //Added by C.P.Pandey under ER-2942
                $scope.rootObj.selectedLocation = "All";
                $scope.rootObj.chartTitle = '';
                $scope.rootObj.chartDataObject = {};
                $scope.rootObj.monthMap = {1:'January', 2:'February', 3:'March', 4:'April', 5:'May', 6:'June', 7:'July', 8:'August', 9:'September', 10:'October', 11:'November', 12:'December'};
                $scope.rootObj.chartDataObjArr = [];
                $scope.rootObj.chartData = [];
                $scope.rootObj.chartDataCategory = [];
                $scope.rootObj.resultArray = [];
                $scope.rootObj.tpaReqByMonthChartData = [];
                $scope.rootObj.tpaReqByMonthChartDataCategory = [];
                $scope.rootObj.tpaReqByManualAutoChartData = [];
                $scope.rootObj.tpaReqByManualAutoChartDataCategory = [];
                $scope.rootObj.tpaReqByTopVendorsData = [];
                $scope.rootObj.tpaReqByTopVendorsDataCategory = [];
                $scope.rootObj.tpaReqByTopClientsData = [];
                $scope.rootObj.tpaReqByTopClientsDataCategory = [];
                $scope.rootObj.primSecOfferingByCountries = []; //Added by C.P.Pandey under ER-2994
                $scope.rootObj.primSecOfferingByCountriesData = []; //Added by C.P.Pandey under ER-2994
                $scope.rootObj.showOffByCountriesDashboard = false; //Added by C.P.Pandey under ER-2994
                $scope.rootObj.showTop10Off = false; //Added by Neha Bansal under CR-11610
                $scope.rootObj.showAllCategory = false; //Added by Neha Bansal under CR-11610
                $scope.rootObj.remoteCallCounter = 0;
                $scope.rootObj.topRemPrimOffList = []; //Added by Neha under CR-11457
                $scope.rootObj.topRemSecOffList = []; //Added by Neha under CR-11457
                $scope.rootObj.remoteCallOffCounter = 0; //Added by Neha under CR-11457
                $scope.rootObj.RequestChunkSize = {!getRequestChunkSize};
                //Added by C.P.Pandey under ER-2872 start
                $scope.rootObj.buForecastNumberMap = {
                                                        'BU - UNITED STATES':'FCLN-US',
                                                        'BU - Canada':'FCLN-Canada',
                                                        'BU - Latin America':'FCLN-LatAmer',
                                                        'BU - NORTH EUROPE, AFRICA, MIDDLE EAST, and SOUTH ASIA':'FCLN-NEMESA',
                                                        'BU - CENTRAL, EAST and SOUTH EUROPE':'FCLN-CES Europe',
                                                        'BU - PACIFIC ASIA':'FCLN-Pacific Asia',
                                                        'BU - CHINA and SOUTHEAST ASIA':'FCLN-China & SE Asia'
                                                     };
                //Added by C.P.Pandey under ER-2872 end
                $scope.rootObj.countryClientAccountMap = {
                                                            'Argentina':'Argentina',
                                                            'Austria':'Austria',
                                                            'Bolivia':'Bolivia',
                                                            'Brazil':'Brazil',
                                                            'Canada':'Canada',
                                                            'Central America':'Central America',
                                                            'Chile':'Chile',
                                                            'Colombia':'Colombia',
                                                            'Czech Republic':'Czech Republic',
                                                            'Dominican Republic':'Dominican Republic',
                                                            'Ecuador':'Ecuador',
                                                            'France':'France',
                                                            'Germany':'Germany',
                                                            'Hungary':'Hungary',
                                                            'Israel':'Israel',
                                                            'Italy':'Italy',
                                                            'Mexico':'Mexico',
                                                            'Paraguay':'Paraguay',
                                                            'Peru':'Peru',
                                                            'Poland':'Poland',
                                                            'Portugal':'Portugal',
                                                            'Russia':'Russia',
                                                            'Slovakia':'Slovakia',
                                                            'Spain':'Spain',
                                                            'Switzerland':'Switzerland',
                                                            'Turkey':'Turkey',
                                                            'United Kingdom':'UK',
                                                            'United States':'USA',
                                                            'Uruguay':'Uruguay',
                                                            'Venezuela':'Venezuela'
                                                        };


                $scope.rootObj.decodeHtmlCode = function(encodedStr)
                {
                    return $("<div/>").html(encodedStr).text();
                }
                
                $scope.rootObj.sortResults = function (arrayObj, prop, asc) {
                    arrayObj = arrayObj.sort(function(a, b) {
                        if($.isNumeric(a[prop]) && $.isNumeric(b[prop])) {
                            a[prop] = parseInt(a[prop]);
                            b[prop] = parseInt(b[prop]);
                        }
                        if (asc) {
                            return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
                        } else {
                            return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
                        }
                    });
                }

                $scope.rootObj.loadData = function(loadType, lastRecordId)
                {
                    //Modified by C.P.Pandey under ER-2872 start
                    if($scope.rootObj.durationValue > 24)
                    {
                        $scope.popupAlert("Time Duration cannot be more than 24 Months.");
                        return false;
                    }

                    $scope.rootObj.inputObj.callType = loadType;
                    $scope.rootObj.inputObj.countryLocation = angular.copy($('#ddReqLocations').select2('data').text);
                    if($scope.rootObj.forecastedNumber == null || $scope.rootObj.forecastedNumber == '' || $scope.rootObj.forecastedNumber == '0')
                        $scope.rootObj.forecastedNumber = 100;
                    $scope.rootObj.selectedLocation = $scope.rootObj.inputObj.countryLocation;
                    $scope.rootObj.inputObj.countryLocationAccountMap = angular.copy($scope.rootObj.countryClientAccountMap[$scope.rootObj.selectedLocation]);
                    if($scope.rootObj.durationValue == '' || $scope.rootObj.durationValue == '0')
                        $scope.rootObj.durationValue = 6;
                    $scope.rootObj.inputObj.durationValue = angular.copy($scope.rootObj.durationValue);
                    //Added By Neha Bansal Under CR-11610 starts
                    $scope.CategoryList = $('#ddCategory').select2('data');
                    $scope.CategoryToBeStored = '';
                    angular.forEach($scope.CategoryList,function(value,index)
                    {
                      $scope.CategoryToBeStored += ((value.text) + ';');
                    });
                    console.log('check for all'+$scope.CategoryToBeStored);
                    $scope.CategoryToBeStored = $scope.CategoryToBeStored.slice(0, -1);
                    $scope.rootObj.inputObj.lstCategory = $scope.CategoryToBeStored ;
                    console.log('check for lstCategory'+ $scope.rootObj.inputObj.lstCategory);
                    if($scope.rootObj.inputObj.lstCategory.indexOf('Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Offerings') != -1){
                        $scope.rootObj.showTop10Off = true;
                    }
                    else{
                        $scope.rootObj.showTop10Off = false;
                    }

                    console.log('$scope.rootObj.showAllCategory' + $scope.rootObj.showAllCategory);

                    if( $scope.CategoryToBeStored.length == 0 && $scope.CategoryList.length == 0){
                        $scope.rootObj.showAllCategory = true;
                    }
                    else{
                        $scope.rootObj.showAllCategory = false;
                    }
                    //Added By Neha Bansal Under CR-11610 Ends

                    //Added By Neha Bansal Under CR-11457 Starts
                    $scope.dataList = $('#ddReqStatuses').select2('data');
                    $scope.dataToBeStored = '';
                    angular.forEach($scope.dataList,function(value,index)
                    {
                        $scope.dataToBeStored += ((value.text) + ';');
                    });
                    $scope.dataToBeStored = $scope.dataToBeStored.slice(0, -1);
                    $scope.rootObj.inputObj.reqStatus = $scope.dataToBeStored ;

                    var fromcrtDate = new Date($('#fromDate').val().trim());
                    $scope.rootObj.inputObj.fromDateValue ='' + (fromcrtDate.getMonth() + 1) + '/' + fromcrtDate.getDate() + '/' + fromcrtDate.getFullYear();
                    var tocrtDate = new Date($('#toDate').val().trim());
                    $scope.rootObj.inputObj.toDateValue ='' + (tocrtDate.getMonth() + 1) + '/' + tocrtDate.getDate() + '/' + tocrtDate.getFullYear();
                    //Added By Neha Bansal Under CR-11457 Ends
                    console.log('$scope.rootObj.inputObj.fromDateValue:::'+$scope.rootObj.inputObj.fromDateValue);
                    $scope.rootObj.inputObj.pageSize = 2000; //Added by C.P.Pandey under ER-2994
                    $scope.rootObj.resultArray = [];
                    $scope.rootObj.remoteCallCounter = 0;
                    $scope.rootObj.topRemPrimOffList = []; //Added by Neha under CR-11457
                    $scope.rootObj.topRemSecOffList = []; //Added by Neha under CR-11457
                    $scope.rootObj.remoteCallOffCounter = 0; //Added by Neha under CR-11457
                    showLoading();
                    //Modified by C.P.Pandey under ER-2872 end
                    $scope.rootObj.loadOtherGraphsData(loadType, angular.copy(lastRecordId));
                    if($scope.rootObj.inputObj.lstCategory.includes('TPA Requests by Manual Trigger') || $scope.rootObj.showAllCategory){ //Added by Neha Bansal under CR-11610
                        $scope.rootObj.loadManualReviewData(loadType, lastRecordId);
                    } //Added by Neha Bansal under CR-11610
                    $scope.rootObj.primSecOffCallCounter = 0; //Added by C.P.Pandey under ER-2994
                    resultList = []; //Added by C.P.Pandey under ER-2994
                    $scope.rootObj.loadPrimSecOffByCountriesData(lastRecordId); //Added by C.P.Pandey under ER-2994
                }

                $scope.rootObj.loadOtherGraphsData = function(loadType, lastRecordId)
                {
                    //Modified by Neha under CR-11457 Starts
                    callServerMethods($scope.rootObj.getReportDashboardValues, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                        $scope.rootObj.remoteCallCounter++;
                        $scope.$log.info('result:::'+JSON.stringify(result));
                        //Modified by Neha Bansal under CR-11610 Starts
                        if(result.requestByMonthDbResult)
                            $scope.loadTpaRequestByMonths(result.requestByMonthDbResult);
                        /*if(result.requestByManualAutoDbResult)
                        $scope.loadTpaRequestByManualAuto(result.requestByManualAutoDbResult);
                        if(result.requestTopVendorsDbResult && result.requestTopSmallClientsDbResult && result.requestTopLargeClientsDbResult)
                        $scope.loadRequestTopVendorsClients(result.requestTopVendorsDbResult, result.requestTopSmallClientsDbResult, result.requestTopLargeClientsDbResult);
                        if(result.requestTopUsesDbResult && result.requestTopOfferingsDbResult && result.requestTopSecOfferingsDbResult)
                        $scope.loadRequestTopUsesOfferings(result.requestTopUsesDbResult, result.requestTopOfferingsDbResult, result.requestTopSecOfferingsDbResult);
                        if(result.requestByCountries)
                        //Modified by Neha Bansal under CR-11610 Ends
                        $scope.loadRequestByTopCountries(result.requestByCountries); //Added by C.P.Pandey under ER-2942
                        //$scope.loadPrimSecOfferingByCountries(result.primSecOfferingByCountries);//Added by C.P.Pandey under ER-2994
                        */
                        if($scope.rootObj.remoteCallCounter >= 8) //Modified by C.P.Pandey under ER-2994
                            hideLoading();
                    });

                    callServerMethods($scope.rootObj.getReportDashboardValuesPart2, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                        $scope.rootObj.remoteCallCounter++;
                        $scope.$log.info('result:::'+JSON.stringify(result));
                        //Modified by Neha Bansal under CR-11610 Starts
                        if(result.requestByManualAutoDbResult)
                            $scope.loadTpaRequestByManualAuto(result.requestByManualAutoDbResult);
                        if(result.requestByCountries)
                            $scope.loadRequestByTopCountries(result.requestByCountries); //Added by C.P.Pandey under ER-2942
                        //Modified by Neha Bansal under CR-11610 Ends
                        //$scope.loadPrimSecOfferingByCountries(result.primSecOfferingByCountries);//Added by C.P.Pandey under ER-2994
                        if($scope.rootObj.remoteCallCounter >= 8) //Modified by C.P.Pandey under ER-2994
                            hideLoading();
                    });

                  callServerMethods($scope.rootObj.getReportDashboardValuesPart3, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                      $scope.rootObj.remoteCallCounter++;
                      $scope.$log.info('result:::'+JSON.stringify(result));
                      //Modified by Neha Bansal under CR-11610 Starts
                      if(result.requestTopVendorsDbResult || result.requestTopSmallClientsDbResult || result.requestTopLargeClientsDbResult){
                        $scope.$log.info('result::: in top vendor');
                        $scope.loadRequestTopVendorsClients(result.requestTopVendorsDbResult, result.requestTopSmallClientsDbResult, result.requestTopLargeClientsDbResult);
                      }
                      else{
                          $scope.$log.info('result::: blank');
                      }
                      //Modified by Neha Bansal under CR-11610 Ends
                      //$scope.loadPrimSecOfferingByCountries(result.primSecOfferingByCountries);//Added by C.P.Pandey under ER-2994
                      if($scope.rootObj.remoteCallCounter >= 8) //Modified by C.P.Pandey under ER-2994
                          hideLoading();
                  });
                  callServerMethods($scope.rootObj.getReportDashboardValuesPart4, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                        $scope.rootObj.remoteCallCounter++;
                        $scope.$log.info('result:::'+JSON.stringify(result));
                        //Modified by Neha Bansal under CR-11610 Starts
                        if(result.requestTopUsesDbResult)
                            $scope.loadRequestTopUses(result.requestTopUsesDbResult);
                        //Modified by Neha Bansal under CR-11610 Ends
                        //$scope.loadPrimSecOfferingByCountries(result.primSecOfferingByCountries);//Added by C.P.Pandey under ER-2994
                        if($scope.rootObj.remoteCallCounter >= 8) //Modified by C.P.Pandey under ER-2994
                            hideLoading();
                  });

                    callServerMethods($scope.rootObj.getReportDashboardValuesPart5, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                        $scope.rootObj.remoteCallCounter++;
                        $scope.rootObj.remoteCallOffCounter++;
                        $scope.$log.info('result:::'+JSON.stringify(result));
                        //Modified by Neha Bansal under CR-11610 Starts
                        $scope.rootObj.topRemPrimOffList = result.requestTopOfferingsDbResult;
                        if($scope.rootObj.topRemPrimOffList && $scope.rootObj.topRemPrimOffList.length > 0 && $scope.rootObj.topRemSecOffList && $scope.rootObj.topRemSecOffList.length > 0 && $scope.rootObj.remoteCallOffCounter == 2)
                            $scope.loadRequestTopOfferings($scope.rootObj.topRemPrimOffList, $scope.rootObj.topRemSecOffList);
                        //Modified by Neha Bansal under CR-11610 Ends
                        //$scope.loadPrimSecOfferingByCountries(result.primSecOfferingByCountries);//Added by C.P.Pandey under ER-2994
                        if($scope.rootObj.remoteCallCounter >= 8) //Modified by C.P.Pandey under ER-2994
                            hideLoading();
                    });

                    callServerMethods($scope.rootObj.getReportDashboardValuesPart6, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                        $scope.rootObj.remoteCallCounter++;
                        $scope.rootObj.remoteCallOffCounter++;
                        $scope.$log.info('result:::'+JSON.stringify(result));
                        //Modified by Neha Bansal under CR-11610 Starts
                        $scope.rootObj.topRemSecOffList = result.requestTopSecOfferingsDbResult;
                        if($scope.rootObj.topRemPrimOffList && $scope.rootObj.topRemPrimOffList.length > 0 && $scope.rootObj.topRemSecOffList && $scope.rootObj.topRemSecOffList.length > 0 && $scope.rootObj.remoteCallOffCounter == 2)
                            $scope.loadRequestTopOfferings($scope.rootObj.topRemPrimOffList, $scope.rootObj.topRemSecOffList);
                        //Modified by Neha Bansal under CR-11610 Ends
                        //$scope.loadPrimSecOfferingByCountries(result.primSecOfferingByCountries);//Added by C.P.Pandey under ER-2994
                        if($scope.rootObj.remoteCallCounter >= 8) //Modified by C.P.Pandey under ER-2994
                            hideLoading();
                    });
                    
                    //Modified by Neha under CR-11457 ends
                }

                 //Added by C.P.Pandey under ER-2994 start
                var resultList = [];
                var lastRecordDate;
                var returnedLastRecordId;
                var topPrimSecOffByCountry = {};
                $scope.rootObj.loadPrimSecOffByCountriesData = function(lastRecordId){//loadPrimSecOfferingsDbResult
                    callServerMethods($scope.rootObj.getPrimSecOfferingsByCountryValues, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                        $scope.$log.info('result::::'+result.primSecOfferingByCountries.length);
                        if(result != null && result.primSecOfferingByCountries != null && result.primSecOfferingByCountries.length == 2000)
                        {
                            $scope.rootObj.primSecOffCallCounter++;
                            $scope.$log.info(result.primSecOfferingByCountries[result.primSecOfferingByCountries.length - 1]);
                            $scope.$log.info('$scope.rootObj.primSecOffCallCounter++:::::' + $scope.rootObj.primSecOffCallCounter);
                            lastRecordDate = result.primSecOfferingByCountries[result.primSecOfferingByCountries.length - 1].CreatedDate;
                            returnedLastRecordId = result.primSecOfferingByCountries[result.primSecOfferingByCountries.length - 1].Id;
                            for(var listCount = result.primSecOfferingByCountries.length; listCount > 0; listCount--)
                            {
                                if(result.primSecOfferingByCountries[listCount - 1].CreatedDate == lastRecordDate)
                                {
                                    result.primSecOfferingByCountries.splice(listCount - 1, 1);
                                }
                            }
                            $.merge(resultList, result.primSecOfferingByCountries);
                            $scope.rootObj.loadPrimSecOffByCountriesData(returnedLastRecordId);
                            return false;
                        }
                        else if(result != null && result.primSecOfferingByCountries != null)
                            $.merge(resultList, result.primSecOfferingByCountries);

                        $scope.$log.info('resultList111::::'+JSON.stringify(resultList));
                        $scope.$log.info('resultList::::'+resultList.length);
                        //Modified by Neha Bansal under CR-11610 Starts
                        if($scope.rootObj.showTop10Off == true || $scope.rootObj.showAllCategory == true){
                          $scope.loadPrimSecOfferingByCountries(resultList);$scope.$log.info('resultList::::'+resultList.length);
                        }
                        else{
                          hideLoading();
                        } //Modified by Neha Bansal under CR-11610 Ends

                    });
                }

                $scope.loadPrimSecOfferingByCountries = function(primSecOfferingByCountries)
                {
                    //$scope.rootObj.primSecOfferingByCountries = primSecOfferingByCountries;
                    var tmpOffJsonObj = {};
                    topPrimSecOffByCountry = {};
                    $scope.rootObj.showOffByCountriesDashboard = false;
                    $scope.rootObj.primSecOfferingByCountriesData = [];
                    $("#jqxgrid").css("display","");
                    $.each(primSecOfferingByCountries, function(k, v){
                        if(v.TPA_Secondary_Data_Assets__r == null)
                        {
                            tmpOffJsonObj = {};
                            tmpOffJsonObj.Geo_Level__c = v.Geo_Level__c;
                            tmpOffJsonObj.Asset_Name__c = v.Asset_Name__c;
                            tmpOffJsonObj.Secondary_Asset_Name__c = '-';
                            tmpOffJsonObj.BU__c = v.BU__c;
                            tmpOffJsonObj.PurposeName = v.Purpose__r.Name;
                            if(v.Request__r != null && v.Request__r.Client__r != null)
                                tmpOffJsonObj.ClientName = v.Request__r.Client__r.Name;
                            if(v.Request__r != null && v.Request__r.Service_Provider_Address__r != null)
                                tmpOffJsonObj.VendorName = v.Request__r.Service_Provider_Address__r.Name;
                            if(v.Request__r != null)
                                tmpOffJsonObj.RequestNumber = v.Request__r.Name;
                            $scope.rootObj.primSecOfferingByCountriesData.push(angular.copy(tmpOffJsonObj));
                            if(topPrimSecOffByCountry[v.Asset_Name__c] == null)
                                topPrimSecOffByCountry[v.Asset_Name__c] = 1;
                            else
                                topPrimSecOffByCountry[v.Asset_Name__c] += 1;
                        }
                        else
                        {
                            $.each(v.TPA_Secondary_Data_Assets__r, function(kSecOff, vSecOff){
                                tmpOffJsonObj = {};
                                tmpOffJsonObj.Geo_Level__c = v.Geo_Level__c;
                                tmpOffJsonObj.Asset_Name__c = v.Asset_Name__c;
                                tmpOffJsonObj.Secondary_Asset_Name__c = vSecOff.Secondary_Asset_Name__c;
                                tmpOffJsonObj.BU__c = v.BU__c;
                                tmpOffJsonObj.PurposeName = v.Purpose__r.Name;
                                if(v.Request__r != null && v.Request__r.Client__r != null)
                                    tmpOffJsonObj.ClientName = v.Request__r.Client__r.Name;
                                else
                                    tmpOffJsonObj.ClientName = '';
                                if(v.Request__r != null && v.Request__r.Service_Provider_Address__r != null)
                                    tmpOffJsonObj.VendorName = v.Request__r.Service_Provider_Address__r.Name;
                                else
                                    tmpOffJsonObj.VendorName = '';
                                if(v.Request__r != null)
                                    tmpOffJsonObj.RequestNumber = v.Request__r.Name;
                                else
                                    tmpOffJsonObj.RequestNumber = '';
                                $scope.rootObj.primSecOfferingByCountriesData.push(angular.copy(tmpOffJsonObj));
                                if(topPrimSecOffByCountry[vSecOff.Secondary_Asset_Name__c] == null)
                                    topPrimSecOffByCountry[vSecOff.Secondary_Asset_Name__c] = 1;
                                else
                                    topPrimSecOffByCountry[vSecOff.Secondary_Asset_Name__c] += 1;
                            });
                        }
                    });
                    var source =
                    {
                        localdata: $scope.rootObj.primSecOfferingByCountriesData,
                        datatype: "array",
                        sortcolumn: 'BU__c',
                        sortdirection: 'desc',
                        datafields:
                        [
                            { name: 'Geo_Level__c', type: 'string' },
                            { name: 'Asset_Name__c', type: 'string' },
                            { name: 'Secondary_Asset_Name__c', type: 'string' },
                            { name: 'BU__c', type: 'string' },
                            { name: 'PurposeName', type: 'string' },
                            { name: 'ClientName', type: 'string' },
                            { name: 'VendorName', type: 'string' },
                            { name: 'RequestNumber', type: 'string' },
                        ]
                    };
                    var dataAdapter = new $.jqx.dataAdapter(source,
                    {
                        autoBind: true
                    });
                    //$scope.$log.info('dataAdapter:::'+JSON.stringify(dataAdapter));
                    //$scope.$log.info('$scope.rootObj.primSecOfferingByCountriesData:::'+JSON.stringify($scope.rootObj.primSecOfferingByCountriesData));
                    $("#jqxgrid").jqxGrid(
                    {
                        width: '100%',
                        source: dataAdapter,
                        altrows: false,
                        sortable: true,
                        groupable: true,
                        showfilterrow: false,
                        filterable: true,
                        selectionmode: 'none',
                        pageable: false,
                        height: '500px',
                        autoheight: false,
                        columnsresize: true,
                        theme: 'office',
                        enabletooltips: true,
                        autorowheight: false,
                        pagesizeoptions: ['10', '20', '50', '100', '200'],
                        columns: [
                            { text: 'Offering Category', datafield: 'Geo_Level__c', filterable: false, groupable:true, width:'8%'},
                            { text: 'Primary Offering Name', datafield: 'Asset_Name__c',filtertype: 'text', groupable:true,width:'18%'},
                            { text: 'Secondary Offering Name', datafield: 'Secondary_Asset_Name__c', filterable:true, groupable:true,width:'18%' },
                            { text: 'Country', datafield: 'BU__c', filterable:true, groupable:true,width:'10%' },
                            { text: 'Use associated with offering', datafield: 'PurposeName',filterable: true,groupable:false,width:'15%'},
                            { text: 'Client Company Name', datafield: 'ClientName',filterable: true,filtertype: 'text', groupable:false,width:'12%'},
                            { text: 'Vendor Name', datafield: 'VendorName',filterable: true,filtertype: 'text', groupable:false,width:'12%'},
                            { text: 'TPA #', datafield: 'RequestNumber',filterable: true,width:'10%'},
                        ],
                    });
                    $scope.rootObj.remoteCallCounter++;
                    $scope.loadPrimSecOffByCountries();
                    if($scope.rootObj.remoteCallCounter >= 7)
                        hideLoading();
                }

                $scope.loadPrimSecOffByCountries = function()
                {
                    topPrimSecOffByCountry = $scope.sortObject(topPrimSecOffByCountry);
                    topPrimSecOffByCountry = topPrimSecOffByCountry.slice(0, $scope.rootObj.reportSettings['Top N Records in DB']);
                    $scope.rootObj.primSecOffByCountryData = [];
                    $scope.rootObj.primSecOffByCountryDataCategory = [];
                    $.each(topPrimSecOffByCountry, function(k, v){
                        $scope.rootObj.primSecOffByCountryData.push(v.value);
                        $scope.rootObj.primSecOffByCountryDataCategory.push($scope.rootObj.decodeHtmlCode(v.key));
                    });
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Offerings (All Countries)';
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Offerings (All countries excluding United States)';
                    else
                        $scope.rootObj.chartTitle = 'Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Offerigs (' + $scope.rootObj.selectedLocation + ')';

                    $('#dbOffByCountry').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.primSecOffByCountryDataCategory),
                            crosshair: true
                        },
                        yAxis: {
                            title: {
                              text: 'Record Count'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} Times</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false
                                }
                            }
                        },
                        series: [{
                            name: 'Offerings',
                            data: angular.copy($scope.rootObj.primSecOffByCountryData)
                            }
                        ],
                        credits: {
                            enabled: false
                        },
                    });
                    $scope.$log.info('topPrimSecOffByCountry::::'+JSON.stringify(topPrimSecOffByCountry));
                }

                $scope.sortObject = function(obj){
                    var arr = [];
                    for (var prop in obj) {
                        if (obj.hasOwnProperty(prop)) {
                            arr.push({
                                'key': prop,
                                'value': obj[prop]
                            });
                        }
                    }
                    arr.sort(function(a, b) { return b.value - a.value; });
                    //arr.sort(function(a, b) { a.value.toLowerCase().localeCompare(b.value.toLowerCase()); }); //use this to sort as strings
                    return arr; // returns array
                }
                //Added by C.P.Pandey under ER-2994 end

                $scope.loadRequestTopUses = function(topUsesData)
                {
                    $scope.rootObj.tpaReqByTopUsesData = [];
                    $scope.rootObj.tpaReqByTopUsesDataCategory = [];
                    $.each(topUsesData, function(k, v){
                        $scope.rootObj.tpaReqByTopUsesData.push(v.Use_Count);
                        $scope.rootObj.tpaReqByTopUsesDataCategory.push($scope.rootObj.decodeHtmlCode(v.Name));
                    });
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Uses (All Countries)';
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Uses (All countries excluding United States)';
                    else
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Uses (' + $scope.rootObj.selectedLocation + ')';
                    $('#dbTopUses').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.tpaReqByTopUsesDataCategory),
                            crosshair: true
                        },
                        yAxis: {
                            title: {
                              text: 'Use Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} TPA Records</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false
                                }
                            }
                        },
                        series: [{
                            name: 'TPA Uses',
                            data: angular.copy($scope.rootObj.tpaReqByTopUsesData)
                            }
                        ],
                        credits: {
                            enabled: false
                        },
                    });
                }

                $scope.loadRequestTopOfferings = function(topOfferingsData, topSecOfferingsData)
                {
                    $scope.rootObj.tpaReqByTopOfferingsData = [];
                    $scope.rootObj.tpaReqByTopOfferingsDataCategory = [];
                    $scope.rootObj.tmpUseOffDataJson = {};
                    $scope.rootObj.tpaReqByTopSecOfferingsData = [];
                    $scope.rootObj.tmpSecOffDataJson = {};
                    $scope.rootObj.tmpSecOffData = [];
                    $scope.rootObj.tmpSecOffExists = false;console.log('topOfferingsData' + JSON.stringify(topOfferingsData));
                    console.log('topSecOfferingsData:::' + JSON.stringify(topSecOfferingsData));
                    $.each(topOfferingsData, function(k, v){
                        $scope.rootObj.tmpUseOffDataJson = {};
                        $scope.rootObj.tmpUseOffDataJson.y = v.Offering_Count;
                        $scope.rootObj.tmpUseOffDataJson.name = $scope.rootObj.decodeHtmlCode(v.Asset_NametText__c);
                        $scope.rootObj.tmpIsSecOffAdded = false;
                        $scope.rootObj.tmpUseOffDataJson.drilldown = null;

                        $.each(topSecOfferingsData, function(secOffKey, secOffValue){
                            if($scope.rootObj.decodeHtmlCode(secOffValue.Asset_NametText__c.toLowerCase()) == $scope.rootObj.decodeHtmlCode(v.Asset_NametText__c.toLowerCase()))
                            {
                                $scope.rootObj.tmpIsSecOffAdded = false;
                                $scope.rootObj.tmpUseOffDataJson.drilldown = angular.copy($scope.rootObj.decodeHtmlCode(v.Asset_NametText__c.toLowerCase()));
                                if($scope.rootObj.tmpUseOffDataJson.name.indexOf('*') == -1) //Added by C.P.Pandey under CR-8849
                                    $scope.rootObj.tmpUseOffDataJson.name += "*"; //Added by C.P.Pandey under CR-8849
                                $.each($scope.rootObj.tpaReqByTopSecOfferingsData, function(secOffAddedKey, secOffAddedValue){
                                    if($scope.rootObj.decodeHtmlCode(secOffAddedValue.id.toLowerCase()) == $scope.rootObj.decodeHtmlCode(secOffValue.Asset_NametText__c.toLowerCase()))
                                    {
                                        $scope.rootObj.tmpIsSecOffAdded = true;
                                        $scope.rootObj.tmpSecOffData = [];
                                        $scope.rootObj.tmpSecOffData.push($scope.rootObj.decodeHtmlCode(secOffValue.Secondary_Asset_Name__c));
                                        $scope.rootObj.tmpSecOffData.push(secOffValue.Sec_Offering_Count);
                                        secOffAddedValue.data.push(angular.copy($scope.rootObj.tmpSecOffData));
                                        return false;
                                    }
                                });
                                if(!$scope.rootObj.tmpIsSecOffAdded)
                                {
                                    $scope.rootObj.tmpSecOffDataJson = {};
                                    $scope.rootObj.tmpSecOffDataJson.name = 'TPA Secondary Offerings (' + $scope.rootObj.decodeHtmlCode(secOffValue.Asset_NametText__c) + ')';
                                    $scope.rootObj.tmpSecOffDataJson.id = $scope.rootObj.decodeHtmlCode(secOffValue.Asset_NametText__c.toLowerCase());
                                    $scope.rootObj.tmpSecOffDataJson.data = [];
                                    $scope.rootObj.tmpSecOffData = [];
                                    $scope.rootObj.tmpSecOffData.push($scope.rootObj.decodeHtmlCode(secOffValue.Secondary_Asset_Name__c));
                                    $scope.rootObj.tmpSecOffData.push(secOffValue.Sec_Offering_Count);
                                    $scope.rootObj.tmpSecOffDataJson.data.push(angular.copy($scope.rootObj.tmpSecOffData));
                                    $scope.rootObj.tpaReqByTopSecOfferingsData.push(angular.copy($scope.rootObj.tmpSecOffDataJson));
                                }
                            }
                        });

                        $scope.rootObj.tpaReqByTopOfferingsData.push($scope.rootObj.tmpUseOffDataJson);
                        $scope.rootObj.tpaReqByTopOfferingsDataCategory.push($scope.rootObj.decodeHtmlCode(v.Asset_NametText__c.toLowerCase()));

                    });

                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Primary Offerings (All Countries)';
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Primary Offerings (All countries excluding United States)';
                    else
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Primary Offerings (' + $scope.rootObj.selectedLocation + ')';
                    $('#dbTopOfferings').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            type: 'category'
                        },
                        yAxis: {
                            title: {
                              text: 'Primary Offering Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} TPA Records</b></td></tr>',
                            footerFormat: '</table>',
                            formatter:function(){
                                if(this.points[0].point.drilldown == null)
                                    return '<span style="font-size:10px">' + this.points[0].key + '</span><table>' + '<tr><td style="color:' + this.points[0].series.color + ';padding:0">' + this.points[0].series.name + ': </td>' + '<td style="padding:0"><b>' + this.points[0].point.y + ' TPA Records</b></td></tr>' + '</table>';
                                else
                                    return '<span style="font-size:10px">' + this.points[0].key + '</span><table>' + '<tr><td style="color:' + this.points[0].series.color + ';padding:0">' + this.points[0].series.name + ': </td>' + '<td style="padding:0"><b>' + this.points[0].point.y + '* TPA Records</b></td></tr>' + '</table>'; //Modified by C.P.Pandey under CR-8849
                            },
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false,
                                    formatter: function() {
                                        if (this.point.drilldown == null) {
                                          return this.y;
                                        } else {
                                          return this.y + '*'; //Modified by C.P.Pandey under CR-8849
                                        }
                                    }
                                }
                            }
                        },
                        series: [{
                            name: 'TPA Primary Offerings (* Click for Secondary Offerings Details)',
                            colorByPoint: true,
                            data: angular.copy($scope.rootObj.tpaReqByTopOfferingsData)
                        }],
                        drilldown: {
                            series: angular.copy($scope.rootObj.tpaReqByTopSecOfferingsData)
                        },
                        credits: {
                            enabled: false
                        },
                    });
                }

                $scope.loadRequestTopVendorsClients = function(topVendorsData, topSmallClientsData, topLargeClientsData)
                {
                    $scope.rootObj.tpaReqByTopVendorsData = [];
                    $scope.rootObj.tpaReqByTopVendorsDataCategory = [];
                    $.each(topVendorsData, function(k, v){
                        $scope.rootObj.tpaReqByTopVendorsData.push(v.TPA_Count);
                        $scope.rootObj.tpaReqByTopVendorsDataCategory.push($scope.rootObj.decodeHtmlCode(v.Name));
                    });
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Vendors (All Countries)';
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Vendors (All countries excluding United States)';
                    else
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Vendors (' + $scope.rootObj.selectedLocation + ')';
                    $('#dbTopVendors').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.tpaReqByTopVendorsDataCategory),
                            crosshair: true
                        },
                        yAxis: {
                            title: {
                              text: 'TPA Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} TPA Records</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false
                                }
                            }
                        },
                        series: [{
                            name: 'TPA Vendors',
                            data: angular.copy($scope.rootObj.tpaReqByTopVendorsData)
                            }
                        ],
                        credits: {
                            enabled: false
                        },
                    });


                    $scope.rootObj.tpaReqByTopClientsData = [];
                    $scope.rootObj.tpaReqByTopClientsDataCategory = [];
                    $.each(topSmallClientsData, function(k, v){
                        $scope.rootObj.tpaReqByTopClientsData.push(v.TPA_Count);
                        $scope.rootObj.tpaReqByTopClientsDataCategory.push($scope.rootObj.decodeHtmlCode(v.Name));
                    });
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Small Clients - no parent record (All Countries)'; //Modified by C.P.Pandey under CR-8734
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Small Clients - no parent record (All countries excluding United States)'; //Modified by C.P.Pandey under CR-8734
                    else
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Small Clients - no parent record (' + $scope.rootObj.selectedLocation + ')'; //Modified by C.P.Pandey under CR-8734
                    $('#dbTopSmallClients').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.tpaReqByTopClientsDataCategory),
                            crosshair: true
                        },
                        yAxis: {
                            title: {
                              text: 'TPA Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} TPA Records</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false
                                }
                            }
                        },
                        series: [{
                            name: 'TPA Clients',
                            data: angular.copy($scope.rootObj.tpaReqByTopClientsData)
                            }
                        ],
                        credits: {
                            enabled: false
                        },
                    });


                    $scope.rootObj.tpaReqByTopClientsData = [];
                    $scope.rootObj.tpaReqByTopClientsDataCategory = [];
                    $.each(topLargeClientsData, function(k, v){
                        $scope.rootObj.tpaReqByTopClientsData.push(v.TPA_Count);
                        $scope.rootObj.tpaReqByTopClientsDataCategory.push($scope.rootObj.decodeHtmlCode(v.Name));
                    });
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Large Clients - aggregated to parent level (All Countries)'; //Modified by C.P.Pandey under CR-8734
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Large Clients - aggregated to parent level (All countries excluding United States)'; //Modified by C.P.Pandey under CR-8734
                    else
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Large Clients - aggregated to parent level (' + $scope.rootObj.selectedLocation + ')'; //Modified by C.P.Pandey under CR-8734
                    $('#dbTopLargeClients').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.tpaReqByTopClientsDataCategory),
                            crosshair: true
                        },
                        yAxis: {
                            title: {
                              text: 'TPA Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} TPA Records</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false
                                }
                            }
                        },
                        series: [{
                            name: 'TPA Clients',
                            data: angular.copy($scope.rootObj.tpaReqByTopClientsData)
                            }
                        ],
                        credits: {
                            enabled: false
                        },
                    });
                }

                $scope.loadTpaRequestByManualAuto = function(tpRequestsByManualAuto)
                {
                    $scope.rootObj.tmpDataToReset = '';
                    $scope.rootObj.tmpFlag = false;
                    $scope.rootObj.tmpJsonObj = {};
                    $scope.rootObj.tmpArray = [];
                    $.each(tpRequestsByManualAuto, function(k, v){
                        $scope.rootObj.tmpDataToReset = v.Year + '-' + v.Month + '-' + (!v.Manual_Auto).toString();
                        $scope.rootObj.tmpFlag = false;
                        $.each(tpRequestsByManualAuto, function(k1, v1){
                            if((v1.Year + '-' + v1.Month + '-' + v1.Manual_Auto.toString()) == $scope.rootObj.tmpDataToReset)
                                $scope.rootObj.tmpFlag = true;
                        });
                        if(!$scope.rootObj.tmpFlag)
                        {
                            $scope.rootObj.tmpJsonObj = {};
                            $scope.rootObj.tmpJsonObj.TPA_Count = 0;
                            $scope.rootObj.tmpJsonObj.Year = v.Year;
                            $scope.rootObj.tmpJsonObj.Month = v.Month;
                            $scope.rootObj.tmpJsonObj.Manual_Auto = !v.Manual_Auto;
                            $scope.rootObj.tmpArray.push(angular.copy($scope.rootObj.tmpJsonObj));
                        }
                    });
                    var indexCounter = 0;
                    $.each($scope.rootObj.tmpArray, function(k, v){
                        indexCounter = 0;
                        $.each(tpRequestsByManualAuto, function(k1, v1){
                            if(v.Year == v1.Year && v.Month == v1.Month)
                            {
                                if(v1.Manual_Auto)
                                    tpRequestsByManualAuto.splice(indexCounter, 0, angular.copy(v));
                                else
                                    tpRequestsByManualAuto.splice(indexCounter + 1, 0, angular.copy(v));

                                return false;
                            }
                            indexCounter++;
                        });
                    });
                    $scope.rootObj.tpaReqByManualAutoChartData = [];
                    $scope.rootObj.tpaReqByManualAutoChartDataCategory = [];
                    $scope.rootObj.tmpJsonObj = {};
                    $scope.rootObj.tmpArray = [];
                    $scope.rootObj.tmpFlag = false;
                    $.each(tpRequestsByManualAuto, function(k, v){
                        $scope.rootObj.tmpFlag = false;
                        $.each($scope.rootObj.tpaReqByManualAutoChartData, function(dataKey, dataValue){
                            if(dataValue.name == v.Manual_Auto.toString())
                            {
                                dataValue.data.push(v.TPA_Count);
                                if($.inArray(($scope.rootObj.monthMap[v.Month] + ' ' + v.Year), $scope.rootObj.tpaReqByManualAutoChartDataCategory) == -1)
                                {
                                    $scope.rootObj.tpaReqByManualAutoChartDataCategory.push($scope.rootObj.monthMap[v.Month] + ' ' + v.Year);
                                }
                                $scope.rootObj.tmpFlag = true;
                            }
                        });
                        if(!$scope.rootObj.tmpFlag)
                        {
                            $scope.rootObj.tmpJsonObj = {};
                            $scope.rootObj.tmpJsonObj.name = v.Manual_Auto.toString();
                            $scope.rootObj.tmpJsonObj.data = [];
                            $scope.rootObj.tmpJsonObj.data.push(v.TPA_Count);
                            $scope.rootObj.tpaReqByManualAutoChartData.push(angular.copy($scope.rootObj.tmpJsonObj));
                            if($.inArray(($scope.rootObj.monthMap[v.Month] + ' ' + v.Year), $scope.rootObj.tpaReqByManualAutoChartDataCategory) == -1)
                            {
                                $scope.rootObj.tpaReqByManualAutoChartDataCategory.push($scope.rootObj.monthMap[v.Month] + ' ' + v.Year);
                            }
                        }
                    });
                    //Modified by C.P.Pandey under CR-8734 start
                    $.each($scope.rootObj.tpaReqByManualAutoChartData, function(k,v){
                        if(v.name == 'true')
                        {
                            v.name = 'Manually Approved';
                             v.color = '#333333'; //Modified by C.P.Pndey under CR-8775
                        }
                        else if(v.name == 'false')
                        {
                            v.name = 'Auto Approved';
                            v.color = '#7CB5EC'; //Modified by C.P.Pndey under CR-8775
                        }
                    });
                    //Modified by C.P.Pandey under CR-8734 end
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Requests by Month in Manual/Auto (All Countries)';
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Requests by Month in Manual/Auto (All countries excluding United States)';
                    else
                        $scope.rootObj.chartTitle = 'TPA Requests by Month in Manual/Auto (' + $scope.rootObj.selectedLocation + ')';
                    $('#dbRequestsByManualAuto').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.tpaReqByManualAutoChartDataCategory),
                            crosshair: true
                        },
                        yAxis: {
                            title: {
                              text: 'TPA Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} TPA Records</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false
                                }
                            }
                        },
                        series: angular.copy($scope.rootObj.tpaReqByManualAutoChartData),
                        credits: {
                            enabled: false
                        },
                    });
                }

                $scope.loadTpaRequestByMonths = function(tpRequestsByMonths)
                {
                    //Modified by C.P.Pandey under ER-2872 start
                    $scope.rootObj.tpaReqByMonthChartData = [];
                    $scope.rootObj.tpaReqByMonthChartActualData = [];
                    $scope.rootObj.tpaReqByMonthChartForecastedData = [];
                    $scope.rootObj.tpaReqByMonthChartDataCategory = [];
                    $.each(tpRequestsByMonths, function(k, v){
                        $scope.rootObj.tpaReqByMonthChartData.push(v.TPA_Count);
                        $scope.rootObj.tpaReqByMonthChartForecastedData.push(angular.copy(parseInt($scope.rootObj.forecastedNumber)));
                        $scope.rootObj.tpaReqByMonthChartDataCategory.push($scope.rootObj.monthMap[v.Month] + ' ' + v.Year);
                    });
                    $scope.rootObj.tpaReqByMonthChartDataJson = {};
                    $scope.rootObj.tpaReqByMonthChartDataJson['name'] = $scope.rootObj.selectedLocation;
                    $scope.rootObj.tpaReqByMonthChartDataJson['data'] = angular.copy($scope.rootObj.tpaReqByMonthChartData);
                    $scope.rootObj.tpaReqByMonthChartDataJson['color'] = '#7CB5EC';
                    $scope.rootObj.tpaReqByMonthChartActualData.push(angular.copy($scope.rootObj.tpaReqByMonthChartDataJson));
                    if($scope.rootObj.selectedLocation.indexOf('BU - ') != -1)
                    {
                        $scope.rootObj.tpaReqByMonthChartDataJson = {};
                        $scope.rootObj.tpaReqByMonthChartDataJson['name'] = 'Forecasted Compliance level';
                        $scope.rootObj.tpaReqByMonthChartDataJson['data'] = angular.copy($scope.rootObj.tpaReqByMonthChartForecastedData);
                        $scope.rootObj.tpaReqByMonthChartDataJson['color'] = '#F7A35C';
                        $scope.rootObj.tpaReqByMonthChartActualData.push(angular.copy($scope.rootObj.tpaReqByMonthChartDataJson));
                    }
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Requests by Month (All Countries)';
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Requests by Month (All countries excluding United States)';
                    else
                        $scope.rootObj.chartTitle = 'TPA Requests by Month (' + $scope.rootObj.selectedLocation + ')';
                    //Modified by C.P.Pandey under ER-2872 end
                    $('#dbRequestsByMonth').highcharts({
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.tpaReqByMonthChartDataCategory)
                        },
                        yAxis: {
                            title: {
                              text: 'TPA Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            valueSuffix: ' TPA Records'
                        },
                        plotOptions: {
                            line: {
                                dataLabels: {
                                    enabled: true
                                }
                            }
                        },
                        series: $scope.rootObj.tpaReqByMonthChartActualData,//Modified by C.P.Pandey under ER-2872
                        credits: {
                            enabled: false
                        },
                    });
                    $scope.$log.info(JSON.stringify($scope.rootObj.tpaReqByMonthChartDataCategory));
                }

                //Added by C.P.Pandey under ER-2942 start
                $scope.loadRequestByTopCountries = function(requestByTopCountries)
                {
                    $scope.rootObj.tpaReqByTopCountriesData = [];
                    $scope.rootObj.tpaReqByTopCountriesDataCategory = [];
                    if(requestByTopCountries == null)
                        return false;
                    $scope.rootObj.requestByTopCountriesTemp = {};
                    $scope.rootObj.requestByTopCountriesFinal = [];
                    $scope.$log.info('requestByTopCountries:::'+JSON.stringify(requestByTopCountries));
                    $.each(requestByTopCountries, function(k, v){
                        var contactTerritory = $scope.rootObj.decodeHtmlCode(v.Client_Contact_Territory__c);
                        if($scope.rootObj.mapCountryCodesWithAllValues[contactTerritory.toLowerCase()] != null) {
                            v.Client_Contact_Territory__c = $scope.rootObj.mapCountryCodesWithAllValues[contactTerritory.toLowerCase()].split(';')[0];
                            contactTerritory = v.Client_Contact_Territory__c;
                        }$scope.$log.info('item:::'+contactTerritory+':::'+$scope.rootObj.requestByTopCountriesTemp[contactTerritory]);
                        if($scope.rootObj.requestByTopCountriesTemp[contactTerritory] == null) {
                            $scope.rootObj.requestByTopCountriesTemp[contactTerritory] = v;
                        }
                        else {
                            $scope.rootObj.requestByTopCountriesTemp[contactTerritory].TPA_Count += v.TPA_Count;
                        }
                    });
                    $.each($scope.rootObj.requestByTopCountriesTemp, function(k, v){
                        $scope.rootObj.requestByTopCountriesFinal.push(v);
                    });
                    $scope.rootObj.sortResults($scope.rootObj.requestByTopCountriesFinal, 'TPA_Count', false);
                    $scope.$log.info('requestByTopCountries:::'+JSON.stringify(requestByTopCountries));
                    $scope.$log.info('$scope.rootObj.requestByTopCountriesTemp:::'+JSON.stringify($scope.rootObj.requestByTopCountriesTemp));
                    $scope.$log.info('requestByTopCountriesFinal:::'+JSON.stringify($scope.rootObj.requestByTopCountriesFinal));
                    $.each($scope.rootObj.requestByTopCountriesFinal.slice(0, $scope.rootObj.reportSettings['Top N Records in DB']), function(k, v){
                        $scope.rootObj.tpaReqByTopCountriesData.push(v.TPA_Count);
                        $scope.rootObj.tpaReqByTopCountriesDataCategory.push($scope.rootObj.decodeHtmlCode(v.Client_Contact_Territory__c));
                    });
                    if($scope.rootObj.selectedLocation == 'All')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Countries (All Countries)';
                    else if($scope.rootObj.selectedLocation == 'All excluding US')
                        $scope.rootObj.chartTitle = 'TPA Top ' + $scope.rootObj.reportSettings['Top N Records in DB'] + ' Countries (All countries excluding United States)';
                    $('#dbTopCountries').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: angular.copy($scope.rootObj.chartTitle),
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },
                        xAxis: {
                            categories: angular.copy($scope.rootObj.tpaReqByTopCountriesDataCategory),
                            crosshair: true
                        },
                        yAxis: {
                            title: {
                              text: 'TPA Records'
                            },
                            plotLines: [{
                              value: 0,
                              width: 1,
                              color: '#808080'
                            }],
                            allowDecimals: false
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y} TPA Records</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    inside: false
                                }
                            }
                        },
                        series: [{
                            name: 'Countries',
                            data: angular.copy($scope.rootObj.tpaReqByTopCountriesData)
                            }
                        ],
                        credits: {
                            enabled: false
                        },
                    });
                }
                //Added by C.P.Pandey under ER-2942 end


                $scope.rootObj.loadManualReviewData = function(loadType, lastRecordId)
                {
                    callServerMethods($scope.rootObj.getReportDashboardValuesManualReview, JSON.stringify($scope.rootObj.inputObj), lastRecordId).then(function(result){
                        if(result != null)
                            $.merge($scope.rootObj.resultArray, angular.copy(result.manualReviewDbResult));

                        if(result.manualReviewDbResult.length == $scope.rootObj.RequestChunkSize)
                        {
                            $scope.rootObj.loadManualReviewData(loadType, result.manualReviewDbResult[result.manualReviewDbResult.length - 1].Id);
                            return false;
                        }

                        $scope.rootObj.remoteCallCounter++;
                        $scope.rootObj.chartDataObject = {};
                        $scope.rootObj.chartDataObjArr = [];
                        $scope.rootObj.chartData = [];
                        $scope.rootObj.chartDataCategory = [];
                        $.each($scope.rootObj.resultArray, function(k, v)
                        {
                            //TPA Requests By Manual Review Reasons Dashboard start
                            if(loadType == 'RefreshAll')
                            {
                                if(v.Manual_Trigger_Reasons__c != null && v.Requires_Manual_Review__c == true)
                                    $.each($scope.rootObj.decodeHtmlCode(v.Manual_Trigger_Reasons__c).split(';'), function(mReviewKey, mReviewVal){
                                        if(mReviewVal.trim().length > 0 && mReviewVal != 'USE Offering Combination needs approval') //Modified by C.P.Pandey under Issue-10070
                                        {
                                            if($scope.rootObj.chartDataObject[mReviewVal] == null)
                                                $scope.rootObj.chartDataObject[mReviewVal] = 1;
                                            else
                                                $scope.rootObj.chartDataObject[mReviewVal]++;
                                        }
                                    });
                            }
                            //TPA Requests By Manual Review Reasons Dashboard end
                        });


                        //TPA Requests By Manual Review Reasons Dashboard start
                        if(loadType == 'RefreshAll')
                        {
                            $.each($scope.rootObj.chartDataObject, function(k, v){
                                $scope.rootObj.chartDataObjArr.push({'key':k, 'value':v});
                            });

                            $scope.rootObj.chartDataObjArr.sort(function(a, b) {
                                return parseFloat(b.value) - parseFloat(a.value);
                            });

                            $.each($scope.rootObj.chartDataObjArr, function(k, v){
                                $scope.rootObj.chartDataCategory.push(v['key']);
                                $scope.rootObj.chartData.push(v['value']);

                            });

                            $scope.$log.info(JSON.stringify($scope.rootObj.chartData));

                            if($scope.rootObj.selectedLocation == 'All')
                                $scope.rootObj.chartTitle = 'TPA Requests by Manual Trigger (All Countries)';
                            else if($scope.rootObj.selectedLocation == 'All excluding US')
                                $scope.rootObj.chartTitle = 'TPA Requests by Manual Trigger (All countries excluding United States)';
                            else
                                $scope.rootObj.chartTitle = 'TPA Requests by Manual Trigger (' + $scope.rootObj.selectedLocation + ')';
                            $('#dbManualTrigger').highcharts({
                                title: {
                                    text: angular.copy($scope.rootObj.chartTitle),
                                    x: -20 //center
                                },
                                subtitle: {
                                    text: '',
                                    x: -20
                                },
                                xAxis: {
                                    categories: angular.copy($scope.rootObj.chartDataCategory)
                                },
                                yAxis: {
                                    title: {
                                      text: 'TPA Records'
                                    },
                                    plotLines: [{
                                      value: 0,
                                      width: 1,
                                      color: '#808080'
                                    }],
                                    allowDecimals: false
                                },
                                tooltip: {
                                    valueSuffix: ' TPA Records'
                                },
                                plotOptions: {
                                    line: {
                                        dataLabels: {
                                            enabled: true
                                        }
                                    }
                                },
                                series: [{
                                    name: 'Manual Trigger Reasons',
                                    data: angular.copy($scope.rootObj.chartData)
                                    }
                                ],
                                credits: {
                                    enabled: false
                                },
                            });
                        }
                        //TPA Requests By Manual Review Reasons Dashboard end

                        if($scope.rootObj.remoteCallCounter >= 8) //Modified by C.P.Pandey under ER-2994
                            hideLoading();
                    });
                }

                $scope.setExportButtons = function()
                {
                    $scope.rootObj.exportButtons = Highcharts.getOptions().exporting.buttons.contextButton.menuItems.splice(2);
                    var filteredExportButtons = [];
                    $.each($scope.rootObj.exportButtons, function(k, v){
                        if(v != null && v.textKey == 'downloadXLS')
                            filteredExportButtons.push(v);
                    });
                    Highcharts.getOptions().exporting.buttons.contextButton.menuItems = filteredExportButtons;
                }
                //result = result.replace(/quot;/g, '~~').replace(/&~~/g,'"');

                $scope.setExportButtons();

               //Added by C.P.Pandey under ER-2872 start
                $scope.popupAlert = function(msg, truePart)
                {
                    popup(msg, {'animate':true},
                    function(r)
                    {
                        if(r && truePart != null)
                            truePart();
                    });
                }

                $scope.applyChanges = function()
                {
                    if ($scope.$root.$$phase != '$apply' && $scope.$root.$$phase != '$digest')
                        $scope.$apply();
                }
                //Added by C.P.Pandey under ER-2872 end
            }]);
            <!-- Page Controller End -->

            <!-- Page Directives Start -->
            myapp.directive('numbersOnly', function()
            {
                return {
                    require: 'ngModel',
                    link: function(scope, element, attrs, modelCtrl)
                    {
                        modelCtrl.$parsers.push(function (inputValue)
                        {
                            // this next if is necessary for when using ng-required on your input.
                            // In such cases, when a letter is typed first, this parser will be called
                            // again, and the 2nd time, the value will be undefined
                            if (inputValue == undefined) return ''
                            var transformedInput = inputValue.replace(/[^0-9]/g, '');
                            if (transformedInput != inputValue)
                            {
                                modelCtrl.$setViewValue(transformedInput);
                                modelCtrl.$render();
                            }

                           return transformedInput;
                        });
                    }
                };
            });
            <!-- Page Directives End -->

            <!-- Page Factory Start -->
            myapp.factory('callServerMethods', ['$q', '$rootScope', function($q, $rootScope) {

                    return function(funcToCall, serializeData, lastRecordId) {
                        var deferred = $q.defer();

                        Visualforce.remoting.Manager.invokeAction(
                            funcToCall,
                            serializeData,
                            lastRecordId,
                            function(result, event) {
                                $rootScope.$apply(function() {
                                  if (event.status) {
                                    deferred.resolve(result);
                                  } else {
                                    deferred.reject(event);
                                  }
                                })
                            },
                            { buffer: true, escape: true, timeout: 120000 }
                        );

                        return deferred.promise;
                    }

                }]);
            <!-- Page Factory End -->

            //Added by C.P.Pandey under ER-2872 start
            $(document).ready(function(){
                $('#ddReqLocations').select2({placeholder: "Select Country Location", width: '50%', closeOnSelect:false});
                // Added By Neha Under CR-11457 Starts
                $('#ddReqStatuses').select2({placeholder: "Select Request Status (Leave blank for all statuses)", width: '50%', closeOnSelect:false});
                $(".datepicker").datepicker({showOn: "button", buttonImage: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAALdQTFRFMzMyAAAAMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMy////j2KaIAAAADt0Uk5TAAAEgzuRhtCH6aaF09KLFnt66xoGAwLsBw8Mfnj3GDiBNGyCNW19d/YOHw118hlDmj8UAfAuEBuv9eqZZ685AAAAAWJLR0Q8p2phzwAAAAlwSFlzAAAASAAAAEgARslrPgAAALxJREFUGNM9jIcOgkAQBUcseLZDVzwrKtgL9nr//18qqC+ZvGSy+8Ahm+WHA7l8wXWLxZRCPocqlSvVWq36oVIuKZTGq0P9g4dWNISm33J832n5TaSB0bQ7bbrdpLTBCD3bZzCgb3vIWwQMR2PCkPFoSJCKaMJ0yiRKhTCzcxYL5naWvGiWqzUirFfL76hnN2y3bKyXXMTs9geiiMN+R2xQR06Zb04cFefLNb4FWkQHt/h6OXN/PM0/z8f9BT8gFJGascv+AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTA4LTA1VDA1OjMwOjQ2LTA0OjAwb0yWxAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0wOC0wNVQwNTozMDo0Ni0wNDowMB4RLngAAAAASUVORK5CYII=", buttonImageOnly: true});
                $(".datepicker").datepicker("option","changeYear", true);
                $(".datepicker").datepicker("option","changeMonth", true);
                var fromdateObject = new Date(2015,5,1);
                var toDateObject = new Date();
                $("#fromDate").datepicker("option","minDate", fromdateObject);
                $("#fromDate").datepicker("option","maxDate", toDateObject);
                $("#toDate").datepicker("option","minDate", fromdateObject);
                $("#toDate").datepicker("option","maxDate", toDateObject);
                $("#fromDate").datepicker("setDate", fromdateObject);
                $("#toDate").datepicker("setDate", toDateObject);
                $('img.ui-datepicker-trigger').prop({title: 'Click to open calendar', alt: 'Click to open calendar'});
                $(".datepicker").datepicker( "option", "dateFormat", 'mm/dd/yy' );
                var test = {!RequestStatuses};
                //$('#ddReqStatuses').append($("<option></option>").attr("ALL","ALL").text("ALL"));
                $.each(test,function(k,v){
                    if(k != null )
                        requestStatusesTemp.push(v);
                    $('#ddReqStatuses').append($("<option></option>").attr("value",k).text(v));

                });
                //Added By Neha Under CR-11610  Starts
                // $('#ddCategory').select2({placeholder: "Select Category", width: '50%', closeOnSelect:false});
                $('#ddCategory').select2({placeholder: "Select Category (Leave blank for all Category)", width: '50%', closeOnSelect:false});
                var category = {!category};
                $.each(category,function(k,v){
                    if(k != null )
                      $('#ddCategory').append($("<option></option>").attr("value",k).text(v));

                });
                //Added By Neha Under CR-11610  Ends

                $( "#fromDate" ).change(function() {
                  var dateObject = $("#fromDate").datepicker('getDate');
                    var maxDate = new Date(dateObject);
                    if(dateObject  != null)
                      $("#toDate").datepicker("option","minDate", dateObject);
                   });
                   $( "#toDate" ).change(function() {
                     var dateObject = $("#toDate").datepicker('getDate');
                       if(dateObject  != null)
                         $("#fromDate").datepicker("option","maxDate", dateObject);
                      });
                // Added By Neha Under CR-11457 Ends
            });

            $("body").on('DOMSubtreeModified', "span.select2-chosen", function () {
                var chosenValue = $(this).html();
                var angularScope = angular.element($('#controllerPage')).scope();
                if(chosenValue != null && chosenValue != '' && chosenValue.indexOf('BU - ') != -1)
                    angularScope.rootObj.isBUSelected = true;
                else
                    angularScope.rootObj.isBUSelected = false;

                //Added by C.P.Pandey under ER-2942 start
                if(chosenValue != null && chosenValue != '' && (chosenValue == 'All' || chosenValue == 'All excluding US'))
                    angularScope.rootObj.isAllTypeSelected = true;
                else
                    angularScope.rootObj.isAllTypeSelected = false;
                //Added by C.P.Pandey under ER-2942 end

                angularScope.rootObj.forecastedNumber = angularScope.rootObj.reportSettings[angularScope.rootObj.buForecastNumberMap[$('#ddReqLocations').select2('data').text]];

                angularScope.applyChanges();
            });
            //Added by C.P.Pandey under ER-2872 end
        </script>
        <!-- ****** AngularJS script End ****** -->

        <style type="text/css">
            .select2-results li
            {
                margin-left:0 !important;
            }
            .jqx-fill-state-hover-office{
              background-color:#e3f3ff !important;
              border-color:#aaccf6 !important;
            }

            .jqx-icon-close-office{display:none !important;}
            .jqx-menu-vertical-office{width:258px !important;}
            .ITPRClass #columntablejqxgrid, .ITPRClass .jqx-widget-header-office{height:38px !important;}
            .ui-datepicker-trigger { position: relative; top: 6px; left: 2px;}
        </style>
    </head>
    <body style="background-image: url(/_slds/images/themes/lightning_blue/lightning_blue_background.png),linear-gradient(to top, rgba(160, 180, 206, 0.0) 0, rgba(160, 180, 206, 1.0)); background-repeat: no-repeat; min-height: 100vh">
        <c:VFC_TPA_LoadingImage />
        <div id="ng-app" ng-app="TpaReportDashboard" class="slds-m-around_small" >
            <div class="slds-page-header" role="banner" style="margin-bottom: .5em; border-radius: 4px;">
                <div class="slds-grid">
                    <div class="slds-col slds-has-flexi-truncate">
                        <div class="slds-media slds-no-space slds-grow">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate slds-align-middle slds-p-around_x-small">TPA Custom Report &amp; Dashboard</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="controllerPage" ng-controller="controllerPage">
                <apex:pageBlock >
                    <apex:pageBlockSection columns="1" title="Advance Filters" collapsible="false" html-style="background-color:white;">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Location:" />
                            <apex:outputPanel >
                                <select id="ddReqLocations" ng-disabled="rootObj.requestLocations.length == 0">
                                    <optgroup ng-repeat="(k,v) in rootObj.requestLocationsData" label="{{v.text}}">
                                        <option ng-repeat="(k1,v1) in v.children" value="v1.text">{{v1.text}}</option>
                                    </optgroup>
                                </select>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Status:" />
                            <apex:outputPanel >
                                <select id="ddReqStatuses" multiple="multiple">
                                </select>
                                <label style="font-weight:bold;">(Leave blank for all Statuses)</label>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>

                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Category:" />
                            <apex:outputPanel >
                                <select id="ddCategory" multiple="multiple">
                                </select>
                                <label style="font-weight:bold;">(Leave blank for all Category)</label>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>

                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="From Date" />
                            <apex:outputPanel >
                                <table>
                                    <tr>
                                        <td>
                                            <input type="text" id="fromDate" readonly="readonly" class="datepicker"/>
                                        </td>
                                        <td style="line-height: 150%;">
                                            <label style="font-weight:bold;">&nbsp;&nbsp;(Requests From 06-01-2015)</label>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="To Date" />
                            <apex:outputPanel >
                                <table>
                                    <tr>
                                        <td>
                                            <input type="text" id="toDate" readonly="readonly" class="datepicker"/>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem html-ng-show="rootObj.isBUSelected">
                            <apex:outputLabel value="Forecasted Compliance Level Number:" />
                            <apex:outputPanel >
                                <table>
                                    <tr>
                                        <td>
                                            <label>{{rootObj.forecastedNumber}}</label>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <label>&nbsp;</label>
                            <apex:outputPanel >
                                <button class="slds-button slds-button_outline-brand" ng-click="rootObj.remoteCallCounter = 0;rootObj.loadData('RefreshAll', null)" onclick="return false;">Reload All</button>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                </apex:pageBlock>
                <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Requests by Manual Trigger') >= 0 || rootObj.showAllCategory">
                            <div class="highcharts-container" id="dbManualTrigger"></div>
                    <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                        <div ng-show="rootObj.inputObj.lstCategory == 'TPA Requests by Month' || rootObj.inputObj.lstCategory.indexOf('TPA Requests by Month;') >= 0 || rootObj.showAllCategory">
                            <div class="highcharts-container" id="dbRequestsByMonth"></div>
                    <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                        <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Requests by Month in Manual/Auto') >= 0 || rootObj.showAllCategory">
                             <div class="highcharts-container" id="dbRequestsByManualAuto"></div>
                     <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                        <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Top ' + rootObj.reportSettings['Top N Records in DB'] + ' Vendors') >= 0 || rootObj.showAllCategory">
                            <div class="highcharts-container" id="dbTopVendors"></div>
                    <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                        <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Top ' + rootObj.reportSettings['Top N Records in DB'] + ' Small Clients - no parent record') >= 0 || rootObj.showAllCategory">
                            <div class="highcharts-container" id="dbTopSmallClients"></div>
                    <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                        <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Top ' + rootObj.reportSettings['Top N Records in DB'] + ' Large Clients - aggregated to parent level') >= 0 || rootObj.showAllCategory">
                            <div class="highcharts-container" id="dbTopLargeClients"></div>
                    <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Top ' + rootObj.reportSettings['Top N Records in DB'] + ' Uses') >= 0 || rootObj.showAllCategory">
                            <div class="highcharts-container" id="dbTopUses"></div>
                    <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                        <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Top ' + rootObj.reportSettings['Top N Records in DB'] + ' Primary Offerings') >= 0 || rootObj.showAllCategory">
                                <div class="highcharts-container" id="dbTopOfferings"></div>
                        <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" /> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
                <div ng-show="rootObj.inputObj.lstCategory.indexOf('TPA Top ' + rootObj.reportSettings['Top N Records in DB'] + ' Countries') >= 0 || rootObj.showAllCategory">
                    <div ng-show="rootObj.isAllTypeSelected" class="highcharts-container" id="dbTopCountries"></div><!-- Added by C.P.Pandey under ER-2942 -->
                    <hr style="margin:0px;margin-top:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2 && rootObj.isAllTypeSelected" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8 && rootObj.isAllTypeSelected" /><!-- Added by C.P.Pandey under ER-2942 --> <!-- Modified by C.P.Pandey under ER-2994 -->
                </div>
               <div ng-show="rootObj.showTop10Off || rootObj.showAllCategory ">
               <input style="margin:5px 5px 5px 2px;float:right;display:none;" type="button" id="showDashboard" value="Show Dashboard" role="button" class="jqx-rc-all jqx-button jqx-widget jqx-fill-state-normal" aria-disabled="false" ng-show="rootObj.remoteCallCounter >= 8 && !rootObj.showOffByCountriesDashboard" ng-click="rootObj.showOffByCountriesDashboard = !rootObj.showOffByCountriesDashboard;" />
               <input style="margin:5px 5px 5px 2px;float:right;display:none;" type="button" id="showReport" value="Show Report" role="button" class="jqx-rc-all jqx-button jqx-widget jqx-fill-state-normal" aria-disabled="false" ng-show="rootObj.remoteCallCounter >= 8 && rootObj.showOffByCountriesDashboard" ng-click="rootObj.showOffByCountriesDashboard = !rootObj.showOffByCountriesDashboard;" />
               <div ng-show="!rootObj.showOffByCountriesDashboard" id="jqxgrid" style="margin-top:0.2%;display:none;">
               </div>
               <div ng-show="rootObj.showOffByCountriesDashboard" class="highcharts-container" id="dbOffByCountry" style="width:97.5%;margin-top:0.2%;display:none;"></div>
               <hr style="margin:0px;margin-top:60px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter == 2" /><hr style="margin:0px;margin-bottom:20px;border-top:solid 2px;display:none;" ng-show="rootObj.remoteCallCounter >= 8" />

               </div>
            </div>
        </div>
    </body>
</html>
</apex:page>