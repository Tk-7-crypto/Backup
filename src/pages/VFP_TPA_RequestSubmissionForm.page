<apex:page language="{!language}" extensions="CNT_TPA_RequestSubmissionForm" standardController="TPA_Request__c" showHeader="true" action="{!requestValidateOnLoad}" sidebar="false" cache="false" title="{!tpaRequestToEdit.Name}" id="pg" lightningStylesheets="true" standardStylesheets="false">
    <!-- Added for site to community logic submission start -->
    <script type="text/javascript">
        console.log('currentLoggedInUserProfile0::::'+'{!currentUserProfileName}');
        function getUrlVars() {
            var vars = {}, hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for(var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars[hash[0]] = hash[1];
            }
            return vars;
        }
        console.log('currentLoggedInUserProfile::::'+'{!currentUserProfileName}');
        if('{!currentUserProfileName}' == 'tpa Profile') {
            var qryString = '';
            var urlParams = getUrlVars();
            for(var key in urlParams) {
                if(urlParams.hasOwnProperty(key)) {
                    var val = urlParams[key];
                    qryString += key + '=' + val + '&';
                }
            }
            qryString = qryString.slice(0, -1);
            window.location.href = '{!tpaCommunityUrl}' + '/VFP_TPA_ExternalUserAction?actionType=tpasitelinkaccess&returlpage=VFP_TPA_RequestSubmissionForm&' + qryString;
        }
        if('{!currentUserProfileName}' == 'TPA Vendor Community User') {
            var globalBar = document.getElementsByClassName("globalHeaderBar");
            if(globalBar != null  && globalBar.length > 0) {
                globalBar[0].classList.add("hideGlobalHeader");
            }
            var searchBar = document.getElementsByClassName("zen-navViaSearch");
            if(searchBar != null  && searchBar.length > 0) {
                searchBar[0].classList.add("hideGlobalHeader");
            }
            var navigationMenu = document.getElementsByClassName("zen-hasMessages");
            if(navigationMenu != null && navigationMenu.length > 0) {
                navigationMenu[0].classList.add("hideGlobalHeader");
            }
        }
    </script>
    <apex:outputPanel rendered="{!IF(currentUserProfileName != 'tpa Profile',True, False)}">
        <!-- Added for site to community logic submission end-->    
        <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
            <!-- Head section start -->
            <head>
                <meta http-equiv="X-UA-Compatible" content="IE=9" />
                <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

                <!-- style section start -->  
                <link href="/sCSS/52.0/sprites/1297816277000/Theme3/default/gc/versioning.css" rel="stylesheet" type="text/css" /> <!-- stylesheet for new style tab -->
                <link href="{!URLFOR($Resource.TpaCustomPopup, 'popup.css')}" rel="stylesheet" type="text/css" />  <!-- *** JQuery Custom Popup Stylesheet reference *** -->
                <link href="{!URLFOR($Resource.TPAJqueryUICss)}" rel="stylesheet" type="text/css" />  <!-- *** JQuery UI Stylesheet reference *** -->
                <link href="{!URLFOR($Resource.TpaMultiSelect_Updated_Version, 'select2.min.css')}" rel="stylesheet" type="text/css" /> <!-- *** Multi Select Control CSS reference *** -->
                <link href="{!$Resource.TPA_Multilingual_CSS}" rel="stylesheet" type="text/css" />

                <style>
                    .bPageBlock {
                        border: none !important;
                        background-color: white !important;
                    }

                    .slds-tabs_default__content {
                        padding: 0 !important;
                    }

                    .slds-input , .slds-select{
                        width: 50% !important;
                    }

                    .bPageBlock .detailList tr td , .select2-container-multi .select2-choices {
                        border: none !important;
                    }
                    .slds-scope .slds-table thead th{
                        background-color: rgb(249, 249, 250);;
                    }
                    .slds-scope .slds-select.select2-container-multi {
                        height: inherit;
                    }
                    .hideGlobalHeader
                    {
                        display: none !important;
                    }
                    .appriseOverlay {z-index:1 !important;}
                    
                    .slds-checkbox__label {
                        display: inline !important;
                    }

                    .sortingHighlighter 
                    {
                        background-color: #FBFDFC !important;
                        color:#000000 !important;
                    	font-weight:bold;
                    	border-left: 2px solid #ccc !important;
                    	border-right: 2px solid #ccc !important;
                    }
                    
                    .sortingHighlighterForIcon 
                    {
                        background-image:linear-gradient(to bottom,#F9F9FA,#FBFDFC);
                        color:#000000 !important;
                        font-weight:bold;
                    }
					.select2-results__option--selected { 	display: none; }
                    a > .colLabel{
                        font-size: 11px;
                        color: #1b96ff;
                        padding-left: 6px;
                        font-weight: bold;
                        text-decoration: underline;
                        text-decoration-color: #1b96ff;
	                }
                	
                    @media print {
                        body { 
                            -webkit-print-color-adjust: exact !important; 
                            color-adjust: exact !important;
                        }
                        
                        .slds-scope .slds-radio [type=radio]:checked+.slds-radio_faux:after, .slds-scope .slds-radio [type=radio]:checked+.slds-radio--faux:after, .slds-scope .slds-radio [type=radio]:checked~.slds-radio_faux:after, .slds-scope .slds-radio [type=radio]:checked~.slds-radio--faux:after, .slds-scope .slds-radio [type=radio]:checked+.slds-radio__label .slds-radio_faux:after, .slds-scope .slds-radio [type=radio]:checked+.slds-radio__label .slds-radio--faux:after {
                            width: .5rem !important;
                            height: .5rem !important;
                            content: '' !important;
                            position: absolute !important;
                            top: 50% !important;
                            left: 50% !important;
                            transform: translate3d(-50%, -50%, 0) !important;
                            border-radius: 50% !important;
                            background: none !important;
                            background-color: rgb(1, 118, 211) !important;
                        }
                        
                        .slds-scope .slds-radio [type=radio][disabled]~.slds-radio_faux:after, .slds-scope .slds-radio [type=radio][disabled]~.slds-radio--faux:after, .slds-scope .slds-radio [type=radio][disabled]+.slds-radio__label .slds-radio_faux:after, .slds-scope .slds-radio [type=radio][disabled]+.slds-radio__label .slds-radio--faux:after {
                            background: rgb(150, 148, 146) !important;
                        }
                        
                        .slds-scope .slds-radio [type=radio][disabled]~.slds-radio_faux, .slds-scope .slds-radio [type=radio][disabled]~.slds-radio--faux, .slds-scope .slds-radio [type=radio][disabled]+.slds-radio__label .slds-radio_faux, .slds-scope .slds-radio [type=radio][disabled]+.slds-radio__label .slds-radio--faux {
                            background-color: rgb(233, 234, 236) !important;
                            border-color: rgb(196, 198, 202) !important;
                        }
                    }
                    
                    .empty{
                    	display : none;
                    }
                </style>

                <!-- style section end -->
                <!-- script section start -->
                <script src="{!$Resource.AngularJS}" type="text/javascript" />
                <script src="{!$Resource.AppJS}" type="text/javascript" />
                <script src="{!$Resource.TPA_Angular_Directive}" type="text/javascript" />
                <script src="{!$Resource.TPA_Angular_Services}" type="text/javascript" />
                <script src="{!$Resource.TPA_Angular_Controller}" type="text/javascript" />
                <script src="{!$Resource.AngularUiBootstrap}" type="text/javascript" /> <!-- *** Angular-JS Bootstrap Modal Pop Up Library reference ** -->
                <script src="{!$Resource.TPAJquery}" type="text/javascript" /> <!-- *** Jquery library reference *** -->
                <script src="{!$Resource.TpaJQueryCookie}" type="text/javascript" />
                <script src="{!$Resource.TPAJqueryUI}" type="text/javascript" /> <!-- *** JQuery UI Library reference *** -->
                <script src="{!$Resource.TPA_Page_JavaScript}" type="text/javascript" />
                <script src="{!URLFOR($Resource.TpaCustomPopup, 'popup.js')}" type="text/javascript" /> <!-- *** JQuery Custom Popup Library reference *** -->
                <script src="{!$Resource.BootstrapJS}" type="text/javascript" /> <!-- *** Bootstrap Javascript Library reference *** -->
                <script src="{!URLFOR($Resource.TpaMultiSelect_Updated_Version, 'select2.min.js')}" type="text/javascript" /> <!-- *** Multi Select Control Javascript Library reference *** -->
                <script src="{!URLFOR($Resource.TPA_ML_JQuery_Cal_Locale, 'datepicker-en-US.js')}" type="text/javascript"></script> <!-- Calendar under ER-1940 english -->
                <script src="{!URLFOR($Resource.TPA_ML_JQuery_Cal_Locale, 'datepicker-ja.js')}" type="text/javascript"></script> <!-- Calendar under ER-1940 japanese -->

                <!-- Library reference to fill controlling and dependent picklist from api by making client side call -->
                <script src="/soap/ajax/52.0/connection.js" type="text/javascript" />
                <script src="/soap/ajax/52.0/apex.js" type="text/javascript" />
                <script src="../static/102010/js/picklist.js" />
                <!-- *** Library reference to fill controlling and dependent picklist from api by making client side call *** -->

                <!-- ****** AngularJS script Start ****** -->
                <script type="text/javascript">
                    Visualforce.remoting.timeout = 120000;
                    var angularScope = ''; //Added by Vikram Singh to replace all the hardcoded instance with this var.
                    var clickToOpenCalendar = '{!$Label.TPA_click_here_to_open_calendar}';
                    var varLanguage = '{!JSENCODE(language)}';
                    var tpaSelectAllThatApply = "{!$Label.TPA_Select_all_that_apply}";
                    var tpaYes = '{!$Label.TPA_yes}';
                    var tpaNo = '{!$Label.TPA_No}';
                </script>
                <script src="{!$Resource.TPA_VFPageJS}" type="text/javascript" />
                <script type="text/javascript">
                    /* Custom Filter */
                    myapp.filter('myLimitTo', function() {
                        return function(input, limit, begin) {
                            return input.slice(begin, begin + limit);
                        };
                    });

                    myapp.filter("toArray", function(){
                        return function(obj) {
                            var result = [];
                            angular.forEach(obj, function(val, key) {
                                result.push(val);
                            });
                            return result;
                        };
                    });
                    


                    <!-- Page Controller Start -->
                    var contrl = myapp.controller('controllerPage',
                        ['$scope',
                        '$filter',
                        '$modal',
                        '$log',
                        '$window',
                        'AccountContactService',
                        '$controller',
                        function ($scope, $filter, $modal, $log, $window, AccountContactService,$controller) {
                            $scope.$log = $log;
                            $scope.saveRequest =  '{!$RemoteAction.CNT_TPA_RequestSubmissionForm.saveRequest}';
                            $scope.backUpOff = '{!$RemoteAction.CNT_TPA_RequestSubmissionForm.backupUseOffering}';
                            $scope.getVendorAccounts = '{!$RemoteAction.CNT_TPA_RequestSubmissionForm.getVendorAccount}';
                            $scope.getAccountOnDomain = '{!$RemoteAction.CNT_TPA_RequestSubmissionForm.getAccountOnDomain}';
                            $scope.getAcknowledgementDateTime = '{!$RemoteAction.CNT_TPA_RequestSubmissionForm.getAcknowledgementDateTime}';
                            $scope.getOfferingsNotificationsList = '{!$RemoteAction.CNT_TPA_RequestSubmissionForm.getOfferingsNotificationsList}';
                            $scope.viewModeStatus = '{!formDisplayMode}';
                            $scope.saveRequestInDraft = false; //Added by Babita Dadarwal under ER-3433
                            $scope.outlinerOfferingName = '{!$Label.TPA_OutlierView}';//Added by Govind under ER-3460
                            $scope.vendorCountryList = JSON.parse('{!VendorCountryList}');
                            $scope.vendorStateList = JSON.parse('{!VendorStateList}');
                            $scope.offeringProviderList = JSON.parse('{!OfferingProviderList}');
                            
                            $scope.amaLongestPeriodList = JSON.parse('{!AMALongestPeriodList}');
                            $scope.tpaRequestEditTypeModal = '{!tpaRequestEditType}';
                            $scope.vendorComplianceCountryList = JSON.parse('{!VendorComplianceCountryList}');
                            $scope.vendorComplianceStateList = JSON.parse('{!VendorComplianceStateList}');
                            $scope.dependentVendorComplianceStateCountryMap = JSON.parse('{!getDependentVendorComplianceStateCountries}');
                            $scope.dependentVendorStateCountryMap = JSON.parse('{!getDependentVendorStateCountries}');
                            $scope.contactAddressCrosswalkList = JSON.parse("{!JSENCODE(getContactAddressCrowalk)}");
                            $scope.lastSelectedAddressRcrd = JSON.parse("{!JSENCODE(getlastSelectedAddressRcrd)}");
                            $scope.lastSelectedQueueRcrd = JSON.parse("{!JSENCODE(getlastSelectedQueueRcrd)}");

                            $scope.userProfile = '{!$Profile.Name}';
                            $scope.GUID = '{!GUID}';
                            $scope.noOfRecords = '{!noOfRecords}';
                            $scope.queueList = JSON.parse("{!JSENCODE(queueList)}");
                            
                            $scope.requestType = '{!tpaRequestCallType}';
                            $scope.secDataAssetFieldMap = {!SecDataAssetFieldMap};
                            $scope.priDataAssetFieldMap = {!PriDataAssetFieldMap};
                            
                            $scope.cancelMessageCustom = $scope.requestType == 'view' ? '{!$Label.TPA_Are_you_sure_you_want_to_leave_this_process}' : '{!$Label.TPA_Are_you_sure_you_want_to_leave_this_process_Please_note_your_work_will_not}.';
                            //Client watch list
                            $scope.wlClientEditView = {};

                            //Vendor watch list
                            $scope.wlVendorEditView = {};

                            $scope.mlObj = {};
                            $scope.mlObj.sortResults = function (arrayObj, prop, asc) {
                                arrayObj = arrayObj.sort(function(a, b) {
                                    if($.isNumeric(a[prop]) && $.isNumeric(b[prop])) {
                                        a[prop] = parseInt(a[prop]);
                                        b[prop] = parseInt(b[prop]);
                                    }
                                    if (asc) {
                                        return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
                                    } else {
                                        return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
                                    }
                                });
                            }
                            // Vendor remote  Access
                            $scope.VendorRemoteAccess_No = false;
                            $scope.mlObj.languageMap = {!languageMap};
                            $log.info('languageMap = ' + JSON.stringify($scope.mlObj.languageMap));
                            $log.info('selectedLanguage = ' + $scope.mlObj.languageMap["{!language}"].split('~')[0]);
                            $scope.mlObj.selectedLanguageCode = '{!language}';
                            $scope.mlObj.selectedLanguage = $scope.mlObj.languageMap["{!language}"].split('~')[0];
                            $scope.mlObj.selectedLanguageField = $scope.mlObj.languageMap["{!language}"].split('~')[1];
                            $scope.mlObj.translatedMap = {!TranslatedMap};
                            $scope.mlObj.isLangOverride = getParameterByName('isLangOverride') == 'true' ? true : false;
                            $scope.mlObj.isVendorLangLocked = true;
                            $scope.mlObj.isClientFromUS = {!isClientFromUS};    
                            $scope.mlObj.showOffCountrySelOption = false;
                            $scope.mlObj.geoLevelOffCombinationVal = '';
                            $scope.mlObj.selectedMultipleCountryMap = {};
                            $scope.mlObj.isCountrySelectionBoxAvailable = false; 
                            $log.info('##isClientFromUS = ' + JSON.stringify($scope.mlObj.isClientFromUS));

                            // Client Contact Country
                            $scope.mlObj.requestingCountryList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Client_Contact_Territory__c'];
                            $scope.mlObj.sortResults($scope.mlObj.requestingCountryList, 'Default_Value__c', true);
                            $scope.mlObj.requestingCountryList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~None'][0]); 
                            
                            // Secondary Client Contact Territory
                            $scope.mlObj.requestingForCountryList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Secondary_Client_Contact_Territory__c'];
                            $scope.mlObj.sortResults($scope.mlObj.requestingForCountryList, 'Default_Value__c', true);
                            $scope.mlObj.requestingForCountryList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~None'][0]);
                            
                            // Country of Offerings
                            $scope.mlObj.countryOfOfferingsList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Region__c'];
                            $scope.mlObj.sortResults($scope.mlObj.countryOfOfferingsList, 'Default_Value__c', true);
                            var indexOfGlobalOption = -1;
                            $scope.tpaUseCountryList = [];
                            $.each($scope.mlObj.countryOfOfferingsList,function(k,v) {
                                if(v.Default_Value__c != null) {
                                    v.Default_Value__c = v.Default_Value__c.replace("&amp;", "&");
                                    $scope.tpaUseCountryList.push(v.Default_Value__c);
                                    v.English_Translation__c = v.Default_Value__c;
                                    v.Japanese_Translation__c = v.Default_Value__c;
                                    if(v.Default_Value__c == "Global")
                                        indexOfGlobalOption = k;
                                }
                            });

                            if(indexOfGlobalOption > -1) {
                                var element = angular.copy($scope.mlObj.countryOfOfferingsList[indexOfGlobalOption]);
                                $scope.mlObj.countryOfOfferingsList.splice(indexOfGlobalOption, 1);
                                $scope.mlObj.countryOfOfferingsList.splice(0, 0, element);
                            }

                            $scope.mlObj.countryOfOfferingsList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~None'][0]);
                            $scope.mlObj.selectedRegion = $scope.mlObj.countryOfOfferingsList[0];
                            $log.info('Model selectedRegion is  = ' + JSON.stringify($scope.mlObj.countryOfOfferingsList));

                            // Who will be providing the requested offerings to the vendor?
                            $scope.mlObj.dataProvidedByList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Data_Provided_By__c'];
                            $scope.mlObj.sortResults($scope.mlObj.dataProvidedByList, 'Default_Value__c', true);
                            $scope.mlObj.dataProvidedByList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);
                            $scope.mlObj.selectedDataProvidedBy = $scope.mlObj.dataProvidedByList[0];
                            
                            // Frequency of delivery
                            $scope.mlObj.frequencyOfDeliveryList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Frequency_Of_Delivery__c'];
                            $scope.mlObj.sortResults($scope.mlObj.frequencyOfDeliveryList, 'Default_Value__c', true);
                            $scope.mlObj.frequencyOfDeliveryList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);
                            $scope.mlObj.selectedFrequencyOfDelivery = $scope.mlObj.frequencyOfDeliveryList[0];
                            
                            //Geo Level (IMS Data Asset)
                            $scope.mlObj.geoLevelList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~IMS_Data_Asset__c~Picklist~Geo_Level__c'];
                            $scope.mlObj.geoLevelMap = {};
                            $.each($scope.mlObj.geoLevelList,function(k,v){
                                $scope.mlObj.geoLevelMap[v.Default_Value__c] = v[$scope.mlObj.selectedLanguageField];
                            });

                            
                            $scope.mlObj.VendorEmpDataStoredInCountryList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~AMA_Agreement_Detail__c~Picklist~Vendor_Employee_Store_Data_in_country__c'];
                            $scope.mlObj.sortResults($scope.mlObj.VendorEmpDataStoredInCountryList, 'Default_Value__c', true);

                            $scope.mlObj.labelsAndButtons = {};
                            $scope.mlObj.labelsAndButtons.vendorLegalNameLbl = '{!$Label.TPA_Please_enter_the_Vendor_Legal_Name}';
                            $scope.mlObj.labelsAndButtons.vendorSearchCountryLbl = '{!$Label.TPA_Choose_the_Country_to_search_the_Vendor_Accounts_of_that_Country}';
                            $scope.mlObj.labelsAndButtons.showVendorAccountsBtn = '{!$Label.TPA_Show_Vendor_Accounts}';
                            $scope.mlObj.labelsAndButtons.vendorContinueBtn = '{!$Label.TPA_Continue}';
                            $scope.mlObj.labelsAndButtons.vendorCancelBtn = '{!$Label.TPA_Cancel_Return}';
                            $scope.mlObj.labelsAndButtons.vendorNotListedNewVendorBtn = '{!$Label.TPA_Not_Listed_New_vendor}';
                            $scope.mlObj.labelsAndButtons.vendorSelectOneLbl = '{!$Label.TPA_Select_One}';
                            $scope.mlObj.labelsAndButtons.vendorContactNameLbl = '{!$Label.TPA_Name_of_Vendor}';
                            $scope.mlObj.labelsAndButtons.vendorLegalEntityNameLbl = '{!$Label.TPA_Legal_Entity_Name}';
                            $scope.mlObj.labelsAndButtons.vendorSelCompBrandNameCountryLbl = '{!$Label.TPA_Select_Company_Branded_Name_and_Country}';
                            $scope.mlObj.labelsAndButtons.vendorselectLegalEntityLbl = '{!$Label.TPA_Select_Legal_Entity}';
                            $scope.mlObj.labelsAndButtons.vendorAddressLbl = '{!$Label.TPA_Address}';
                            $scope.mlObj.labelsAndButtons.vendorCityLbl = '{!$Label.TPA_City}';
                            $scope.mlObj.labelsAndButtons.vendorStateLbl = '{!$Label.TPA_StateProvince}';
                            $scope.mlObj.labelsAndButtons.vendorCountryLbl = '{!$Label.TPA_Country}';
                            
                            

                            $scope.mlObj.sortResults($scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Billing_Mailing_Country__c'], 'Default_Value__c', true);
                            $scope.mlObj.vendorCountryList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Billing_Mailing_Country__c'];
                            $scope.mlObj.vendorCountryList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);
                            $scope.mlObj.sortResults($scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Compliance_Country__c'], 'Default_Value__c', true);
                            $scope.mlObj.vendorComplianceCountryList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Compliance_Country__c'];
                            $scope.mlObj.vendorComplianceCountryList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);

                            $scope.mlObj.allCountries = angular.copy($scope.mlObj.vendorCountryList);
                            $scope.mlObj.sortResults($scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Billing_Mailing_State_Province__c'], 'Default_Value__c', true);
                            $scope.mlObj.vendorStateList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Billing_Mailing_State_Province__c'];
                            $scope.mlObj.vendorStateList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);
                            $scope.mlObj.sortResults($scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Compliance_State__c'], 'Default_Value__c', true);
                            $scope.mlObj.vendorComplianceStateList = $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Vendor_Compliance_State__c'];
                            $scope.mlObj.vendorComplianceStateList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);
                            
                            $scope.tllaLanguageOptions = JSON.parse('{!TLLALanguage}');
                            
                            $scope.mlObj.rootObj = {};
                            $scope.mlObj.rootObj.selectedVendorCountry = $scope.mlObj.vendorCountryList[0];
                            $scope.mlObj.rootObj.selectedVendorState;
                            $scope.mlObj.relatedVendorStateList = [];
                            $scope.isPrintAction = false;
                            $scope.mlObj.isDataLocMsgAcknowledged = false;
                            $scope.mlObj.relatedVendorStateList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);
                            $scope.mlObj.rootObj.selectedVendorState = $scope.mlObj.relatedVendorStateList[0];
                            
                            $scope.mlObj.relatedVendorComplianceStateList = [];
                            $scope.mlObj.relatedVendorComplianceStateList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]);
                            $scope.mlObj.rootObj.vendorComplianceState = $scope.mlObj.relatedVendorComplianceStateList[0];

                            $scope.mlObj.relatedOffStorageStateList = [];
                            $scope.mlObj.relatedOffStorageStateList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]); 

                            $scope.mlObj.relatedOffAccessStateList = [];
                            $scope.mlObj.relatedOffAccessStateList.splice(0, 0, $scope.mlObj.translatedMap[$scope.mlObj.selectedLanguageField+'~TPA_Request__c~Record~--None--'][0]); 
                            
                            $scope.setSelectedValueInSelectedLang = function(collection,savedValue) {
                                var returnVal = collection[0];
                                $.each(collection,function(k,v) {
                                    if(v.Default_Value__c != null && savedValue != null)
                                        if(v.Default_Value__c.toLowerCase() == savedValue.toLowerCase())
                                            returnVal = v;
                                });
                                return returnVal;
                            }
                            
                            $scope.parseHTML= function(html) {
                                var tmp = document.createElement("div");
                                tmp.innerHTML = html;
                                html = tmp.textContent || tmp.innerText || "";
                                var txt = document.createElement("textarea");
                                txt.innerHTML = html;
                                return txt.value;
                            }
                            
                            $scope.OfferingSpecificAdditionMap = {
                                HoverDescriptions : {}
                            }

                            $scope.HoverDescriptionMap ={!HoverDescriptionMapString};
                             
                            $.each($scope.HoverDescriptionMap, function(key,value){
                                $scope.OfferingSpecificAdditionMap.HoverDescriptions[key] = $scope.parseHTML(value);
                            })
                            $scope.tpaRequestClient__c = '{!tpaRequest.Client_Address__c}';
                            $scope.tpaObj = {};
                            $scope.tpaObj.ClientEmail = '{!clientEmail}'

                            $scope.tpaSuffixes = {};
                            $scope.tpaSuffixes.manCareWorkBook =  '{!$Label.TPA_ManagedCareBookSuffix}';
                            $scope.tpaSuffixes.XponentPlanTrak =  '{!$Label.TPA_XponentPlanTrak}'; 
                            $scope.tpaSuffixes.MDSA =  '{!$Label.TPA_MDSA}'; 
                            $scope.tpaSuffixes.manCareWorkBook_PBM =  '{!$Label.TPA_ManagedCareBookPBM_Suffix}'; 
                            $scope.tpaSuffixes.LAAD_suffix =  '{!$Label.TPA_LAAD_Suffix}'; 
                            $scope.tpaSuffixes.Outliner_suffix =  '{!$Label.TPA_OutlierView_Suffix}'; 
                            $scope.tpaSuffixes.PatientRefFile_suffix =  '{!$Label.TPA_Patient_Ref_File_Suffix}'; 
                            $scope.tpaSuffixes.Reference_File_Suffix =  '{!$Label.TPA_Reference_File_Suffix}'; 
                            $scope.tpaSuffixes.StiData_suffix =  '{!$Label.TPA_StiDataSuffix}'; 
                            $scope.tpaSuffixes.CWH_NZ_Scan_data_Suffix =  '{!$Label.TPA_CWH_NZ_Scan_data_Suffix}';
                            $scope.cegedimOffering = '{!$Label.TPA_Cegedim_Offering}';
                            $scope.PharMetricsOfferingName = '{!$Label.TPA_PharMetrics_Plus_Health_Plan_Claims}';                            
                            $scope.wordExcludedFromAccount = '{!$Setup.TPA_Settings__c.Words_Excluded_From_Account_Name__c}';
                            $scope.lstContryStateCodes = JSON.parse('{!strContryStateCode}');
                            $scope.tpaObj.isAuthorisedSigner = '{!isAuthorisedSigner}';
                            $scope.tpaObj.isBulkRequest = '{!isBulkRequest}';
                            $scope.isMatrixUIDisplay = 'false';
                            $scope.tpaObj.isRenewedReqUseandOfferingChanged = '{!isRenewedorModifiedRenewed}';
							$scope.tpaObj.tllaLanguageChosen = '{!existingTllaLanguage}';
                            $scope.tllaLanguageChosen;
                            if($scope.tpaObj.tllaLanguageChosen || $scope.tpaObj.tllaLanguageChosen != ''){
                            	$scope.tllaLanguageChosen = $scope.tpaObj.tllaLanguageChosen;
                            }
                            else{
                            	$scope.tllaLanguageChosen = '--None--';
                            }
                            $scope.isRenewedorModifiedRenewed = '{!isRenewedorModifiedRenewed}';
                            $scope.lbConsumerProfile = '{!$Label.TPA_Consumer_Profile}';
                            $scope.lbDataQuerySystem = 'Data Query System (DQS)';
                            $scope.lbROI = '{!$Label.TPA_ROI}';

                            $scope.tpaRequest = [];
                            $scope.tpaReqId = '{!tpaRequestId}';
                            $scope.navigationURL = '{!$Site.Prefix}'+'/secur/logout.jsp'; 
                            $scope.timeOut = '{!$Setup.TPA_Settings__c.Time_Out_Value__c}'; 

                            $scope.labels = {};
                            $scope.labels.TPA_Session_Expired = '{!$Label.TPA_Session_Expired}'; 
                            $scope.labels.TPA_From_Datadel_To_Finalize = '{!$Label.TPA_From_Datadel_To_Finalize}';
                            $scope.labels.TPA_Data_Delivered_to_Vendor_via = '{!$Label.TPA_Data_Delivered_to_Vendor_via}';
                            $scope.labels.TPA_Submit_PopUp = '{!$Label.TPA_Submit_PopUp}';
                            $scope.labels.TPA_Submit_PopUp_Vendor = '{!$Label.TPA_Submit_PopUp_Vendor}'; 
                            $scope.labels.TPA_Country_Region_Label = '{!$Label.TPA_Country_Region}'; 
                            $scope.labels.TPA_Save_In_Draft_Popup = '{!$Label.TPA_Save_In_Draft_Popup}';
                            $scope.labels.TPA_AMA_Lettershop_Uses  = '{!$Label.TPA_AMA_Lettershop_Uses}';
                            $scope.$log.info('Request Type ::::'+$scope.isRenewedorModifiedRenewed);

                            //*** Bulk TPA Request Section Start ***//
                            $scope.isBulkMatrixAccess = {!isBulkMatrixAccess};
                            $scope.disableCheckBoxAndDropDown = 'false';
                            $scope.selectedCountries;
                            $scope.selectOffCategory;
                            
                            $scope.columnsToSortBy = ['translatedCategoryName','translatedPurposeName','country'];
                            $scope.isDescendingForSelected = false;
                            $scope.sortOrderForSelected = 'asctranslatedCategoryName';

                            $scope.changeSortingOrSortingColumnForSelectedUseOff = function(sortColumn){
                                if($scope.columnsToSortBy != null && $scope.columnsToSortBy.length > 0 && $scope.columnsToSortBy[0] == sortColumn){
                                    $scope.isDescendingForSelected = !$scope.isDescendingForSelected;
                                    $scope.sortOrderForSelected = $scope.isDescendingForSelected == false ? 'asc'+sortColumn : 'desc'+sortColumn ;
                                }
                                else if($scope.columnsToSortBy != null && $scope.columnsToSortBy.length > 0 ){
                                    if(sortColumn == 'translatedCategoryName'){
                                        $scope.columnsToSortBy = ['translatedCategoryName','translatedPurposeName','country'];
                                    }
                                    else if(sortColumn == 'translatedOfferingCategoryName'){
                                        $scope.columnsToSortBy = ['translatedOfferingCategoryName','translatedCategoryName','translatedPurposeName','country'];
                                    }
                                    else{
                                        let columnIdx = $scope.columnsToSortBy.indexOf(sortColumn);
                                        let tempColumn = $scope.columnsToSortBy[columnIdx];
                                        $scope.columnsToSortBy[columnIdx] = $scope.columnsToSortBy[0];
                                        $scope.columnsToSortBy[0] = tempColumn;
                                    }

                                    $scope.isDescendingForSelected = false;
                                    $scope.sortOrderForSelected = 'asc'+sortColumn;
                                }
                                $scope.$log.info('sortOrder'+$scope.sortOrder);
                                //$scope.isDescending = $scope.sortOrder.indexOf('asc') == -1 ? true : false;
                                $scope.applyChanges();
                            }
                            
                            $scope.columnSortBy = 'country';
                            $scope.isDescending = false;
                            $scope.sortOrder = 'ascCountry';
                            $scope.descImage = '&nbsp;<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAA3NCSVQICAjb4U/gAAAAD1BMVEX////////e3t6ZmZkzMzPjUSqdAAAABXRSTlMA/////xzQJlIAAAAJcEhZcwAACvAAAArwAUKsNJgAAAAldEVYdFNvZnR3YXJlAE1hY3JvbWVkaWEgRmlyZXdvcmtzIE1YIDIwMDSHdqzPAAAAKklEQVR4nGNgIA+wuACBA4hhJCioDGIwOCsKmUDkjCACQCETmHIHIs0FABo8BA7kFkjvAAAAAElFTkSuQmCC" alt="test Image" />';
                            $scope.ascImage = '&nbsp;<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAA3NCSVQICAjb4U/gAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURf///////97e3pmZmTMzM+NRKp0AAAABdFJOUwBA5thmAAAACXBIWXMAAArwAAAK8AFCrDSYAAAAJXRFWHRTb2Z0d2FyZQBNYWNyb21lZGlhIEZpcmV3b3JrcyBNWCAyMDA0h3aszwAAAClJREFUGNNjIBKwOEAZziZQASNliJCzopAJREBQECzE4gIEDgzkAAYGACuRBA6ce+7fAAAAAElFTkSuQmCC" alt="test Image" />';

                            $scope.changeSortingOrSortingColumn = function(sortColumn,sortOrd){
                                if($scope.columnSortBy == sortColumn){
                                    $scope.sortOrder = $scope.sortOrder.indexOf('asc') == -1 ? 'asc'+sortOrd : 'desc'+sortOrd ;
                                }
                                else{
                                    $scope.columnSortBy = sortColumn;
                                    $scope.sortOrder = 'asc'+sortOrd;
                                }
                                $scope.$log.info('sortOrder'+$scope.sortOrder);
                                $scope.isDescending = $scope.sortOrder.indexOf('asc') == -1 ? true : false;
                                $scope.applyChanges();
                            }

                            $scope.proposalTreeBulkDataRawSource;
                            $scope.useCatListDropDownMap = new Map();
                            $scope.useListDropDownList;
                            $scope.useListDropDownMap = new Map();
                            $scope.displayUseColumn;
                            $scope.selectedUseColumn;
                            $scope.offeringsRow = new Map();
                            $scope.offeringwithCommIDMap = new Map();
                            $scope.Math = window.Math;
                            let offeringCategoryMap = new Map(); 
                            $scope.setBulkMaps = function(){
                                $scope.proposalTreeBulkDataRawSource = {!ProposalTreeData};
                                $scope.useCatListDropDownMap.set('-1', {id: '-1', name: '--None--'});
                                for(var i=0; i<$scope.proposalTreeBulkDataRawSource.tpaPurposeCategoryList.length; i++){
                                    $scope.useCatListDropDownMap.set($scope.proposalTreeBulkDataRawSource.tpaPurposeCategoryList[i].Id, {
                                        id: $scope.proposalTreeBulkDataRawSource.tpaPurposeCategoryList[i].Id, 
                                        name: $scope.proposalTreeBulkDataRawSource.tpaPurposeCategoryList[i].Category_Name__c
                                    });
                                }
                                $scope.useListDropDownMap.set('-1:-1', {id: '-1', name: '--None--', catId: '-1'});
                                for(var i=0; i<$scope.proposalTreeBulkDataRawSource.secondarypurpose.length; i++) {
                                    var purposedescription = $scope.proposalTreeBulkDataRawSource.secondarypurpose[i];
                                    if(purposedescription != null && purposedescription.Purpose__r.Is_Active__c) {
                                        $scope.useListDropDownMap.set(purposedescription.TPA_Purpose_Category__r.Id + ':'+ purposedescription.Purpose__r.Id, {
                                            id: purposedescription.Purpose__r.Id, 
                                            name: purposedescription.Purpose__r.Primary_Purpose_Name__c, 
                                            catId: purposedescription.TPA_Purpose_Category__r.Id,
                                            desId:  purposedescription.Id
                                        });
                                    }
                                }
                                for(var i=0; i<$scope.proposalTreeBulkDataRawSource.categorypurposesList.length; i++){
                                    if($scope.proposalTreeBulkDataRawSource.categorypurposesList[i].IMS_TPA_Purpose__r.Primary_Purpose_Name__c == 'Other'){
                                        $scope.useListDropDownMap.set($scope.proposalTreeBulkDataRawSource.categorypurposesList[i].TPA_Purpose_Category__r.Id + ':'+ $scope.proposalTreeBulkDataRawSource.categorypurposesList[i].IMS_TPA_Purpose__r.Id, {
                                            id: $scope.proposalTreeBulkDataRawSource.categorypurposesList[i].IMS_TPA_Purpose__r.Id, 
                                            name: $scope.proposalTreeBulkDataRawSource.categorypurposesList[i].IMS_TPA_Purpose__r.Primary_Purpose_Name__c, 
                                            catId: $scope.proposalTreeBulkDataRawSource.categorypurposesList[i].TPA_Purpose_Category__r.Id,
                                            desId: ''
                                        });
                                    }
                                }

                             
                                $scope.displayUseColumn = {
                                    totalColumn : 1,
                                    selectedColumn: 'column_1',
                                    columns : {
                                        column_1 : {
                                            'use_Category' : Array.from($scope.useCatListDropDownMap.values()),
                                            'use' : Array.from($scope.useListDropDownMap.values()),
                                            'selectedUseCategory': $scope.useCatListDropDownMap.get('-1'),
                                            'selectedUse': $scope.useListDropDownMap.get('-1:-1'),
                                            'otherUseText': '',
                                            'name' : 'column_1',
                                            'isSaved' : 0 ,
                                        }
                                    }
                                };
                            
                                $scope.selectedUseColumn = $scope.displayUseColumn.columns[$scope.displayUseColumn.selectedColumn];
                             
                                $scope.offSelectionMaster = {
                                    isChecked: false,
                                    otherUseText: '',
                                    otherOffText: '',
                                    studyName: '',
                                    deliveryDate: '',
                                    offringSuffix: ''
                                };
                                var columnNum = 0;
                                for(var i=0; i<$scope.proposalTreeBulkDataRawSource.dataAssetList.length; i++){
                                    columnNum = columnNum + 1;
                                    if($scope.proposalTreeBulkDataRawSource.dataAssetList[i].IMS_Secondary_Data_Assets__r != null){
                                        $scope.secondaryDataAssetlist = $scope.proposalTreeBulkDataRawSource.dataAssetList[i].IMS_Secondary_Data_Assets__r;
                                        var columnNumSec = columnNum;
                                        for(var j=0; j<$scope.secondaryDataAssetlist.totalSize; j++){
                                            columnNumSec = columnNum + j;
                                            $scope.offeringsRow.set($scope.proposalTreeBulkDataRawSource.dataAssetList[i].BU__c+ ':' +$scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c+ ':' + $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Id+ ':' + $scope.secondaryDataAssetlist.records[j].Id, {
                                                
                                                country: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].BU__c, 
                                                offCat: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c, 
                                                primOffName: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Asset_Name__c, 
                                                primOffId: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Id, 
                                                secOffName: $scope.secondaryDataAssetlist.records[j].Secondary_Asset_Name__c, 
                                                secOffId: $scope.secondaryDataAssetlist.records[j].Id, 
                                                selections:{['column_'+columnNumSec+'_1']: angular.copy($scope.offSelectionMaster)}
                                            });
                                            if($scope.secondaryDataAssetlist.records[j].Commercial_Manager_Email__c != undefined){
                                                $scope.offeringwithCommIDMap.set($scope.secondaryDataAssetlist.records[j].Id,$scope.secondaryDataAssetlist.records[j].Commercial_Manager_Email__c);
                                            }
                                        }
                                        columnNum = columnNumSec;
                                        if(!offeringCategoryMap.has($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c) ){
                                            offeringCategoryMap.set($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c,$scope.proposalTreeBulkDataRawSource.dataAssetList[i].Id);
                                            $('#offeringCateMultiSelect').append($("<option></option>").attr("value",$scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c).text($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c));
                                        }
                                    }
                                    else {
                                         $scope.offeringsRow.set($scope.proposalTreeBulkDataRawSource.dataAssetList[i].BU__c + ':' + $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c+ ':' +$scope.proposalTreeBulkDataRawSource.dataAssetList[i].Id + ':', {
                                            country: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].BU__c, 
                                            offCat: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c, 
                                            primOffName: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Asset_Name__c, 
                                            primOffId: $scope.proposalTreeBulkDataRawSource.dataAssetList[i].Id, 
                                            secOffName: '', 
                                            secOffId: '', 
                                            selections:{['column_'+columnNum+'_1']: angular.copy($scope.offSelectionMaster)}
                                        });

                                       
                                        if($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Commercial_Owner_Email__c != undefined){
                                            $scope.offeringwithCommIDMap.set($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Id,$scope.proposalTreeBulkDataRawSource.dataAssetList[i].Commercial_Owner_Email__c);
                                        }
                                        if(!offeringCategoryMap.has($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c) ){
                                            offeringCategoryMap.set($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c,$scope.proposalTreeBulkDataRawSource.dataAssetList[i].Id);
                                            $('#offeringCateMultiSelect').append($("<option></option>").attr("value",$scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c).text($scope.proposalTreeBulkDataRawSource.dataAssetList[i].Geo_Level__c));
                                        }
                                    }
                                }

                                $scope.offRowitemsToArray = Array.from($scope.offeringsRow.values()); 
                                $scope.applyChanges();

                                
                            }  
                            
                            $scope.setOfferingDetailsforSecOff = function(secobj,dAObj){
                                var studyName = '';
                                var DeliveryDate = ''; 
                                var offKeyForSelection = dAObj.BU__c + ':' + dAObj.Geo_Level__c + ':' + dAObj.Data_Asset__c + ':' + secobj.IMS_Secondary_Data_Asset__c ;   
                                if($scope.offeringsRow.has(offKeyForSelection))  {
                                    studyName = '';
                                    DeliveryDate = ''; 
                                    if($scope.offeringwithaddText.has(secobj.Secondary_Asset_Name__c)){
                                        var OffFieldsAPIName = $scope.offeringwithaddText.get(secobj.Secondary_Asset_Name__c); 
                                        if(OffFieldsAPIName.split(':').length == 2){
                                            DeliveryDate = secobj[OffFieldsAPIName.split(':')[1]];
                                        }
                                        studyName = secobj[OffFieldsAPIName.split(':')[0]];
                                    }
                                    var offRow = $scope.offeringsRow.get(offKeyForSelection);
                                    for (j in offRow.selections) 
                                    {
                                        var columnNameInfo = j.split('_');
                                        var columOne;
                                        var columnNo;
                                        
                                        if(columnNameInfo !=null) {
                                            columOne = columnNameInfo[1];
                                            columnNo = columnNameInfo[2];
                                        }
                                        
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering] = angular.copy($scope.offSelectionMaster);
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].isChecked = true;
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].studyName = studyName;
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].deliveryDate = DeliveryDate;
                                    }  
                                } 
                            }
                            
                            $scope.setOfferingDetailsforPriOff = function(priObj){
                                var studyName = '';
                                var DeliveryDate = '';
                                var offKeyForSelection = priObj.BU__c + ':' + priObj.Geo_Level__c + ':' + priObj.Data_Asset__c + ':' ;
                                if($scope.offeringsRow.has(offKeyForSelection))  {
                                    studyName = '';
                                    DeliveryDate = ''; 
                                    var otherOffText = '';
                                    if($scope.offeringwithaddText.has(priObj.Asset_NametText__c)){
                                        var OffFieldsAPIName = $scope.offeringwithaddText.get(priObj.Asset_NametText__c); 
                                        if(OffFieldsAPIName.split(':').length == 2){
                                            DeliveryDate  = priObj[OffFieldsAPIName.split(':')[1]];
                                        }
                                        studyName = priObj[OffFieldsAPIName.split(':')[0]];
                                        
                                    }
                                    if(priObj.Asset_NametText__c == 'Other'){
                                        otherOffText = priObj.Other_Text__c;
                                    } 
                                    var offRow = $scope.offeringsRow.get(offKeyForSelection);
                                    for (j in offRow.selections) 
                                    {
                                        var columnNameInfo = j.split('_');
                                        var columOne;
                                        var columnNo;
                                        
                                        if(columnNameInfo !=null) {
                                            columOne = columnNameInfo[1];
                                            columnNo = columnNameInfo[2];
                                        }
                                        
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering] = angular.copy($scope.offSelectionMaster);
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].isChecked = true;
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].otherOffText = otherOffText;
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].studyName = studyName;
                                        offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].deliveryDate = DeliveryDate;
                                    }  
                                } 
                                
                            }

                            $scope.populateBulkSelectionOtherDetails= function(details) {
                                $scope.$log.info('in populateBulkSelectionOtherDetails:: ');
                                $scope.$log.info('details:: ' + JSON.stringify(details));
                                var columnNameInfo = details.columnName.split('_');
                                if(columnNameInfo.length == 2){
                                    if(details.isCancelled) {
                                        $scope.displayUseColumn.columns[details.columnName].selectedUse = $scope.useListDropDownMap.get('-1:-1');
                                        $scope.displayUseColumn.columns[details.columnName].otherUseText = '';
                                    } else {
                                        $scope.displayUseColumn.columns[details.columnName].otherUseText = details.OtherUseName;
                                    }
                                }
                                if(columnNameInfo.length == 3){
                                    if(details.offeringRow != null && details.offeringRow != 'undefined') {
                                        var offeringSelection = details.offeringRow.selections[details.columnName];
                                        if(details.isCancelled) {
                                            offeringSelection.isChecked = false;
                                        } else {
                                            //offeringSelection.otherUseText = details.OtherUseName;
                                            offeringSelection.otherOffText = details.OtherOfferingName;
                                            offeringSelection.studyName = details.OffStudyName;
                                            offeringSelection.deliveryDate = details.offDeliveryDate;
                                        }
                                        details.offeringRow.selections[details.columnName] = offeringSelection;
                                    }
                                }
                                $scope.movetoFilterSection();
                                $scope.$log.info('$scope.offeringsRow5:: ' + JSON.stringify($scope.offeringsRow));                            
                            }

                            $scope.openOtherInfoPopup = function(offeringRow, columnName, isOtherUse, isOtherOffering, isOffStudyNameRequired, isOffDeliveryDateRequired,validDateFunction, offDescLabel, offDeliveryDateLabel) {
                                $scope.$log.info('in openOtherInfoPopup:: ');
                                $scope.$log.info('isOtherUse:: ' + JSON.stringify(isOtherUse));
                                $scope.$log.info('isOtherOffering:: ' + JSON.stringify(isOtherOffering));
                                $scope.$log.info('isOtherUse:: ' + JSON.stringify(isOffStudyNameRequired));
                                $scope.$log.info('isOtherOffering:: ' + JSON.stringify(isOffDeliveryDateRequired));
                            
                                var modalInstanceVar = $modal.open( {
                                    templateUrl: 'idOtherInfoPopUp.html',
                                    controller: OtherInfoPopupUpCtrl,
                                    backdrop: 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve: {
                                        dataFromParent: function () {
                                            if($scope.modalParameters == null) {
                                                $scope.modalParameters = {};
                                            }
                                            //$scope.modalParameters.applyChanges = $scope.applyChanges;
                                            $scope.modalParameters.validDateFunctionVar = validDateFunction;
                                            $scope.modalParameters.isOtherUsePresent = isOtherUse;
                                            $scope.modalParameters.isOtherOfferingPresent = isOtherOffering;
                                            $scope.modalParameters.isOffStudyNamePresent = isOffStudyNameRequired;
                                            $scope.modalParameters.isOffDeliveryDatePresent = isOffDeliveryDateRequired;
                                            $scope.modalParameters.offeringRow = offeringRow;
                                            $scope.modalParameters.columnName = columnName;
                                            $scope.modalParameters.populateBulkSelectionOtherDetails =  $scope.populateBulkSelectionOtherDetails;
                                            $scope.modalParameters.collectOtherInfoLabel = 'Please provide below information'; //$scope.mlObj.labelsAndButtons.collectOtherInfoLabel;
                                            $scope.modalParameters.OtherUseNameLabel = 'Please provide othe USE name'; //$scope.mlObj.labelsAndButtons.OtherUseNameLabel;
                                            $scope.modalParameters.OtherOfferingNameLabel = 'Please add description for the selected \'Other\' Offering.'; //$scope.mlObj.labelsAndButtons.OtherOfferingNameLabel;
                                            $scope.modalParameters.OfferingStudyNameLabel = offDescLabel; //$scope.mlObj.labelsAndButtons.OtherUseNameLabel;
                                            $scope.modalParameters.OfferingDeliveryDateLabel = offDeliveryDateLabel; //$scope.mlObj.labelsAndButtons.OtherOfferingNameLabel;
                                            $scope.modalParameters.CancelBtn = 'Cancel'; //$scope.mlObj.labelsAndButtons.CancelBtn;
                                            $scope.modalParameters.ContinueBtn = 'Continue'; //$scope.mlObj.labelsAndButtons.ContinueBtn;
                                                    
                                            return $scope.modalParameters;
                                        }
                                    }
                                });
                            }

                            var OtherInfoPopupUpCtrl = function($scope, $modalInstance, dataFromParent) {
                                $scope.dataFromParent = dataFromParent;
                                $scope.dataFromParent.otherInfo = {};
                                $scope.dataFromParent.otherInfo.OtherUseName = '';
                                $scope.dataFromParent.otherInfo.OtherOfferingName = '';
                                $scope.dataFromParent.otherInfo.OffStudyName = '';
                                $scope.dataFromParent.otherInfo.offDeliveryDate = '';
                                $scope.dataFromParent.otherInfo.isCancelled = false;
                                $scope.dataFromParent.otherInfo.offeringRow = $scope.dataFromParent.offeringRow;
                                $scope.dataFromParent.otherInfo.columnName = $scope.dataFromParent.columnName;
                                $scope.dataFromParent.ErrorMsg = '';

                                $scope.otherInfoPopupCancel =  function() {
                                    $scope.dataFromParent.otherInfo.isCancelled = true;
                                    $scope.dataFromParent.populateBulkSelectionOtherDetails($scope.dataFromParent.otherInfo);                                
                                    $modalInstance.close();
                                }

                                $scope.continuePopulatingOtherInfo = function() {
                                    console.log("name :::" + $scope.dataFromParent.otherInfo.OffStudyName );
                                    if(($scope.dataFromParent.isOtherUsePresent && $scope.dataFromParent.otherInfo.OtherUseName == '')
                                        ||($scope.dataFromParent.isOtherOfferingPresent && $scope.dataFromParent.otherInfo.OtherOfferingName == '')
                                        ||($scope.dataFromParent.isOffStudyNamePresent && $scope.dataFromParent.otherInfo.OffStudyName == '')
                                        ||($scope.dataFromParent.isOffDeliveryDatePresent && !$scope.dataFromParent.validDateFunctionVar($scope.dataFromParent.otherInfo.offDeliveryDate.trim(),'mm/dd/yyyy'))){
                                        $scope.dataFromParent.ErrorMsg = "Please Enter Required Information in correct Format";
                                        return;
                                    }
                                    else if(($scope.dataFromParent.isOtherOfferingPresent && $scope.dataFromParent.otherInfo.OtherOfferingName != '' && $scope.dataFromParent.otherInfo.OtherOfferingName.trim().length > 255)
                                        ||($scope.dataFromParent.isOffStudyNamePresent && $scope.dataFromParent.otherInfo.OffStudyName != '' && $scope.dataFromParent.otherInfo.OffStudyName.trim().length > 255)){
                                        $scope.dataFromParent.ErrorMsg = "Offering text should not exceed 255 characters";
                                        return;
                                    }
                                    $scope.dataFromParent.populateBulkSelectionOtherDetails($scope.dataFromParent.otherInfo);
                                    $modalInstance.close();
                                }                            
                            }

                            OtherInfoPopupUpCtrl.$inject = ['$scope', '$modalInstance', 'dataFromParent'];
                            //*** Bulk TPA Request Section End ***//
                            
                            //****** popup template models start ******//
                            $scope.allObjects = [];
                            $scope.showRequiresAMAforUSeOffering = function() {
                                $scope.$log.info('Request Type and requires::::'+$scope.requiresAMADataforUseOffering +'type'+$scope.requestType +'isUSprescriberLevelData'+$scope.isUSPrescLvlData);
                                if($scope.requiresAMADataforUseOffering && ($scope.requestType == 'edit' || $scope.requestType == 'clone'||$scope.requestType == 'new') &&  !$scope.selectedUSPrescriberData)
                                    $scope.popupAlert('{!$Label.TPA_AMA_select_Yes_to_prescriber_ques_as_you_have_selected_such_use_offerings}');
                            };

                            $scope.canRenew = true;
                            $scope.isOnlyReferenceDataCatSelected = false; 
                            $scope.useOfferingErrorMessage = ''; 

                            
                            $scope.loggedUser = {!LoggedInCurrentUser};
                            $scope.currentUser = {!VendorLoggedInUser}; 

                            //** Purpose and Data Assets tree models start **//
                            $scope.proposalTreeDataRawSource = {!ProposalTreeData};

                            $scope.AmaFreqDeliveryList = {!AmaFreqDeliveryData};

                            $scope.AmaDataTimePeriod = {!AmaDataTimePeriod};   
                            $scope.$log.info('AmaDataTimePeriod = ' + $scope.AmaDataTimePeriod);


                            $scope.requiresAMADataforUseOfferingList = JSON.parse('{!jsonAmaDataOffering}'); 
                            $scope.usesAndCategoryRequiresAMAData  = '{!$Setup.TPA_Settings__c.Requires_AMA_Data_For_Uses_With_Category__c}'; 

                            $scope.checkUPINPopupRequired = function() {
                                if($scope.viewModeStatus != 'VDV' && ($scope.requestType == 'edit' || $scope.requestType == 'clone' || $scope.requestType == 'renew') && $scope.showUPINPopup && $scope.isUSPrescLvlData)
                                    $scope.popupAlert('{!$Label.TPA_AMA_CMS_UPIN_Show_Popup}');
                                $scope.$log.info('$scope.showUPINPopup = ' + $scope.showUPINPopup);
                            };
                            
                            //** Data Delivery/Transmission Models start **//
                            

                            $scope.tpaRequestSubmitDetail = {};
                            $scope.objTpaRequestToEdit = {};

                            $scope.DdtFreqDeliveryList = {!DdtFreqDeliveryData};

                            //****** tpa request events start ******//
                            //*** loadForm function invokes when page loads (As Constructor) start ***//
                            $scope.objLoadUsesAndAssets; 
                            $scope.isPublicPrivateChangeOnly = false; 
                            $scope.objTpaRequestToEdit = {!ObjectTpaRequestToEdit};
							$scope.objClientandVendorCopies = {!clientandVendorCopies};
                            //$scope.objLoadUsesAndAssets = {!ObjectExistedUsesAndAssets};
                                
                            $scope.loadExistingTPARequestData = function() {
                                if($scope.objTpaRequestToEdit.is_Bulk_TPA_Request__c){
                                     $scope.setBulkMaps();
                                }
                                
                                if($scope.objLoadUsesAndAssets != null) {  
                                    $scope.objLoadUsesAndAssets.index = 99; 
                                    $scope.objLoadUsesAndAssets.isAmaTab = false;

                                    $scope.$log.info('existedTpaPurposes:  ' + $scope.objLoadUsesAndAssets.existedTpaPurposes.length);
                                    $scope.$log.info('existedTpaAssets:  ' + $scope.objLoadUsesAndAssets.existedTpaAssets.length);
                                    $scope.$log.info('existedSecTpaAssets:  ' + $scope.objLoadUsesAndAssets.existedSecTpaAssets.length);
                                    $scope.$log.info('lstIMSTPAPurpose:  ' + $scope.objLoadUsesAndAssets.lstIMSTPAPurpose.length);

                                    $scope.stIMSTPAPurposeForDescription = [];

                                    $scope.mapIdWithCategoryJunction = {};
                                    angular.forEach($scope.objLoadUsesAndAssets.lstIMSTPAPurpose, function(objIMSPurpose) {
                                        $scope.$log.info('objIMSPurpose.id' + JSON.stringify(objIMSPurpose.Id));
                                        $scope.mapIdWithCategoryJunction[objIMSPurpose.Id] = objIMSPurpose.IMS_TPA_Purpose_Categories__r;
                                    });

                                    $scope.$log.info('In loadExistingTPARequestData: $scope.mapIdWithCategoryJunction' + JSON.stringify($scope.mapIdWithCategoryJunction));
                                    $scope.$log.info('$scope.mapIdWithCategoryJunction' + $scope.mapIdWithCategoryJunction.size);

                                    $scope.oldSecDataAsset = {};
                                    $scope.oldSecDataAssetHolder = [];
                                    angular.forEach($scope.objLoadUsesAndAssets.existedSecTpaAssets, function(objSecDataAsset) {
                                        if($scope.oldSecDataAsset.hasOwnProperty(objSecDataAsset.TPA_Data_Asset__c)) {
                                            $scope.oldSecDataAssetHolder = $scope.oldSecDataAsset[objSecDataAsset.TPA_Data_Asset__c];
                                        }
                                        else {
                                            $scope.oldSecDataAssetHolder = [];
                                        }
                                        $scope.oldSecDataAssetHolder.push(objSecDataAsset);
                                        $scope.oldSecDataAsset[objSecDataAsset.TPA_Data_Asset__c] = $scope.oldSecDataAssetHolder;
                                    }); 

                                    $scope.$log.info('$scope.oldSecDataAsset' + $scope.oldSecDataAsset.size + JSON.stringify($scope.oldSecDataAsset));

                                    angular.forEach($scope.objLoadUsesAndAssets.existedTpaPurposes, function(objRemovedUse) {
                                        //$scope.$log.info('In removed use : objRemovedUse.Id : ' + JSON.stringify(objRemovedUse));
                                        if(!objRemovedUse.Purpose__r.Is_Active__c) {
                                            $scope.$log.info('In removed use inactive case ');
                                            if(objRemovedUse.Purpose__r.New_IMS_TPA_Purpose__c != null) {
                                                $scope.$log.info('In removed use inactive case1111111111111 ');
                                                $scope.objLoadUsesAndAssets.usesMappedToAnotherUse.push(objRemovedUse.Purpose__c 
                                                                                    + ':' 
                                                                                    + objRemovedUse.BU__c 
                                                                                    + ':'
                                                                                    + objRemovedUse.TPA_Purpose_Category__c
                                                                                    + ':'
                                                                                    + objRemovedUse.Purpose__r.New_IMS_TPA_Purpose__c
                                                                                    + ':'
                                                                                    + objRemovedUse.Purpose__r.New_IMS_TPA_Purpose__r.Primary_Purpose_Name__c
                                                                                    + ':'
                                                                                    + objRemovedUse.Purpose__r.New_TPA_Purpose_Category__c
                                                                                    + ':'
                                                                                    + objRemovedUse.Purpose__r.New_TPA_Purpose_Category__r.Category_Name__c);
                                                $scope.stIMSTPAPurposeForDescription.push(objRemovedUse.Purpose__r.New_IMS_TPA_Purpose__c+objRemovedUse.Purpose__r.New_TPA_Purpose_Category__c);
                                            }
                                            else {
                                                $scope.objLoadUsesAndAssets.removedUses.push(objRemovedUse.Purpose__r.Primary_Purpose_Name__c
                                                                            + ':'
                                                                            + objRemovedUse.BU__c 
                                                                            + ':'
                                                                            + objRemovedUse.TPA_Purpose_Category__r.Category_Name__c);
                                            }
                                            $scope.$log.info('useAssetObj.usesMappedToAnotherUse: ' + $scope.objLoadUsesAndAssets.usesMappedToAnotherUse.length);
                                            $scope.$log.info('stIMSTPAPurposeForDescription : ' + $scope.stIMSTPAPurposeForDescription.length);
                                            $scope.$log.info('useAssetObj.removedUses : ' + $scope.objLoadUsesAndAssets.removedUses.length);
                                        }
                                        else {
                                            $scope.$log.info('@@@Reached123');
                                            $scope.lstPurposeCategory = [];
                                            $scope.lstPurposeCategory = $scope.mapIdWithCategoryJunction[objRemovedUse.Purpose__c];
                                            $scope.$log.info('@@@List is::' + JSON.stringify($scope.lstPurposeCategory));
                                            
                                            let keepGoingLstPurposeCategoryLoop = true; 
                                            angular.forEach($scope.lstPurposeCategory.records, function(objPurposeCategory) {
                                                if(keepGoingLstPurposeCategoryLoop) { 
                                                    if(objPurposeCategory.IMS_TPA_Purpose__c ==  objRemovedUse.Purpose__c && !objPurposeCategory.isActive__c && objPurposeCategory.TPA_Purpose_Category__c == objRemovedUse.TPA_Purpose_Category__c  ) {
                                                        $scope.$log.info('@@@Reached12311');
                                                        if(objPurposeCategory.New_TPA_Purpose_Category__c == null) {
                                                            $scope.$log.info('@@@Reached12322');
                                                            $scope.objLoadUsesAndAssets.removedUses.push(objRemovedUse.Purpose__r.Primary_Purpose_Name__c
                                                                                        + ':'
                                                                                        + objRemovedUse.BU__c
                                                                                        + ':'
                                                                                        + objRemovedUse.TPA_Purpose_Category__r.Category_Name__c);
                                                        }
                                                        else {
                                                            $scope.$log.info('@@@Reached12333');
                                                            $scope.objLoadUsesAndAssets.usesMappedToAnother.push(objRemovedUse.Purpose__r.Primary_Purpose_Name__c
                                                                                                + ':'
                                                                                                + objRemovedUse.BU__c
                                                                                                + ':'
                                                                                                + objRemovedUse.TPA_Purpose_Category__r.Category_Name__c
                                                                                                + ':'
                                                                                                + objPurposeCategory.New_TPA_Purpose_Category__c
                                                                                                + ':'
                                                                                                + objPurposeCategory.New_TPA_Purpose_Category__r.Category_Name__c
                                                                                                + ':'
                                                                                                + objRemovedUse.Purpose__c
                                                                                                + ':'
                                                                                                + objRemovedUse.TPA_Purpose_Category__c);
                                                            $scope.stIMSTPAPurposeForDescription.push(objRemovedUse.Purpose__c+objPurposeCategory.New_TPA_Purpose_Category__c);
                                                        }
                                                        $scope.$log.info('useAssetObj.usesMappedToAnother: ' + $scope.objLoadUsesAndAssets.usesMappedToAnother.length);
                                                        $scope.$log.info('stIMSTPAPurposeForDescription : ' + $scope.stIMSTPAPurposeForDescription.length);
                                                        $scope.$log.info('useAssetObj.removedUses : ' + $scope.objLoadUsesAndAssets.removedUses.length);
                                                        keepGoingLstPurposeCategoryLoop = false; 
                                                    }
                                                }
                                            });
                                        }        
                                    });
                                    $scope.$log.info('@@@stIMSTPAPurposeForDescription List is::' + JSON.stringify($scope.stIMSTPAPurposeForDescription));
                                
                                    $scope.$log.info('@@@Reached2');
                                    angular.forEach($scope.objLoadUsesAndAssets.existedTpaAssets, function(objRemovedOffering) {
                                        //$scope.$log.info('@@@@ pri off = ' + objRemovedOffering.Asset_NametText__c);
                                        var isCategoryChanged = false;
                                        var isUseMapPresent = false;
                                        $scope.lstPurposeCategory = [];
                                        lstPurposeCategory = $scope.mapIdWithCategoryJunction[objRemovedOffering.Purpose__r.Purpose__c];
                                        //$scope.$log.info('Categories are:::'+JSON.stringify(lstPurposeCategory) );
                                        let keepGoingLstPurposeCategoryLoop = true; 
                                        angular.forEach($scope.lstPurposeCategory.records, function(objPurposeCategory) {
                                            if(keepGoingLstPurposeCategoryLoop) {
                                                if(objPurposeCategory.IMS_TPA_Purpose__c ==  objRemovedOffering.Purpose__r.purpose__c 
                                                    && !objPurposeCategory.isActive__c 
                                                    && objPurposeCategory.TPA_Purpose_Category__c == objRemovedOffering.Purpose__r.TPA_Purpose_Category__c) {
                                                    isCategoryChanged = true;
                                                    if(objPurposeCategory.New_TPA_Purpose_Category__c != null 
                                                    || (!objRemovedOffering.Purpose__r.Purpose__r.Is_Active__c 
                                                        &&  objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c != null)) {
                                                        isUseMapPresent = true;
                                                    }
                                                    keepGoingLstPurposeCategoryLoop = false; 
                                                }
                                            }
                                        });

                                        $scope.$log.info('Category CHanged?'+isCategoryChanged );
                                        $scope.$log.info('Use Map Present?'+isUseMapPresent );
                                        if( ( !objRemovedOffering.Purpose__r.Purpose__r.Is_Active__c  
                                            && objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c == null
                                            )
                                            || objRemovedOffering.Data_Asset__c == null
                                            || objRemovedOffering.Data_Asset__r.BU__c == null
                                            || objRemovedOffering.BU__c == null
                                            || objRemovedOffering.Data_Asset__r.BU__c.indexOf(objRemovedOffering.BU__c) == -1
                                            || isCategoryChanged
                                            || !objRemovedOffering.Data_Asset__r.Is_Active__c
                                        ) {
                                            $scope.$log.info('@@@@ in removing if');
                                            $scope.oldSecDataAssetHolder = $scope.oldSecDataAsset[objRemovedOffering.Id];
                                            if(objRemovedOffering.Purpose__r.Purpose__r.Is_Active__c 
                                                && objRemovedOffering.Data_Asset__c != null 
                                                && objRemovedOffering.Data_Asset__r.BU__c != null 
                                                && objRemovedOffering.BU__c != null 
                                                && objRemovedOffering.Data_Asset__r.BU__c.indexOf(objRemovedOffering.BU__c) != -1 
                                                && isUseMapPresent) {
                                                $scope.$log.info('@@@@ in removing if in isusmappresent');
                                                if($scope.oldSecDataAssetHolder != null) {
                                                    angular.forEach($scope.oldSecDataAssetHolder, function(objSecDataAsset) {
                                                        $scope.objLoadUsesAndAssets.offeringUsesMappedToAnother.push(objSecDataAsset.Secondary_Asset_Name__c+':'+objSecDataAsset.Purpose__c+':'+objRemovedOffering.BU__c+':'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+':'+objRemovedOffering.Asset_NametText__c+':'+objRemovedOffering.Purpose__r.Purpose__c);
                                                    });
                                                }
                                                else {
                                                    $scope.objLoadUsesAndAssets.offeringUsesMappedToAnother.push(objRemovedOffering.Asset_NametText__c+':'+objRemovedOffering.A_Column_Use_For_Template__c+':'+objRemovedOffering.BU__c+':'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+'::'+objRemovedOffering.Purpose__r.Purpose__c); 
                                                }
                                                $scope.$log.info('$scope.objLoadUsesAndAssets.offeringUsesMappedToAnother : ' + $scope.objLoadUsesAndAssets.offeringUsesMappedToAnother.length);
                                            }
                                            else {
                                                var isSecNotMappedwithOther = false;
                                                let keepGoingExistedSecTpaAssetsLoop = true;
                                                angular.forEach($scope.objLoadUsesAndAssets.existedSecTpaAssets, function(secobj) {
                                                    if(keepGoingExistedSecTpaAssetsLoop) {
                                                        if(objRemovedOffering.Id == secobj.TPA_Data_Asset__c) {
                                                            if(secobj.IMS_Secondary_Data_Asset__r.Map_To__c == null 
                                                            && secobj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__c == null) {
                                                                isSecNotMappedwithOther = true;
                                                                $scope.$log.info('In If isSecNotMappedwithOther ' + isSecNotMappedwithOther);
                                                                keepGoingExistedSecTpaAssetsLoop = false;
                                                            }
                                                            else {
                                                                isSecNotMappedwithOther = false;
                                                                $scope.$log.info('In else isSecNotMappedwithOther ' + isSecNotMappedwithOther);
                                                            }
                                                        }
                                                    }
                                                });
                                                if($scope.oldSecDataAssetHolder == null) {
                                                    isSecNotMappedwithOther = true;
                                                }
                                                $scope.$log.info('@@@@ in removing else $$$$$$$ inside');
                                                $scope.$log.info(objRemovedOffering.Purpose__r.Purpose__r.Is_Active__c);
                                                $scope.$log.info(objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c);
                                                $scope.$log.info(objRemovedOffering.Data_Asset__c);
                                                $scope.$log.info(objRemovedOffering.Data_Asset__r.Map_To__c);
                                                $scope.$log.info(objRemovedOffering.Data_Asset__r.Map_To_Secondary_Data_Asset__c);
                                                
                                                if( ( !objRemovedOffering.Purpose__r.Purpose__r.Is_Active__c 
                                                    && objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c == null
                                                    )
                                                    || ( ( objRemovedOffering.Data_Asset__c == null
                                                        || objRemovedOffering.Data_Asset__r.BU__c == null
                                                        || objRemovedOffering.BU__c == null
                                                        || objRemovedOffering.Data_Asset__r.BU__c.indexOf(objRemovedOffering.BU__c) == -1
                                                        || !objRemovedOffering.Data_Asset__r.Is_Active__c
                                                        )
                                                        && objRemovedOffering.Data_Asset__r.Map_To__c == null
                                                        && objRemovedOffering.Data_Asset__r.Map_To_Secondary_Data_Asset__c == null
                                                        && isSecNotMappedwithOther
                                                    )
                                                    || (isCategoryChanged && !isUseMapPresent) 
                                                ) {
                                                    $scope.$log.info('@@@@ in removing if inside******');
                                                    var PriOffNewName = '';
                                                    if(objRemovedOffering.Data_Asset__c != null) {
                                                        if(objRemovedOffering.Data_Asset__r.Map_To__c != null)   {
                                                            PriOffNewName = objRemovedOffering.Data_Asset__r.Map_To__r.Asset_Name__c;
                                                        }
                                                        else if(objRemovedOffering.Data_Asset__r.Map_To_Secondary_Data_Asset__c != null) {
                                                            PriOffNewName = objRemovedOffering.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Asset_Name__c;
                                                        }
                                                        else {
                                                            PriOffNewName = objRemovedOffering.Data_Asset__r.Asset_Name__c;
                                                        }
                                                        //$scope.$log.info('PriOffNewName : ' + PriOffNewName);
                                                    }
                                                    if($scope.oldSecDataAssetHolder != null) {
                                                        angular.forEach($scope.oldSecDataAssetHolder, function(objSecDataAsset) { 
                                                            var secOffNewName = '';
                                                            $scope.$log.info('1stt' +objSecDataAsset.Secondary_Asset_Name__c );
                                                            if(objSecDataAsset.IMS_Secondary_Data_Asset__c != null) {
                                                                if(objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To__c != null) {
                                                                    secOffNewName = objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c;
                                                                    PriOffNewName = objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Asset_Name__c;
                                                                }
                                                                else {
                                                                    secOffNewName = objSecDataAsset.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                                }
                                                                if(objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r != null) {
                                                                    PriOffNewName = objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Asset_Name__c;
                                                                }
                                                            }
                                                            //$scope.$log.info('PriOffNewName1 : ' + PriOffNewName);
                                                            //$scope.$log.info('secOffNewName : ' + secOffNewName);
                                                            if(objSecDataAsset.IMS_Secondary_Data_Asset__r.Delete_Error_Message__c != null) {
                                                                $scope.objLoadUsesAndAssets.removedOfferings.push(objSecDataAsset.Secondary_Asset_Name__c+';'+objSecDataAsset.Purpose__c+';'+objRemovedOffering.BU__c+';'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+';'+objRemovedOffering.Asset_Name__c+';'+objRemovedOffering.Purpose__r.Purpose__c + ';' + ' - ' + objSecDataAsset.IMS_Secondary_Data_Asset__r.Delete_Error_Message__c + ';' + secOffNewName + ';' + objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c); 
                                                            } else {
                                                                $scope.objLoadUsesAndAssets.removedOfferings.push(objSecDataAsset.Secondary_Asset_Name__c+';'+objSecDataAsset.Purpose__c+';'+objRemovedOffering.BU__c+';'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+';'+objRemovedOffering.Asset_Name__c+';'+objRemovedOffering.Purpose__r.Purpose__c + ';' + ' ' + ';' + secOffNewName + ';' + objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c);
                                                            }
                                                        
                                                            $scope.$log.info('111***useAssetObj.primaryOffNotToRemove' + $scope.objLoadUsesAndAssets.primaryOffNotToRemove );
                                                            $scope.$log.info('111***useAssetObj.removedOfferings' + $scope.objLoadUsesAndAssets.removedOfferings.length );
                                                        });
                                                    }
                                                    else {
                                                        //$scope.$log.info('2nd' +objRemovedOffering.Asset_NametText__c );
                                                        if( objRemovedOffering.Data_Asset__r.Delete_Error_Message__c != null ) {
                                                            $scope.objLoadUsesAndAssets.removedOfferings.push(objRemovedOffering.Asset_Name__c+';'+objRemovedOffering.A_Column_Use_For_Template__c+';'+objRemovedOffering.BU__c+';'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+';;'+objRemovedOffering.Purpose__r.Purpose__c + ';' + ' - ' + objRemovedOffering.Data_Asset__r.Delete_Error_Message__c  + ';' + PriOffNewName + ';' + objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c); 
                                                        } else {
                                                            $scope.objLoadUsesAndAssets.removedOfferings.push(objRemovedOffering.Asset_Name__c+';'+objRemovedOffering.A_Column_Use_For_Template__c+';'+objRemovedOffering.BU__c+';'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+';;'+objRemovedOffering.Purpose__r.Purpose__c + ';' + ' '  + ';' + PriOffNewName + ';' + objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c);
                                                        }
                                                        $scope.$log.info('111***useAssetObj.removedOfferings' + $scope.objLoadUsesAndAssets.removedOfferings.length );
                                                    }
                                                }
                                            }
                                        }
                                        else {
                                            $scope.$log.info('@@@@ in removing else');
                                            $scope.oldSecDataAssetHolder = $scope.oldSecDataAsset[objRemovedOffering.Id];
                                            $scope.$log.info('$scope.oldSecDataAssetHolder' + $scope.oldSecDataAssetHolder);
                                            if($scope.oldSecDataAssetHolder != null) {
                                                angular.forEach($scope.oldSecDataAssetHolder, function(objSecDataAsset) {  
                                                    $scope.$log.info('$scope.oldSecDataAssetHolder1210' + $scope.oldSecDataAssetHolder);
                                                    if( objSecDataAsset.IMS_Secondary_Data_Asset__c == null
                                                    || objSecDataAsset.TPA_Data_Asset__r.Data_Asset__r.BU__c == null
                                                    || objSecDataAsset.TPA_Data_Asset__r.BU__c == null
                                                    || objSecDataAsset.TPA_Data_Asset__r.Data_Asset__r.BU__c.indexOf(objSecDataAsset.TPA_Data_Asset__r.BU__c) == -1
                                                    || isCategoryChanged
                                                    || !objSecDataAsset.TPA_Data_Asset__r.Purpose__r.TPA_Purpose_Category__r.isActive__c
                                                    || !objSecDataAsset.IMS_Secondary_Data_Asset__r.Is_Active__c) {
                                                        $scope.$log.info('@@@@ in removing else121');
                                                        if(isUseMapPresent) {
                                                            $scope.$log.info('@@@@ in removing else1212');
                                                            $scope.objLoadUsesAndAssets.offeringUsesMappedToAnother.push(objSecDataAsset.Secondary_Asset_Name__c+':'+objSecDataAsset.Purpose__c+':'+objRemovedOffering.BU__c+':'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+':'+objRemovedOffering.Asset_NametText__c+':'+objRemovedOffering.Purpose__r.Purpose__c); //Modified by C.P.Pandey under Issue-8002
                                                            $scope.$log.info('$scope.objLoadUsesAndAssets.offeringUsesMappedToAnother : ' + $scope.objLoadUsesAndAssets.offeringUsesMappedToAnother.length);
                                                        }
                                                        else {
                                                            $scope.$log.info('@@@@ in removing else1213');
                                                            if( ( !objRemovedOffering.Purpose__r.Purpose__r.Is_Active__c 
                                                                && objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c == null
                                                                )
                                                            || ( objSecDataAsset.IMS_Secondary_Data_Asset__c == null 
                                                                || (objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To__c == null
                                                                && objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__c == null)
                                                                )
                                                            ) {
                                                                $scope.$log.info('@@@@ in removing else1214');
                                                                let secOffNewName = '';
                                                                //$scope.$log.info('3rd' +objSecDataAsset.Secondary_Asset_Name__c );
                                                                if(objSecDataAsset.IMS_Secondary_Data_Asset__c != null) {
                                                                    if(objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To__c != null) {
                                                                        secOffNewName = objSecDataAsset.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c;
                                                                    }
                                                                    else {
                                                                        secOffNewName = objSecDataAsset.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                                    }
                                                                    //$scope.$log.info('secOffNewName111111111111 : ' + secOffNewName);
                                                                }
                                                                if(objSecDataAsset.IMS_Secondary_Data_Asset__r.Delete_Error_Message__c != null) {
                                                                    $scope.objLoadUsesAndAssets.removedOfferings.push(objSecDataAsset.Secondary_Asset_Name__c+';'+objSecDataAsset.Purpose__c+';'+objRemovedOffering.BU__c+';'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+';'+objRemovedOffering.Asset_Name__c+';'+objRemovedOffering.Purpose__r.Purpose__c + ';' + ' - ' + objSecDataAsset.IMS_Secondary_Data_Asset__r.Delete_Error_Message__c + ';' + secOffNewName + ';' + objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c); //Modified by C.P.Pandey under Issue-8002// Updated by Babita Dadarwal under Issue-08461 and ER-2593
                                                                } else {
                                                                    $scope.objLoadUsesAndAssets.removedOfferings.push(objSecDataAsset.Secondary_Asset_Name__c+';'+objSecDataAsset.Purpose__c+';'+objRemovedOffering.BU__c+';'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+';'+objRemovedOffering.Asset_Name__c+';'+objRemovedOffering.Purpose__r.Purpose__c + ';' + ' ' + ';' + secOffNewName + ';' + objRemovedOffering.Purpose__r.Purpose__r.New_IMS_TPA_Purpose__c);
                                                                }
                                                                $scope.objLoadUsesAndAssets.primaryOffNotToRemove.push(objSecDataAsset.Secondary_Asset_Name__c+':'+objSecDataAsset.Purpose__c+':'+objRemovedOffering.BU__c+':'+objRemovedOffering.Purpose__r.TPA_Purpose_Category__r.Category_Name__c+':'+objRemovedOffering.Asset_Name__c+':'+objRemovedOffering.Purpose__r.Purpose__c); //Modified by C.P.Pandey under Issue-8002
                                                                $scope.$log.info('111***useAssetObj.removedOfferings1111111111111' + $scope.objLoadUsesAndAssets.removedOfferings.length );
                                                                $scope.$log.info('111***useAssetObj.primaryOffNotToRemove1111111111111' + $scope.objLoadUsesAndAssets.primaryOffNotToRemove );
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                        }
                                    });

                                    
                                    angular.forEach($scope.stIMSTPAPurposeForDescription, function(tpaPurposeDescId){
                                        $scope.objLoadUsesAndAssets.lstIMSTPADescription.push($scope.objLoadUsesAndAssets.mapIMSTPADescription[tpaPurposeDescId]);
                                    });
                                    $scope.$log.info('@@@$scope.objLoadUsesAndAssets.lstIMSTPADescription List is::  ' + $scope.objLoadUsesAndAssets.lstIMSTPADescription.length + JSON.stringify($scope.objLoadUsesAndAssets.lstIMSTPADescription));
                                    
                                    $scope.existedTpaPurposesMap = {};
                                    $scope.existedTpaPurpDescMap = {};
                                    $scope.existedTpaPurpDesc = [];

                                    angular.forEach($scope.objLoadUsesAndAssets.existedTpaPurposes, function(tpaPurpObj) {
                                        var TPA_Purpose__c = {};
                                        TPA_Purpose__c['Name'] = tpaPurpObj.Name;
                                        TPA_Purpose__c['Purpose__c'] =  tpaPurpObj.Purpose__c;
                                        TPA_Purpose__c['BU__c'] = tpaPurpObj.BU__c;
                                        TPA_Purpose__c['Purpose_Region__c'] = tpaPurpObj.Purpose_Region__c;
                                        TPA_Purpose__c['TPA_Purpose_Category__c'] =  tpaPurpObj.TPA_Purpose_Category__c;
                                        TPA_Purpose__c['Other_Details__c'] = tpaPurpObj.Other_Details__c;
                                        TPA_Purpose__c['Other_Text__c'] =  tpaPurpObj.Other_Details__c;
                                        $scope.existedTpaPurposesMap[tpaPurpObj.Id] = TPA_Purpose__c;
                                        $scope.objLoadUsesAndAssets.mapIdWithName[tpaPurpObj.Purpose__c] = tpaPurpObj.Purpose__r.Primary_Purpose_Name__c;
                                    });

                                    $scope.$log.info('@@@$scope.existedTpaPurposesMap is::  ' + $scope.existedTpaPurposesMap.length + JSON.stringify($scope.existedTpaPurposesMap));
                                    $scope.$log.info('@@@$scope.objLoadUsesAndAssets.mapIdWithName List is::  ' + $scope.objLoadUsesAndAssets.mapIdWithName.length + JSON.stringify($scope.objLoadUsesAndAssets.mapIdWithName));
                                    

                                    $scope.existedTpaPurpDesc = $scope.objLoadUsesAndAssets.existedTpaPurpDesc;
                                    //$scope.$log.info('@@@$scope.existedTpaPurpDesc::' + JSON.stringify($scope.existedTpaPurpDesc));
                                    angular.forEach($scope.existedTpaPurpDesc, function(tpaPurpDescOther) {
                                        //$scope.$log.info('@@@$scope.tpaPurpDescOther::' + JSON.stringify(tpaPurpDescOther));
                                        var TPA_Purpose_Description__c = {};
                                        TPA_Purpose_Description__c['Other_Details__c'] = tpaPurpDescOther.Other_Details__c;
                                        TPA_Purpose_Description__c['Description__c'] = tpaPurpDescOther.Description__c;
                                        TPA_Purpose_Description__c['Description_Text__c'] = tpaPurpDescOther.Description_Text__c;
                                        $scope.existedTpaPurpDescMap[tpaPurpDescOther.Purpose__c] = TPA_Purpose_Description__c;
                                    });
                                    $scope.$log.info('@@@$scope.existedTpaPurposesMap::' + JSON.stringify($scope.existedTpaPurposesMap));
                                    $scope.$log.info('@@@$scope.existedTpaPurpDescMap::' + JSON.stringify($scope.existedTpaPurpDescMap));
                                    
                                    $scope.$log.info('loadAssets0');
                                    $scope.proposTreeObj = {!proposalTreeObjJSON};
                                    let includedOtherPurpCat = '';
                                    let otherPurpCatDetail = [];
                                    $scope.RowNoForOffering = 1;
                                    if($scope.existedTpaPurposesMap != null) {
                                        $scope.$log.info('loadAssets000');
                                        angular.forEach($scope.proposTreeObj.secondarypurpose, function(secPurpObj) {
                                            //$scope.$log.info('@@@$scope.secPurpObj' + JSON.stringify(secPurpObj.Id));
                                            
                                            angular.forEach($scope.existedTpaPurposesMap, function(value, purpMapId) {
                                                //$scope.$log.info('loadAssets000' + purpMapId);
                                                //$scope.$log.info('@@@$scope.secPurpObj' + JSON.stringify(secPurpObj.Purpose__c));                                            
                                                
                                                let tpaPurposeObj = $scope.existedTpaPurposesMap[purpMapId];
                                                let purpDesc = $scope.existedTpaPurpDescMap[purpMapId].Other_Details__c + tpaPurposeObj.BU__c; 
                                                // $scope.$log.info('purpDesc' + purpDesc);
                                                if( tpaPurposeObj != null 
                                                    && (( secPurpObj.Purpose__c == tpaPurposeObj.Purpose__c 
                                                        && secPurpObj.TPA_Purpose_Category__c == tpaPurposeObj.TPA_Purpose_Category__c) 
                                                        || (tpaPurposeObj.Name == 'Other' 
                                                            && tpaPurposeObj.TPA_Purpose_Category__c == secPurpObj.TPA_Purpose_Category__c 
                                                            && ( includedOtherPurpCat.indexOf(''+tpaPurposeObj.TPA_Purpose_Category__c) == -1 
                                                                || (purpDesc != null && otherPurpCatDetail.indexOf(purpDesc) == -1))))) {
                                                    $scope.$log.info('loadAssets1');
                                                    $scope.$log.info('$scope.objLoadUsesAndAssets.translationLanguageField : ' + $scope.objLoadUsesAndAssets.translationLanguageField ); 
                            
                                                    if(tpaPurposeObj.Name == 'Other') {
                                                        includedOtherPurpCat +=  tpaPurposeObj.TPA_Purpose_Category__c + ',';
                                                        $scope.objLoadUsesAndAssets.PurposeMapOther[''+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c+$scope.existedTpaPurpDescMap[purpMapId].Other_Details__c] =  tpaPurposeObj;
                                                        $scope.$log.info('$scope.objLoadUsesAndAssets.PurposeMapOther : ' + JSON.stringify($scope.objLoadUsesAndAssets.PurposeMapOther));
                                                        $scope.$log.info('loadAssets2');
                                                        if($scope.existedTpaPurpDescMap != null) {
                                                            $scope.$log.info('loadAssets3');
                                                            $scope.objLoadUsesAndAssets.MapPurpDescOther[''+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c+$scope.existedTpaPurpDescMap[purpMapId].Other_Details__c] = $scope.existedTpaPurpDescMap[purpMapId];
                                                            $scope.$log.info('$scope.objLoadUsesAndAssets.MapPurpDescOther : ' + JSON.stringify($scope.objLoadUsesAndAssets.MapPurpDescOther));
                                                            $scope.objLoadUsesAndAssets = $scope.loadAssets($scope.objLoadUsesAndAssets, $scope.proposTreeObj, tpaPurposeObj, $scope.objLoadUsesAndAssets.existedTpaAssets, $scope.objLoadUsesAndAssets.existedSecTpaAssets,
                                                            purpMapId, secPurpObj, tpaPurposeObj.BU__c, $scope.existedTpaPurpDescMap[purpMapId].Other_Details__c, $scope.existedTpaPurpDescMap[purpMapId].Description_Text__c, $scope.objLoadUsesAndAssets.mapOfOfferingWithAdditionalFields);
                                                            
                                                            
                                                            otherPurpCatDetail.push($scope.existedTpaPurpDescMap[purpMapId].Other_Details__c + tpaPurposeObj.BU__c);
                                                            $scope.$log.info('otherPurpCatDetail : ' + JSON.stringify(otherPurpCatDetail));
                                                        }
                                                    }
                                                    else {
                                                        $scope.$log.info('loadAssets4');
                                                        $scope.objLoadUsesAndAssets.PurposeMap[''+secPurpObj.Purpose__c+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c] = tpaPurposeObj;
                                                        $scope.$log.info('$scope.objLoadUsesAndAssets.PurposeMap : ' + JSON.stringify($scope.objLoadUsesAndAssets.PurposeMap));
                                                        if($scope.existedTpaPurpDescMap[purpMapId] != null) {
                                                            $scope.objLoadUsesAndAssets.MapPurpDesc[''+secPurpObj.Purpose__c+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c] = $scope.existedTpaPurpDescMap[purpMapId];
                                                        }
                                                        $scope.$log.info('$scope.objLoadUsesAndAssets.MapPurpDesc : ' + JSON.stringify($scope.objLoadUsesAndAssets.MapPurpDesc));
                                                        $scope.objLoadUsesAndAssets = $scope.loadAssets($scope.objLoadUsesAndAssets, $scope.proposTreeObj, tpaPurposeObj, $scope.objLoadUsesAndAssets.existedTpaAssets, $scope.objLoadUsesAndAssets.existedSecTpaAssets,
                                                        purpMapId, secPurpObj, tpaPurposeObj.BU__c, '', '',  $scope.objLoadUsesAndAssets.mapOfOfferingWithAdditionalFields);

                                                        
                                                    }
                                                }
                                            });
                                        });
                                    }                            
                                }
                                $scope.loadForm();
                                $scope.$log.info('after loadForm ');

                            }
                            $scope.loadExistingTPARequestDataForVendor = function() {
                                $scope.$log.info('In loadExistingTPARequestData ');
                                
                                if($scope.objLoadUsesAndAssets != null) {  
                                    $scope.objLoadUsesAndAssets.index = 99; 
                                    //$scope.objLoadUsesAndAssets.isAmaTab = false;

                                    $scope.existedTpaPurposesMap = {};
                                    $scope.existedTpaPurpDescMap = {};
                                    $scope.existedTpaPurpDesc = [];

                                    angular.forEach($scope.objLoadUsesAndAssets.existedTpaPurposes, function(tpaPurpObj) {
                                        var TPA_Purpose__c = {};
                                        TPA_Purpose__c['Name'] = tpaPurpObj.Name;
                                        TPA_Purpose__c['Purpose__c'] =  tpaPurpObj.Purpose__c;
                                        TPA_Purpose__c['BU__c'] = tpaPurpObj.BU__c;
                                        TPA_Purpose__c['Purpose_Region__c'] = tpaPurpObj.Purpose_Region__c;
                                        TPA_Purpose__c['TPA_Purpose_Category__c'] =  tpaPurpObj.TPA_Purpose_Category__c;
                                        TPA_Purpose__c['Other_Details__c'] = tpaPurpObj.Other_Details__c;
                                        TPA_Purpose__c['Other_Text__c'] =  tpaPurpObj.Other_Details__c;
                                        $scope.existedTpaPurposesMap[tpaPurpObj.Id] = TPA_Purpose__c;
                                    });

                                    $scope.existedTpaPurpDesc = $scope.objLoadUsesAndAssets.existedTpaPurpDesc;
                                    angular.forEach($scope.existedTpaPurpDesc, function(tpaPurpDescOther) {
                                        var TPA_Purpose_Description__c = {};
                                        TPA_Purpose_Description__c['Other_Details__c'] = tpaPurpDescOther.Other_Details__c;
                                        TPA_Purpose_Description__c['Description__c'] = tpaPurpDescOther.Description__c;
                                        TPA_Purpose_Description__c['Description_Text__c'] = tpaPurpDescOther.Description_Text__c;
                                        $scope.existedTpaPurpDescMap[tpaPurpDescOther.Purpose__c] = TPA_Purpose_Description__c;
                                    });                                 
                                    
                                    $scope.proposTreeObj = {!proposalTreeObjJSON};
                                    let includedOtherPurpCat = '';
                                    let otherPurpCatDetail = [];
                                    if($scope.existedTpaPurposesMap != null) {
                                        angular.forEach($scope.proposTreeObj.secondarypurpose, function(secPurpObj) {
                                            angular.forEach($scope.existedTpaPurposesMap, function(value, purpMapId) {
                                                let tpaPurposeObj = $scope.existedTpaPurposesMap[purpMapId];
                                                let purpDesc = $scope.existedTpaPurpDescMap[purpMapId].Other_Details__c + tpaPurposeObj.BU__c; 
                                               
                                                if( tpaPurposeObj != null 
                                                    && (( secPurpObj.Purpose__c == tpaPurposeObj.Purpose__c 
                                                        && secPurpObj.TPA_Purpose_Category__c == tpaPurposeObj.TPA_Purpose_Category__c) 
                                                        || (tpaPurposeObj.Name == 'Other' 
                                                            && tpaPurposeObj.TPA_Purpose_Category__c == secPurpObj.TPA_Purpose_Category__c 
                                                            && ( includedOtherPurpCat.indexOf(''+tpaPurposeObj.TPA_Purpose_Category__c) == -1 
                                                                || (purpDesc != null && otherPurpCatDetail.indexOf(purpDesc) == -1))))) {
                                                    if(tpaPurposeObj.Name == 'Other') {
                                                        includedOtherPurpCat +=  tpaPurposeObj.TPA_Purpose_Category__c + ',';
                                                        $scope.objLoadUsesAndAssets.PurposeMapOther[''+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c+$scope.existedTpaPurpDescMap[purpMapId].Other_Details__c] =  tpaPurposeObj;
                                                        if($scope.existedTpaPurpDescMap != null) {
                                                            $scope.objLoadUsesAndAssets.MapPurpDescOther[''+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c+$scope.existedTpaPurpDescMap[purpMapId].Other_Details__c] = $scope.existedTpaPurpDescMap[purpMapId];
                                                            $scope.objLoadUsesAndAssets = $scope.loadAssetsForVendor($scope.objLoadUsesAndAssets, $scope.proposTreeObj, tpaPurposeObj, $scope.objLoadUsesAndAssets.existedTpaAssets, $scope.objLoadUsesAndAssets.existedSecTpaAssets,
                                                            purpMapId, secPurpObj, tpaPurposeObj.BU__c, $scope.existedTpaPurpDescMap[purpMapId].Other_Details__c, $scope.existedTpaPurpDescMap[purpMapId].Description_Text__c, $scope.objLoadUsesAndAssets.mapOfOfferingWithAdditionalFields);
                                                            otherPurpCatDetail.push($scope.existedTpaPurpDescMap[purpMapId].Other_Details__c + tpaPurposeObj.BU__c);
                                                        }
                                                    }
                                                    else {
                                                        $scope.objLoadUsesAndAssets.PurposeMap[''+secPurpObj.Purpose__c+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c] = tpaPurposeObj;
                                                        if($scope.existedTpaPurpDescMap[purpMapId] != null) {
                                                            $scope.objLoadUsesAndAssets.MapPurpDesc[''+secPurpObj.Purpose__c+secPurpObj.TPA_Purpose_Category__c+tpaPurposeObj.BU__c] = $scope.existedTpaPurpDescMap[purpMapId];
                                                        }
                                                            $scope.objLoadUsesAndAssets = $scope.loadAssetsForVendor($scope.objLoadUsesAndAssets, $scope.proposTreeObj, tpaPurposeObj, $scope.objLoadUsesAndAssets.existedTpaAssets, $scope.objLoadUsesAndAssets.existedSecTpaAssets,
                                                        purpMapId, secPurpObj, tpaPurposeObj.BU__c, '', '',  $scope.objLoadUsesAndAssets.mapOfOfferingWithAdditionalFields);                                                        
                                                        
                                                    }
                                                }
                                            });
                                        });
                                    }                            
                                }
                                $scope.loadForm();
                                $scope.$log.info('after loadForm ');

                            }

                            $scope.getPriDataAssetField = function(fromPriDaObj, toPriDaObj) {
                                let setPriDataAssetFields = [];
                                $scope.$log.info('getPriDataAssetField: setPriDataAssetFields: ' + '{$Label.TPA_Primary_Data_Asset_Field_Name}');
                                setPriDataAssetFields = '{!$Label.TPA_Primary_Data_Asset_Field_Name}'.split(';');
                                $scope.$log.info('getPriDataAssetField: setPriDataAssetFields: ' + setPriDataAssetFields.length);
                                angular.forEach(setPriDataAssetFields, function(filedName) {
                                    if(fromPriDaObj[filedName] != null) {
                                        toPriDaObj[filedName] = fromPriDaObj[filedName];
                                    }
                                });
                                return toPriDaObj;
                            }

                            $scope.getsecDataAsset = function(secDaObj) {
                                let secDataAssetObj = {};
                                let setSecDataAssetFields = [];
                                setSecDataAssetFields = '{!$Label.TPA_Sec_Data_Asset_Field_Name}'.split(';');
                                angular.forEach(setSecDataAssetFields, function(filedName) {
                                    if(secDaObj[filedName] != null) {
                                        secDataAssetObj[filedName] = secDaObj[filedName];
                                    }
                                });
                                $scope.$log.info('secDataAssetObj'+secDataAssetObj);
                                return secDataAssetObj;
                            } 
                            
                            $scope.parentRequestOfferingDetail = '';
                            $scope.backupParentRequestData = function(offeringKey) {
                                $scope.$log.info('offeringKey'+ JSON.stringify(offeringKey));
                                if($scope.parentRequestOfferingDetail == '') {
                                    $scope.parentRequestOfferingDetail += offeringKey;
                                } else if($scope.parentRequestOfferingDetail.indexOf(offeringKey + ';') == -1 && ($scope.parentRequestOfferingDetail.endsWith( ';' + offeringKey) == false || $scope.parentRequestOfferingDetail.indexOf( ';' + offeringKey + ';') == -1 ) && $scope.parentRequestOfferingDetail != offeringKey) {
                                    $scope.parentRequestOfferingDetail += ';' + offeringKey;
                                }  
                                $scope.$log.info('parentRequestOfferingDetail'+ JSON.stringify($scope.parentRequestOfferingDetail));                                                           
                            } 
                            $scope.childRequestOfferingDetail = '';
                            $scope.saveExcludedOfferingInRenewal = function(offeringKey) {
                                $scope.$log.info('ExcludedofferingKey1'+ JSON.stringify(offeringKey));
                                if($scope.childRequestOfferingDetail == '') {
                                    $scope.childRequestOfferingDetail += offeringKey;
                                } else if($scope.childRequestOfferingDetail.indexOf(offeringKey) == -1) {
                                    $scope.childRequestOfferingDetail += ';' + offeringKey;
                                }  
                                $scope.$log.info('childRequestOfferingDetail'+ JSON.stringify($scope.childRequestOfferingDetail));                                                           
                            }
                            $scope.getDateInString = function(dateInJS){
                                $scope.$log.info('type of dateInJS ' + (typeof dateInJS));
                                if(typeof dateInJS == 'number'){
                                    dateInJS = new Date(dateInJS);
                                    var dateJstoStr = '' + dateInJS.getUTCFullYear() + '-' + (dateInJS.getUTCMonth() + 1) + '-' +  dateInJS.getUTCDate() ;
                                    return dateJstoStr;
                                }
                                return dateInJS;
	                        }
                            $scope.loadAssets = function(useAssetObj, proposTreeObj, tpaPurposeObj, existedTpaAssets, existedSecTpaAssets, purposeId, secPurpObj, selectedRegion, Param_otherDesc, selectDes, mapOfOfferingWithAdditionalFields) {
                                $scope.$log.info('In loadAssets: ');
                                $scope.$log.info('In $scope.RowNoForOffering: ' + $scope.RowNoForOffering);

                                $scope.$log.info('tpaPurposeObj bu = ' +selectedRegion);

                                
                                // var colNumberToSet = 1;
                                // angular.forEach($scope.offeringsRow, function(offRow, index) {
                                //     if(offRow.selections['column_' + colNumberToSet + '_' + $scope.RowNoForOffering] == "" || offRow.selections['column_' + colNumberToSet + '_' + $scope.RowNoForOffering] == undefined){
                                //             offRow.selections['column_' + colNumberToSet + '_' + $scope.RowNoForOffering] = angular.copy($scope.offSelectionMaster);
                                //     }
                                //     colNumberToSet ++;
							    // });

                                $scope.$log.info('$scope.offeringsRow11:: ' + $scope.offeringsRow);
                                $scope.$log.info('$scope.offeringsRow*** 3:: ' + JSON.stringify(Array.from($scope.offeringsRow.entries())));

                                $scope.tpaAssetGroup = [];
                                $scope.secondaryTpaAssetGroup = []; 
                                $scope.wrapAssetPurposeObj = {};

                                $scope.wrapAssetPurposeObj.dataAsset = '';
                                $scope.wrapAssetPurposeObj.dataAssetBackground = '';
                                $scope.wrapAssetPurposeObj.dataAssetsInViewMode = '';
                                $scope.wrapAssetPurposeObj.translatedDataAsset = '';
                                $scope.wrapAssetPurposeObj.translatedDataAssetsInViewMode = '';
                                $scope.wrapAssetPurposeObj.translatedOfferingCategoryName = '';
                                let translationLanguageField = $scope.mlObj.selectedLanguageField;
                                $scope.wrapAssetPurposeObj.selectdataAssforOfferingAdditionDetails = '';
                                //let translationLanguageField = useAssetObj.translationLanguageField;
                                // $scope.translationLanguageFieldMap = '{!supportedLanguageMap}';
                                // $scopetranslationLanguageField = $scopetranslationLanguageFieldMap.get(language).split('~')[1];
            
                                $scope.$log.info('translationLanguageField = ' + translationLanguageField);
                                let buDataAsset = '';
                                let isSecMappedwithOther = false;

                                angular.forEach(existedTpaAssets, function(dAObj) {
                                    $scope.$log.info('Data asset in loadAssets function' + dAObj.Asset_NametText__c);
                                    $scope.$log.info('purposeId ' + purposeId + '  dAObj.Purpose__c  ' +dAObj.Purpose__c);
                                    let priDataAssetName = '';
                                    let translatedPriDataAssetName = '';

                                    if(purposeId == dAObj.Purpose__c) {
                                        $scope.secondaryTpaAssetGroup = [];
                                        if(dAObj.Data_Asset__c != null) {
                                            if(dAObj.Data_Asset__r.Map_To__c != null) {
                                                $scope.$log.info('map to is not null for ' + dAObj.Asset_NametText__c + 'map to name ' + dAObj.Data_Asset__r.Map_To__r.Asset_Name__c);

                                                var TPA_Data_Asset__c = {};
                                                TPA_Data_Asset__c['APLD_Study_Name__c'] = dAObj.APLD_Study_Name__c;
                                                TPA_Data_Asset__c['APLD_Delivery_Date__c'] = dAObj.APLD_Delivery_Date__c;
                                                TPA_Data_Asset__c['RWE_Study_Name__c'] = dAObj.RWE_Study_Name__c;
                                                TPA_Data_Asset__c['RWE_Delivery_Date__c'] = dAObj.RWE_Delivery_Date__c;
                                                TPA_Data_Asset__c['STI_Data_Report_Name__c'] = dAObj.STI_Data_Report_Name__c;
                                                TPA_Data_Asset__c['Consumer_Profile_Study_Name__c'] = dAObj.Consumer_Profile_Study_Name__c;
                                                TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'] = dAObj.Consumer_Profile_Delivery_Date__c;
                                                TPA_Data_Asset__c['Customized_Data_Text__c'] = dAObj.Customized_Data_Text__c;
                                                TPA_Data_Asset__c['Promotional_ROI_Study_Name__c'] = dAObj.Promotional_ROI_Study_Name__c;
                                                TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'] = dAObj.Promotional_ROI_Delivery_Date__c;
                                                TPA_Data_Asset__c['Asset_NametText__c'] = dAObj.Data_Asset__r.Map_To__r.Asset_Name__c;
                                                TPA_Data_Asset__c['BU__c'] = dAObj.Data_Asset__r.Map_To__r.BU__c;
                                                TPA_Data_Asset__c['Geo_Level__c'] = dAObj.Data_Asset__r.Map_To__r.Geo_Level__c;
                                                TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = dAObj.Data_Asset__r.Map_To__r.Is_IMS_AGProduct__c;
                                                //TPA_Data_Asset__c['Is_Restricted_Data__c'] = dAObj.Data_Asset__r.Map_To__r.Is_Restricted_Data__c;
                                                TPA_Data_Asset__c['Other_Data_Asset_Details__c'] = dAObj.Other_Data_Asset_Details__c;
                                                TPA_Data_Asset__c['Other_Text__c'] = dAObj.Other_Text__c;
                                                TPA_Data_Asset__c['Data_Asset__c'] = dAObj.Data_Asset__r.Map_To__c;

                                                let tpaDataAssetObj = $scope.getPriDataAssetField(dAObj,TPA_Data_Asset__c);
                                                //let offeringKey = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Secondary_Asset_Name__c + ':' + dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.BU__c;
                                                //$scope.backupParentRequestData(offeringKey);
                                                $scope.tpaAssetGroup.push(tpaDataAssetObj);
                                                //$scope.setOfferingDetailsforPriOff(TPA_Data_Asset__c);
                                                if(dAObj.Data_Asset__r.Map_To__r.Geo_Level__c != null) {
                                                    $scope.wrapAssetPurposeObj.translatedOfferingCategoryName += dAObj.Data_Asset__r.Map_To__r.Geo_Level__c + ',';
                                                }
                                                $scope.$log.info('$scope.tpaAssetGroup : ' + JSON.stringify($scope.tpaAssetGroup));
                                                $scope.$log.info('$scope.wrapAssetPurposeObj.translatedOfferingCategoryName : ' + JSON.stringify($scope.wrapAssetPurposeObj.translatedOfferingCategoryName));
                                            }
                                            else if(dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__c != null) {
                                                $scope.$log.info('Map_To_Secondary_Data_Asset__c is not null for ' + dAObj.Asset_NametText__c + 'Map_To_Secondary_Data_Asset__c name ' + dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Asset_Name__c);
                                                let isSecAlreadyInGroup = false;
                                                angular.forEach($scope.secondaryTpaAssetGroup, function(secobj) {
                                                    if(dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Secondary_Asset_Name__c == secobj.Secondary_Asset_Name__c) {
                                                        isSecAlreadyInGroup = true;
                                                    }
                                                });

                                                if(!isSecAlreadyInGroup) {
                                                    let TPA_Data_Asset__c = {};
                                                    TPA_Data_Asset__c['APLD_Study_Name__c'] = dAObj.APLD_Study_Name__c;
                                                    TPA_Data_Asset__c['APLD_Delivery_Date__c'] = dAObj.APLD_Delivery_Date__c;
                                                    TPA_Data_Asset__c['RWE_Study_Name__c'] = dAObj.RWE_Study_Name__c;
                                                    TPA_Data_Asset__c['RWE_Delivery_Date__c'] = dAObj.RWE_Delivery_Date__c;
                                                    TPA_Data_Asset__c['STI_Data_Report_Name__c'] = dAObj.STI_Data_Report_Name__c;
                                                    TPA_Data_Asset__c['Consumer_Profile_Study_Name__c'] = dAObj.Consumer_Profile_Study_Name__c;
                                                    TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'] = dAObj.Consumer_Profile_Delivery_Date__c;
                                                    TPA_Data_Asset__c['Customized_Data_Text__c'] = dAObj.Customized_Data_Text__c;
                                                    TPA_Data_Asset__c['Promotional_ROI_Study_Name__c'] = dAObj.Promotional_ROI_Study_Name__c;
                                                    TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'] = dAObj.Promotional_ROI_Delivery_Date__c;
                                                    TPA_Data_Asset__c['Asset_NametText__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Asset_Name__c;
                                                    TPA_Data_Asset__c['BU__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.BU__c;
                                                    TPA_Data_Asset__c['Geo_Level__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Geo_Level__c;
                                                    TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Is_IMS_AGProduct__c;
                                                    //TPA_Data_Asset__c['Is_Restricted_Data__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Is_Restricted_Data__c;
                                                    TPA_Data_Asset__c['Other_Data_Asset_Details__c'] = dAObj.Other_Data_Asset_Details__c;
                                                    TPA_Data_Asset__c['Other_Text__c'] = dAObj.Other_Text__c;
                                                    TPA_Data_Asset__c['Data_Asset__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__c;

                                                    $scope.tpaAssetGroup.push(TPA_Data_Asset__c);
                                                   // $scope.setOfferingDetailsforPriOff(TPA_Data_Asset__c);

                                                    let TPA_Secondary_Data_Asset__c = {};
                                                    TPA_Secondary_Data_Asset__c['Secondary_Asset_Name__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                    TPA_Secondary_Data_Asset__c['IMS_Secondary_Data_Asset__c'] = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__c;
                                                    
                                                    let offeringKey = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.BU__c 
                                                                    + ':'                                                                       
                                                                    + dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Asset_Name__c
                                                                    + ':'
                                                                    + dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                    $scope.backupParentRequestData(offeringKey);

                                                    $scope.secondaryTpaAssetGroup.push(TPA_Secondary_Data_Asset__c);
                                                    //$scope.setOfferingDetailsforSecOff(TPA_Secondary_Data_Asset__c, dAObj);
                                                    
                                                    priDataAssetName = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                    
                                                    if(dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r[translationLanguageField] == null) {
                                                        translatedPriDataAssetName = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                    } 
                                                    else {
                                                        translatedPriDataAssetName = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r[translationLanguageField];
                                                    }
                                                    
                                                    if(dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Geo_Level__c != null) {
                                                        $scope.wrapAssetPurposeObj.translatedOfferingCategoryName += dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__r.Geo_Level__c + ',';
                                                    } 
                                                    $scope.$log.info('$scope.priDataAssetName : ' + JSON.stringify(priDataAssetName));
                                                    $scope.$log.info('$scope.translatedPriDataAssetName : ' + JSON.stringify(translatedPriDataAssetName));
                                                    
                                                    $scope.$log.info('$scope.tpaAssetGroup11111 : ' + JSON.stringify($scope.tpaAssetGroup));
                                                    $scope.$log.info('$scope.wrapAssetPurposeObj.translatedOfferingCategoryName11111 : ' + JSON.stringify($scope.wrapAssetPurposeObj.translatedOfferingCategoryName));
                                                }
                                            }
                                            else {
                                                $scope.$log.info('map to is null for ' + dAObj.Asset_NametText__c);


                                                let isOneSecPresetWithNewMapping = false;
                                                isSecMappedwithOther = false;
                                                let isOnlyInactiveOfferingPresent = true;
                                            
                                                if(dAObj.Data_Asset__r.Is_Active__c && (existedSecTpaAssets == null || existedSecTpaAssets.length == 0)){
                                                    isOnlyInactiveOfferingPresent = false;
                                                }
                                                
                                                let keepGoingExistedSecTpaAssets = true;
                                                angular.forEach(existedSecTpaAssets, function(secobj) {
                                                    if(keepGoingExistedSecTpaAssets) {
                                                        if(dAObj.Id == secobj.TPA_Data_Asset__c){
                                                            if(!dAObj.Data_Asset__r.Is_Active__c){
                                                                if(secobj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__c != null || secobj.IMS_Secondary_Data_Asset__r.Map_To__c != null && secobj.IMS_Secondary_Data_Asset__r.Is_Active__c ) {
                                                                    isOnlyInactiveOfferingPresent = false;
                                                                    keepGoingExistedSecTpaAssets = false;
                                                                }
                                                                else{
                                                                    isOneSecPresetWithNewMapping = true;
                                                                }
                                                            }
                                                            else
                                                            isOnlyInactiveOfferingPresent = false;
                                                        }
                                                    }                                                     
                                                });

                                                $scope.$log.info('Final In else isOneSecPresetWithNewMapping ' + isOnlyInactiveOfferingPresent);

                                                if(isOnlyInactiveOfferingPresent && dAObj.Data_Asset__r.Geo_Level__c != null){
                                                    $scope.wrapAssetPurposeObj.translatedOfferingCategoryName += dAObj.Data_Asset__r.Geo_Level__c + ',';
                                                }
                                                $scope.$log.info('$scope.wrapAssetPurposeObj.translatedOfferingCategoryName2222 : ' + JSON.stringify($scope.wrapAssetPurposeObj.translatedOfferingCategoryName));
                                                keepGoingExistedSecTpaAssets = true;
                                                angular.forEach(existedSecTpaAssets, function(secobj) {
                                                    //$scope.$log.info('dAObj.Id: ' + dAObj.Id + ', secobj.TPA_Data_Asset__c: '+ secobj.TPA_Data_Asset__c);
                                                    if(keepGoingExistedSecTpaAssets) {
                                                        if(dAObj.Id == secobj.TPA_Data_Asset__c){
                                                            if(secobj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__c == null ) {
                                                                isOneSecPresetWithNewMapping = false;
                                                                $scope.$log.info('In If isOneSecPresetWithNewMapping ' + isOneSecPresetWithNewMapping);
                                                                keepGoingExistedSecTpaAssets = false;
                                                            }
                                                            else{
                                                                isOneSecPresetWithNewMapping = true;
                                                                $scope.$log.info('In else isOneSecPresetWithNewMapping ' + isOneSecPresetWithNewMapping);
                                                            }
                                                        }
                                                    }
                                                    
                                                });

                                                keepGoingExistedSecTpaAssets = true;
                                                angular.forEach(existedSecTpaAssets, function(secobj) {
                                                    if(keepGoingExistedSecTpaAssets) {
                                                        if(dAObj.Id == secobj.TPA_Data_Asset__c){
                                                            if(secobj.IMS_Secondary_Data_Asset__r.Map_To__c == null || secobj.IMS_Secondary_Data_Asset__r.Is_Active__c == true 
                                                            || (secobj.IMS_Secondary_Data_Asset__r.Map_To__c != null && secobj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__c == secobj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__c)) {
                                                                isSecMappedwithOther = false;
                                                                $scope.$log.info('In If isSecMappedwithOther ' + isSecMappedwithOther);
                                                                keepGoingExistedSecTpaAssets = false;
                                                            }
                                                            else {
                                                                isSecMappedwithOther = true;
                                                                $scope.$log.info('In else isSecMappedwithOther ' + isSecMappedwithOther);
                                                            }
                                                        }
                                                    }
                                                });
                                                $scope.$log.info('isOneSecPresetWithNewMapping ' + isOneSecPresetWithNewMapping);

                                                if(!isOneSecPresetWithNewMapping && !isSecMappedwithOther) {
                                                    
                                                    let TPA_Data_Asset__c = {};
                                                    TPA_Data_Asset__c['APLD_Study_Name__c'] = dAObj.APLD_Study_Name__c;
                                                    TPA_Data_Asset__c['APLD_Delivery_Date__c'] = dAObj.APLD_Delivery_Date__c;
                                                    TPA_Data_Asset__c['RWE_Study_Name__c'] = dAObj.RWE_Study_Name__c;
                                                    TPA_Data_Asset__c['RWE_Delivery_Date__c'] = dAObj.RWE_Delivery_Date__c;
                                                    TPA_Data_Asset__c['STI_Data_Report_Name__c'] = dAObj.STI_Data_Report_Name__c;
                                                    TPA_Data_Asset__c['Consumer_Profile_Study_Name__c'] = dAObj.Consumer_Profile_Study_Name__c;
                                                    TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'] = dAObj.Consumer_Profile_Delivery_Date__c;
                                                    TPA_Data_Asset__c['Customized_Data_Text__c'] = dAObj.Customized_Data_Text__c;
                                                    TPA_Data_Asset__c['Promotional_ROI_Study_Name__c'] = dAObj.Promotional_ROI_Study_Name__c;
                                                    TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'] = dAObj.Promotional_ROI_Delivery_Date__c;
                                                    TPA_Data_Asset__c['Asset_NametText__c'] = dAObj.Data_Asset__r.Asset_Name__c;
                                                    TPA_Data_Asset__c['BU__c'] = dAObj.Data_Asset__r.BU__c;
                                                    TPA_Data_Asset__c['Geo_Level__c'] = dAObj.Data_Asset__r.Geo_Level__c;
                                                    TPA_Data_Asset__c['Data_Asset__c'] = dAObj.Data_Asset__c;
                                                    TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = dAObj.Data_Asset__r.Is_IMS_AGProduct__c;
                                                    //TPA_Data_Asset__c['Is_Restricted_Data__c'] = dAObj.Data_Asset__r.Is_Restricted_Data__c;
                                                    TPA_Data_Asset__c['Other_Data_Asset_Details__c'] = dAObj.Other_Data_Asset_Details__c;
                                                    TPA_Data_Asset__c['Other_Text__c'] = dAObj.Other_Text__c;
                                                    
                                                    let tpaDataAssetObj = $scope.getPriDataAssetField(dAObj, TPA_Data_Asset__c);
                                                    $scope.tpaAssetGroup.push(tpaDataAssetObj);
                                                    //$scope.setOfferingDetailsforPriOff(TPA_Data_Asset__c);

                                                    if(dAObj.Data_Asset__r.Geo_Level__c != null) {
                                                        $scope.wrapAssetPurposeObj.translatedOfferingCategoryName += dAObj.Data_Asset__r.Geo_Level__c + ',';
                                                    } 
                                                    $scope.$log.info('$scope.tpaAssetGroup333 : ' + JSON.stringify($scope.tpaAssetGroup));
                                                    $scope.$log.info('$scope.wrapAssetPurposeObj.translatedOfferingCategoryName3333 : ' + JSON.stringify($scope.wrapAssetPurposeObj.translatedOfferingCategoryName));
                                                }
                                            }
                                        }
                                        else {
                                            $scope.$log.info('primary else part ' + dAObj.Asset_NametText__c);
                                            let TPA_Data_Asset__c = {};
                                            TPA_Data_Asset__c['APLD_Study_Name__c'] = dAObj.APLD_Study_Name__c;
                                            TPA_Data_Asset__c['APLD_Delivery_Date__c'] = dAObj.APLD_Delivery_Date__c;
                                            TPA_Data_Asset__c['RWE_Study_Name__c'] = dAObj.RWE_Study_Name__c;
                                            TPA_Data_Asset__c['RWE_Delivery_Date__c'] = dAObj.RWE_Delivery_Date__c;
                                            TPA_Data_Asset__c['STI_Data_Report_Name__c'] = dAObj.STI_Data_Report_Name__c;
                                            TPA_Data_Asset__c['Consumer_Profile_Study_Name__c'] = dAObj.Consumer_Profile_Study_Name__c;
                                            TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'] = dAObj.Consumer_Profile_Delivery_Date__c;
                                            TPA_Data_Asset__c['Customized_Data_Text__c'] = dAObj.Customized_Data_Text__c;
                                            TPA_Data_Asset__c['Promotional_ROI_Study_Name__c'] = dAObj.Promotional_ROI_Study_Name__c;
                                            TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'] = dAObj.Promotional_ROI_Delivery_Date__c;
                                            TPA_Data_Asset__c['Asset_NametText__c'] = dAObj.Asset_NametText__c;
                                            TPA_Data_Asset__c['BU__c'] = dAObj.BU__c;
                                            TPA_Data_Asset__c['Geo_Level__c'] = dAObj.Geo_Level__c;
                                            TPA_Data_Asset__c['Data_Asset__c'] = dAObj.Data_Asset__c;
                                            TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = dAObj.Is_IMS_AGProduct__c;
                                            //TPA_Data_Asset__c['Is_Restricted_Data__c'] = dAObj.Is_Restricted_Data__c;
                                            TPA_Data_Asset__c['Other_Data_Asset_Details__c'] = dAObj.Other_Data_Asset_Details__c;
                                            TPA_Data_Asset__c['Other_Text__c'] = dAObj.Other_Text__c;

                                            let tpaDataAssetObj = $scope.getPriDataAssetField(dAObj, TPA_Data_Asset__c);
                                            $scope.tpaAssetGroup.push(tpaDataAssetObj);
                                            //$scope.setOfferingDetailsforPriOff(TPA_Data_Asset__c);
                                            
                                            if(dAObj.Geo_Level__c != null) {
                                                $scope.wrapAssetPurposeObj.translatedOfferingCategoryName += dAObj.Geo_Level__c + ',';
                                            }
                                            $scope.$log.info('$scope.tpaAssetGroup4444 : ' + JSON.stringify($scope.tpaAssetGroup));
                                            $scope.$log.info('$scope.wrapAssetPurposeObj.translatedOfferingCategoryName4444 : ' + JSON.stringify($scope.wrapAssetPurposeObj.translatedOfferingCategoryName));
                                        }

                                        if(dAObj.Data_Asset__c != null) {
                                            if(dAObj.Data_Asset__r.Is_AMA_Required__c) {
                                                useAssetObj.isAmaTab = true;
                                            }
                                        }
                                        
                                        if(dAObj.Asset_NametText__c == 'Other') {
                                            if($scope.wrapAssetPurposeObj.selectdataAssDetails == null || $scope.wrapAssetPurposeObj.selectdataAssDetails.length == 0) {
                                                $scope.wrapAssetPurposeObj.selectdataAssDetails = '';
                                            }
                                            $scope.wrapAssetPurposeObj.selectdataAssDetails += ' ' + dAObj.Other_Data_Asset_Details__c + ',';
                                        }
                                        $scope.$log.info('useAssetObj.isAmaTab: ' + useAssetObj.isAmaTab);
                                        $scope.$log.info('wrapAssetPurposeObj.selectdataAssDetails ' + $scope.wrapAssetPurposeObj.selectdataAssDetails);

                                        if(mapOfOfferingWithAdditionalFields[dAObj.Asset_NametText__c] != null && mapOfOfferingWithAdditionalFields[dAObj.Asset_NametText__c] != undefined) {
                                            let fieldAndLableList = mapOfOfferingWithAdditionalFields[dAObj.Asset_NametText__c];
                                            let fieldAndLabelValue ='';
                                            fieldAndLableList.forEach(function (item) {
                                                const myArray = item.split(";");
                                                let value ;
                                                if(typeof dAObj[myArray[0]] == "number") {
                                                    const date = new Date(dAObj[myArray[0]]);
                                                    value = '' +date.getFullYear() + '-'+(date.getMonth() + 1)+'-'+date.getDate();
                                                }
                                                else {
                                                    value = dAObj[myArray[0]] + ';';
                                                }
                                                
                                                if(value != undefined)
                                                    fieldAndLabelValue += myArray[1] + '- '+value;

                                            });

                                            if(fieldAndLabelValue != '') {
                                                $scope.offeringAdditionalTextwithCountryMap[dAObj.A_Column_Use_For_Template__c +' '+ dAObj.Asset_NametText__c + ' '+ dAObj.BU__c] = 
                                                dAObj.Asset_NametText__c + fieldAndLabelValue;

                                                $scope.wrapAssetPurposeObj.selectdataAssforOfferingAdditionDetails += dAObj.Asset_NametText__c + fieldAndLabelValue+ ' ,';
                                            }

                                            
                                        }
                                        
                                        let isSecExisted = false;
                                        angular.forEach(existedSecTpaAssets, function(secDaObj) {
                                            if(dAObj.Id == secDaObj.TPA_Data_Asset__c && mapOfOfferingWithAdditionalFields[secDaObj.Secondary_Asset_Name__c] != null && mapOfOfferingWithAdditionalFields[secDaObj.Secondary_Asset_Name__c] != undefined) {
                                                let fieldAndLableList = mapOfOfferingWithAdditionalFields[secDaObj.Secondary_Asset_Name__c];
                                                let fieldAndLabelValue ='';
                                                
                                                fieldAndLableList.forEach(function (item) {
                                                    const myArray = item.split(";");
                                                    let value ;
                                                    if(typeof secDaObj[myArray[0]] == "number") {
                                                        const date = new Date(secDaObj[myArray[0]]);
                                                        value = '' +date.getFullYear() + '-'+(date.getMonth() + 1)+'-'+date.getDate();
                                                    }
                                                    else {
                                                        value = secDaObj[myArray[0]] + ';';
                                                    }
                                                    
                                                    if(value != undefined)
                                                        fieldAndLabelValue += myArray[1] + '- '+value;

                                                });
                                                if(fieldAndLabelValue != '') {
                                                    $scope.offeringAdditionalTextwithCountryMap[dAObj.A_Column_Use_For_Template__c +' '+ secDaObj.Secondary_Asset_Name__c + ' '+ dAObj.BU__c] = 
                                                    secDaObj.Secondary_Asset_Name__c + fieldAndLabelValue;

                                                    $scope.wrapAssetPurposeObj.selectdataAssforOfferingAdditionDetails += secDaObj.Secondary_Asset_Name__c + fieldAndLabelValue+ ' ,';
                                                }                                                
                                            }

                                            let secDataAssetName = '';
                                            let translatedSecDataAssetName = '';
                                            if(dAObj.Id == secDaObj.TPA_Data_Asset__c) {
                                                if(secDaObj.IMS_Secondary_Data_Asset__c != null) {
                                                    if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To__c != null){
                                                        let isSecAlreadyInGroup = false;
                                                        angular.forEach($scope.secondaryTpaAssetGroup, function(secobj) {
                                                            if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c == secobj.Secondary_Asset_Name__c) {
                                                                isSecAlreadyInGroup = true;
                                                            }
                                                        });
                                                        if(!isSecAlreadyInGroup) {
                                                            let secDataAssetObj = {};
                                                            secDataAssetObj = $scope.getsecDataAsset(secDaObj);
                                                            secDataAssetObj.IMS_Secondary_Data_Asset__c = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__c;
                                                            secDataAssetObj.Secondary_Asset_Name__c = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c;
                                                            let key = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__c+':'+secPurpObj.Purpose__c+':'+secPurpObj.TPA_Purpose_Category__c+':'+secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.BU__c+':'+Param_otherDesc;
                                                            //let offeringKey = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c + ':' + secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.BU__c;
                                                            let offeringKey = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.BU__c 
                                                                    + ':'                                                                       
                                                                    + secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Asset_Name__c
                                                                    + ':'
                                                                    + secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c;
                                                            $scope.backupParentRequestData(offeringKey);
                                                            secDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c;
                                                            if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r[translationLanguageField] == null) {
                                                                translatedSecDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Secondary_Asset_Name__c;
                                                            }
                                                            else {
                                                                translatedSecDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r[translationLanguageField];
                                                            }

                                                            if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__c != secDaObj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__c) {
                                                                $scope.$log.info('in if condition:');
                                                                let TPA_Data_Asset__c = {};
                                                                TPA_Data_Asset__c['Asset_NametText__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Asset_Name__c;
                                                                TPA_Data_Asset__c['BU__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.BU__c;
                                                                TPA_Data_Asset__c['Geo_Level__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Geo_Level__c;
                                                                TPA_Data_Asset__c['Data_Asset__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__c;
                                                                TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Is_IMS_AGProduct__c;
                                                                //TPA_Data_Asset__c['Is_Restricted_Data__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Is_Restricted_Data__c;
                                                                
                                                                $scope.tpaAssetGroup.push(TPA_Data_Asset__c);
                                                               // $scope.setOfferingDetailsforPriOff(TPA_Data_Asset__c);
                                                                if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Geo_Level__c != null) {
                                                                    $scope.wrapAssetPurposeObj.translatedOfferingCategoryName += secDaObj.IMS_Secondary_Data_Asset__r.Map_To__r.Primary_Data_Asset__r.Geo_Level__c + ',';
                                                                } 
                                                                if(!useAssetObj.mapSecondayDataAssetToInsert.hasOwnProperty(key)) {
                                                                    let tempList = [];
                                                                    tempList.push(secDataAssetObj);
                                                                    useAssetObj.mapSecondayDataAssetToInsert[key] = tempList;
                                                                } else {
                                                                    useAssetObj.mapSecondayDataAssetToInsert[key].push(secDataAssetObj);
                                                                }
                                                            }
                                                            else{
                                                                $scope.secondaryTpaAssetGroup.push(secDataAssetObj);
                                                               // $scope.setOfferingDetailsforSecOff(secDataAssetObj,dAObj);
                                                            }

                                                        }
                                                    }
                                                    else if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__c != null){
                                                        $scope.$log.info('in else');
                                                        $scope.$log.info('secDaObj.Map_To_Primary_Data_Asset__c' + secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Asset_Name__c);
                                                        let TPA_Data_Asset__c = {};
                                                        TPA_Data_Asset__c['Asset_NametText__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Asset_Name__c;
                                                        TPA_Data_Asset__c['BU__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.BU__c;
                                                        TPA_Data_Asset__c['Geo_Level__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Geo_Level__c;
                                                        TPA_Data_Asset__c['Data_Asset__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__c;
                                                        TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Is_IMS_AGProduct__c;
                                                        //TPA_Data_Asset__c['Is_Restricted_Data__c'] = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Is_Restricted_Data__c;
                                                        
                                                        $scope.tpaAssetGroup.push(TPA_Data_Asset__c);
                                                        //$scope.setOfferingDetailsforPriOff(TPA_Data_Asset__c);
                                                        if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Geo_Level__c != null) {
                                                            $scope.wrapAssetPurposeObj.translatedOfferingCategoryName += secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Geo_Level__c + ',';
                                                        } 
                                                        secDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Asset_Name__c;
                                                        if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r[translationLanguageField] == null) {
                                                            translatedSecDataAssetName  = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r.Asset_Name__c;
                                                        }
                                                        else {
                                                            translatedSecDataAssetName  = secDaObj.IMS_Secondary_Data_Asset__r.Map_To_Primary_Data_Asset__r[translationLanguageField];
                                                        }
                                                    }
                                                    else if(secDaObj.IMS_Secondary_Data_Asset__r.Map_To__c == null){
                                                        let secDataAssetObj = {};
                                                        secDataAssetObj = $scope.getsecDataAsset(secDaObj);
                                                        secDataAssetObj.Secondary_Asset_Name__c = secDaObj.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                        //let offeringKey = secDaObj.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c + ':' + secDaObj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__r.BU__c;
                                                        let offeringKey = secDaObj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__r.BU__c 
                                                                    + ':'                                                                       
                                                                    + secDaObj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__r.Asset_Name__c
                                                                    + ':'
                                                                    + secDaObj.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                        $scope.backupParentRequestData(offeringKey);
                                                        $scope.secondaryTpaAssetGroup.push(secDataAssetObj);
                                                        //$scope.setOfferingDetailsforSecOff(secDataAssetObj, dAObj);
                                                        secDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                        if(secDaObj.IMS_Secondary_Data_Asset__r[translationLanguageField] == null) {
                                                            translatedSecDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                        } 
                                                        else {
                                                            translatedSecDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r[translationLanguageField];
                                                        }
                                                    }
                                                }
                                                else {
                                                    let secDataAssetObj = {};
                                                    secDataAssetObj = $scope.getsecDataAsset(secDaObj);
                                                    secDataAssetObj.Secondary_Asset_Name__c = secDaObj.Secondary_Asset_Name__c;
                                                    //let offeringKey = secDaObj.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c + ':' + secDaObj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__r.BU__c;
                                                    let offeringKey = secDaObj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__r.BU__c 
                                                                    + ':'                                                                       
                                                                    + secDaObj.IMS_Secondary_Data_Asset__r.Primary_Data_Asset__r.Asset_Name__c
                                                                    + ':'
                                                                    + secDaObj.IMS_Secondary_Data_Asset__r.Secondary_Asset_Name__c;
                                                        
                                                    $scope.backupParentRequestData(offeringKey);
                                                    $scope.secondaryTpaAssetGroup.push(secDataAssetObj);
                                                    //$scope.setOfferingDetailsforSecOff(secDataAssetObj, dAObj);
                                                    

                                                    secDataAssetName =  secDaObj.Secondary_Asset_Name__c;

                                                    if(secDaObj.IMS_Secondary_Data_Asset__c == null || secDaObj.IMS_Secondary_Data_Asset__r[translationLanguageField] == null) {
                                                        translatedSecDataAssetName = secDaObj.Secondary_Asset_Name__c;
                                                    }
                                                    else {
                                                        translatedSecDataAssetName = secDaObj.IMS_Secondary_Data_Asset__r[translationLanguageField];
                                                    }
                                                }

                                                $scope.wrapAssetPurposeObj.dataAssetsInViewMode += secDaObj.Secondary_Asset_Name__c + ',';

                                                if(secDaObj.IMS_Secondary_Data_Asset__c == null || secDaObj.IMS_Secondary_Data_Asset__r[translationLanguageField] == null) {
                                                    $scope.wrapAssetPurposeObj.translatedDataAssetsInViewMode += secDaObj.Secondary_Asset_Name__c + ',';
                                                }
                                                else {
                                                    $scope.wrapAssetPurposeObj.translatedDataAssetsInViewMode += secDaObj.IMS_Secondary_Data_Asset__r[translationLanguageField] + ',';
                                                }
                                                
                                                let isNameExists = false;
                                                let dataAssetNames = $scope.wrapAssetPurposeObj.dataAsset.split(',');
                                                if(dataAssetNames != null) {
                                                    let keepGoing = true;
                                                    angular.forEach(dataAssetNames, function(dataAssetName) {
                                                        $scope.$log.info('secDataAssetName' + secDataAssetName + '  dataAssetName' + dataAssetName);
                                                        if(keepGoing) {
                                                            if(secDataAssetName != null) {
                                                                if(secDataAssetName.trim() == dataAssetName.trim()) {
                                                                    isNameExists = true;
                                                                    keepGoing = false;
                                                                }
                                                            }
                                                        }
                                                    });
                                                }
                                                if(!isNameExists) {
                                                    if(secDataAssetName != null) {
                                                        $scope.wrapAssetPurposeObj.dataAsset += secDataAssetName + ',';
                                                        $scope.wrapAssetPurposeObj.dataAssetBackground += secDataAssetName + '~';
                                                        $scope.wrapAssetPurposeObj.translatedDataAsset += translatedSecDataAssetName + ',';
                                                    }
                                                    $scope.$log.info('secDataAssetName '+secDataAssetName + 'translatedSecDataAssetName = ' + translatedSecDataAssetName);
                                                }

                                                if(secDaObj.IMS_Secondary_Data_Asset__c != null) {
                                                    if(secDaObj.IMS_Secondary_Data_Asset__r.Is_AMA_Required__c) {
                                                        useAssetObj.isAmaTab = true;
                                                    }
                                                }
                                                if(Param_otherDesc.length > 0) {
                                                    useAssetObj.selectedSecondaryIds += (dAObj.Data_Asset__c+':'+secPurpObj.Purpose__c+':'+secPurpObj.TPA_Purpose_Category__c + '~');
                                                }
                                                else {
                                                    useAssetObj.selectedSecondaryIds += (dAObj.Data_Asset__c+':'+secPurpObj.Purpose__c+':' + '~');
                                                }
                                                isSecExisted = true;
                                                $scope.$log.info ('isSecExisted: ' + isSecExisted); 
                                                $scope.$log.info ('secDaObj.Secondary_Asset_Name__c: ' + secDaObj.Secondary_Asset_Name__c); 
                                            }
                                        });

                                        if(!isSecExisted) {
                                            $scope.wrapAssetPurposeObj.dataAssetsInViewMode += dAObj.Asset_NametText__c + ',';
                                            if(dAObj.Data_Asset__c == null || dAObj.Data_Asset__r[translationLanguageField] == null) {
                                                $scope.wrapAssetPurposeObj.translatedDataAssetsInViewMode += dAObj.Asset_NametText__c + ',';
                                            }
                                            else {
                                                $scope.wrapAssetPurposeObj.translatedDataAssetsInViewMode += dAObj.Data_Asset__r[translationLanguageField] + ',';
                                            }
                                            
                                            if(dAObj.Data_Asset__c != null) {
                                                if(dAObj.Data_Asset__r.Map_To__c != null) {
                                                    priDataAssetName  = dAObj.Data_Asset__r.Map_To__r.Asset_Name__c;
                                                    if(dAObj.Data_Asset__r.Map_To__r[translationLanguageField] == null) {
                                                        translatedPriDataAssetName  = dAObj.Data_Asset__r.Map_To__r.Asset_Name__c;
                                                    }
                                                    else {
                                                        translatedPriDataAssetName  = dAObj.Data_Asset__r.Map_To__r[translationLanguageField];
                                                    }
                                                }
                                                else if(dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__c != null) {
                                                }
                                                else {
                                                    priDataAssetName = dAObj.Data_Asset__r.Asset_Name__c;
                                                    if(dAObj.Data_Asset__r[translationLanguageField] == null) {
                                                        translatedPriDataAssetName  = dAObj.Data_Asset__r.Asset_Name__c;
                                                    }
                                                    else {
                                                        translatedPriDataAssetName  = dAObj.Data_Asset__r[translationLanguageField];
                                                    }
                                                }
                                            }
                                            else {
                                                priDataAssetName = dAObj.Asset_NametText__c;
                                                if(dAObj.Data_Asset__c == null || dAObj.Data_Asset__r[translationLanguageField] == null) {
                                                    translatedPriDataAssetName  = dAObj.Asset_NametText__c;
                                                }
                                                else {
                                                    translatedPriDataAssetName  = dAObj.Data_Asset__r[translationLanguageField];
                                                }
                                            }

                                            let isPriNameExists = false;
                                            let priDataAssetNames = $scope.wrapAssetPurposeObj.dataAsset.split(',');
                                            if(priDataAssetNames != null && priDataAssetNames.length > 0) {
                                                let keepGoing = true;
                                                angular.forEach(priDataAssetNames, function(dataAssetName) {
                                                    if(keepGoing) {
                                                        if(priDataAssetName != null) {
                                                            if(priDataAssetName.trim() == dataAssetName.trim()) {
                                                                isPriNameExists = true;
                                                                keepGoing = false;
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                            if(!isPriNameExists) {
                                                if(priDataAssetName != null) {
                                                    $scope.wrapAssetPurposeObj.dataAsset += priDataAssetName + ',';
                                                    $scope.wrapAssetPurposeObj.dataAssetBackground += priDataAssetName + '~';
                                                    $scope.wrapAssetPurposeObj.translatedDataAsset += translatedPriDataAssetName + ',';
                                                }
                                                $scope.$log.info('priDataAssetName '+priDataAssetName + ' translatedPriDataAssetName = ' + translatedPriDataAssetName);
                                            }
                                        }
                                        
                                        let SecDataAssetInsertKey;

                                        if($scope.secondaryTpaAssetGroup.length > 0) {
                                            if(Param_otherDesc.length > 0) {
                                                SecDataAssetInsertKey = dAObj.Data_Asset__c+'::'+secPurpObj.TPA_Purpose_Category__c+':'+dAObj.BU__c+':'+Param_otherDesc;
                                            }
                                            else {
                                                if(dAObj.Data_Asset__r.Map_To__c != null) {
                                                    SecDataAssetInsertKey = dAObj.Data_Asset__r.Map_To__c+':'+secPurpObj.Purpose__c+':'+secPurpObj.TPA_Purpose_Category__c+':'+dAObj.BU__c+':'+Param_otherDesc;
                                                }
                                                else if(dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__c != null) {
                                                    SecDataAssetInsertKey = dAObj.Data_Asset__r.Map_To_Secondary_Data_Asset__r.Primary_Data_Asset__c+':'+secPurpObj.Purpose__c+':'+secPurpObj.TPA_Purpose_Category__c+':'+dAObj.BU__c+':'+Param_otherDesc;
                                                }
                                                else {
                                                    SecDataAssetInsertKey = dAObj.Data_Asset__c+':'+secPurpObj.Purpose__c+':'+secPurpObj.TPA_Purpose_Category__c+':'+dAObj.BU__c+':'+Param_otherDesc ;
                                                }
                                            }
                                            if(!useAssetObj.mapSecondayDataAssetToInsert.hasOwnProperty(SecDataAssetInsertKey)) {
                                                useAssetObj.mapSecondayDataAssetToInsert[SecDataAssetInsertKey] =  $scope.secondaryTpaAssetGroup;
                                            } else {
                                                useAssetObj.mapSecondayDataAssetToInsert[SecDataAssetInsertKey] = useAssetObj.mapSecondayDataAssetToInsert[SecDataAssetInsertKey].concat($scope.secondaryTpaAssetGroup);
                                            }
                                //             var studyName = '';
                                //             var DeliveryDate = ''; 

                                //             angular.forEach($scope.secondaryTpaAssetGroup, function(secobj) {
                                //                 var offKeyForSelection = dAObj.BU__c + ':' + dAObj.Geo_Level__c + ':' + dAObj.Data_Asset__c + ':' + secobj.IMS_Secondary_Data_Asset__c ;   
                                //                 if($scope.offeringsRow.has(offKeyForSelection))  {
                                //                     studyName = '';
                                //                     DeliveryDate = ''; 
                                //                     if($scope.offeringwithaddText.has(secobj.Secondary_Asset_Name__c)){
                                //                         var OffFieldsAPIName = $scope.offeringwithaddText.get(secobj.Secondary_Asset_Name__c); 
                                //                         if(OffFieldsAPIName.split(':').length == 2){
                                //                             DeliveryDate = secobj[OffFieldsAPIName.split(':')[1]];
                                //                         }
                                //                         studyName = secobj[OffFieldsAPIName.split(':')[0]];
                                //                     }
                                                    
                                //                     var offRow = $scope.offeringsRow.get(offKeyForSelection);
                                //                     for (j in offRow.selections) {
                                //                         var columnNameInfo = j.split('_');
                                //                         var columOne;
                                //                         var columnNo;
                                //                         if(columnNameInfo !=null) {
                                //                             columOne = columnNameInfo[1];
                                //                             columnNo = columnNameInfo[2];
                                //                         }
                                //                         offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering] = angular.copy($scope.offSelectionMaster);
                                //                         offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].isChecked = true;
                                //                         offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].studyName = studyName;
                                //                         offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].deliveryDate = DeliveryDate;
                                //                         break;
                                //                     }  
                                //                 } 
                                                  
                                // });
                                           


                                            useAssetObj.secDAToRemoveMap[''+secPurpObj.Purpose__c+':'+dAObj.Data_Asset__c] =  ''+dAObj.Data_Asset__c;
                                        }
                                        $scope.wrapAssetPurposeObj.selectedPurposeIds = dAObj.Data_Asset__c;
                                        buDataAsset = dAObj.BU__c;
                                    }
                                });
                                $scope.$log.info('tpaAssetGroup: ' + $scope.tpaAssetGroup);
                                $scope.$log.info('tpaAssetGroup: ' + $scope.tpaAssetGroup.length);
                                if($scope.tpaAssetGroup.length > 0) {
                                    if(Param_otherDesc.length > 0) {
                                        useAssetObj.mapPurposeidWithDataAssetMap[':'+selectedRegion+':'+secPurpObj.TPA_Purpose_Category__c+':'+Param_otherDesc] = $scope.tpaAssetGroup;
                                    }
                                    else {
                                        useAssetObj.mapPurposeidWithDataAssetMap[secPurpObj.Purpose__c+':'+secPurpObj.TPA_Purpose_Category__c+':'+selectedRegion+':'] = $scope.tpaAssetGroup;
                                    }
                                }
        
                                angular.forEach(useAssetObj.mapPurposeidWithDataAssetMap, function(value, imsPurposeIdSelReg) {
                                    setDataAssrtsToInset = useAssetObj.mapPurposeidWithDataAssetMap[imsPurposeIdSelReg];
                                    $scope.$log.info('setDataAssrtsToInset Size'+ JSON.stringify(setDataAssrtsToInset));
                                });

                                $scope.$log.info('useAssetObj.mapPurposeidWithDataAssetMap:'+JSON.stringify(useAssetObj.mapPurposeidWithDataAssetMap));
                                $scope.$log.info('useAssetObj.mapSecondayDataAssetToInsert1:'+JSON.stringify(useAssetObj.mapSecondayDataAssetToInsert));

                            //   angular.forEach($scope.tpaAssetGroup, function(priObj) {
                            //         var offKeyForSelection = priObj.BU__c + ':' + priObj.Geo_Level__c + ':' + priObj.Data_Asset__c + ':' ;
                            //         console.log('offKeyForSelection: ' + offKeyForSelection);
                            //         console.log('priObj.Asset_NametText__c: ' + priObj.Asset_NametText__c);
                            //                     if($scope.offeringsRow.has(offKeyForSelection))  {
                            //                         studyName = '';
                            //                         DeliveryDate = ''; 
                            //                         var otherOffText = '';
                            //                         if($scope.offeringwithaddText.has(priObj.Asset_NametText__c)){
                            //                             var OffFieldsAPIName = $scope.offeringwithaddText.get(priObj.Asset_NametText__c); 
                            //                             console.log('OffFieldsAPIName: ' + OffFieldsAPIName); 
                            //                             if(OffFieldsAPIName.split(':').length == 2){
                            //                                 DeliveryDate  = priObj[OffFieldsAPIName.split(':')[1]];
                            //                             }
                            //                             studyName = priObj[OffFieldsAPIName.split(':')[0]]; 
                            //                         }
                            //                         if(priObj.Asset_NametText__c == 'Other'){
							// 						    otherOffText = priObj.Other_Text__c;
							// 					    } 
                            //                         var offRow = $scope.offeringsRow.get(offKeyForSelection);
                            //                         for (j in offRow.selections) 
                            //                         {
                            //                             console.log('x'+offRow.selections[j].isChecked);
                            //                             var columnNameInfo = j.split('_');
                            //                             var columOne;
                            //                             var columnNo;
                                                        
                            //                             if(columnNameInfo !=null) {
                            //                                 columOne = columnNameInfo[1];
                            //                                 columnNo = columnNameInfo[2];
                            //                             }
                            //                             console.log('rowNo'+$scope.RowNoForOffering);
                            //                             console.log('columnNo'+columnNo);
                                                        
                            //                             offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering] = angular.copy($scope.offSelectionMaster);
                            //                             offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].isChecked = true;
                            //                              offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].otherOffText = otherOffText;
                            //                              offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].studyName = studyName;
                            //                              offRow.selections['column_' + columOne + '_' + $scope.RowNoForOffering].deliveryDate = DeliveryDate;
                            //                              break;
                            //                         }  
                            //                     } 
                                                  
                            //     });

                                //purpose-asset wrapper class code
                                let key;
                                if(tpaPurposeObj.Name == 'Other') {
                                    let keepGoingTpaPurposeCategoryList = true;
                                    angular.forEach(proposTreeObj.tpaPurposeCategoryList, function(tpaPurpCatObj) {
                                        if(keepGoingTpaPurposeCategoryList) {
                                            if(tpaPurpCatObj.Id == tpaPurposeObj.TPA_Purpose_Category__c) {
                                                $scope.wrapAssetPurposeObj.categoryName = tpaPurpCatObj.Category_Name__c;
                                                if(tpaPurpCatObj[translationLanguageField] == null) {
                                                    $scope.wrapAssetPurposeObj.translatedCategoryName = tpaPurpCatObj.Category_Name__c;
                                                }
                                                else {
                                                    $scope.wrapAssetPurposeObj.translatedCategoryName = tpaPurpCatObj[translationLanguageField];
                                                }
                                                keepGoingTpaPurposeCategoryList = false;
                                            }
                                        }
                                    }); 

                                    let keepGoingCategorypurposesList = true;
                                    angular.forEach(proposTreeObj.categorypurposesList, function(tpaPurpCatObj) {
                                        if(keepGoingCategorypurposesList) {
                                            if(tpaPurpCatObj.IMS_TPA_Purpose__c == tpaPurposeObj.Purpose__c) {
                                                if(tpaPurpCatObj.IMS_TPA_Purpose__r[translationLanguageField] == null) {
                                                    $scope.wrapAssetPurposeObj.translatedPurposeName = tpaPurpCatObj.IMS_TPA_Purpose__r.Primary_Purpose_Name__c;
                                                }
                                                else {
                                                    $scope.wrapAssetPurposeObj.translatedPurposeName = tpaPurpCatObj.IMS_TPA_Purpose__r[translationLanguageField];
                                                }
                                                keepGoingCategorypurposesList = false;
                                            }
                                        }
                                    });
            
                                    $scope.wrapAssetPurposeObj.otherPurposeId = tpaPurposeObj.TPA_Purpose_Category__c;
                                    $scope.wrapAssetPurposeObj.purposeName = 'Other';
                                    $scope.wrapAssetPurposeObj.Param_otherDesc = Param_otherDesc; 
                                    $scope.wrapAssetPurposeObj.purposeId = tpaPurposeObj.Purpose__c;
                                    $scope.wrapAssetPurposeObj.purposeCategoryId = secPurpObj.TPA_Purpose_Category__r.Id; 
                                    $scope.wrapAssetPurposeObj.isUseDefinitionfileExist = false;
                                    key = ''+tpaPurposeObj.TPA_Purpose_Category__c+':'+tpaPurposeObj.BU__c+':'+Param_otherDesc;
                                    $scope.wrapAssetPurposeObj.key = ''+useAssetObj.index+':'+tpaPurposeObj.TPA_Purpose_Category__c+':'+tpaPurposeObj.BU__c+':'+Param_otherDesc;
                                    useAssetObj.wrapperPurpAssetListObject[$scope.wrapAssetPurposeObj.key] = $scope.wrapAssetPurposeObj;
                                    useAssetObj.SelectedDescIndexMap[key] = useAssetObj.index;
                                }
                                else {
                                    $scope.wrapAssetPurposeObj.categoryName = secPurpObj.TPA_Purpose_Category__r.Category_Name__c;
                                    $scope.wrapAssetPurposeObj.purposeName = secPurpObj.Purpose__r.Primary_Purpose_Name__c;
                                    if(secPurpObj.TPA_Purpose_Category__r[translationLanguageField] == null) {
                                        $scope.wrapAssetPurposeObj.translatedCategoryName = secPurpObj.TPA_Purpose_Category__r.Category_Name__c;
                                    }
                                    else {
                                        $scope.wrapAssetPurposeObj.translatedCategoryName = secPurpObj.TPA_Purpose_Category__r[translationLanguageField];
                                    }

                                    if(secPurpObj.Purpose__r[translationLanguageField] == null) {
                                        $scope.wrapAssetPurposeObj.translatedPurposeName = secPurpObj.Purpose__r.Primary_Purpose_Name__c;
                                    }
                                    else {
                                        $scope.wrapAssetPurposeObj.translatedPurposeName = secPurpObj.Purpose__r[translationLanguageField];
                                    }
                                    $scope.wrapAssetPurposeObj.purposeId = secPurpObj.Purpose__c;
                                    $scope.wrapAssetPurposeObj.otherPurposeId = '';
                                    $scope.wrapAssetPurposeObj.purposeCategoryId = secPurpObj.TPA_Purpose_Category__r.Id;
                                    $scope.wrapAssetPurposeObj.isUseDefinitionfileExist = secPurpObj.Use_Definition_file_exist__c;
                                    $scope.wrapAssetPurposeObj.useDefinitionPage = secPurpObj.Use_Definition_Page__c;
                                    key = ''+secPurpObj.Id +':'+ tpaPurposeObj.BU__c;
                                    $scope.wrapAssetPurposeObj.key = ''+useAssetObj.index+':'+secPurpObj.Id +':'+ tpaPurposeObj.BU__c + ':';
                                    useAssetObj.wrapperPurpAssetListObject[$scope.wrapAssetPurposeObj.key] = $scope.wrapAssetPurposeObj;
                                    useAssetObj.SelectedDescIndexMap[key] = useAssetObj.index;
                                }
                                if($scope.wrapAssetPurposeObj.dataAsset.length > 0) {
                                    $scope.wrapAssetPurposeObj.dataAsset = $scope.wrapAssetPurposeObj.dataAsset.slice(0,-1);
                                    $scope.wrapAssetPurposeObj.dataAssetBackground = $scope.wrapAssetPurposeObj.dataAssetBackground.slice(0,-1);
                                    $scope.wrapAssetPurposeObj.translatedDataAsset = $scope.wrapAssetPurposeObj.translatedDataAsset.slice(0,-1); 
                                }
                                if($scope.wrapAssetPurposeObj.dataAssetsInViewMode.length > 0) {
                                    $scope.wrapAssetPurposeObj.dataAssetsInViewMode = $scope.wrapAssetPurposeObj.dataAssetsInViewMode.slice(0,-1);
                                    $scope.wrapAssetPurposeObj.translatedDataAssetsInViewMode = $scope.wrapAssetPurposeObj.translatedDataAssetsInViewMode.slice(0,-1);
                                }
                                if($scope.wrapAssetPurposeObj.translatedOfferingCategoryName.length > 0) {
                                    $scope.wrapAssetPurposeObj.translatedOfferingCategoryName = $scope.wrapAssetPurposeObj.translatedOfferingCategoryName.slice(0,-1);
                                }
                                
                                $scope.wrapAssetPurposeObj.country = buDataAsset;
                                $scope.$log.info('$scope.wrapAssetPurposeObj.country = ' + $scope.wrapAssetPurposeObj.country + '$scope.wrapAssetPurposeObj.purposeName = ' + $scope.wrapAssetPurposeObj.purposeName);
                                $scope.wrapAssetPurposeObj.selectDes = Param_otherDesc;
                                if($scope.wrapAssetPurposeObj.selectdataAssDetails != null && $scope.wrapAssetPurposeObj.selectdataAssDetails.length > 0) {
                                    $scope.wrapAssetPurposeObj.selectdataAssDetails = $scope.wrapAssetPurposeObj.selectdataAssDetails.slice(0,-1);
                                }
                                --useAssetObj.index;
                               
                                $scope.RowNoForOffering ++;
                                return useAssetObj;
                            }
                            
                            //$scope.loadExistingTPARequestData();                          
                            $scope.$log.info('In : $scope.SelectedDescMap = ' + JSON.stringify($scope.loadExistingTPARequestData));
                            
                            $scope.flags = {};
                            $scope.wlVendorEditView.wlVendorCountry = '{!tpaRequest.Vendor_Billing_Mailing_Country__c}';
                            $scope.wlVendorEditView.wlVendorState = '{!tpaRequest.Vendor_Billing_Mailing_State_Province__c}';

                            $scope.labels.TPA_Please_select_the_Requesting_Country_from_Selection_Dropdown = '{!$Label.TPA_Please_select_the_Requesting_Country_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_select_the_Requesting_For_Country_from_Selection_Dropdown = '{!$Label.TPA_Please_select_the_Requesting_For_Country_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_select_the_Vendor_Country_from_Selection_Dropdown = '{!$Label.TPA_Please_select_the_Vendor_Country_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_select_the_Vendor_State_from_Selection_Dropdown = '{!$Label.TPA_Please_select_the_Vendor_State_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_select_the_Country_of_Offerings_from_Selection_DropDown = '{!$Label.TPA_Please_select_the_Country_of_Offerings_from_Selection_DropDown}';
                            $scope.labels.TPA_Please_Select_the_Offering_Provider_from_Selection_Dropdown = '{!$Label.TPA_Please_Select_the_Offering_Provider_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_Select_the_Frequency_Of_Delivery_from_Selection_Dropdown = '{!$Label.TPA_Please_Select_the_Frequency_Of_Delivery_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_Select_the_IMS_Data_Physical_Location_from_Selection_Dropdown = '{!$Label.TPA_Please_Select_the_IMS_Data_Physical_Location_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_Select_the_Vendor_Employee_Location_from_Selection_Dropdown = '{!$Label.TPA_Please_Select_the_Vendor_Employee_Location_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_Select_the_AMA_Longest_Time_Period_from_Selection_Dropdown = '{!$Label.TPA_Please_Select_the_AMA_Longest_Time_Period_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_Select_the_Frequency_Of_Delivery_To_Vendor_from_Selection_Dropdown = '{!$Label.TPA_Please_Select_the_Frequency_Of_Delivery_To_Vendor_from_Selection_Dropdown}';
                            $scope.labels.TPA_Please_Select_the_AMA_Data_Return_Method_from_Selection_Dropdown = '{!$Label.TPA_Please_Select_the_AMA_Data_Return_Method_from_Selection_Dropdown}';
                            $scope.labels.TPA_This_Email_Address_has_added_already = '{!$Label.TPA_This_Email_Address_has_added_already}';
                            $scope.labels.TPA_Please_add_description_for_the_selected_APLD_Study_Name_Offering = '{!$Label.TPA_Please_add_description_for_the_selected_APLD_Study_Name_Offering}';
                            $scope.labels.TPA_Please_add_APLD_Delivery_Date_Offering = "{!$Label.TPA_Please_add_APLD_Delivery_Date_Offering}";
                            $scope.labels.TPA_Please_add_description_for_the_selected_Consumer_Profiles_Study_Name_Offerin = "{!$Label.TPA_Please_add_description_for_the_selected_Consumer_Profiles_Study_Name_Offerin}";
                            $scope.labels.TPA_Please_add_Consumer_Profiles_Delivery_Date_Offering = "{!$Label.TPA_Please_add_Consumer_Profiles_Delivery_Date_Offering}";
                            $scope.labels.TPA_Please_add_description_for_the_selected_Promotional_Response_ROI_Study_Nam = "{!$Label.TPA_Please_add_description_for_the_selected_Promotional_Response_ROI_Study_Nam}";
                            $scope.labels.TPA_Please_add_Promotional_Response_ROI_Delivery_Date_Offering = "{!$Label.TPA_Please_add_Promotional_Response_ROI_Delivery_Date_Offering}";
                            $scope.labels.TPA_Please_add_description_for_the_selected_RWE_Study_Name_Offering = "{!$Label.TPA_Please_add_description_for_the_selected_RWE_Study_Name_Offering}";
                            $scope.labels.TPA_Please_add_the_RWE_Delivery_Date_Offering = "{!$Label.TPA_Please_add_the_RWE_Delivery_Date_Offering}";
                            $scope.labels.Please_provide_the_description_for_Health_plan_claims_data_Health_Plan_Claims_Da = "{!$Label.Please_provide_the_description_for_Health_plan_claims_data_Health_Plan_Claims_Da}"; //Added by C.P.Pandey under ER-3738
                            $scope.labels.TPA_Email_ID_must_be_in_english = '{!$Label.TPA_Email_ID_must_be_in_english}';
                            $scope.labels.TPA_Email_already_added = '{!$Label.TPA_Email_already_added}';
                            $scope.labels.TPA_Invalid_Contact_Email_Address = '{!$Label.TPA_Invalid_Contact_Email_Address}';
                            $scope.labels.TPA_Please_confirm_the_additional_client_contact_s_email_address = '{!$Label.TPA_Please_confirm_the_additional_client_contact_s_email_address}';
                            $scope.labels.TPA_Invalid_Confirm_Contact_Email_Address = '{!$Label.TPA_Invalid_Confirm_Contact_Email_Address}';
                            $scope.labels.TPA_Confirm_Contact_Email_and_Contact_Email_do_not_match = '{!$Label.TPA_Confirm_Contact_Email_and_Contact_Email_do_not_match}';
                            $scope.labels.TPA_Additional_Vendor_Contacts_Email_can_not_be_same_as_Vendor_Contact_Email = '{!$Label.TPA_Additional_Vendor_Contacts_Email_can_not_be_same_as_Vendor_Contact_Email}';
                            $scope.labels.TPA_Additional_Vendor_Contacts_Email_can_not_be_same_as_Authorized_Signer_Email = '{!$Label.TPA_Additional_Vendor_Contacts_Email_can_not_be_same_as_Authorized_Signer_Email}';
                            $scope.labels.TPA_Please_Provide_Confirm_Contact_Email = '{!$Label.TPA_Please_Provide_Confirm_Contact_Email}';
                            $scope.labels.TPA_Additional_Vendor_Contact_Email_Confirm_Contact_Email_and_Contact_Email_does = '{!$Label.TPA_Additional_Vendor_Contact_Email_Confirm_Contact_Email_and_Contact_Email_does}';
                            $scope.labels.TPA_The_Client_has_indicated_that_secondary_vendors_will_be_utilized = '{!$Label.TPA_The_Client_has_indicated_that_secondary_vendors_will_be_utilized}';
                            $scope.labels.TPA_The_client_has_indicated_no_additional_vendors_will_be_utilized = '{!$Label.TPA_The_client_has_indicated_no_additional_vendors_will_be_utilized}';
                            $scope.labels.TPA_Are_you_sure_you_want_to_delete_all_added_additional_vendors = '{!$Label.TPA_Are_you_sure_you_want_to_delete_all_added_additional_vendors}';
                            $scope.labels.TPA_Client_has_indicated_that_secondary_vendors_will_be_utilized_Contact_the = '{!$Label.TPA_Client_has_indicated_that_secondary_vendors_will_be_utilized_Contact_the}';
                            $scope.labels.TPA_Are_you_sure_you_want_to_remove_all_added_client_copies = '{!$Label.TPA_Are_you_sure_you_want_to_remove_all_added_client_copies}';
                            $scope.labels.TPA_Are_you_sure_you_want_to_remove_all_added_additional_vendor_contacts = '{!$Label.TPA_Are_you_sure_you_want_to_remove_all_added_additional_vendor_contacts}';
                            $scope.labels.USE_of_Other_Please_be_aware_that_the_processing_time_for_your_request_will_be_s = '{!$Label.USE_of_Other_Please_be_aware_that_the_processing_time_for_your_request_will_be_s}';
                            $scope.labels.Data_Offering_of_Other_Please_be_aware_that_the_processing_time_for_your_request = '{!$Label.Data_Offering_of_Other_Please_be_aware_that_the_processing_time_for_your_request}';
                            $scope.labels.TPA_Project_duration_less_than_thirtyOne_days = '{!$Label.TPA_Project_duration_less_than_thirtyOne_days}';
                            $scope.labels.TPA_You_can_not_add_more_than_4_Additional_Vendor_Contacts = '{!$Label.TPA_You_can_not_add_more_than_4_Additional_Vendor_Contacts}'; 
                            $scope.labels.Please_note_IQVIA_Data_will_not_automatically_be_released_to_Vendor_by_selectin = '{!$Label.Please_note_IQVIA_Data_will_not_automatically_be_released_to_Vendor_by_selectin}'; 
                            $scope.labels.Please_add_description_for_the_selected = '{!$Label.Please_add_description_for_the_selected}';
                            $scope.labels.TPA_Does_Client_store_the_prescriber = '{!$Label.TPA_Does_Client_store_the_prescriber_level_IQVIA_data_outside_of_the_United_Stat}'; 
                            $scope.labels.TPA_Add_Selections_pop_up_line = '{!$Label.TPA_Add_Selections_pop_up_line}';
                            $scope.labels.TPA_SELECT_IQVIA_Data_Offerings_and_Associated_Third_Party_Use_s_edit = '{!$Label.TPA_SELECT_IQVIA_Data_Offerings_and_Associated_Third_Party_Use_s_edit}';
                            $scope.labels.TPA_select_offerings_before_selecting_Use_Category_Use = '{!$Label.TPA_select_offerings_before_selecting_Use_Category_Use}';
                            $scope.labels.TPA_Does_this_request_include_any_of_the = '{!$Label.TPA_Does_this_request_include_any_of_the_following_prescriber_variables_if_so}'; 
                            $scope.labels.TPA_Will_the_Third_Party_Vendor_provide_Banner_Ad = '{!$Label.TPA_Will_the_Third_Party_Vendor_provide_Banner_Ad_services_using_this_data_on_be}';
                            $scope.labels.TPA_Selected_Permitted_Uses_and_Offerings = '{!$Label.TPA_Selected_Permitted_Uses_and_Offerings}';
                            $scope.labels.TPA_SELECT_IQVIA_Data_Offerings_and_Associated_Third_Party_Use_s_Clone = '{!$Label.TPA_SELECT_IQVIA_Data_Offerings_and_Associated_Third_Party_Use_s_Clone}';
                            $scope.labels.TPA_select_offerings_before_selecting_Use_Category_Use = '{!$Label.TPA_select_offerings_before_selecting_Use_Category_Use}';
                            $scope.labels.TPA_Please_add_description_for_the_selected_Other_Offering = "{!$Label.TPA_Please_add_description_for_the_selected_Other_Offering}";
                            $scope.labels.TPA_Please_add_the_RWE_Delivery_Date_in_MM_DD_YYYY = "{!$Label.TPA_Please_add_the_RWE_Delivery_Date_in_MM_DD_YYYY}";
                            $scope.labels.TPA_Please_add_the_RWE_Delivery_Date_greater_than_or_equal_to_01_01_1900 = "{!$Label.TPA_Please_add_the_RWE_Delivery_Date_greater_than_or_equal_to_01_01_1900}";
                            $scope.labels.TPA_Please_add_description_for_the_selected_Consumer_Profiles_Study_Name_Offeri = "{!$Label.TPA_Please_add_description_for_the_selected_Consumer_Profiles_Study_Name_Offerin}";
                            $scope.labels.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_Offering =  "{!$Label.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_Offering}";
                            $scope.labels.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_in_MM_DD_YYYY =  "{!$Label.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_in_MM_DD_YYYY}";
                            $scope.labels.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_greater_than_or_equal_to_01_0 =  "{!$Label.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_greater_than_or_equal_to_01_0}";
                            $scope.labels.TPA_Please_add_the_Promotional_Response_ROI_Delivery_Date_in_MM_DD_YYYY =  "{!$Label.TPA_Please_add_the_Promotional_Response_ROI_Delivery_Date_in_MM_DD_YYYY}";
                            $scope.labels.TPA_Please_add_the_Promotional_Response_ROI_Delivery_Date_greater_than_or_equa =  "{!$Label.TPA_Please_add_the_Promotional_Response_ROI_Delivery_Date_greater_than_or_equa}";
                            $scope.labels.TPA_Please_add_the_APLD_Delivery_Date_in_MM_DD_YYYY =  "{!$Label.TPA_Please_add_the_APLD_Delivery_Date_in_MM_DD_YYYY}";
                            $scope.labels.TPA_Please_add_the_APLD_Delivery_Date_greater_than_or_equal_to_01_01_1900 =  "{!$Label.TPA_Please_add_the_APLD_Delivery_Date_greater_than_or_equal_to_01_01_1900}";
                            $scope.labels.TPA_Select_one_or_more_of_the_following_assets_that_are_included_in_this_APLD_Cu =  "{!$Label.TPA_Select_one_or_more_of_the_following_assets_that_are_included_in_this_APLD_Cu}";
                            $scope.labels.TPA_Select_the_Offerings_associated_with_this_Use_Then_click_Add_Use_to_save_thi =  "{!$Label.TPA_Select_the_Offerings_associated_with_this_Use_Then_click_Add_Use_to_save_thi}";
                            $scope.labels.TPA_Please_enter_valid_text =  "{!$Label.TPA_Please_enter_valid_text}";
                            $scope.labels.TPA_Please_ensure_that_you_have_selected_a_Use_and_its_Offerings_then_click_the =  "{!$Label.TPA_Please_ensure_that_you_have_selected_a_Use_and_its_Offerings_then_click_the}";
                            $scope.labels.TPA_This_TPA_request_will_default_to_the_selected_Client_Group_GroupName_plea =  "{!$Label.TPA_This_TPA_request_will_default_to_the_selected_Client_Group_GroupName_plea}";
                            $scope.labels.TPA_DDD_Alert = "{!JSENCODE($Label.TPA_DDD_Alert)}";

                            $scope.isBannerAds = false;
                            
                            $scope.flags.isShowVendorMessageBoard = {!isShowVendorMessageBoard };

                            angular.extend(this, $controller('controllerPageParent', {$scope: $scope}));
                            //Added for site to community logic submission start
                            $scope.logoutSession = function() {
                                console.log('BeforeAjaxCall:::');
                                $.ajax('{!$Site.Prefix}/secur/logout.jsp',{
                                    type:'POST',
                                    beforeSend: function(xhr) {
                                        // Set the OAuth header from the session ID
                                        xhr.setRequestHeader('Authorization', 'Bearer {!$Api.Session_ID}');            
                                        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
                                        console.log('BeforeSend:::');
                                    },
                                    success: function(response) {
                                        // Sit the result to HTML div          
                                        console.log('Success:::'+JSON.stringify(response));
                                        window.location.href = '/imshealthPortal/login';
                                    },
                                    error: function(jqXHR, textStatus, errorThrown) {
                                        // Error
                                        console.log('Error:::'+jqXHR.status + ': ' + errorThrown);
                                    }
                                });
                            }
                            //Added for site to community logic submission end
                            $scope.checkUserProfileName = function() {
                                $scope.$log.info('in checkUserProfileName: viewModeStatus::' + $scope.viewModeStatus);
                                CNT_TPA_RequestSubmissionForm.getUserProfileName(function(result, event){
                                    $scope.$log.info('result: ' + result);
                                    if(event.type == 'exception' )
                                    {                               
                                        $scope.$log.info('Exception: ' + event.message);
                                        if(event.message.indexOf('Remoting request invalid for your session') >= -1){
                                            $scope.logoutSession();
                                        }
                                        return false;                                    
                                    }
                                    else if(result != null && result == 'TPA Vendor Community User' && getParameterByName('type') == 'c')
                                    {
                                        $scope.$log.info('result: ' + result);
                                        $scope.logoutSession();
                                    }
                                });
                            }

                            $scope.$log.info('before checkUserProfileName');
                            $scope.$log.info('Request Type ::::1'+$scope.isRenewedorModifiedRenewed);
                            $scope.checkUserProfileName();
                            var isShowVendAuthCompEmailSamePopup = false;
                            $scope.acknowledSameVendCompliaAndAuthSignEmail = function(){
                                isShowVendAuthCompEmailSamePopup = false;
                                if($scope.tpaObj.vendorComplianceEmail != null && $scope.tpaObj.vendorComplianceEmail.trim().length > 0){
                                    if($scope.tpaObj.isAuthorisedSigner == 'Yes' && $scope.tpaObj.vendorComplianceEmail.toLowerCase() == $scope.tpaObj.vendorContactEmail.toLowerCase()){
                                        isShowVendAuthCompEmailSamePopup = true;
                                    }else if($scope.tpaObj.isAuthorisedSigner == 'No' && $scope.tpaObj.vendorComplianceEmail.toLowerCase() == $scope.tpaObj.authSignerEmail.toLowerCase()){
                                        isShowVendAuthCompEmailSamePopup = true;
                                    }
                                    /*if(isShowVendAuthCompEmailSamePopup){
                                        $scope.popupAlert('{!$Label.TPA_Vendor_TPA_Compliance_Contact_Email_can_not_be_same_as_Authorized_Signer_Ema}');
                                    }*/
                                }
                            }
                            $scope.isModifiedRenewedButtonSelect = function () {
                                    if ($scope.isRenewedorModifiedRenewed != null) {
                                        if ($scope.isRenewedorModifiedRenewed == 'Modified Renewal') {
                                            $('#modifiedRenewButton').attr('class', 'slds-button slds-button_brand');
                                            console.log('modifiedRenewButton');
                                        }
                                        else if ($scope.isRenewedorModifiedRenewed == 'Renewed') {
                                            $('#renewedButton').attr('class', 'slds-button slds-button_brand');
                                            console.log('renewedButton');
                                        }
                                    }
                                }
                            
                            $scope.isOfferingEditPopupEnable = function(){
                                $scope.tpaObj.isRenewedReqUseandOfferingChanged = 'Modified Renewal';
                                $('#modifiedRenewButton').attr('class', 'slds-button slds-button_brand');
                                $('#renewedButton').attr('class', 'slds-button slds-button_outline-brand');
                                console.log($scope.tpaObj.isRenewedReqUseandOfferingChanged);
                            }
                            $scope.isOfferingEditDisable = function(){
                                $scope.tpaObj.isRenewedReqUseandOfferingChanged = 'Renewed';
                                $('#renewedButton').attr('class', 'slds-button slds-button_brand');
                                $('#modifiedRenewButton').attr('class', 'slds-button slds-button_outline-brand');
                                console.log($scope.tpaObj.isRenewedReqUseandOfferingChanged);
                            }
                            
                            
                            
                            var isDataAccessEndDateEmpty = false;
                            var isDataAccessEndDateEmptyPopupDisplayed = false;
                            $scope.acknowledDataAccessEndDateEmptyPopup = function(){
                                isDataAccessEndDateEmpty = false;
                                if($('#dataAccessEndDate').datepicker('getDate') == null && !$scope.saveRequestInDraft) {
                                    isDataAccessEndDateEmpty = true;
                                }
                                if(isDataAccessEndDateEmptyPopupDisplayed) {
                                    return false;
                                }
                                if(isDataAccessEndDateEmpty){
                                    isDataAccessEndDateEmptyPopupDisplayed = true;
                                    $scope.popupAlert('{!$Label.TPA_Please_add_the_Data_Access_End_Date_first_and_then_you_may_adjust_the_Data_P}', function(){isDataAccessEndDateEmptyPopupDisplayed = false;});
                                }
                            }

                            // function handles screen navigation and cancel action.
                            $scope.screenNavigationCancel = function(btnType) {
                                if(btnType == 'Next' && !$scope.validateForm() && $scope.canRenew) {
                                    $scope.checkUserProfileName();
                                    switch($scope.selectedSection) {
                                        // Added by C.P.Pandey Under CR-6341 Start
                                        case 'CS':
                                            if($scope.viewModeStatus == 'VDV') {
                                                // Added by Babita Dadarwal under ER-2106 Start

                                                $scope.checkIsNotificationRequired();
                                            }
                                            // Added by Babita Dadarwal under ER-2106 End
                                            break;
                                            // Added by C.P.Pandey Under CR-6341 End

                                        <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                                        case 'V':
                                            $scope.isModifiedRenewedButtonSelect();
                                            $scope.validateDatabaseEntryForPicklist('V');//Added by Govind under Issue-8960
                                            // Modified by Govind under Issue-8960 Start
                                            if($scope.errorMsg.length == 0) {
                                                if($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV')
                                                    $scope.selectedSection = 'RDA';
                                                else if($scope.isAmaTab)
                                                    $scope.selectedSection = 'AD';
                                                else if($scope.isUSPrescLvlData == 'Yes') 
                                                    $scope.selectedSection = 'DDT';
                                                else
                                                    $scope.selectedSection = 'F';
                                                }
                                                $scope.updateClientStorageLabelAMA(); 
                                            // Modified by Govind under Issue-8960 End
                                            break;

                                        <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                                        case 'RDA':
                                            if($scope.tpaObj.isBulkRequest == 'true'){
                                                if($scope.displayUseColumn.columns[$scope.displayUseColumn.selectedColumn].isSaved != 0 ){
                                                    $scope.popupAlert('{!$Label.TPA_pop_up_for_not_saving_a_use_offering_selection}');
                                                    break;
                                                }
                                            }
                                            $scope.validateDatabaseEntryForPicklist('RDA');//Added by Govind under Issue-8960
                                            // Modified by Govind under Issue-8960 Start
                                            if($scope.errorMsg.length == 0) {
                                                //Updated by Babita Dadarwal under ER-2730 Start
                                                if($scope.requestType != 'view') {
                                                    $scope.setAmaVendorAccessTime();//Added by Babita Dadarwal under ER-2691 // modified by supriya under issue-09933
                                                    $scope.$log.info('$scope.selectedAmaDataTimePeriod: ' + $scope.selectedAmaDataTimePeriod);

                                                    //Added by Babita Dadarwal on 18 May 2016 under ER-2812 start
                                                    $scope.isAMATabRequired();
                                                    if($scope.isAmaTab){
                                                        $scope.FindAMAUses();
                                                    }
                                                    $scope.$log.info('$scope.isAmaTab : ' + $scope.isAmaTab);

                                                    // added by supriya Johari under ER-2455 starts
                                                    $scope.requiresAMADataforUseOffering = false;
                                                    $scope.usesAndCategoryRequiresAMADataList = $scope.usesAndCategoryRequiresAMAData.split(';');
                                                    $scope.$log.info('AMA Use and Categories list :'+$scope.usesAndCategoryRequiresAMADataList);
                                                    angular.forEach($scope.SelectedDescMap, function(value, key) {
                                                        if(!$scope.requiresAMADataforUseOffering) {
                                                            $scope.useAndOfferingWithAssets = {};
                                                            $scope.useAndOfferingWithAssets.purposeId = value.purposeId;
                                                            $scope.useAndOfferingWithAssets.purposeCategoryId = value.purposeCategoryId;
                                                            $scope.assetId = value.purposeId + ':' + value.purposeCategoryId + ':'+ value.country +':';
                                                            $scope.purposeAndCategory = value.purposeName + '(' + value.categoryName + ')';
                                                            $scope.useAndOfferingWithAssets.primaryAssets = $scope.mapPurposeidWithDataAssetMap[$scope.assetId];
                                                            $scope.useAndOfferingWithAssets.secAssets = $scope.mapSecondayDataAssetToInsert;
                                                            $scope.$log.info('$scope.secondaryAssets:'+JSON.stringify($scope.useAndOfferingWithAssets.secAssets));

                                                            if($scope.usesAndCategoryRequiresAMADataList.indexOf($scope.purposeAndCategory) !== -1) {
                                                                angular.forEach($scope.useAndOfferingWithAssets.primaryAssets, function(asset) {
                                                                    if(!$scope.requiresAMADataforUseOffering) {
                                                                        angular.forEach($scope.requiresAMADataforUseOfferingList, function(settingData) {
                                                                            if(!$scope.requiresAMADataforUseOffering && settingData.Primary_Offering__c == asset.Asset_NametText__c && settingData.Offering_Category__c == asset.Geo_Level__c ) {
                                                                                $scope.secondaryOffId = asset.Data_Asset__c +':'+ value.purposeId+ ':' + value.purposeCategoryId + ':'+ value.country +':'; //Updated by Babita dadarwal under Issue-09827
                                                                                $scope.secondaryAssets = $scope.mapSecondayDataAssetToInsert[$scope.secondaryOffId];
                                                                                if($scope.secondaryAssets != null && settingData.Secondary_Offering__c != null && settingData.Secondary_Offering__c != '') {
                                                                                    angular.forEach($scope.secondaryAssets, function(secAsset) {
                                                                                        if(!$scope.requiresAMADataforUseOffering  && secAsset.Secondary_Asset_Name__c == settingData.Secondary_Offering__c)
                                                                                            $scope.requiresAMADataforUseOffering = true;
                                                                                    });
                                                                                }
                                                                                else if($scope.secondaryAssets == null && (settingData.Secondary_Offering__c == null || settingData.Secondary_Offering__c == '') )
                                                                                    $scope.requiresAMADataforUseOffering = true;
                                                                            }
                                                                        });
                                                                    }
                                                                });
                                                            }
                                                        }
                            						    $scope.$log.info('going for testing11 ');
                                                        if(value.purposeName == 'Direct to Prescriber and Health Care Organizations Communications'){
                                                            $scope.$log.info('in for testing11 ');
                                                            $scope.isBannerAds = true;
                                                            $scope.$log.info('banner ads changes : ' + $scope.isBannerAds);
                                                   
                                                        }
                                                    });

                                                    if($scope.isUSPrescLvlData != '' && $scope.isUSPrescLvlData != null)
                                                        $scope.selectedUSPrescriberData = true;
                                                
                                                    if(($scope.requestType == 'renew') && ($scope.tpaObj.isRenewedReqUseandOfferingChanged != null && $scope.tpaObj.isRenewedReqUseandOfferingChanged == 'Renewed')){
                                                       $scope.backupUseOff();
                                                    }

                                                    if(($scope.requestType!='view' && ($scope.requestType != 'renew' && !$scope.isRenewedRequest)) || (($scope.requestType == 'renew' || $scope.isRenewedRequest) && ($scope.tpaObj.isRenewedReqUseandOfferingChanged != null && $scope.tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal'))){
                                                        $scope.openSelectedUseOffPopup($scope.SelectedDescMap, $scope.offeringsRow, $scope.displayUseColumn, $scope.tpaObj.isBulkRequest);
                                                    }                                                     
                                                    else if($scope.isAmaTab)
                                                        $scope.selectedSection = 'AD';
                                                    else if($scope.isUSPrescLvlData == 'Yes')
                                                        $scope.selectedSection = 'DDT';//'TA'; //Updated by Babita Dadarwal under ER-2577
                                                    else
                                                        $scope.selectedSection = 'F'; 
                                                }
                                                else {
                                                    if($scope.isAmaTab)
                                                        $scope.selectedSection = 'AD';
                                                    else {
                                                        if(!$scope.isUseAddedAfterBeingSelected || !$scope.isOfferingSelected)
                                                            $scope.selectedSection = 'RDA';
                                                        else
                                                        if(($scope.viewModeStatus == 'CDV' && !$scope.isTPProcessor && !$scope.isUSTPProcessor && !$scope.isVendorPartVisible) || $scope.viewModeStatus == 'NV') {
                                                            $scope.selectedSection = 'F';
                                                        if($scope.requestType != 'clone' && '{!tpaRequestEditType}' != 'v') {
                                                            $scope.validatePageEdit();
                                                        }
                                                        }
                                                        else if($scope.isUSPrescLvlData == 'Yes')
                                                            $scope.selectedSection = 'DDT';//'TA'; //Updated by Babita Dadarwal under ER-2577
                                                        else
                                                            $scope.selectedSection = 'F';   
                                                    }
                                                    //$scope.backupUseOff();
                                                }
                                                if($scope.requestType != 'clone' && '{!tpaRequestEditType}' != 'v') {
                                                        $scope.validatePageEdit();
                                                    }
                                            }
                                            

                                            break;


                                        case 'AD':
                                        $scope.$log.info('$scope.tpaRequestSubmitDetail.amaAgrSubmitted:' + $scope.tpaRequestSubmitDetail.amaAgrSubmitted);

                                            if($scope.isUSPrescLvlData == '{!$Label.TPA_AMA_No}' && $scope.requiresAMADataforUseOffering && $scope.selectedUSPrescriberData) {
                                                $scope.popupAlert('{!$Label.TPA_AMA_select_Yes_to_prescriber_ques_as_you_have_selected_such_use_offerings}');
                                                $scope.selectedSection = 'AD';
                                            }
                                            else {
                                                
                                                $scope.checkUPINPopupRequired();

                                            $scope.validateDatabaseEntryForPicklist('AD'); //Added by Govind under Issue-8960

                                            //*** Modified by Govind under Issue-8960 Start , Modified by Neha under CR-12673 Start  ***//
                                            if($scope.errorMsg.length == 0)
                                            {
                                                $scope.ClientEmployeeDataCountryFinalize = $scope.getCommaSeparatedData('ddClientEmpDataCountry'); 
                                                if($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV'){
                                                    if(($scope.isTPProcessor || $scope.isUSTPProcessor) && $scope.viewModeStatus == 'CDV' && $scope.isUSPrescLvlData == 'Yes')
                                                        $scope.selectedSection = 'DDT';
                                                    else
                                                        $scope.selectedSection = 'F';   
                                                }        
                                                else if ($scope.isUSPrescLvlData == 'Yes')
                                                    $scope.selectedSection = 'DDT';
                                                else    
                                                    $scope.selectedSection = 'F'; 
                                            //*** added by Govind Start 25 Jan ER-1586,Modified by Neha under CR-12673 Ends ***//
                                            $scope.accessingPeriodFinalize = $(".ddAmaDataTimePer option:selected").text();
                                           // $scope.amaDataDestroyMethod =  $(".ddRespReturn option:selected").text();//Added by Govind under Issue-8816

                                            $scope.vendorCountryFinalize = $(".ddOutUSCountry option:selected").text();
                                            //*** added by Govind End 25 Jan ER-1586 ***//
                                                
                                                //Added by Shaik under CR-12675 start
                                                if(($scope.viewModeStatus == 'CDV' && !$scope.isTPProcessor && !$scope.isUSTPProcessor && !$scope.isVendorPartVisible) || $scope.viewModeStatus == 'NV') {
                                                    $scope.selectedSection = 'F';
                                                    if($scope.requestType != 'clone' && '{!tpaRequestEditType}' != 'v') {
                                                        $scope.validatePageEdit();
                                                    }
                                                }
                                                //Added by Shaik under CR-12675 end
                                            }

                                            //*** Modified by Govind under Issue-8960 End ***//
                                        }// added by supriya Johari under ER-2455
                                        break;


                                        case 'DDT':
                                            $scope.validateDatabaseEntryForPicklist('DDT');
                                            if($scope.errorMsg.length == 0) {
                                                // $scope.imsDataLocatedFinalize = $scope.getCommaSeparatedData('ImsDataLocation');
                                                // $scope.vendorEmployeeImsDataFinalize = $scope.getCommaSeparatedData('ddVendEmpDataCountry');
                                                $scope.VendorEmpDataAccessedInCountryFinalize = $scope.getCommaSeparatedData('ddVendorEmpDataAccessedInCountry'); 
                                                $scope.TechforRemoteAccessFinalize = $scope.getCommaSeparatedData('ddTechSelectedforRemoteAccess'); 
                                            
                                                //$scope.$log.info('$("#ImsDataLocation").val() : '+$("#ImsDataLocation").val());

                                                if($scope.viewModeStatus == 'VDV' && $scope.isUSPrescLvlData == 'Yes' && ($("#ddVendorEmpDataAccessedInCountry").val() != '' && $("#ddVendorEmpDataAccessedInCountry").val() != null && $("#ddVendorEmpDataAccessedInCountry").val() != 'United States') || (($scope.VendorEmpDataStoredInCountry.Default_Value__c != null && $scope.VendorEmpDataStoredInCountry.Default_Value__c != '--None--' && $scope.VendorEmpDataStoredInCountry.Default_Value__c != 'United States'))) {                                               
                                                    $scope.mlObj.isDataLocMsgAcknowledged = true; //Added by Supriya under ER-3351
                                                    $scope.popupAlert("Please acknowledge, if you have selected that the prescriber level data will be accessed or stored outside of the United States, IQVIA must request approval from the American Medical Association (AMA) prior to review for approval of an IQVIA Third Party Limited License Agreement.", function(){$scope.mlObj.isDataLocMsgAcknowledged = false;$scope.selectedSection = 'F';$scope.updateProgress();$scope.applyChanges();}); //Modified by Supriya under ER-3351
                                                    $scope.selectedSection = 'DDT';
                                                } else {
                                                    
                                                    $scope.selectedSection = 'F';
                                                    
                                                    if($scope.requestType != 'clone' && '{!tpaRequestEditType}' != 'v') {
                                                        $scope.validatePageEdit();
                                                    }
                                                    
                                                } 
                                            }
                                        

                                            break;
                                    }
                                }

                                <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                                else if(btnType == 'Previous') {
                                    switch($scope.selectedSection) {
                                        
                                        case 'V':
                                            if($scope.viewModeStatus == 'VDV')
                                                $scope.selectedSection = 'CS';
                                            break;
                                            

                                        case 'RDA':
                                            $scope.selectedSection = 'V';
                                            break;

                                        case 'AD':
                                            
                                            if(($scope.viewModeStatus == 'NV' || $scope.viewModeStatus == 'CDV' || $scope.isTPProcessor || $scope.isUSTPProcessor ))//Added by Babita under ER-2241
                                                $scope.selectedSection = 'RDA';
                                        
                                            else
                                                $scope.selectedSection = 'V';
                                            break;

                                        case 'DDT':
                                            
                                            if($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') {
                                                $log.info('In DDT Pre1');
                                                if($scope.isAmaTab)
                                                    $scope.selectedSection = 'AD';
                                                else
                                                    $scope.selectedSection = 'RDA';
                                                $log.info('In DDT Pre2  ' + $scope.selectedSection);
                                            }
                                            else {
                                                if($scope.isAmaTab)
                                                    $scope.selectedSection = 'AD';
                                                else
                                                    $scope.selectedSection = 'V';
                                            }
                                            break;

                                        case 'F':
                                            
                                        $log.info('In DDT Pre3');
                                        if(($scope.viewModeStatus == 'CDV') || $scope.viewModeStatus == 'NV') {
                                            if($scope.isAmaTab){
                                                if(($scope.isTPProcessor || $scope.isUSTPProcessor) && $scope.viewModeStatus == 'CDV' && $scope.isUSPrescLvlData == 'Yes')
                                                        $scope.selectedSection = 'DDT';
                                                else
                                                        $scope.selectedSection = 'AD'; 
                                            } 
                                            else
                                                $scope.selectedSection = 'RDA';
                                            $log.info('In DDT Pre4  ' + $scope.selectedSection);
                                        } 
                                        else if($scope.isUSPrescLvlData == 'Yes') 
                                            $scope.selectedSection = 'DDT';
                                        else if($scope.isAmaTab)
                                            $scope.selectedSection = 'AD';
                                        else
                                            $scope.selectedSection = 'V';
                                        
                                            break;
                                    }
                                    $scope.errorMsg = '';
                                    $scope.isError = false;
                                }
                                if(!$scope.canRenew && !$scope.isTPProcessor && !$scope.isUSTPProcessor) {
                                    $scope.popupAlert('{!$Label.TPA_IQVIA_no_longer_supports_the_USE_or_Offerings_selected_in_this_TPA_Request_e}', 
                                    function(){
                                        location.href = '{!$Setup.Privacy_Policy_TPA__c.TPA_Portal_URL__c}' + '/VFP_TPA_CustomLandingPage';
                                    }); 
                                }
                                $scope.$log.info('**$scope.errorMsg'+$scope.errorMsg);
                                $scope.$log.info('**$scope.isError'+$scope.isError);
                                if($scope.errorMsg.trim().length == 0) 
                                    $scope.isError = false;  
                                $scope.updateProgress();
                            }

                            // function checks if duplicate value exists in selected uses
                            $scope.duplicateInSelectedUses = function(selectedId) {
                                $scope.$log.info('In duplicateInSelectedUses');
                                $scope.$log.info(JSON.stringify($scope.SelectedDescMap));
                                $scope.isPopupShown = false;

                                angular.forEach($scope.SelectedDescMap, function(v, k) {
                                    $scope.$log.info('vCountry:'+ v.country+'$scope.mlObj.selectedRegion.Default_Value__c'+$scope.mlObj.selectedRegion.Default_Value__c);
                                    if($scope.mlObj.selectedRegion.Default_Value__c == v.country) {
                                        $scope.$log.info('IN THE Condition');
                                        if(selectedId.split('~')[2] == 'POther' && v.purposeName == 'Other') {
                                            $scope.$log.info('IN IF');
                                            if(selectedId.split('~')[3] == v.categoryName && $('#'+selectedId.split('~')[0]+'-'+selectedId.split('~')[1]+'-'+selectedId.split('~')[2]).val().trim() == v.selectDes) {
                                                //Modified by C.P.Pandey custom popup start
                                                $scope.popupAlert("{!$Label.TPA_Use_has_already_been_added_before_Adding_same_description_will_override_your}", //Modified by C.P.Pandey under Issue-6919,Modified by Govind under ER-1940
                                                                    function() {
                                                                        $scope.isError = false; $scope.errorMsg = ""; //Added by Sunny Bansal under Issue-07089
                                                                        $scope.selectedTree.selectedUseKey = '';
                                                                        $scope.generateProposalTree();$scope.selectedTree.OtherDescriptionId = '';$('.otherDescUses').attr('disabled','disabled');$('.otherDescUses').val('');
                                                                        $scope.applyChanges();
                                                                    }); //Modified by C.P.Pandey under Issue-6921
                                                //Modified by C.P.Pandey custom popup end
                                            }
                                        }
                                        else {
                                            if(selectedId.split('~')[2] == v.categoryName && selectedId.split('~')[1] == v.key.split(':')[1]) {
                                                //Modified by C.P.Pandey custom popup start
                                                $scope.popupAlert("{!$Label.TPA_Use_has_already_been_added_before_Adding_same_description_will_override_your}", //Modified by C.P.Pandey under Issue-6919, Modified by Govind under ER-1940
                                                                    function() {
                                                                        $scope.isError = false; $scope.errorMsg = ""; //Added by Sunny Bansal under Issue-07089
                                                                        $scope.selectedTree.selectedUseKey = '';
                                                                        $scope.generateProposalTree();$scope.selectedTree.OtherDescriptionId = '';$('.otherDescUses').attr('disabled','disabled');$('.otherDescUses').val('');
                                                                         $scope.applyChanges();
                                                                    }); //Modified by C.P.Pandey under Issue-6921
                                                //Modified by C.P.Pandey custom popup end
                                            }
                                        }
                                    }
                                    $scope.$log.info('Loop:'+JSON.stringify(v));
                                });

                                return false;
                            }


                            // Added by Govind under ER-3460 Start
                            $scope.validateOutlinerLabelCode = function(lblCodeForOffering) {
                                var regOrderNo = new RegExp('[0-9]{6}');
                                return (regOrderNo.test(lblCodeForOffering));
                            }

                            $scope.validateOulinerDate = function(dateForOffering) {
                                var regOrderNo = new RegExp('[0-9][A-Z][0-9]{4}-[0-9][A-Z][0-9]{4}');
                                return (regOrderNo.test(dateForOffering));
                            }
                            // Added by Govind under ER-3460 End

                            // Added By Neha Under ER-3509 starts
                            $scope.showErrorPopupforOff = function (selectedUseOffMap)
                            {
                                $scope.offMap = selectedUseOffMap;
                                var isError = false;
                                var popuplabel = "";
                                $.each(selectedUseOffMap ,function(k,v){
                                    var fieldId = 'id-'+ k;
                                    if(!isError && $("[id='id-"+k+"']") != null && $("[id='id-"+k+"']").is(":visible") && !($("[id='id-"+k+"']").is(':disabled'))  && ($("[id='id-"+k+"']").val() == null || $("[id='id-"+k+"']").val().trim().length == 0))
                                    {
                                        var offName = k;
                                        popuplabel = '{!$Label.Please_add_description_for_the_selected}'.replace("blankOff",offName);
                                        isError = true;
                                        return  ;
                                    }
                                    if(!isError && $("[id='id-"+k+"']") != null && $("[id='id-"+k+"']").is(":visible") && !($("[id='id-"+k+"']").is(':disabled'))  && ($("[id='id-"+k+"']").val() != null && $("[id='id-"+k+"']").val().trim().length > 255))
                                    {
                                        var offName = k;
                                        popuplabel = 'Offering text should not exceed 255 characters' + "<ul>" + '<li>' + k + '</li>'  + "</ul>";
                                        isError = true;
                                        return  ;
                                    }
                                });
                                return [isError, popuplabel];
                            };

                            // Function to check if data offering have the notification required.
                            $scope.checkIsNotificationRequired = function() {
                                showLoading(); // added by neha under ER-3031
                                $scope.dynamicOfferingsNotificationList = []; // added  by neha under Er-3031
                                $scope.setPriDataAssetsIdReqNotification = [];
                                $scope.setSelectedUseDefinitions = [];

                                // Check if primary data assets require notification
                                $.each($scope.mapPurposeidWithDataAssetMap, function(k, v) {
                                    for(var i = 0; i <v.length; i++) {
                                        angular.forEach($scope.proposalTreeDataRawSource.dataAssetList, function(v1, k1) {
                                            if(v[i].Data_Asset__c == v1.Id) {
                                                if(v1.Is_Notification_Required__c) {
                                                    $scope.setPriDataAssetsIdReqNotification.push(v1.Id);
                                                    $scope.$log.info('pri data asset req notice : '+v[i].Asset_NametText__c);
                                                }
                                            }
                                        });
                                    }
                                });

                                //added by neha under ER-3031 starts
                                $scope.$log.info('In Dy:');

                                CNT_TPA_RequestSubmissionForm.getdynamicOfferingsNotifications(function(result, event) {
                                    $scope.$log.warn( result);

                                    if(event.type == 'exception')
                                    {
                                        hideLoading();
                                        $scope.$log.info('Error: ' + event.message);
                                        return false;
                                    }
                                    else {
                                        $scope.dynamicOfferingsNotificationList = [];

                                        $scope.$log.info('DATADATA ' + result.mapOfIdWithTextEditorObj['aGi3I0000000GPU']);
                                       
                                        $scope.objDynOffNotiDataJSON = result;
                                        
                                        if($scope.viewModeStatus == 'VDV' && $scope.setSelectedUseDefinitions != null && $scope.setSelectedUseDefinitions.length > 0) {
                                            $scope.openUseDefinitionPopup($scope.setSelectedUseDefinitions);
                                            hideLoading();
                                        }
                                        else {
                                            $scope.getdynOffNotifications();
                                            $scope.openOfferingNotificationPopup();
                                        }                                                                                
                                    }

                                    $scope.$log.info('In second else 2' );
                                    $scope.updateProgress();
                                    $scope.applyChanges();
                                },{escape: false});

                                $scope.$log.info('In second else 3' );
                            }
                            $scope.openOfferingNotificationPopup = function() {
                                if(($scope.setPriDataAssetsIdReqNotification != null && $scope.setPriDataAssetsIdReqNotification.length > 0) || ($scope.dynamicOfferingsNotificationList != null && $scope.dynamicOfferingsNotificationList.length > 0)) //updated by neha under ER-3031
                                {
                                    $scope.$log.info('In If part off notification' );
                                    $scope.prepareUseOffPopupContent();

                                    $scope.backupUseOff();
                                }
                                else
                                {
                                    $scope.$log.info('In else part off notification' );
                                    if($scope.viewModeStatus == 'VDV')
                                    {
                                        $scope.$log.info('In vendor part' );
                                        $scope.selectedSection = 'V';
                                        hideLoading();
                                    }
                                    else
                                    {
                                        if($scope.isAmaTab)
                                            $scope.selectedSection = 'AD';
                                        else
                                        {
                                            if(!$scope.isUseAddedAfterBeingSelected || !$scope.isOfferingSelected)
                                                $scope.selectedSection = 'RDA';
                                            //Modified by Shaik under CR-12675 start
                                            else {
                                                $scope.selectedSection = 'F';
                                            }
                                            //Modified by Shaik under CR-12675 end
                                        }
                                        //  $scope.updateProgress();
                                        $scope.backupUseOff();
                                    }
                                }
                                $scope.updateProgress();
                                $scope.applyChanges();
                                $scope.$log.info('In second else 1' );
                            }

                            //Added By Babita Dadrwal under ER-2106 End

                            $scope.CheckIfOnlyReferenceDataCatSelected = function() {
                                $scope.isOnlyReferenceDataCatSelected = false;
                                var containsNonRef = false;
                                $log.info('In 0 : ' + $scope.isOnlyReferenceDataCatSelected);
                                $.each($scope.mapPurposeidWithDataAssetMap, function(k, v) {
                                    for(var i = 0; i < v.length; i++) {
                                        if(v[i].Geo_Level__c != 'Reference Data') {
                                            $log.info('In 1 : ' + $scope.isOnlyReferenceDataCatSelected);
                                            containsNonRef = true;
                                            break;
                                        }
                                        $log.info('In 2 : ' + $scope.isOnlyReferenceDataCatSelected);
                                    }
                                });
                                if(!containsNonRef) {
                                	$scope.isOnlyReferenceDataCatSelected = true;
                                    $log.info('In 3 : ' + $scope.isOnlyReferenceDataCatSelected);
                                }
                                $log.info('In 4 : ' + $scope.isOnlyReferenceDataCatSelected);
                                if($scope.isOnlyReferenceDataCatSelected) {
                                    $("#dataPeriodStartDate").datepicker("setDate", null);
                                    $("#dataPeriodEndDate").datepicker("setDate", null);
                                }
                            }

                            $scope.updateUseOff = function()
                            {
                                $log.info('In updateUseOff');
                                $scope.setDAIds = [];
                                $scope.descIdsetAsses = [];
                                $scope.mapDAssIdWithDataAssOther = {};
                                $scope.commDataAsset = '';
                                $scope.tranCommDataAsset = ''; //Added by Babita Dadarwal under ER-1940 on 20 July 2016
                                $scope.offeringCategoryName = '';
                                $scope.offeringCategoryDuplicateName = '';
                                $scope.setIMSDataAssetsToInsert = [];
                                $scope.dataAssDetails = '';
                                $scope.useOffRecordToEdit.Param_otherDesc = ($scope.useOffRecordToEdit.Param_otherDesc == null ?'':$scope.useOffRecordToEdit.Param_otherDesc);
                                $scope.useOffRecordToEdit.dataAssetCopy = '';
                                $scope.useOffRecordToEdit.selectdataAssDetailsCopy = '';
                                $scope.isAssetChecked = false;
                                $scope.isOtherAssetTextEmpty = false;
                                $scope.isOtherAssetText255 = false;
                                $scope.otherPurCatId = '';
                                $scope.Param_otherDesc = '';
                                $scope.selectedPurposeIds = '';
                                $scope.selectedCategory = '';

                                $scope.mapRecordsToDelete = [];
                                $scope.countrylist =  $scope.getMultiSelectedData('oneKeyDataCountry'); // Added By Neha under CR-11745
                                $scope.useCollapseLabel = 'Collapse';
                                $scope.offCollapseLabel = 'Collapse';
                                $log.info('In updateUseOff : $scope.mapSecondayDataAssetToInsert5 before' + JSON.stringify($scope.mapSecondayDataAssetToInsert));
                                $.each($scope.mapSecondayDataAssetToInsert, function(k, v) {
                                    $log.info('$scope.useOffRecordToEdit.purposeId' + JSON.stringify($scope.useOffRecordToEdit.purposeId));
                                    $log.info('$scope.useOffRecordToEdit.Param_otherDesc' + JSON.stringify($scope.useOffRecordToEdit.Param_otherDesc));
                                    let key = '';
                                    if($scope.useOffRecordToEdit.Param_otherDesc != null && $scope.useOffRecordToEdit.Param_otherDesc != '') {
                                        key = '::' + $scope.editOtherPurposeCategory + ':' + $scope.useOffRecordToEdit.country + ':' + $scope.useOffRecordToEdit.Param_otherDesc;
                                    } else {
                                        key = ':' + $scope.useOffRecordToEdit.purposeId + ':' + $scope.editOtherPurposeCategory + ':' + $scope.useOffRecordToEdit.country + ':';
                                    }
                                    if(k.indexOf(key) > -1) //Modified by neha under Issue-10859
                                        $scope.mapRecordsToDelete.push(k);
                                });

                                $.each($scope.mapRecordsToDelete, function(k, v) {
                                    delete $scope.mapSecondayDataAssetToInsert[v];
                                });
                                $log.info('In updateUseOff : $scope.mapSecondayDataAssetToInsert6 after' + JSON.stringify($scope.mapSecondayDataAssetToInsert));
                                

                                $('.purdesc').each(function() {
                                    if($(this).is(':checked'))
                                    {
                                        if($(this).attr('id').indexOf('POther') == -1)
                                        {
                                            isValAlreadyExisted = false;
                                            for(var i = 0; i < $scope.descIdsetAsses.length; i++)
                                            {
                                                if($scope.descIdsetAsses[i] == $(this).attr('id').trim())
                                                {
                                                    isValAlreadyExisted = true;
                                                    break;
                                                }
                                            }
                                            if(!isValAlreadyExisted)
                                            {
                                                $scope.descIdsetAsses.push(angular.copy($(this).attr('id').trim()));
                                            }
                                            $scope.selectedPurposeIds = $(this).attr('value').split('~')[0];
                                            $scope.selectedCategory =  $(this).attr('value').split('~')[3];
                                        }
                                    }
                                });

                                $(".otherDescUses").each(function() {
                                    if(!($(this).is(':disabled')) && $(this).val().trim().length > 0)
                                    {
                                        $scope.isdsIds = $(this).attr('id').trim().split('-');
                                        if($scope.isdsIds.length > 1)
                                            $scope.otherPurCatId = $scope.isdsIds[1];
                                        $scope.Param_otherDesc = $(this).val().trim();
                                        $scope.selectedPurposeIds = $(this).attr('name').trim().split('~')[1]; //Added by C.P.Pandey under Issue-7282
                                    }
                                });
                                
                                $log.info('In updateUseOff : $scope.SelectedDescMap' + JSON.stringify($scope.SelectedDescMap));
                                $log.info('In updateUseOff : $scope.selectedPurposeIds' + $scope.selectedPurposeIds);
                                $log.info('In updateUseOff : $scope.useOffRecordToEdit.purposeId' + $scope.useOffRecordToEdit.purposeId);
                                //$scope.isUseEdited = false;
                                if($scope.selectedPurposeIds != $scope.useOffRecordToEdit.purposeId) {
                                    $log.info('In updateUseOff - use changed');
                                    
                                    delete $scope.SelectedDescMap[$scope.useOffRecordToEdit.key];
                                    delete $scope.mapPurposeidWithDataAssetMap[$scope.useOffRecordToEdit.purposeId+':'+$scope.editOtherPurposeCategory+':'+$scope.useOffRecordToEdit.country+':'];
                                    delete $scope.mapPurposeidWithDataAssetMap[''+':'+ $scope.useOffRecordToEdit.country + ':' + $scope.editOtherPurposeCategory + ':' + $scope.useOffRecordToEdit.Param_otherDesc];
                                    $log.info('In updateUseOff : $scope.PurposeMap 1' + JSON.stringify($scope.PurposeMap));
                                    $log.info('In updateUseOff : $scope.MapPurpDescOther 2' + JSON.stringify($scope.MapPurpDescOther));
                                    $log.info('In updateUseOff : $scope.PurposeMapOther 2' + JSON.stringify($scope.PurposeMapOther));
                                    
                                    delete $scope.MapPurpDesc[$scope.useOffRecordToEdit.purposeId + $scope.editOtherPurposeCategory + $scope.useOffRecordToEdit.country];                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                    delete $scope.PurposeMap[$scope.useOffRecordToEdit.purposeId + $scope.editOtherPurposeCategory + $scope.useOffRecordToEdit.country];                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                    delete $scope.MapPurpDescOther['' + $scope.editOtherPurposeCategory + $scope.useOffRecordToEdit.country + $scope.useOffRecordToEdit.Param_otherDesc];                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                    delete $scope.PurposeMapOther['' + $scope.editOtherPurposeCategory + $scope.useOffRecordToEdit.country + $scope.useOffRecordToEdit.Param_otherDesc];                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                    $log.info('In updateUseOff : $scope.PurposeMap 2' + JSON.stringify($scope.PurposeMap));
                                    $scope.actionDetails += 'Use Changed addUses Called - ';
                                    $scope.addUses();
                                    $log.info('In updateUseOff : $scope.PurposeMap 3' + JSON.stringify($scope.PurposeMap));
                                    $log.info('In updateUseOff : $scope.MapPurpDescOther 3' + JSON.stringify($scope.MapPurpDescOther));
                                    $log.info('In updateUseOff : $scope.PurposeMapOther 3' + JSON.stringify($scope.PurposeMapOther));
                                    $scope.isUseOffInEditMode = false;
                                    //$scope.isUseEdited = true;                                                                                                                
                                    
                                    $log.info('In updateUseOff : $scope.mapSecondayDataAssetToInsert7 before' + JSON.stringify($scope.mapSecondayDataAssetToInsert));
                                    $log.info('In updateUseOff : $scope.mapPurposeidWithDataAssetMap before' + JSON.stringify($scope.mapPurposeidWithDataAssetMap));
                                
                                    return;
                                }// } else {
                                //     $scope.isUseEdited = false;
                                // }
                                $scope.addDataformultipleOff('Update');//Added By neha under CR-11745                              

                                
                                $(".dasscb").each(function() {
                                    if($(this).is(':checked'))
                                    {
                                        $scope.isAssetChecked = true;
                                        isValAlreadyExisted = false;
                                        for(var i = 0; i < $scope.setDAIds; i++)
                                        {
                                            if($scope.descIdsetAsses[i] == $(this).attr('id').trim())
                                            {
                                                isValAlreadyExisted = true;
                                                break;
                                            }
                                        }

                                        if(!isValAlreadyExisted)
                                        {
                                            $scope.setDAIds.push($(this).attr('id').trim());
                                            $scope.useOffRecordToEdit.dataAssetCopy += ($(this).parent().parent().find('a').first().text() + ', ');
                                            if($(this).parent().parent().find('a').first().text() != null && $(this).parent().parent().find('a').first().text().trim() == 'Other')
                                            {
                                                $scope.useOffRecordToEdit.selectdataAssDetailsCopy += ($(this).parent().parent().find('textarea').first().val() + ', ');
                                                if($(this).parent().parent().find('textarea').first().val() == null || $(this).parent().parent().find('textarea').first().val().trim().length == 0)
                                                {
                                                    $scope.isOtherAssetTextEmpty = true;
                                                    return false;
                                                }
                                                if($(this).parent().parent().find('textarea').first().val() != null && $(this).parent().parent().find('textarea').first().val().trim().length > 255)
                                                {
                                                    $scope.isOtherAssetText255 = true;
                                                    return false;
                                                }
                                            }
                                        }
                                    }
                                });

                                $scope.isAPLDError = false;
                                $scope.isAPLDSecOfferingSelected = false;
                                $.each($scope.proposalTreeDataRawSource.secondaryDataAssetList, function(k, v) {
                                    for(var i = 0; i < $scope.setDAIds.length; i++) {
                                        if($scope.setDAIds[i] == v.Id) {
                                            $scope.$log.info('APLA Validations:');
                                            if(v.Primary_Data_Asset__r.Asset_Name__c == 'APLD Custom Study Name & Project Delivery Date:') {
                                                $scope.isAPLDSecOfferingSelected = true;
                                                if($('#idApldStudyName') != null 
                                                && $('#idApldStudyName').is(":visible") 
                                                && !($('#idApldStudyName').is(':disabled'))  
                                                && ($('#idApldStudyName').val() == null || $('#idApldStudyName').val().trim().length == 0)) {
                                                    $scope.popupAlert("{!$Label.TPA_Please_add_description_for_the_selected_APLD_Study_Name_Offering}"); //Modify by C.P.Pandey custom popup,Modified by Govind under ER-1940
                                                    $scope.isAPLDError = true;
                                                    $scope.$log.info('APLA Validations:idApldStudyName');
                                                    return false;
                                                }
                                                else if($('#idApldStudyName') != null 
                                                        && $('#idApldStudyName').is(":visible") 
                                                        && !($('#idApldStudyName').is(':disabled')) 
                                                        && $('#idApldStudyName').val() != null 
                                                        && $('#idApldStudyName').val().trim().length > 255) {
                                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'APLD Custom Study Name & Project Delivery Date' + '</li>'  + "</ul>");
                                                    $scope.isAPLDError = true;
                                                    return false;
                                                }
                                                if($('#idApldDeliveryDate') != null 
                                                && $('#idApldDeliveryDate').is(":visible") 
                                                && !($('#idApldDeliveryDate').is(':disabled')) 
                                                && ($('#idApldDeliveryDate').val() == null ||  $('#idApldDeliveryDate').val().trim().length == 0)) {
                                                    $scope.popupAlert("{!$Label.TPA_Please_add_APLD_Delivery_Date_Offering}"); //,Modified by Govind under ER-1940
                                                    $scope.isAPLDError = true;
                                                    $scope.$log.info('APLA Validations:idApldDeliveryDate1');
                                                    return false;
                                                } 
                                                else if($('#idApldDeliveryDate') != null 
                                                        && $('#idApldDeliveryDate').is(":visible") 
                                                        && !($('#idApldDeliveryDate').is(':disabled')) 
                                                        && $('#idApldDeliveryDate').val() != null 
                                                        && !$scope.isValidDate($('#idApldDeliveryDate').val().trim(),'mm/dd/yyyy')) {
                                                    $scope.popupAlert("{!$Label.TPA_Please_add_the_APLD_Delivery_Date_in_MM_DD_YYYY}");  //Modified by Govind under ER-1940
                                                    $scope.isAPLDError = true;
                                                    $scope.$log.info('APLA Validations:idApldDeliveryDate2');
                                                    return false;
                                                }
                                                
                                                else if($('#idApldDeliveryDate') != null 
                                                        && $('#idApldDeliveryDate').is(":visible") 
                                                        && !($('#idApldDeliveryDate').is(':disabled')) 
                                                        && $('#idApldDeliveryDate').val() != null 
                                                        && $scope.isValidDate($('#idApldDeliveryDate').val().trim(),'mm/dd/yyyy')) {
                                                    var enteredDateSpiltted = $('#idApldDeliveryDate').val().split('/');
                                                    if(enteredDateSpiltted[2] < 1900) {
                                                        $scope.popupAlert("{!$Label.TPA_Please_add_the_APLD_Delivery_Date_greater_than_or_equal_to_01_01_1900}"); //Modified by Govind under ER-1940
                                                        $scope.isAPLDError = true;
                                                        $scope.$log.info('APLA Validations:idApldDeliveryDate3');
                                                        return false;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }); 
                                if($scope.isAPLDError) {
                                    $scope.$log.info('APLA Validations:isAPLDError');
                                    return false;
                                }
                                if(!$scope.isAPLDSecOfferingSelected 
                                && (($('#idApldDeliveryDate') != null && $('#idApldDeliveryDate').is(":visible") && $('#idApldStudyName').val() != null && $('#idApldStudyName').val().trim().length > 0)
                                    || ($('#idApldDeliveryDate') != null && $('#idApldDeliveryDate').is(":visible") && $('#idApldDeliveryDate').val() != null  && $('#idApldDeliveryDate').val().trim().length > 0))) {
                                    $scope.popupAlert("{!$Label.TPA_Select_one_or_more_of_the_following_assets_that_are_included_in_this_APLD_Cu}");
                                    return false;
                                }
                                
                                if($scope.useOffRecordToEdit.dataAssetCopy.length > 0)
                                {
                                    var tmpAssetArrCopy = $scope.useOffRecordToEdit.dataAssetCopy.split(',');
                                    tmpAssetArrCopy = tmpAssetArrCopy.filter(function(v){return v!==' '});
                                    $scope.useOffRecordToEdit.dataAssetCopy = tmpAssetArrCopy.join(',')+', ';
                                }
                                

                                if(!$scope.isAssetChecked)
                                {
                                    $scope.popupAlert("{!$Label.TPA_Select_the_Offerings_associated_with_this_Use_Then_click_Update_Use_to_updat}");//Updated By Babita Dadarwal under ER-2730,Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($scope.isOtherAssetTextEmpty)
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_description_for_the_selected_Other_Offering}");//Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($scope.isOtherAssetText255)
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'Other' + '</li>'  + "</ul>");
                                    return false;
                                }

                                
                                if($('#idRweStudyName') != null && $('#idRweStudyName').is(":visible") && !($('#idRweStudyName').is(':disabled'))  && ($('#idRweStudyName').val() == null || $('#idRweStudyName').val().trim().length == 0))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_description_for_the_selected_RWE_Study_Name_Offering}"); //Modify by C.P.Pandey custom popup,Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                else if($('#idRweStudyName') != null && $('#idRweStudyName').is(":visible") && !($('#idRweStudyName').is(':disabled'))  && ($('#idRweStudyName').val() != null && $('#idRweStudyName').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'RWE Custom Study Name & Project Delivery Date' + '</li>'  + "</ul>");
                                    return false;
                                }

                                if($('#idRweDeliveryDate') != null && $('#idRweDeliveryDate').is(":visible") && !($('#idRweDeliveryDate').is(':disabled')) && ($('#idRweDeliveryDate').val() == null ||  $('#idRweDeliveryDate').val().trim().length == 0))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_the_RWE_Delivery_Date_Offering}"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($('#idRweDeliveryDate') != null && $('#idRweDeliveryDate').is(":visible") && !($('#idRweDeliveryDate').is(':disabled')) && $('#idRweDeliveryDate').val() != null && !$scope.isValidDate($('#idRweDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_the_RWE_Delivery_Date_in_MM_DD_YYYY}");  //Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                else if($('#idRweDeliveryDate') != null && $('#idRweDeliveryDate').is(":visible") && !($('#idRweDeliveryDate').is(':disabled')) && $('#idRweDeliveryDate').val() != null && $scope.isValidDate($('#idRweDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    var enteredDateSpiltted = $('#idRweDeliveryDate').val().split('/');
                                    if(enteredDateSpiltted[2] < 1900)
                                    {
                                        $scope.popupAlert("{!$Label.TPA_Please_add_the_RWE_Delivery_Date_greater_than_or_equal_to_01_01_1900}");  //Modified by Govind under ER-1940
                                        return false;
                                    }
                                }
                                
                                
                                if($('#idStiData') != null && $('#idStiData').is(":visible") && !($('#idStiData').is(':disabled'))  && ($('#idStiData').val() == null || $('#idStiData').val().trim().length == 0)) {
                                    $scope.popupAlert("{!$Label.TPA_Please_provide_report_name_for_STI_Data_Offering}");
                                    return false;
                                }
                                
                                if($('#idStiData') != null && $('#idStiData').is(":visible") && !($('#idStiData').is(':disabled'))  && ($('#idStiData').val() != null && $('#idStiData').val().trim().length > 255)) {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'STI Data - Custom Report Name' + '</li>'  + "</ul>");
                                    return false;
                                }

                                
                                var isblankInputforPriOff = $scope.showErrorPopupforOff($scope.priDataAssetFieldMap);
                                if(isblankInputforPriOff[0])
                                {
                                    $scope.popupAlert(isblankInputforPriOff[1]);
                                    return false;
                                }
                                
                                var isblankInputforsecOff = $scope.showErrorPopupforOff($scope.secDataAssetFieldMap);
                                if(isblankInputforsecOff[0])
                                {
                                    $scope.popupAlert(isblankInputforsecOff[1]);
                                    return false;
                                }
                                
                                if($('#idConsumerStudyName') != null && $('#idConsumerStudyName').is(":visible") && !($('#idConsumerStudyName').is(':disabled'))  && ($('#idConsumerStudyName').val() == null || $('#idConsumerStudyName').val().trim().length == 0))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_description_for_the_selected_Consumer_Profiles_Study_Name_Offerin}"); //Modify by C.P.Pandey custom popup,Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                if($('#idConsumerStudyName') != null && $('#idConsumerStudyName').is(":visible") && !($('#idConsumerStudyName').is(':disabled'))  && ($('#idConsumerStudyName').val() != null && $('#idConsumerStudyName').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'Consumer Profiles Study Name Offering' + '</li>'  + "</ul>");
                                    return false;
                                }

                                if($('#idConsumerDeliveryDate') != null && $('#idConsumerDeliveryDate').is(":visible") && !($('#idConsumerDeliveryDate').is(':disabled')) && ($('#idConsumerDeliveryDate').val() == null ||  $('#idConsumerDeliveryDate').val().trim().length == 0))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_Offering}"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($('#idConsumerDeliveryDate') != null && $('#idConsumerDeliveryDate').is(":visible") && !($('#idConsumerDeliveryDate').is(':disabled')) && $('#idConsumerDeliveryDate').val() != null && !$scope.isValidDate($('#idConsumerDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_in_MM_DD_YYYY}"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                else if($('#idConsumerDeliveryDate') != null && $('#idConsumerDeliveryDate').is(":visible") && !($('#idConsumerDeliveryDate').is(':disabled')) && $('#idConsumerDeliveryDate').val() != null && $scope.isValidDate($('#idConsumerDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    var enteredDateSpiltted = $('#idConsumerDeliveryDate').val().split('/');
                                    if(enteredDateSpiltted[2] < 1900)
                                    {
                                        $scope.popupAlert("{!$Label.TPA_Please_add_the_Consumer_Profiles_Delivery_Date_greater_than_or_equal_to_01_0}");  //Modified by Govind under ER-1940
                                        return false;
                                    }
                                }
                                
                                if($('#idROIStudyName') != null && $('#idROIStudyName').is(":visible") && !($('#idROIStudyName').is(':disabled'))  && ($('#idROIStudyName').val() == null || $('#idROIStudyName').val().trim().length == 0))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_description_for_the_selected_Promotional_Response_ROI_Study_Nam}"); //Modify by C.P.Pandey custom popup,//Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                if($('#idROIStudyName') != null && $('#idROIStudyName').is(":visible") && !($('#idROIStudyName').is(':disabled'))  && ($('#idROIStudyName').val() != null && $('#idROIStudyName').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'Promotional Response (ROI) Study Name Offering' + '</li>'  + "</ul>");
                                    return false;
                                }

                                if($('#idROIDeliveryDate') != null && $('#idROIDeliveryDate').is(":visible") && !($('#idROIDeliveryDate').is(':disabled')) && ($('#idROIDeliveryDate').val() == null ||  $('#idROIDeliveryDate').val().trim().length == 0))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_Promotional_Response_ROI_Delivery_Date_Offering}"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($('#idROIDeliveryDate') != null && $('#idROIDeliveryDate').is(":visible") && !($('#idROIDeliveryDate').is(':disabled')) && $('#idROIDeliveryDate').val() != null && !$scope.isValidDate($('#idROIDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    $scope.popupAlert("{!$Label.TPA_Please_add_the_Promotional_Response_ROI_Delivery_Date_in_MM_DD_YYYY}"); //Modified by Govind under ER-1940
                                    return false;
                                }

                                
                                var hpClaimsValidateId = "[id='id-{!$Label.TPA_PharMetrics_Plus_Health_Plan_Claims}']";
                                if($(hpClaimsValidateId) != null && $(hpClaimsValidateId).is(":visible") && !($(hpClaimsValidateId).is(':disabled'))  && ($(hpClaimsValidateId).val() == null || $(hpClaimsValidateId).val().trim().length == 0))
                                {
                                    $scope.popupAlert("{!$Label.Please_provide_the_description_for_Health_plan_claims_data_Health_Plan_Claims_Da}");
                                    return false;
                                }
                                
                                if($(hpClaimsValidateId) != null && $(hpClaimsValidateId).is(":visible") && !($(hpClaimsValidateId).is(':disabled'))  && ($(hpClaimsValidateId).val() != null && $(hpClaimsValidateId).val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + '{!$Label.TPA_PharMetrics_Plus_Health_Plan_Claims}' + '</li>'  + "</ul>");
                                    return false;
                                }
                                
                                else if($('#idROIDeliveryDate') != null && $('#idROIDeliveryDate').is(":visible") && !($('#idROIDeliveryDate').is(':disabled')) && $('#idROIDeliveryDate').val() != null && $scope.isValidDate($('#idROIDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    var enteredDateSpiltted = $('#idROIDeliveryDate').val().split('/');
                                    if(enteredDateSpiltted[2] < 1900)
                                    {
                                        $scope.popupAlert("{!$Label.TPA_Please_add_the_Promotional_Response_ROI_Delivery_Date_greater_than_or_equa}"); //Modified by Govind under ER-1940
                                        return false;
                                    }
                                }
                                
                                if($('#idBrandImpactStudyName') != null && $('#idBrandImpactStudyName').is(":visible") && !($('#idBrandImpactStudyName').is(':disabled'))  && ($('#idBrandImpactStudyName').val() == null || $('#idBrandImpactStudyName').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the BrandImpact Study Name"); //Modify by C.P.Pandey custom popup,//Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                if($('#idBrandImpactStudyName') != null && $('#idBrandImpactStudyName').is(":visible") && !($('#idBrandImpactStudyName').is(':disabled'))  && ($('#idBrandImpactStudyName').val() != null && $('#idBrandImpactStudyName').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'BrandImpact Study Name Offering' + '</li>'  + "</ul>");
                                    return false;
                                }

                                if($('#idBrandImpactDeliveryDate') != null && $('#idBrandImpactDeliveryDate').is(":visible") && !($('#idBrandImpactDeliveryDate').is(':disabled')) && ($('#idBrandImpactDeliveryDate').val() == null ||  $('#idBrandImpactDeliveryDate').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the BrandImpact Delivery Date"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($('#idBrandImpactDeliveryDate') != null && $('#idBrandImpactDeliveryDate').is(":visible") && !($('#idBrandImpactDeliveryDate').is(':disabled')) && $('#idBrandImpactDeliveryDate').val() != null && !$scope.isValidDate($('#idBrandImpactDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    $scope.popupAlert("Please provide the BrandImpact Delivery Date in MM/DD/YYYY format"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                else if($('#idBrandImpactDeliveryDate') != null && $('#idBrandImpactDeliveryDate').is(":visible") && !($('#idBrandImpactDeliveryDate').is(':disabled')) && $('#idBrandImpactDeliveryDate').val() != null && $scope.isValidDate($('#idBrandImpactDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    var enteredDateSpiltted = $('#idBrandImpactDeliveryDate').val().split('/');
                                    if(enteredDateSpiltted[2] < 1900)
                                    {
                                        $scope.popupAlert("Please provide the BrandImpact Delivery Date greater than 01/01/1900"); //Modified by Govind under ER-1940
                                        return false;
                                    }
                                }

                                if($('#idChannelDynamicsStudyName') != null && $('#idChannelDynamicsStudyName').is(":visible") && !($('#idChannelDynamicsStudyName').is(':disabled'))  && ($('#idChannelDynamicsStudyName').val() == null || $('#idChannelDynamicsStudyName').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the Channel Dynamics Study Name"); //Modify by C.P.Pandey custom popup,//Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                if($('#idChannelDynamicsStudyName') != null && $('#idChannelDynamicsStudyName').is(":visible") && !($('#idChannelDynamicsStudyName').is(':disabled'))  && ($('#idChannelDynamicsStudyName').val() != null && $('#idChannelDynamicsStudyName').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'Channel Dynamics Study Name Offering' + '</li>' + "</ul>");
                                    return false;
                                }

                                if($('#idChannelDynamicsDeliveryDate') != null && $('#idChannelDynamicsDeliveryDate').is(":visible") && !($('#idChannelDynamicsDeliveryDate').is(':disabled')) && ($('#idChannelDynamicsDeliveryDate').val() == null ||  $('#idChannelDynamicsDeliveryDate').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the Channel Dynamics Delivery Date"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($('#idChannelDynamicsDeliveryDate') != null && $('#idChannelDynamicsDeliveryDate').is(":visible") && !($('#idChannelDynamicsDeliveryDate').is(':disabled')) && $('#idChannelDynamicsDeliveryDate').val() != null && !$scope.isValidDate($('#idChannelDynamicsDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    $scope.popupAlert("Please provide the Channel Dynamics Delivery Date in MM/DD/YYYY format"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                else if($('#idChannelDynamicsDeliveryDate') != null && $('#idChannelDynamicsDeliveryDate').is(":visible") && !($('#idChannelDynamicsDeliveryDate').is(':disabled')) && $('#idChannelDynamicsDeliveryDate').val() != null && $scope.isValidDate($('#idChannelDynamicsDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    var enteredDateSpiltted = $('#idChannelDynamicsDeliveryDate').val().split('/');
                                    if(enteredDateSpiltted[2] < 1900)
                                    {
                                        $scope.popupAlert("Please provide the Channel Dynamics Delivery Date greater than 01/01/1900"); //Modified by Govind under ER-1940
                                        return false;
                                    }
                                }

                                if($('#idProVoiceStudyName') != null && $('#idProVoiceStudyName').is(":visible") && !($('#idProVoiceStudyName').is(':disabled'))  && ($('#idProVoiceStudyName').val() == null || $('#idProVoiceStudyName').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the Pro Voice Study Name"); //Modify by C.P.Pandey custom popup,//Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                if($('#idProVoiceStudyName') != null && $('#idProVoiceStudyName').is(":visible") && !($('#idProVoiceStudyName').is(':disabled'))  && ($('#idProVoiceStudyName').val() != null && $('#idProVoiceStudyName').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'Pro Voice Study Name Offering' + '</li>'  + "</ul>");
                                    return false;
                                }

                                if($('#idProVoiceDeliveryDate') != null && $('#idProVoiceDeliveryDate').is(":visible") && !($('#idProVoiceDeliveryDate').is(':disabled')) && ($('#idProVoiceDeliveryDate').val() == null ||  $('#idProVoiceDeliveryDate').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the Pro Voice Delivery Date"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                else if($('#idProVoiceDeliveryDate') != null && $('#idProVoiceDeliveryDate').is(":visible") && !($('#idProVoiceDeliveryDate').is(':disabled')) && $('#idProVoiceDeliveryDate').val() != null && !$scope.isValidDate($('#idProVoiceDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    $scope.popupAlert("Please provide the Pro Voice Delivery Date in MM/DD/YYYY format"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                else if($('#idProVoiceDeliveryDate') != null && $('#idProVoiceDeliveryDate').is(":visible") && !($('#idProVoiceDeliveryDate').is(':disabled')) && $('#idProVoiceDeliveryDate').val() != null && $scope.isValidDate($('#idProVoiceDeliveryDate').val().trim(),'mm/dd/yyyy'))
                                {
                                    var enteredDateSpiltted = $('#idProVoiceDeliveryDate').val().split('/');
                                    if(enteredDateSpiltted[2] < 1900)
                                    {
                                        $scope.popupAlert("Please provide the Pro Voice Delivery Date greater than 01/01/1900"); //Modified by Govind under ER-1940
                                        return false;
                                    }
                                }
                                
                                if($('#idSTIDataCustomReportName') != null && $('#idSTIDataCustomReportName').is(":visible") && !($('#idSTIDataCustomReportName').is(':disabled')) && ($('#idSTIDataCustomReportName').val() == null ||  $('#idSTIDataCustomReportName').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the STI Data Report Name."); //Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                if($('#idSTIDataCustomReportName') != null && $('#idSTIDataCustomReportName').is(":visible") && !($('#idSTIDataCustomReportName').is(':disabled')) && ($('#idSTIDataCustomReportName').val() != null &&  $('#idSTIDataCustomReportName').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'STI Data Report Name Offering' + '</li>'  + "</ul>");
                                    return false;
                                }

                                if($('#idCustomizedData') != null && $('#idCustomizedData').is(":visible") && !($('#idCustomizedData').is(':disabled')) && ($('#idCustomizedData').val() == null ||  $('#idCustomizedData').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide Customized Data Detail Text"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                if($('#idCustomizedData') != null && $('#idCustomizedData').is(":visible") && !($('#idCustomizedData').is(':disabled')) && ($('#idCustomizedData').val() != null &&  $('#idCustomizedData').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'Customized Data Detail Text Offering' + '</li>'  + "</ul>");
                                    return false;
                                }
                                if($('#idCustomizedDataSubNat') != null && $('#idCustomizedDataSubNat').is(":visible") && !($('#idCustomizedDataSubNat').is(':disabled')) && ($('#idCustomizedDataSubNat').val() == null ||  $('#idCustomizedDataSubNat').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide Customized Data Detail Text"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                if($('#idCustomizedDataSubNat') != null && $('#idCustomizedDataSubNat').is(":visible") && !($('#idCustomizedDataSubNat').is(':disabled')) && ($('#idCustomizedDataSubNat').val() != null &&  $('#idCustomizedDataSubNat').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'Customized Data Detail Text Offering' + '</li>'  + "</ul>");
                                    return false;
                                }
                                
                                if($('#idOutlinerLabelCode') != null && $('#idOutlinerLabelCode').is(":visible") && !($('#idOutlinerLabelCode').is(':disabled'))  && ($('#idOutlinerLabelCode').val() == null || $('#idOutlinerLabelCode').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the Label Code for OutlierView Labeler Codes & Data Period(s) Offering"); //Modify by C.P.Pandey custom popup,//Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                if($('#idOutlinerLabelCode') != null && $('#idOutlinerLabelCode').is(":visible") && !($('#idOutlinerLabelCode').is(':disabled'))  && ($('#idOutlinerLabelCode').val() != null && $('#idOutlinerLabelCode').val().trim().length > 255))
                                {
                                    $scope.popupAlert('Offering text should not exceed 255 characters' + "<ul>" + '<li>' + 'OutlierView Labeler Codes & Data Period(s) Offering' + '</li>'  + "</ul>");
                                    return false;
                                }

                                if($('#idOutlinerDate') != null && $('#idOutlinerDate').is(":visible") && !($('#idOutlinerDate').is(':disabled')) && ($('#idOutlinerDate').val() == null ||  $('#idOutlinerDate').val().trim().length == 0))
                                {
                                    $scope.popupAlert("Please provide the Data Period Date for OutlierView Labeler Codes & Data Period(s) Offering"); //Modified by Govind under ER-1940
                                    return false;
                                }
                                
                                $scope.useOffRecordToEdit.dataAsset = $scope.useOffRecordToEdit.dataAssetCopy.substring(0, $scope.useOffRecordToEdit.dataAssetCopy.length - 2);

                                $scope.useOffRecordToEdit.selectdataAssDetails = $scope.useOffRecordToEdit.selectdataAssDetailsCopy.substring(0, $scope.useOffRecordToEdit.selectdataAssDetailsCopy.length - 2);
                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails = '';

                                $(".otherDescAssets").each(function()
                                {
                                    if(!($(this).is(':disabled')) && $(this).val().trim().length > 0)
                                    {
                                        $scope.mapDAssIdWithDataAssOther[$(this).attr('name')] = angular.copy($(this).val().trim());
                                    }
                                });

                                angular.forEach($scope.proposalTreeDataRawSource.dataAssetList, function(v, k)
                                {
                                    for(var i = 0; i < $scope.setDAIds.length; i++)
                                    {
                                        if($scope.setDAIds[i] == v.Id && angular.copy($scope.mlObj.selectedRegion.Default_Value__c) == v.BU__c)
                                        {
                                            
                                            if($scope.commDataAsset.indexOf(v.Asset_Name__c) == -1)
                                            {
                                                $scope.commDataAsset += v.Asset_Name__c + ', ';
                                                if(v[$scope.mlObj.selectedLanguageField] == null)
                                                    $scope.tranCommDataAsset += v.Asset_Name__c + ', ';
                                                else
                                                    $scope.tranCommDataAsset += v[$scope.mlObj.selectedLanguageField] + ', ';
                                            }
                                            

                                            $scope.TPA_Data_Asset__c = {};
                                            $scope.TPA_Data_Asset__c['Asset_NametText__c'] = v.Asset_Name__c;
                                            $scope.TPA_Data_Asset__c['BU__c'] = angular.copy($scope.mlObj.selectedRegion.Default_Value__c);
                                            $scope.TPA_Data_Asset__c['Geo_Level__c'] = v.Geo_Level__c;
                                            $scope.offeringCategoryDuplicateName = $scope.mlObj.geoLevelMap[v.Geo_Level__c];
                                            $scope.offeringCategoryName += $scope.offeringCategoryDuplicateName + ', ';//Added by Shaik
                                            
                                            $scope.TPA_Data_Asset__c['Data_Asset__c'] = v.Id;
                                            $scope.TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = v.Is_IMS_AGProduct__c;
                                            //$scope.TPA_Data_Asset__c['Is_Restricted_Data__c'] = v.Is_Restricted_Data__c;

                                            if(v.Asset_Name__c == 'Other')
                                            {
                                                $scope.TPA_Data_Asset__c['Other_Data_Asset_Details__c'] = $scope.mapDAssIdWithDataAssOther[v.Id];
                                                $scope.TPA_Data_Asset__c['Other_Text__c'] = $scope.mapDAssIdWithDataAssOther[v.Id]; //Added by C.P.Pandey under Issue-6319
                                                if($scope.dataAssDetails.indexOf('Other : ') == -1)
                                                    $scope.dataAssDetails += '';
                                                $scope.dataAssDetails += (' ' + $scope.mapDAssIdWithDataAssOther[v.Id] + ',');
                                            }
                                            
                                            if(v.Asset_Name__c == 'RWE Custom Study Name & Project Delivery Date:' && $('#idRweStudyName').val() != null && $('#idRweDeliveryDate').val() != null){
                                                $scope.TPA_Data_Asset__c['RWE_Study_Name__c'] = $('#idRweStudyName').val().trim().toLowerCase(); //Updated by Babita Dadarwal under CR-09036 on 30 June 2016
                                                var deliveryDate = new Date($('#idRweDeliveryDate').val().trim());
                                                $scope.TPA_Data_Asset__c['RWE_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                v.Asset_Name__c + ' RWE Study Name -' + $('#idRweStudyName').val().trim().toLowerCase() + '; RWE Delivery Date -' + $scope.TPA_Data_Asset__c['RWE_Delivery_Date__c'];
                                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c + ' Study Name -' + $('#idRweStudyName').val().trim().toLowerCase() + '; Delivery Date -' + $scope.TPA_Data_Asset__c['RWE_Delivery_Date__c']+ ' ,';
                                            }
                                            
                                            
                                            var fieldApiName = $scope.priDataAssetFieldMap[v.Asset_Name__c];
                                            var fieldValue = $("[id='id-"+v.Asset_Name__c+"']").val();
                                            if(fieldValue != null){
                                                $scope.TPA_Data_Asset__c[fieldApiName] = fieldValue.trim();
                                                $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                v.Asset_Name__c +' Description -'+ fieldValue.trim();
                                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c + ' Description -' + fieldValue.trim()+ ' ,';
                                            }
                                            

                                            if(v.Asset_Name__c == $scope.lbConsumerProfile && $('#idConsumerStudyName').val() != null && $('#idConsumerDeliveryDate').val() != null){
                                                $scope.TPA_Data_Asset__c['Consumer_Profile_Study_Name__c'] = $('#idConsumerStudyName').val().trim();
                                                var deliveryDate = new Date($('#idConsumerDeliveryDate').val().trim());
                                                $scope.TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                $scope.lbConsumerProfile + ' Study Name -' + $('#idConsumerStudyName').val().trim() + '; Delivery Date -' + $scope.TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'];
                                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += $scope.lbConsumerProfile + ' Study Name -' + $('#idConsumerStudyName').val().trim() + ' Delivery Date -' + $scope.TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c']+ ' ,';
                                            }
                                            if(v.Asset_Name__c == $scope.lbROI && $('#idROIStudyName').val() != null && $('#idROIDeliveryDate').val() != null){
                                                $scope.TPA_Data_Asset__c['Promotional_ROI_Study_Name__c'] = $('#idROIStudyName').val().trim();
                                                var deliveryDate = new Date($('#idROIDeliveryDate').val().trim());
                                                $scope.TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+$scope.lbROI + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                $scope.lbROI + ' Study Name -' + $('#idROIStudyName').val().trim() + '; Delivery Date -' + $scope.TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'];
                                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += $scope.lbROI + ' Study Name -' + $('#idROIStudyName').val().trim() + ' Delivery Date -' + $scope.TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c']+ ' ,';
                                            }

                                            if(v.Asset_Name__c == 'Customized IQVIA Data - Specify name of Customized Data will be shared:' && v.Geo_Level__c == 'Sub-National' && $('#idCustomizedDataSubNat').val() != null ){
                                                $scope.TPA_Data_Asset__c['Customized_Data_Text__c'] = $('#idCustomizedDataSubNat').val().trim();
                                                $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' '+v.Geo_Level__c] =
                                                v.Asset_Name__c +' Description -' + $('#idCustomizedDataSubNat').val().trim();
                                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails +=  v.Asset_Name__c +' Description -' + $('#idCustomizedDataSubNat').val().trim()+ ' ,';
                                            }
                                            if(v.Asset_Name__c == 'Customized IQVIA Data - Specify name of Customized Data will be shared:' && v.Geo_Level__c == 'National' && $('#idCustomizedData').val() != null){
                                                $scope.TPA_Data_Asset__c['Customized_Data_Text__c'] = $('#idCustomizedData').val().trim();

                                                $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' '+v.Geo_Level__c] =
                                                v.Asset_Name__c +' Description -' + $('#idCustomizedData').val().trim();
                                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Description -' + $('#idCustomizedData').val().trim()+ ' ,';
                                            }
                                            
                                            if(v.Asset_Name__c == $scope.PharMetricsOfferingName && $(hpClaimsValidateId).val() != null && $(hpClaimsValidateId).val() != '') {
                                                $scope.TPA_Data_Asset__c['Health_Plan_Claims_Data__c'] = $(hpClaimsValidateId).val().trim();
                                                $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                v.Asset_Name__c +' Description -' + $(hpClaimsValidateId).val().trim();
                                                $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Description -' + $(hpClaimsValidateId).val().trim()+ ' ,';
                                                
                                            }
                                            

                                            $scope.setIMSDataAssetsToInsert.push(angular.copy($scope.TPA_Data_Asset__c));
                                        }
                                    }
                                });

                                if($scope.useOffRecordToEdit.Param_otherDesc != null && $scope.useOffRecordToEdit.Param_otherDesc != '')
                                {
                                    $scope.mapPurposeidWithDataAssetMap[':'+$scope.useOffRecordToEdit.country+':'+$scope.editOtherPurposeCategory+':'+$scope.useOffRecordToEdit.Param_otherDesc] = angular.copy($scope.setIMSDataAssetsToInsert);
                                    $scope.useOffRecordToEdit.purposeId = '';
                                }
                                else
                                    $scope.mapPurposeidWithDataAssetMap[$scope.useOffRecordToEdit.purposeId+':'+$scope.editOtherPurposeCategory+':'+$scope.useOffRecordToEdit.country+':'] = angular.copy($scope.setIMSDataAssetsToInsert);

                                $scope.imsPrimaryDASet = {};
                                
                                $.each($scope.proposalTreeDataRawSource.secondaryDataAssetList, function(k, v)
                                {
                                    for(var i = 0; i < $scope.setDAIds.length; i++)
                                    {
                                        $log.info('$scope.setDAIds[i] = ' + JSON.stringify($scope.setDAIds[i]));

                                        if($scope.setDAIds[i] == v.Id)
                                        {
                                            $scope.$log.info('called1');
                                            $scope.commDataAsset += v.Secondary_Asset_Name__c + ', ';
                                            
                                            if(v[$scope.mlObj.selectedLanguageField] == null)
                                                $scope.tranCommDataAsset += v.Secondary_Asset_Name__c + ', ';
                                            else
                                                $scope.tranCommDataAsset += v[$scope.mlObj.selectedLanguageField] + ', ';
                                            

                                            if($scope.imsPrimaryDASet[v.Primary_Data_Asset__c] == null)
                                            {
                                                $scope.$log.info('imsPrimaryDASet1:');
                                                $scope.TPA_Data_Asset__c = {};
                                                $scope.TPA_Data_Asset__c['Asset_NametText__c'] = v.Primary_Data_Asset__r.Asset_Name__c;
                                                $scope.TPA_Data_Asset__c['BU__c'] = angular.copy($scope.mlObj.selectedRegion.Default_Value__c);
                                                $scope.TPA_Data_Asset__c['Geo_Level__c'] = v.Primary_Data_Asset__r.Geo_Level__c;
                                                $scope.TPA_Data_Asset__c['Data_Asset__c'] = v.Primary_Data_Asset__r.Id;
                                                $scope.TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = v.Primary_Data_Asset__r.Is_IMS_AGProduct__c;
                                                //$scope.TPA_Data_Asset__c['Is_Restricted_Data__c'] = v.Primary_Data_Asset__r.Is_Restricted_Data__c;
                                                $scope.offeringCategoryDuplicateName = $scope.mlObj.geoLevelMap[v.Primary_Data_Asset__r.Geo_Level__c];
                                                $scope.offeringCategoryName += $scope.offeringCategoryDuplicateName + ', ';//Added by Shaik
                                                if(v.Primary_Data_Asset__r.Asset_Name__c == 'APLD Custom Study Name & Project Delivery Date:' 
                                                && $('#idApldStudyName').val() != null 
                                                && $('#idApldDeliveryDate').val() != null) {
                                                    $scope.$log.info('imsPrimaryDASet1:APLD SAved');
                                                    $scope.TPA_Data_Asset__c['APLD_Study_Name__c'] = $('#idApldStudyName').val().trim().toLowerCase(); //Updated by Babita Dadarwal under CR-09036 on 30 June 2016
                                                    var deliveryDate = new Date($('#idApldDeliveryDate').val().trim());
                                                    $scope.TPA_Data_Asset__c['APLD_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Primary_Data_Asset__r.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Primary_Data_Asset__r.Asset_Name__c +' Study Name -' + $scope.TPA_Data_Asset__c['APLD_Study_Name__c'] +'; Delivery Date -'+$scope.TPA_Data_Asset__c['APLD_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Primary_Data_Asset__r.Asset_Name__c +' Study Name -' + $scope.TPA_Data_Asset__c['APLD_Study_Name__c'] +' Delivery Date -'+$scope.TPA_Data_Asset__c['APLD_Delivery_Date__c']+' ,';
                                                    
                                                }
                                                
                                                if(v.Primary_Data_Asset__r.Asset_Name__c == 'Other')
                                                {
                                                    $scope.TPA_Data_Asset__c['Other_Data_Asset_Details__c'] = $scope.mapDAssIdWithDataAssOther[v.Id];
                                                    $scope.dataAssDetails += $scope.mapDAssIdWithDataAssOther[v.Id] + ',';
                                                }

                                                if(v.Asset_Name__c == 'APLD Custom Study Name & Project Delivery Date:' && $('#idApldStudyName').val() != null && $('#idApldDeliveryDate').val() != null){
                                                    $scope.TPA_Data_Asset__c['APLD_Study_Name__c'] = $('#idApldStudyName').val().trim().toLowerCase(); //Updated by Babita Dadarwal under CR-09036 on 30 June 2016
                                                    var deliveryDate = new Date($('#idApldDeliveryDate').val().trim());
                                                    $scope.TPA_Data_Asset__c['APLD_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Asset_Name__c +' Study Name -' + $scope.TPA_Data_Asset__c['APLD_Study_Name__c'] +'; Delivery Date -'+$scope.TPA_Data_Asset__c['APLD_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Study Name -' + $scope.TPA_Data_Asset__c['APLD_Study_Name__c'] +' Delivery Date -'+$scope.TPA_Data_Asset__c['APLD_Delivery_Date__c']+ ' ,';
                                                }
                                                if(v.Asset_Name__c == 'RWE Custom Study Name & Project Delivery Date:' && $('#idRweStudyName').val() != null && $('#idRweDeliveryDate').val() != null){
                                                    $scope.TPA_Data_Asset__c['RWE_Study_Name__c'] = $('#idRweStudyName').val().trim().toLowerCase(); //Updated by Babita Dadarwal under CR-09036 on 30 June 2016
                                                    var deliveryDate = new Date($('#idRweDeliveryDate').val().trim());
                                                    $scope.TPA_Data_Asset__c['RWE_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Asset_Name__c +' Study Name -' + $scope.TPA_Data_Asset__c['RWE_Study_Name__c'] +'; Delivery Date -'+$scope.TPA_Data_Asset__c['RWE_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Study Name -' + $scope.TPA_Data_Asset__c['RWE_Study_Name__c'] +' Delivery Date -'+$scope.TPA_Data_Asset__c['RWE_Delivery_Date__c']+ ' ,';
                                                }
                                                
                                                var fieldApiName = $scope.priDataAssetFieldMap[v.Asset_Name__c];
                                                var fieldValue = $("[id='id-"+v.Asset_Name__c+"']").val();
                                                if(fieldValue != null){
                                                    $scope.TPA_Data_Asset__c[fieldApiName] = fieldValue.trim();
                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Asset_Name__c +' Description -'+ fieldValue.trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c  +' Description -'+ fieldValue.trim()+ ' ,';
                                                }
                                                

                                                if(v.Asset_Name__c == $scope.lbConsumerProfile && $('#idConsumerStudyName').val() != null && $('#idConsumerDeliveryDate').val() != null){
                                                    $scope.TPA_Data_Asset__c['Consumer_Profile_Study_Name__c'] = $('#idConsumerStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idConsumerDeliveryDate').val().trim());
                                                    $scope.TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Asset_Name__c +' Name -' + $('#idConsumerStudyName').val().trim() +'; Delivery Date -'+$scope.TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Name -' + $('#idConsumerStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Data_Asset__c['Consumer_Profile_Delivery_Date__c']+ ' ,';
                                                }
                                                if(v.Asset_Name__c == $scope.lbROI && $('#idROIStudyName').val() != null && $('#idROIDeliveryDate').val() != null){
                                                    $scope.TPA_Data_Asset__c['Promotional_ROI_Study_Name__c'] = $('#idROIStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idROIDeliveryDate').val().trim());
                                                    $scope.TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();
													$scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Asset_Name__c +' Study Name -' + $('#idROIStudyName').val().trim() +'; Delivery Date -'+$scope.TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Study Name -' + $('#idROIStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Data_Asset__c['Promotional_ROI_Delivery_Date__c']+ ' ,';
                                                    
                                                }
                                                if(v.Asset_Name__c == 'Customized IQVIA Data - Specify name of Customized Data will be shared:' && v.Geo_Level__c == 'Sub-National' && $('#idCustomizedDataSubNat').val() != null ){
                                                    $scope.TPA_Data_Asset__c['Customized_Data_Text__c'] = $('#idCustomizedDataSubNat').val().trim();
                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Asset_Name__c +' Description -' + $('#idCustomizedDataSubNat').val().trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Description -' + $('#idCustomizedDataSubNat').val().trim()+ ' ,';
                                                }
                                                if(v.Asset_Name__c == 'Customized IQVIA Data - Specify name of Customized Data will be shared:' && v.Geo_Level__c == 'National' && $('#idCustomizedData').val() != null){
                                                    $scope.TPA_Data_Asset__c['Customized_Data_Text__c'] = $('#idCustomizedData').val().trim();
                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)] =
                                                    v.Asset_Name__c +' Description -' + $('#idCustomizedData').val().trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Asset_Name__c +' Description -' + $('#idCustomizedData').val().trim()+ ' ,';
                                                }
                                                
                                                $scope.setIMSDataAssetsToInsert.push($scope.TPA_Data_Asset__c);
                                                if($scope.useOffRecordToEdit.Param_otherDesc != null && $scope.useOffRecordToEdit.Param_otherDesc != '')
                                                    $scope.mapPurposeidWithDataAssetMap[':'+$scope.useOffRecordToEdit.country+':'+$scope.editOtherPurposeCategory+':'+$scope.useOffRecordToEdit.Param_otherDesc] = angular.copy($scope.setIMSDataAssetsToInsert);
                                                else
                                                    $scope.mapPurposeidWithDataAssetMap[$scope.useOffRecordToEdit.purposeId+':'+$scope.editOtherPurposeCategory+':'+$scope.useOffRecordToEdit.country+':'] = angular.copy($scope.setIMSDataAssetsToInsert);
                                                $scope.TPA_Secondary_Data_Asset__c = {};
                                                $scope.TPA_Secondary_Data_Asset__c['Secondary_Asset_Name__c'] = v.Secondary_Asset_Name__c;
                                                $scope.TPA_Secondary_Data_Asset__c['IMS_Secondary_Data_Asset__c'] = v.Id;
                                                
                                                var invalid = /["%()\[\]{}=\\?`'#<>|,;.:+-]+/g;
                                                var fieldName = (v.Secondary_Asset_Name__c+"").replace(/ /g,"_").replace(invalid,"").replace("__","_")+'__c';
                                                var fieldValue = $("[id='id-"+v.Secondary_Asset_Name__c+"']").val();
                                                if(fieldValue != null){
                                                    $scope.TPA_Secondary_Data_Asset__c[fieldName] = fieldValue.trim();
                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Description -'+ fieldValue.trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c + ' Description -'+ fieldValue.trim()+ ' ,';
                                                
                                                }
                                                
                                                if(v.Secondary_Asset_Name__c == 'BrandImpact Custom Study Name & Project Delivery Date:' && $('#idBrandImpactStudyName').val() != null && $('#idBrandImpactDeliveryDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['BrandImpact_Study_Name__c'] = $('#idBrandImpactStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idBrandImpactDeliveryDate').val().trim());
                                                    $scope.TPA_Secondary_Data_Asset__c['BrandImpact_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Study Name -' + $('#idBrandImpactStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Data_Asset__c['BrandImpact_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Study Name -' + $('#idBrandImpactStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Data_Asset__c['BrandImpact_Delivery_Date__c']+ ' ,';
                                                }
                                                if(v.Secondary_Asset_Name__c == 'Channel Dynamics Custom Study Name & Project Delivery Date:' && $('#idChannelDynamicsStudyName').val() != null && $('#idChannelDynamicsDeliveryDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['Channel_Dynamics_Study_Name__c'] = $('#idChannelDynamicsStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idChannelDynamicsDeliveryDate').val().trim());
                                                    $scope.TPA_Secondary_Data_Asset__c['Channel_Dynamics_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Study Name -' + $('#idChannelDynamicsStudyName').val().trim() +'; Delivery Date -'+$scope.TPA_Data_Asset__c['Channel_Dynamics_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Study Name -' + $('#idChannelDynamicsStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Data_Asset__c['Channel_Dynamics_Delivery_Date__c']+ ' ,';
                                                }
                                                if(v.Secondary_Asset_Name__c == 'ProVoice Custom Study Name & Project Delivery Date:' && $('#idProVoiceStudyName').val() != null && $('#idProVoiceDeliveryDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['Pro_Voice_Study_Name__c'] = $('#idProVoiceStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idProVoiceDeliveryDate').val().trim());
                                                    $scope.TPA_Secondary_Data_Asset__c['Pro_Voice_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Study Name -' + $('#idProVoiceStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Data_Asset__c['Pro_Voice_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Study Name -' + $('#idProVoiceStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Data_Asset__c['Pro_Voice_Delivery_Date__c']+ ' ,';
                                                }
                                                
                                                if(v.Secondary_Asset_Name__c == 'STI Data Custom Report Name:' && $('#idSTIDataCustomReportName').val() != null && $('#idSTIDataCustomReportName').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['STI_Data_Custom_Report_Name__c'] = $('#idSTIDataCustomReportName').val().trim();
                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Report Name -' + $('#idSTIDataCustomReportName').val().trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Report Name ' + $('#idSTIDataCustomReportName').val().trim()+ ' ,';
                                                }
                                                
                                                if(v.Secondary_Asset_Name__c == $scope.outlinerOfferingName && $('#idOutlinerLabelCode').val() != null && $('#idOutlinerDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['Outliner_Label_Code__c'] = $('#idOutlinerLabelCode').val().trim();
                                                    
                                                    $scope.TPA_Secondary_Data_Asset__c['Outliner_Data_Period_Text__c'] =$('#idOutlinerDate').val().trim() ;

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Label Code -' + $('#idOutlinerLabelCode').val().trim() +'; Data Period -'+$('#idOutlinerDate').val().trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Label Code -' + $('#idOutlinerLabelCode').val().trim() +' Data Period -'+$('#idOutlinerDate').val().trim()+ ' ,';
                                                }
                                                
                                                $scope.lstTpaSecDataAsset = [];
                                                $scope.lstTpaSecDataAsset.push(angular.copy($scope.TPA_Secondary_Data_Asset__c));

                                                if($scope.lstTpaSecDataAsset != null && $scope.lstTpaSecDataAsset.length > 0)
                                                {
                                                    if(v.Secondary_Asset_Name__c == 'DDD (Excludes DDD Master Outlet Files - e.g.SR11 or DRM Files)' || v.Secondary_Asset_Name__c == 'DDDMD (Excludes DDD Master Outlet Files - e.g.SR11 or DRM Files)')
                                                    {
                                                        $scope.popupAlert('You are not permitted to release DDD outlet master reference files, also known as SR11, or the series of DRM 60\'s including 61, 65 and 68 reports under a TPA Agreement.  To make outlet information available to a vendor under a TPA Agreement, only files containing actual sales data, dollars and/or unit with demographics information included, such as the WR file, may be provided.'); //Modified by Govind under ER-1940
                                                    }
                                                    $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.useOffRecordToEdit.purposeId + ':' + $scope.editOtherPurposeCategory + ':' + $scope.useOffRecordToEdit.country + ':' + $scope.useOffRecordToEdit.Param_otherDesc] = angular.copy($scope.lstTpaSecDataAsset);
                                                    $scope.secDAToRemoveMap[v.Primary_Data_Asset__c + ':'+ $scope.selectedPurposeIds] = angular.copy(v.Primary_Data_Asset__c);
                                                    $scope.selectedSecondaryIds += (v.Primary_Data_Asset__c + ':' + $scope.useOffRecordToEdit.purposeId + ':' + $scope.editOtherPurposeCategory + '~'); //Updated by Babita Dadarwal under Issue-10236

                                                    
                                                }
                                            }
                                            else
                                            {
                                                $scope.TPA_Secondary_Data_Asset__c = {};
                                                $scope.TPA_Secondary_Data_Asset__c['Secondary_Asset_Name__c'] = v.Secondary_Asset_Name__c;
                                                $scope.TPA_Secondary_Data_Asset__c['IMS_Secondary_Data_Asset__c'] = v.Id;
                                                
                                                var invalid = /["%()\[\]{}=\\?`'#<>|,;.:+-]+/g;
                                                var fieldName = (v.Secondary_Asset_Name__c+"").replace(/ /g,"_").replace(invalid,"").replace("__","_")+'__c';
                                                var fieldValue = $("[id='id-"+v.Secondary_Asset_Name__c+"']").val();
                                                if(fieldValue != null){
                                                    $scope.TPA_Secondary_Data_Asset__c[fieldName] = fieldValue.trim();
                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c + ' Description -'+ fieldValue.trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c + ' Description -'+ fieldValue.trim()+ ' ,';
                                                }
                                                
                                                if(v.Secondary_Asset_Name__c == 'BrandImpact Custom Study Name & Project Delivery Date:' && $('#idBrandImpactStudyName').val() != null && $('#idBrandImpactDeliveryDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['BrandImpact_Study_Name__c'] = $('#idBrandImpactStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idBrandImpactDeliveryDate').val().trim());
                                                    $scope.TPA_Secondary_Data_Asset__c['BrandImpact_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Study Name -' + $('#idBrandImpactStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Secondary_Data_Asset__c['BrandImpact_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Study Name -' + $('#idBrandImpactStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Secondary_Data_Asset__c['BrandImpact_Delivery_Date__c']+ ' ,';
                                                }
                                                if(v.Secondary_Asset_Name__c == 'Channel Dynamics Custom Study Name & Project Delivery Date:' && $('#idChannelDynamicsStudyName').val() != null && $('#idChannelDynamicsDeliveryDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['Channel_Dynamics_Study_Name__c'] = $('#idChannelDynamicsStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idChannelDynamicsDeliveryDate').val().trim());
                                                    $scope.TPA_Secondary_Data_Asset__c['Channel_Dynamics_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Study Name -' + $('#idChannelDynamicsStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Secondary_Data_Asset__c['Channel_Dynamics_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Study Name -' + $('#idChannelDynamicsStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Secondary_Data_Asset__c['Channel_Dynamics_Delivery_Date__c']+ ' ,';

                                                }
                                                if(v.Secondary_Asset_Name__c == 'ProVoice Custom Study Name & Project Delivery Date:' && $('#idProVoiceStudyName').val() != null && $('#idProVoiceDeliveryDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['Pro_Voice_Study_Name__c'] = $('#idProVoiceStudyName').val().trim();
                                                    var deliveryDate = new Date($('#idProVoiceDeliveryDate').val().trim());
                                                    $scope.TPA_Secondary_Data_Asset__c['Pro_Voice_Delivery_Date__c'] ='' + deliveryDate.getFullYear() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getDate();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Study Name -' + $('#idProVoiceStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Secondary_Data_Asset__c['Pro_Voice_Delivery_Date__c'];
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Study Name -' + $('#idProVoiceStudyName').val().trim() +' Delivery Date -'+$scope.TPA_Secondary_Data_Asset__c['Pro_Voice_Delivery_Date__c']+ ' ,';
                                                }
                                                
                                                if(v.Secondary_Asset_Name__c == 'STI Data Custom Report Name:' && $('#idSTIDataCustomReportName').val() != null && $('#idSTIDataCustomReportName').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['STI_Data_Custom_Report_Name__c'] = $('#idSTIDataCustomReportName').val().trim();

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Report Name -' + $('#idSTIDataCustomReportName').val().trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails += v.Secondary_Asset_Name__c +' Report Name -' + $('#idSTIDataCustomReportName').val().trim()+ ' ,';
                                                }
                                                
                                                if(v.Secondary_Asset_Name__c == $scope.outlinerOfferingName && $('#idOutlinerLabelCode').val() != null && $('#idOutlinerDate').val() != null){
                                                    $scope.TPA_Secondary_Data_Asset__c['Outliner_Label_Code__c'] = $('#idOutlinerLabelCode').val().trim();
                                                    $scope.TPA_Secondary_Data_Asset__c['Outliner_Data_Period_Text__c'] =$('#idOutlinerDate').val().trim() ;

                                                    $scope.offeringAdditionalTextwithCountryMap[ $scope.proposalTreeDataRawSource.primarypurpose[$scope.selectedPurposeIds].Primary_Purpose_Name__c +' '+v.Secondary_Asset_Name__c + ' '+ angular.copy($scope.mlObj.selectedRegion.Default_Value__c)+' secondary'] =
                                                    v.Secondary_Asset_Name__c +' Label Code -' + $('#idOutlinerLabelCode').val().trim() +' Data Period -'+$('#idOutlinerDate').val().trim();
                                                    $scope.useOffRecordToEdit.selectdataAssforOfferingAdditionDetails +=  v.Secondary_Asset_Name__c +' Label Code -' + $('#idOutlinerLabelCode').val().trim() +' Data Period  -'+$('#idOutlinerDate').val().trim()+ ' ,';
                                                }
                                                
                                                $scope.lstTpaSecDataAsset = [];
                                                
                                                $scope.lstTpaSecDataAsset = $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.useOffRecordToEdit.purposeId + ':' + $scope.editOtherPurposeCategory + ':' + $scope.useOffRecordToEdit.country + ':' + $scope.useOffRecordToEdit.Param_otherDesc];
                                                $scope.lstTpaSecDataAsset.push(angular.copy($scope.TPA_Secondary_Data_Asset__c));
                                                $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.useOffRecordToEdit.purposeId + ':' + $scope.editOtherPurposeCategory + ':' + $scope.useOffRecordToEdit.country + ':' + $scope.useOffRecordToEdit.Param_otherDesc] = angular.copy($scope.lstTpaSecDataAsset);
                                                

                                                $scope.secDAToRemoveMap[v.Primary_Data_Asset__c + ':'+ $scope.useOffRecordToEdit.purposeId] = angular.copy(v.Primary_Data_Asset__c);
                                            }

                                            $scope.imsPrimaryDASet[angular.copy(v.Primary_Data_Asset__c)] = angular.copy(v.Primary_Data_Asset__c);
                                        }
                                        else
                                        {
                                            if($scope.selectedSecondaryIds.indexOf(v.Primary_Data_Asset__c + ':' + $scope.useOffRecordToEdit.purposeId + ':' + $scope.editOtherPurposeCategory) == -1)
                                            {
                                                $log.info('in delete');
                                                delete $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.useOffRecordToEdit.purposeId + ':' + $scope.editOtherPurposeCategory + ':' + $scope.useOffRecordToEdit.country + ':' + $scope.useOffRecordToEdit.Param_otherDesc];
                                            }
                                        }

                                    }
                                });


                                if($scope.commDataAsset != null && $scope.commDataAsset.trim().length > 0)
                                {
                                    $scope.commDataAsset = $scope.commDataAsset.substring(0, $scope.commDataAsset.length - 2);
                                    $scope.tranCommDataAsset = $scope.tranCommDataAsset.substring(0, $scope.tranCommDataAsset.length - 2);
                                }
                                if($scope.offeringCategoryName != null && $scope.offeringCategoryName.trim().length > 0)
                                {
                                    $scope.offeringCategoryName = $scope.offeringCategoryName.substring(0, $scope.offeringCategoryName.length - 2);
                                    var copytranslatedOfferingCategoryName = '';
                                    var alreadyAddedCategoryName = [];
                                    $scope.offeringCategoryName = ' '+$scope.offeringCategoryName;
                                    $.each($scope.offeringCategoryName.split(','), function( offkey, offvalue ) {
                                    if(alreadyAddedCategoryName.indexOf(offvalue) == -1) {
                                        copytranslatedOfferingCategoryName += offvalue + ',';
                                        alreadyAddedCategoryName.push(offvalue);
                                    }
                                });
                                    $scope.offeringCategoryName = copytranslatedOfferingCategoryName.slice(0,-1);
                                }
                            
                                $scope.useOffRecordToEdit.dataAsset = $scope.commDataAsset;
                                $scope.useOffRecordToEdit.translatedDataAsset = $scope.tranCommDataAsset;
                                $scope.useOffRecordToEdit.translatedOfferingCategoryName = $scope.offeringCategoryName;
                                

                                $scope.isUseOffInEditMode = false;
                                $scope.generateProposalTree();
                                $scope.isUseTextUpdated = true; 
                                

                                $scope.addDataforMutipleCountrySelection(); 
                                $scope.mlObj.selectedMultipleCountryMap = {};   
                                $scope.mlObj.isCountrySelectionBoxAvailable = false; 
                                $scope.CheckIfOnlyReferenceDataCatSelected();
                                if($scope.Param_otherDesc != null && $scope.Param_otherDesc != '')
                                {
                                    $scope.actionDetails += 'update Selection(' + $scope.selectedPurposeIds+':'+$scope.mlObj.selectedRegion.Default_Value__c+':'+$scope.otherPurCatId + ');';
                                }
                                else{
                                    $scope.actionDetails += 'update Selection(' + $scope.selectedPurposeIds+':'+$scope.mlObj.selectedRegion.Default_Value__c+':'+$scope.selectedCategory + ');';
                                }
                            }
                            
                            $scope.addDataformultipleOff = function (mode)
                            {
                                $scope.setDAIds = [];
                                $scope.setIMSDataAssetsToInsert = [];
                                $scope.isAssetChecked = false;

                                $scope.mapRecordsToDelete = [];
                                $scope.setDAIds = [];
                                $scope.selectedCountryList = [];
                                $scope.testCountryList = [];
                                var tempKey = '';
                                angular.forEach($scope.mlObj.selectedMultipleCountryMap, function(v, k) {
                                    $scope.tempList = k.toString().split(':');
                                    $scope.testCountryList = v.toString().split(',');
                                    $scope.selectedCountryList.push.apply($scope.selectedCountryList, v.toString().split(','));
                                    for(var j = 0; j < $scope.testCountryList.length ; j++)
                                    {
                                        tempKey = $scope.tempList[0] + ':' + $scope.tempList[1] + $scope.testCountryList[j].toLowerCase() +':';
                                        $scope.setDAIds.push($scope.proposalTreeDataRawSource.MapOffGeolevelBUwithOffId[$scope.testCountryList[j] + ':'+ tempKey]);
                                    }
                                });

                                $scope.purposeId = '';
                                $scope.purposecategoryId = '';
                                if(mode == 'Update') {
                                    $scope.purposeId = angular.copy($scope.useOffRecordToEdit.purposeId);
                                    if($scope.Param_otherDesc != null && $scope.Param_otherDesc != ''){
                                        $scope.purposecategoryId = $scope.otherPurCatId;
                                    }
                                    else{
                                        $scope.purposecategoryId = angular.copy($scope.editOtherPurposeCategory);
                                    }
                                }
                                else {
                                    $scope.purposeId = angular.copy($scope.selectedPurposeIds);
                                    if($scope.Param_otherDesc != null && $scope.Param_otherDesc != ''){
                                        $scope.purposecategoryId = $scope.otherPurCatId;
                                    }
                                    else{
                                        $scope.purposecategoryId = angular.copy($scope.selectedCategory);
                                    }
                                    
                                }

                                angular.forEach($scope.proposalTreeDataRawSource.dataAssetList, function(v, k) {
                                    for(var i = 0; i < $scope.setDAIds.length; i++)
                                    {
                                        if($scope.setDAIds[i] == v.Id)
                                        {
                                            $scope.setIMSDataAssetsToInsert = [];
                                            $scope.TPA_Data_Asset__c = {};
                                            $scope.TPA_Data_Asset__c['Asset_NametText__c'] = v.Asset_Name__c;
                                            $scope.TPA_Data_Asset__c['BU__c'] = v.BU__c;
                                            $scope.TPA_Data_Asset__c['Geo_Level__c'] = v.Geo_Level__c;
                                            $scope.TPA_Data_Asset__c['Data_Asset__c'] = v.Id;
                                            $scope.TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = v.Is_IMS_AGProduct__c;
                                            //$scope.TPA_Data_Asset__c['Is_Restricted_Data__c'] = v.Is_Restricted_Data__c;
                                            $scope.offeringCategoryDuplicateName = $scope.mlObj.geoLevelMap[v.Geo_Level__c];
                                            $scope.offeringCategoryName += $scope.offeringCategoryDuplicateName + ', ';//Added by Shaik
                                            $scope.$log.info('offeringCategoryName0'+$scope.offeringCategoryName);
                                            $scope.$log.info('offeringCategoryDuplicateName0'+$scope.offeringCategoryDuplicateName);

                                            if($scope.mapPurposeidWithDataAssetMap[$scope.purposeId+':'+$scope.purposecategoryId+':'+v.BU__c+':'] != null
                                            ||($scope.Param_otherDesc != null && $scope.Param_otherDesc != '' && $scope.mapPurposeidWithDataAssetMap[':'+v.BU__c+':'+$scope.purposecategoryId+':'+$scope.Param_otherDesc] != null)){
                                                $scope.setIMSDataAssetsToInsert = $scope.mapPurposeidWithDataAssetMap[$scope.purposeId+':'+$scope.purposecategoryId+':'+v.BU__c+':'];
                                                $scope.setIMSDataAssetsToInsert.push(angular.copy($scope.TPA_Data_Asset__c));
                                                if($scope.Param_otherDesc != null && $scope.Param_otherDesc != ''){
                                                    $scope.mapPurposeidWithDataAssetMap[':'+v.BU__c+':'+$scope.purposecategoryId+':'+$scope.Param_otherDesc] = angular.copy($scope.setIMSDataAssetsToInsert);
                                                }
                                                else{
                                                    $scope.mapPurposeidWithDataAssetMap[$scope.purposeId+':'+$scope.purposecategoryId+':'+v.BU__c+':'] = angular.copy($scope.setIMSDataAssetsToInsert);
                                                }
                                            }
                                            else {
                                                $scope.setIMSDataAssetsToInsert.push(angular.copy($scope.TPA_Data_Asset__c));
                                                if($scope.Param_otherDesc != null && $scope.Param_otherDesc != ''){
                                                    $scope.mapPurposeidWithDataAssetMap[':'+v.BU__c+':'+$scope.purposecategoryId+':'+$scope.Param_otherDesc] = angular.copy($scope.setIMSDataAssetsToInsert);
                                                }
                                                else{
                                                    $scope.mapPurposeidWithDataAssetMap[$scope.purposeId+':'+$scope.purposecategoryId+':'+v.BU__c+':'] = angular.copy($scope.setIMSDataAssetsToInsert);
                                                }
                                            }
                                        }
                                    }
                                });

                                for(var j = 0; j < $scope.selectedCountryList.length; j++) {
                                    angular.forEach($scope.proposalTreeDataRawSource.secondarypurpose, function(v, k) {
                                        if(v.Purpose__c == $scope.purposeId 
                                        && v.TPA_Purpose_Category__c == $scope.purposecategoryId
                                        && $scope.tpaUseCountryList.indexOf($scope.selectedCountryList[j]) != -1) {
                                            $scope.$log.info('purpDesc::' + JSON.stringify(v));
                                            $scope.$log.info('$scope.purposeId::' + $scope.purposeId);
                                            $scope.$log.info('$scope.selectedCountryList::' + JSON.stringify($scope.selectedCountryList));
                                            $scope.TPA_Purpose__c = {};
                                            $scope.TPA_Purpose__c['Name'] = $scope.proposalTreeDataRawSource.primarypurpose[$scope.purposeId].Primary_Purpose_Name__c;
                                            $scope.TPA_Purpose__c['Purpose__c'] = $scope.purposeId;
                                            $scope.TPA_Purpose__c['BU__c'] = $scope.selectedCountryList[j];
                                            $scope.TPA_Purpose__c['Purpose_Region__c'] = $scope.selectedCountryList[j];
                                            $scope.TPA_Purpose__c['TPA_Purpose_Category__c'] = $scope.purposecategoryId;

                                            $scope.PurposeMap[$scope.purposeId + $scope.purposecategoryId + $scope.selectedCountryList[j]] = angular.copy($scope.TPA_Purpose__c);
                                            $scope.TPA_Purpose_Description__c = {};
                                            $scope.TPA_Purpose_Description__c['Description__c'] = v.Id;
                                            $scope.TPA_Purpose_Description__c['Description_Text__c'] = v.Description__c;

                                            $scope.MapPurpDesc[$scope.purposeId + $scope.purposecategoryId + $scope.selectedCountryList[j]] = angular.copy($scope.TPA_Purpose_Description__c);
                                            $scope.secPurpose = v.Id + '';
                                            $scope.$log.info('$scope.MapPurpDesc:::'+JSON.stringify($scope.MapPurpDesc));
                                        }
                                    });
                                }

                                $scope.$log.info('tpaUseCountryList:'+$scope.tpaUseCountryList);
                                $scope.$log.info('tpaUseCountryList:'+JSON.stringify($scope.tpaUseCountryList));



                                
                                for(var j = 0; j < $scope.selectedCountryList.length; j++) {
                                    if($scope.Param_otherDesc != null && $scope.Param_otherDesc != '' 
                                    && $scope.tpaUseCountryList.indexOf($scope.selectedCountryList[j]) != -1) {
                                        $scope.TPA_Purpose__c = {};
                                        $scope.TPA_Purpose__c['Name'] = 'Other';
                                        $scope.TPA_Purpose__c['Purpose__c'] = $scope.purposeId;
                                        $scope.TPA_Purpose__c['BU__c'] = $scope.selectedCountryList[j];
                                        $scope.TPA_Purpose__c['Purpose_Region__c'] = $scope.selectedCountryList[j];
                                        $scope.TPA_Purpose__c['TPA_Purpose_Category__c'] = $scope.purposecategoryId;
                                        $scope.TPA_Purpose__c['Other_Details__c'] = $scope.Param_otherDesc; 
                                        $scope.TPA_Purpose__c['Other_Text__c'] = $scope.Param_otherDesc; 
                                        //$scope.PurposeMapOther[$scope.purposeId + $scope.purposecategoryId + $scope.selectedCountryList[j] + $scope.Param_otherDesc] = angular.copy($scope.TPA_Purpose__c);
                                        $scope.PurposeMapOther['' + $scope.purposecategoryId + $scope.selectedCountryList[j] + $scope.Param_otherDesc] = angular.copy($scope.TPA_Purpose__c);

                                        $scope.TPA_Purpose_Description__c = {};
                                        $scope.TPA_Purpose_Description__c['Other_Details__c'] = $scope.Param_otherDesc;
                                        $scope.TPA_Purpose_Description__c['Purpose__c'] = '';

                                        // $scope.MapPurpDescOther[$scope.purposeId + $scope.purposecategoryId + $scope.selectedCountryList[j] + $scope.Param_otherDesc] = angular.copy($scope.TPA_Purpose_Description__c);
                                        $scope.MapPurpDescOther['' + $scope.purposecategoryId + $scope.selectedCountryList[j] + $scope.Param_otherDesc] = angular.copy($scope.TPA_Purpose_Description__c);

                                    
                                    }
                                }
                                $scope.$log.info('PurposeMapOther:'+JSON.stringify($scope.PurposeMapOther));
                                $.each($scope.proposalTreeDataRawSource.secondaryDataAssetList, function(k, v)
                                {
                                    $scope.imsPrimaryDASet = {};
                                    for(var i = 0; i < $scope.setDAIds.length; i++)
                                    {
                                        if($scope.setDAIds[i] == v.Id)
                                        {
                                            $scope.commDataAsset += v.Secondary_Asset_Name__c + ', ';
                                            if(v[$scope.mlObj.selectedLanguageField] == null)
                                                $scope.tranCommDataAsset += v.Secondary_Asset_Name__c + ', ';
                                            else
                                                $scope.tranCommDataAsset += v[$scope.mlObj.selectedLanguageField] + ', ';

                                            if($scope.imsPrimaryDASet[v.Primary_Data_Asset__c] == null)
                                            {
                                                $scope.TPA_Data_Asset__c = {};
                                                $scope.TPA_Data_Asset__c['Asset_NametText__c'] = v.Primary_Data_Asset__r.Asset_Name__c;
                                                $scope.TPA_Data_Asset__c['BU__c'] = v.Primary_Data_Asset__r.BU__c;
                                                $scope.TPA_Data_Asset__c['Geo_Level__c'] = v.Primary_Data_Asset__r.Geo_Level__c;
                                                $scope.TPA_Data_Asset__c['Data_Asset__c'] = v.Primary_Data_Asset__r.Id;
                                                $scope.TPA_Data_Asset__c['Is_IMS_AGProduct__c'] = v.Primary_Data_Asset__r.Is_IMS_AGProduct__c;
                                                //$scope.TPA_Data_Asset__c['Is_Restricted_Data__c'] = v.Primary_Data_Asset__r.Is_Restricted_Data__c;
                                                $scope.offeringCategoryDuplicateName = $scope.mlObj.geoLevelMap[v.Primary_Data_Asset__r.Geo_Level__c];
                                                $scope.offeringCategoryName += $scope.offeringCategoryDuplicateName + ', ';//Added by Shaik
                                                $scope.$log.info('offeringCategoryName1'+$scope.offeringCategoryName);
                                                $scope.$log.info('offeringCategoryDuplicateName11'+$scope.offeringCategoryDuplicateName);


                                                if(!$scope.mapPurposeidWithDataAssetMap.hasOwnProperty($scope.purposeId+':'+$scope.purposecategoryId+':'+v.Primary_Data_Asset__r.BU__c+':'+$scope.otherPurCatId)){
                                                    $scope.setIMSDataAssetsToInsert = [];
                                                }
                                                else{
                                                    $scope.setIMSDataAssetsToInsert = $scope.mapPurposeidWithDataAssetMap[$scope.purposeId+':'+$scope.purposecategoryId+':'+v.Primary_Data_Asset__r.BU__c+':'+$scope.otherPurCatId];
                                                }

                                                $scope.setIMSDataAssetsToInsert.push($scope.TPA_Data_Asset__c);

                                                if($scope.Param_otherDesc != null && $scope.Param_otherDesc != '')
                                                    $scope.mapPurposeidWithDataAssetMap[':'+v.Primary_Data_Asset__r.BU__c+':'+$scope.purposecategoryId+':'+$scope.useOffRecordToEdit.Param_otherDesc] = angular.copy($scope.setIMSDataAssetsToInsert);
                                                else
                                                    $scope.mapPurposeidWithDataAssetMap[$scope.purposeId+':'+$scope.purposecategoryId+':'+v.Primary_Data_Asset__r.BU__c+':'+$scope.otherPurCatId] = angular.copy($scope.setIMSDataAssetsToInsert);

                                                //$scope.mapPurposeidWithDataAssetMap[$scope.purposeId+':'+$scope.purposecategoryId+':'+v.Primary_Data_Asset__r.BU__c+':'] = angular.copy($scope.setIMSDataAssetsToInsert);

                                                $scope.TPA_Secondary_Data_Asset__c = {};
                                                $scope.TPA_Secondary_Data_Asset__c['Secondary_Asset_Name__c'] = v.Secondary_Asset_Name__c;
                                                $scope.TPA_Secondary_Data_Asset__c['IMS_Secondary_Data_Asset__c'] = v.Id;

                                                $scope.lstTpaSecDataAsset = [];
                                                $scope.lstTpaSecDataAsset.push(angular.copy($scope.TPA_Secondary_Data_Asset__c));

                                                if($scope.lstTpaSecDataAsset != null && $scope.lstTpaSecDataAsset.length > 0)
                                                {
                                                    $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + ':' + v.Primary_Data_Asset__r.BU__c + ':' + $scope.Param_otherDesc] = angular.copy($scope.lstTpaSecDataAsset);
                                                    $scope.selectedSecondaryIds += (v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + '~');
                                                    $scope.secDAToRemoveMap[v.Primary_Data_Asset__c + ':'+ $scope.purposeId] = angular.copy(v.Primary_Data_Asset__c);

                                                }
                                            }
                                            else
                                            {
                                                $scope.TPA_Secondary_Data_Asset__c = {};
                                                $scope.TPA_Secondary_Data_Asset__c['Secondary_Asset_Name__c'] = v.Secondary_Asset_Name__c;
                                                $scope.TPA_Secondary_Data_Asset__c['IMS_Secondary_Data_Asset__c'] = v.Id;

                                                $scope.lstTpaSecDataAsset = [];
                                                if($scope.Param_otherDesc != null && $scope.Param_otherDesc != '')
                                                    $scope.lstTpaSecDataAsset = $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + ':' + v.Primary_Data_Asset__r.BU__c + ':' + $scope.Param_otherDesc]; 
                                                else
                                                    $scope.lstTpaSecDataAsset = $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + ':' + v.Primary_Data_Asset__r.BU__c + ':' + $scope.Param_otherDesc]; 

                                                //$scope.lstTpaSecDataAsset = $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + ':' + v.Primary_Data_Asset__r.BU__c + ':' + $scope.Param_otherDesc];

                                                $scope.lstTpaSecDataAsset.push(angular.copy($scope.TPA_Secondary_Data_Asset__c));
                                                if($scope.Param_otherDesc != null && $scope.Param_otherDesc != '')
                                                    $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + ':' + v.Primary_Data_Asset__r.BU__c + ':' + $scope.Param_otherDesc] = angular.copy($scope.lstTpaSecDataAsset); 
                                                else
                                                    $scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + ':' + v.Primary_Data_Asset__r.BU__c + ':' + $scope.Param_otherDesc] = angular.copy($scope.lstTpaSecDataAsset); 

                                                //$scope.mapSecondayDataAssetToInsert[v.Primary_Data_Asset__c + ':' + $scope.purposeId + ':' + $scope.purposecategoryId + ':' + v.Primary_Data_Asset__r.BU__c + ':' + $scope.Param_otherDesc] = angular.copy($scope.lstTpaSecDataAsset);
                                                $scope.secDAToRemoveMap[v.Primary_Data_Asset__c + ':'+ $scope.purposeId] = angular.copy(v.Primary_Data_Asset__c);
                                            }
                                            $scope.imsPrimaryDASet[angular.copy(v.Primary_Data_Asset__c)] = angular.copy(v.Primary_Data_Asset__c);
                                        }
                                    }
                                });

                                $scope.setIMSDataAssetsToInsert = [];
                            };

                            $scope.showOffCountrySelectionBox = function(OffGeoLevalVal, selectedId) {
                                $scope.mlObj.multipleCountryProcessContext = OffGeoLevalVal;
                                $scope.mlObj.OffCountryList = [];
                                $scope.selectedcountrylist = $scope.mlObj.selectedMultipleCountryMap[OffGeoLevalVal];
                                var Values = new Array();

                                $scope.cuntriesToExclude = [];
                                $scope.GeoLevelWithOff = OffGeoLevalVal.split(':');
                                OffGeoLevalVal = $scope.GeoLevelWithOff[0] + ':' + $scope.GeoLevelWithOff[1].substring(0,14) + ':' +$scope.GeoLevelWithOff[2];


                                angular.forEach($scope.SelectedDescMap, function(value, key) {
                                    $scope.useAndOfferingWithAssets = {};
                                    $scope.useAndOfferingWithAssets.purposeId = value.purposeId;
                                    $scope.useAndOfferingWithAssets.purposeCategoryId = value.purposeCategoryId;
                                    $scope.assetId = value.purposeId + ':' + value.purposeCategoryId + ':'+ value.country +':';

                                    $scope.useAndOfferingWithAssets.primaryAssets = $scope.mapPurposeidWithDataAssetMap[$scope.assetId];
                                    $scope.useAndOfferingWithAssets.secAssets = $scope.mapSecondayDataAssetToInsert;

                                    angular.forEach($scope.useAndOfferingWithAssets.primaryAssets, function(asset) {
                                        if( $scope.GeoLevelWithOff[1] == asset.Asset_NametText__c.toLowerCase() && $scope.GeoLevelWithOff[0] == asset.Geo_Level__c  && selectedId.split('~')[2] == value.categoryName && selectedId.split('~')[1] == value.key.split(':')[1]) {
                                            $scope.secondaryOffId = asset.Data_Asset__c +':'+ value.purposeId+ ':' + value.purposeCategoryId + ':'+ value.country +':';
                                            $scope.secondaryAssets = $scope.mapSecondayDataAssetToInsert[$scope.secondaryOffId];
                                            if($scope.secondaryAssets != null && $scope.GeoLevelWithOff[2] != null && $scope.GeoLevelWithOff[2] != '')
                                            {
                                                angular.forEach($scope.secondaryAssets, function(secAsset){
                                                    if(secAsset.Secondary_Asset_Name__c.toLowerCase() == $scope.GeoLevelWithOff[2])
                                                        $scope.cuntriesToExclude.push(value.country);

                                                });
                                            }
                                            else if($scope.secondaryAssets == null )
                                                $scope.cuntriesToExclude.push(value.country);
                                        }
                                    });
                                });

                                $.each($scope.proposalTreeDataRawSource.mapOfferingWithlistOfCountry[OffGeoLevalVal], function( k, v ) {
                                    if(v != $scope.mlObj.selectedRegion.Default_Value__c  && ($scope.cuntriesToExclude.length == 0 || !($scope.cuntriesToExclude.indexOf(v) >= 0))){
                                        $scope.mlObj.OffCountryList.push({'id': k, 'text': v});
                                    }

                                    if( $scope.selectedcountrylist != null && $scope.selectedcountrylist != undefined && ($scope.selectedcountrylist.indexOf(v) >= 0)){
                                        Values.push(k);
                                    }
                                });

                                $('.ddoneKeyDataCountry').html('').select2({data: $scope.mlObj.OffCountryList, multiple: true, width: '100%', closeOnSelect:false, placeholder: tpaSelectAllThatApply,sortResults: function(data) {
                                    /* Sort data using lowercase comparison */
                                    return data.sort(function (a, b) {
                                        a = a.text.toLowerCase();
                                        b = b.text.toLowerCase();
                                        if (a > b) {
                                            return 1;
                                        } else if (a < b) {
                                            return -1;
                                        }
                                        return 0;
                                    });
                                }});
                                $('.ddoneKeyDataCountry').on('select2:open', function () {
                                    $(".select2-container").css('z-index', '100000');
                                    let a = $(this).data('select2');
                                    if (!$('.select2-link').length) {
                                        $(".select2-results:not(:has(button))")
                                        .prepend('<div style = "text-align: center;" ><button  id="select2closeButton" onclick = "$(\'.ddoneKeyDataCountry\').select2(\'close\');" >Close</button></div>')
                                        
                                    }
                                });
                                $('.ddoneKeyDataCountry').on('select2:close', function () {
                                    $(".select2-container").css('z-index', '1');
                                });
                                $('.ddoneKeyDataCountry').select2("val", "")
                                if($scope.selectedcountrylist != null && $scope.selectedcountrylist != undefined ){
                                    $('.ddoneKeyDataCountry').val( Values.toString()).trigger('change');
                                }
                                $scope.mlObj.geoLevelOffCombinationVal = OffGeoLevalVal;
                                $scope.mlObj.showOffCountrySelOption = true;
                            }

                            $scope.disableOnekeyOfferings = function(priObject) {
                                if(priObject != null && priObject.Asset_Name__c == 'OneKey / all attributes') {
                                    if(priObject.isChecked) { 
                                        $("input:checkbox[geoLevel='Reference Data']").each(function() { 
                                            if($(this).attr('priOffringName') != 'OneKey / all attributes'
                                            && $(this).attr('priOffringName') != 'Other'){
                                            $(this).attr('disabled', true);
                                            $(this).prop('checked',false);
                                            }
                                        }); 
                                    }
                                    else {
                                        $("input:checkbox[geoLevel='Reference Data']").each(function() { 
                                            if($(this).attr('priOffringName') != 'OneKey / all attributes'
                                            && $(this).attr('priOffringName') != 'Other') {
                                            $(this).removeAttr('disabled');
                                            }                                     
                                        }); 
                                    }
                                }
                            }
                            $scope.checkIfCountrySelectionBoxAvailable = function(OffGeoLevalVal, selectedId, object) {
                                $scope.mlObj.cuntriesToExclude = [];
                                $scope.mlObj.OffCountryList = [];
                                $scope.mlObj.isCountrySelectionBoxAvailable = false;
                                $scope.GeoLevelWithOff = OffGeoLevalVal.split(':');
                                OffGeoLevalVal = $scope.GeoLevelWithOff[0] + ':' + $scope.GeoLevelWithOff[1].substring(0,14) + ':' +$scope.GeoLevelWithOff[2];
                                if(object.isChecked && $scope.proposalTreeDataRawSource.mapOfferingWithlistOfCountry.hasOwnProperty(OffGeoLevalVal)){
                                    angular.forEach($scope.SelectedDescMap, function(value, key){
                                        $scope.useAndOfferingWithAssets = {};
                                        $scope.useAndOfferingWithAssets.purposeId = value.purposeId;
                                        $scope.useAndOfferingWithAssets.purposeCategoryId = value.purposeCategoryId;
                                        $scope.assetId = value.purposeId + ':' + value.purposeCategoryId + ':'+ value.country +':';

                                        $scope.useAndOfferingWithAssets.primaryAssets = $scope.mapPurposeidWithDataAssetMap[$scope.assetId];
                                        $scope.useAndOfferingWithAssets.secAssets = $scope.mapSecondayDataAssetToInsert;

                                        angular.forEach($scope.useAndOfferingWithAssets.primaryAssets, function(asset){
                                            if( $scope.GeoLevelWithOff[1] == asset.Asset_NametText__c.toLowerCase() && $scope.GeoLevelWithOff[0] == asset.Geo_Level__c  && selectedId.split('~')[2] == value.categoryName && selectedId.split('~')[1] == value.key.split(':')[1]) {
                                                $scope.secondaryOffId = asset.Data_Asset__c +':'+ value.purposeId+ ':' + value.purposeCategoryId + ':'+ value.country +':';

                                                $scope.secondaryAssets = $scope.mapSecondayDataAssetToInsert[$scope.secondaryOffId];
                                                if($scope.secondaryAssets != null && $scope.GeoLevelWithOff[2] != null && $scope.GeoLevelWithOff[2] != '')
                                                {
                                                    angular.forEach($scope.secondaryAssets, function(secAsset){
                                                        if(secAsset.Secondary_Asset_Name__c.toLowerCase() == $scope.GeoLevelWithOff[2])
                                                            $scope.mlObj.cuntriesToExclude.push(value.country);

                                                    });
                                                }
                                                else if($scope.secondaryAssets == null )
                                                    $scope.mlObj.cuntriesToExclude.push(value.country);
                                            }
                                        });
                                    });

                                    $.each($scope.proposalTreeDataRawSource.mapOfferingWithlistOfCountry[OffGeoLevalVal], function( k, v ) {
                                        if(v != $scope.mlObj.selectedRegion.Default_Value__c  && ($scope.mlObj.cuntriesToExclude.length == 0 || !($scope.mlObj.cuntriesToExclude.indexOf(v) >= 0))){
                                            $scope.mlObj.OffCountryList.push({'id': k, 'text': v});
                                        }
                                    });

                                    if($scope.mlObj.OffCountryList.length > 0){
                                        $scope.mlObj.isCountrySelectionBoxAvailable = true;
                                        $("[id='id-"+OffGeoLevalVal+"']").prop('disabled', false);
                                    }
                                }
                                else{
                                    $("[id='id-"+OffGeoLevalVal+"']").prop('disabled', true);
                                }
                            }

                            $scope.saveOffCountrySelectionBox = function(OffGeoLevalVal) {
                                $scope.countryList = $('.ddoneKeyDataCountry').select2('data');
                                $scope.selectedCountryList = [];
                                angular.forEach($scope.countryList,function(v,k){
                                    $scope.selectedCountryList.push(v.text);
                                });
                                if($scope.selectedCountryList.length > 0) {
                                    $scope.mlObj.selectedMultipleCountryMap[OffGeoLevalVal] = $scope.selectedCountryList;
                                }

                                $scope.mlObj.showOffCountrySelOption = false;
                            }
                            //*** Vendor Look Up Functionality Start ***//
                            // Vendor Legal entity search popup
                            $scope.showVendors =  function() {
                                $scope.popupAlert('{!$Label.TPA_Please_note_this_name_and_address_will_be_shown_on_the_Third_Party_Agreement}', function() {
                                    if($scope.mlObj.selectedLanguageCode != 'en_US') {
                                        $scope.popupAlert('{!$Label.TPA_Please_provide_the_input_in_English}', function(){
                                            //$scope.openVendorLookUp($scope.tpaObj.GBvendorAddressId);
                                            //$scope.applyChanges();
                                            $scope.showVendorAddress();
                                        });
                                    }
                                    else {
                                        //$scope.openVendorLookUp($scope.tpaObj.GBvendorAddressId);
                                        $scope.showVendorAddress();
                                    }
                                });
                            }

                            $scope.showVendorAddress =  function()
                            {
                                Visualforce.remoting.Manager.invokeAction($scope.getVendorAccounts, JSON.stringify($scope.tpaObj.GBvendorAddressId),function(result, event) {
                                    $scope.$log.info('result :::: '+ result);
                                    if(event.status) {
                                        var tempResult = JSON.stringify(result);
                                        $scope.$log.info('tempResult :::: '+ tempResult);
                                        tempResult = tempResult.split('amp;').join('');
                                        tempResult = tempResult.split('&#39;').join('\'');
                                        
                                    }
                                    $scope.openVendorLookUp(JSON.parse(tempResult));
                                    $scope.applyChanges();
                                });
                            }

                            $scope.showExUSLegalEntity =  function()
                            {
                                $scope.openExUSLegalEntityLookUp();
                            }
                            //This function adds the checked data to the selected list.
                            

                           

                            

                            //****** Validation Events start ******//
                            //*** function validates form screen by screen. ***//
                            //Updated by Babita Dadarwal under ER-3433 start
                            $scope.isThirtyDaysDiffAccepted = false; //Added by C.P.Pandey under ER-3485
                            
                            $scope.isVendorClientEmailMatch = function(vendorEmail){
                                let loggedInClientProfile = '{!currentLoggedInUser.Profile.Name}';
                                let tparequestClientEmail;
                                if(loggedInClientProfile.includes('Processor')){
                                    tparequestClientEmail = $scope.tpaObj.ClientEmail; 
                                }else{
                                    tparequestClientEmail = '{!currentLoggedInUser.Email}';
                                }
                                if(tparequestClientEmail != null && vendorEmail != null && tparequestClientEmail.split('@')[1] === vendorEmail.split('@')[1]){
                                    popupAlert('{!$Label.TPA_Client_and_Vendor_Email_matches}'.split(':')[1], $window.scrollTo(0, 0));
                                    return true;
                                }                                
                                return false;
                            }
                            
                            $scope.isClientDomainMatches = function(providedEmail){
                                let loggedInClientProfile = '{!currentLoggedInUser.Profile.Name}';
                                let loggedInClientEmail = loggedInClientProfile.includes('Processor') == true ? $scope.tpaObj.ClientEmail : '{!currentLoggedInUser.Email}';
                                if(providedEmail != null && loggedInClientEmail != null && loggedInClientEmail.split('@')[1] === providedEmail.split('@')[1])
                                    return true;
                                return false;

                            }

                            $scope.validateForm = function()
                            {
                                $log.info('IN validateForm : requestType = ' + $scope.requestType);
                                $scope.$log.info('In validateForm : $scope.mlObj.countryOfOfferingsList = ' + JSON.stringify($scope.mlObj.countryOfOfferingsList));
                                if($scope.requestType == 'view')
                                    return false;

                                $log.info('IN validateForm after view mode condition : requestType = ' + $scope.requestType);
                                $log.info('IN validateForm after view mode condition : selectedSection = ' + $scope.selectedSection);

                                $scope.errorMsg = '';

                                switch($scope.selectedSection)
                                {
                                    case 'V':
                                        if(($scope.tpaObj.vendorContactFName == null || $scope.tpaObj.vendorContactFName.trim().length == 0))
                                        {
                                            //*** Modified by Govind under ER-2672 Start ***//
                                            if(     ($scope.viewModeStatus == 'VDV' && ((($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem)))
                                                ||  (($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Contact_First_Name_must_not_be_empty}</li>';
                                                $scope.isVendorContactFNameError = true;
                                            }
                                            else
                                                $scope.isVendorContactFNameError = false;
                                            //*** Modified by Govind under ER-2672 End ***//
                                        }
                                        //*** Added by Neha under issue 8852 Start ***//
                                        else if(!$scope.isValidFNameLName($scope.tpaObj.vendorContactFName))
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Please_Enter_Valid_Contact_First_Name}</li>';
                                            $scope.isVendorContactFNameError = true;
                                        }
                                        //*** Added by Neha under issue 8852 Ends ***//
                                        else
                                            $scope.isVendorContactFNameError = false;

                                        if(($scope.tpaObj.vendorContactLName == null || $scope.tpaObj.vendorContactLName.trim().length == 0))
                                        {
                                            //*** Modified by Govind under ER-2672 Start ***//
                                            if(     ($scope.viewModeStatus == 'VDV' && ((($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem)))
                                                ||  (($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Contact_Last_Name_must_not_be_empty}</li>';
                                                $scope.isVendorContactLNameError = true;
                                            }
                                            else
                                                $scope.isVendorContactLNameError = false;
                                            //*** Modified by Govind under ER-2672 End ***//
                                        }
                                        //*** Added by Neha under issue 8852 Start ***//
                                        else if(!$scope.isValidFNameLName($scope.tpaObj.vendorContactLName))
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Please_Enter_Valid_Contact_Last_Name}</li>';
                                            $scope.isVendorContactLNameError = true;
                                        }
                                        //*** Added by Neha under issue 8852 Ends ***//
                                        else
                                            $scope.isVendorContactLNameError = false;

                                        if(($scope.tpaObj.vendorContactEmail == null || $scope.tpaObj.vendorContactEmail.trim().length == 0) )
                                        {
                                            //*** Modified by Govind under ER-2672 Start ***//
                                            if(     ($scope.viewModeStatus == 'VDV' && ((($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem)))
                                                ||  (($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Contact_Email_must_not_be_empty}</li>';
                                                $scope.isVendorContactEmailError = true;
                                            }
                                            else
                                                $scope.isVendorContactEmailError = false;
                                            //*** Modified by Govind under ER-2672 End ***//
                                        }
                                        else if(!$scope.isValidEmail($scope.tpaObj.vendorContactEmail))
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Contact_Email_Invalid_Email_Address}</li>';
                                            $scope.isVendorContactEmailError = true;
                                        }else if($scope.isVendorClientEmailMatch($scope.tpaObj.vendorContactEmail)){
                                            $scope.errorMsg += '<li>{!$Label.TPA_Client_and_Vendor_Email_matches}</li>';
                                            $scope.isVendorContactEmailError = true;    
                                        }
                                        else
                                            $scope.isVendorContactEmailError = false;
                                        
                                        if($scope.isUserClientRepresentativeInTLLA == null || $scope.isUserClientRepresentativeInTLLA == ''){
                                            if(($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft){
                                                $scope.errorMsg += '<li>{!$Label.TPA_Client_Representative_Checkbox_Error}</li>';
                                                    
                                            }
                                        }
                                        
                                        if( $scope.isUserClientRepresentativeInTLLA == 'No'){
                                            if($scope.tpaObj.clientRepresentativeName == null || $scope.tpaObj.clientRepresentativeName.trim().length == 0) {
                                                if(($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft){
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Client_Representative_Name_Error}</li>';
                                                    $scope.isClientRepresentativeNameError = true;
                                                } else
                                                    $scope.isClientRepresentativeNameError = false;
                                            } else if(!$scope.isValidFNameLName($scope.tpaObj.clientRepresentativeName)){
                                                $scope.errorMsg += '<li>{!$Label.TPA_Client_Representative_Name_Error}</li>';
                                                $scope.isClientRepresentativeNameError = true;
                                            } else
                                                $scope.isClientRepresentativeNameError = false;
                                            
                                            if($scope.tpaObj.clientRepresentativeEmail == null || $scope.tpaObj.clientRepresentativeEmail.trim().length == 0) {
                                                if(($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft){
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Client_Representative_Email_Error}</li>';
                                                    $scope.isClientRepresentativeEmailError = true;
                                                } else
                                                    $scope.isClientRepresentativeEmailError = false;
                                            } else if((($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft) && !$scope.isValidEmail($scope.tpaObj.clientRepresentativeEmail)){
                                                $scope.errorMsg += '<li>{!$Label.TPA_Client_Representative_Email_Error}</li>';
                                                $scope.isClientRepresentativeEmailError = true;
                                            } else if((($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft) && !$scope.isClientDomainMatches($scope.tpaObj.clientRepresentativeEmail)){
                                                $scope.errorMsg += '<li>{!$Label.TPA_Client_Representative_Domain_Error}</li>';
                                                $scope.isClientRepresentativeEmailError = true;
                                            }else
                                                $scope.isClientRepresentativeEmailError = false;
                                            
                                            /*if($scope.tpaObj.clientRepresentativeTitle == null || $scope.tpaObj.clientRepresentativeTitle.trim().length == 0) {
                                                if(($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV') && !$scope.saveRequestInDraft){
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Client_Representative_Title_Error}</li>';
                                                    $scope.isClientRepresentativeTitleError = true;
                                                } else
                                                    $scope.isClientRepresentativeTitleError = false;
                                            }*/
                                            
                                        }
                                        
                                        
                                        
                                        //*** added by Govind issue 6336 Start ***//
                                        if($scope.requestType != 'view')
                                        {
                                            if($scope.tpaObj.vendorContactEmail != null && $scope.tpaObj.vendorContactEmail.length > 0) //Modified by Govind under Issue-7351
                                            {
                                                if(($scope.viewModeStatus == 'NV' || $scope.tpaObj.isVendorContactEmailEdited) && (($scope.tpaObj.confirmVendorContactEmail == null || $scope.tpaObj.confirmVendorContactEmail.trim().length == 0) )) //Added by C.P.Pandey under CR-6878
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_confirm_the_vendor_contact_s_email}</li>';//Updated by Babita Dadarwal on 20 June 2016 under Issue-08976 //Modified by Neha under ER-2882
                                                    $scope.isConfirmVendorContactEmailError = true;
                                                }
                                                else if($scope.tpaObj.confirmVendorContactEmail.length > 0)
                                                {
                                                    if(!$scope.isValidEmail($scope.tpaObj.confirmVendorContactEmail))
                                                    {
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Confirm_Vendor_Contact_Email_Invalid_Email_Address}</li>';
                                                        $scope.isConfirmVendorContactEmailError = true;
                                                    }
                                                    else if($scope.tpaObj.confirmVendorContactEmail.toLowerCase() !=$scope.tpaObj.vendorContactEmail.toLowerCase() )//modified by Govind under issue 7351
                                                    {
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Confirm_Vendor_Contact_Email_does_not_match_with_Vendor_Contact_Email_Addres}</li>';
                                                        $scope.isConfirmVendorContactEmailError = true;
                                                    }
                                                        else
                                                            $scope.isConfirmVendorContactEmailError = false;
                                                }
                                            }
                                        }

                                        
                                        if($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV')
                                        {
                                            
                                            //*** Modified by Govind under ER-2613 Start ***//
                                            if(($scope.tpaObj.isAdditionalVendorRequiredTP == null || $scope.tpaObj.isAdditionalVendorRequiredTP.trim().length == 0) && !$scope.saveRequestInDraft)
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_indicate_whether_the_primary_vendor_will_be_working_with_or_sharing}</li>'; //Modified by Neha under ER-2882
                                            }
                                            //*** Modified by Govind under ER-2613 End ***//

                                            if(($scope.isClientCopiesEmail == null || $scope.isClientCopiesEmail.trim().length == 0) && !$scope.saveRequestInDraft )
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_indicate_whether_emails_related_to_this_request_should_be_sent_to_add}</li>'; //Modified by Neha under ER-2882
                                            }
                                            else if($scope.isClientCopiesEmail == 'Yes' && ($scope.clientCopyEmailList == null || $scope.clientCopyEmailList.length == 0))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_add_at_least_one_additional_client_contact_or_select_No}</li>'; //Modified by Neha under ER-2882
                                            }
                                            else if($scope.isClientCopiesEmail == 'Yes' && $scope.clientCopyEmailList.length > 0)
                                            {
                                                if($scope.isClientCopyNameEmpty)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Additional_Client_Contact_Error}</li>';
                                                if($scope.isClientCopyEmailEmpty)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_enter_the_email_address_for_the_additional_client_contact_s}</li>'; //Modified by Neha under ER-2882
                                                else if(!$scope.validateClientCopyEmail() && $scope.copyListEmailMatched)//updated by Govind under issue 6336
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Client_Contact_with_the_same_email_address_is_already_added}</li>';
                                                else if($scope.invalidClientCopyEmail != null && $scope.invalidClientCopyEmail)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Client_Copies_Email_Invalid_Contact_Email_Address}</li>';//updated by Govind issue 6336

                                                //*** added by Govind issue 6336 start ***//
                                                if($scope.invalidConfirmMail != null && $scope.invalidConfirmMail)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Client_Copies_Email_Invalid_Confirm_Contact_Email_Address}</li>';
                                                else if($scope.emptyConfirmMail != null && $scope.emptyConfirmMail)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_confirm_the_additional_client_contact_s_email_address}</li>'; //Modified by Neha under ER-2882
                                                else if($scope.confirmMatch != null && $scope.confirmMatch)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Client_Copies_Email_Confirm_Contact_Email_and_Contact_Email_do_not_match}</li>';
                                                //*** added by Govind issue 6336 End ***//
                                            }
                                        }

                                        if($scope.viewModeStatus == 'VDV' || $scope.isTPProcessor || ($scope.isUSTPProcessor && $scope.requestType == 'edit')) //Updated by Babita on 6 may 2015 under issue-07049//updated by Govind 22 Feb,issue 7109
                                        {
                                            //*** Added by Govind under ER-1658 Start ***//
                                            if(($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) ||  $scope.vendorNotInSystem) {
                                                if($scope.tpaObj.competitiveServiceToOfferings ==  null || $scope.tpaObj.competitiveServiceToOfferings.length == 0) {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_mention_whether_the_requested_offerings_have_any_competitive_services}</li>';
                                                }
                                                if($scope.tpaObj.competitiveServiceToOfferings2 ==  null || $scope.tpaObj.competitiveServiceToOfferings2.length == 0) {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_mention_whether_the_requested_offerings_have_any_competitive_product}</li>';
                                                }
                                                if($scope.tpaObj.competitiveServiceToOfferings3 ==  null || $scope.tpaObj.competitiveServiceToOfferings3.length == 0) {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_mention_whether_the_competitive_product_or_service_contains_similar_d}</li>';
                                                }
                                            }

                                            if($scope.tpaObj.globalBrandingName == null || $scope.tpaObj.globalBrandingName.trim().length == 0) {
                                                $log.info('IN validateForm : In global branding error = ' + $scope.errorMsg);
                                
                                                if(!$scope.vendorNotGBInSystem) {
                                                    $scope.errorMsg += '<li>Please use the \'Please search for your Country and Global Branding Name\' button to search for your global brand account.</li>';
                                                }
                                                else if($scope.vendorGBNotInSystem) { 
                                                    $scope.errorMsg += '<li>Global branding Name must not be empty.</li>';
                                                    $scope.isVendorGlobalBrandingError = true;
                                                }
                                                else {
                                                    $scope.isVendorGlobalBrandingError = false;
                                                }
                                            } 
                                            else if(!$scope.isValidVendorInfo($scope.tpaObj.globalBrandingName)) {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Enter_Company_Branded_Name_In_English}</li>';
                                                $scope.isVendorGlobalBrandingError = true;
                                            }
                                            
                                            if($scope.tpaObj.vendorLegalName == null || $scope.tpaObj.vendorLegalName.trim().length == 0) {
                                                if(!$scope.vendorNotInSystem) {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_use_the_Search_Vendor_Account_button_to_search_for_your_account}</li>';
                                                }
                                                else if($scope.vendorNotInSystem) {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Legal_Entity_must_not_be_empty}</li>';
                                                    $scope.isVendorLegalNameError = true;
                                                }
                                                else {
                                                    $scope.isVendorLegalNameError = false;
                                                }
                                            }
                                            else if(!$scope.isValidVendorInfo($scope.tpaObj.vendorLegalName)) {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Enter_Vendor_Legal_Name_In_English}</li>';
                                                $scope.isVendorLegalNameError = true;
                                            }

                                            if(($scope.tpaObj.vendorAddress == null || $scope.tpaObj.vendorAddress.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem) )// updated by Govind under ER-2138,Modified by Govind under ER-2672
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Address_must_not_be_empty}</li>';
                                                $scope.isVendorAddressError = true;
                                            }
                                            else if(!$scope.isValidVendorInfo($scope.tpaObj.vendorAddress)) {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Enter_Vendor_Address_in_English_Language_only}</li>';
                                                $scope.isVendorAddressError = true;
                                            }
                                            else
                                                $scope.isVendorAddressError = false;
                                            //*** Modified by Govind under ER-1940(picklist) Start ***//

                                            $scope.$log.info('Country::State:::'+JSON.stringify($scope.mlObj.rootObj.selectedVendorCountry)+':::'+JSON.stringify($scope.mlObj.rootObj.selectedVendorState)+':::'+JSON.stringify($scope.mlObj.relatedVendorStateList));
                                            if($scope.mlObj.rootObj.selectedVendorCountry == null || $scope.mlObj.rootObj.selectedVendorCountry.Default_Value__c == '--None--' )
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_select_the_Vendor_Country_from_Selection_Dropdown} </li>';
                                            if($scope.mlObj.rootObj.selectedVendorState.Default_Value__c == '--None--' && $scope.mlObj.relatedVendorStateList != null && $scope.mlObj.relatedVendorStateList.length > 1)
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_select_the_Vendor_State_from_Selection_Dropdown} </li>';
                                            //*** Modified by Govind under ER-1940(picklist) End ***//
                                            if(($scope.tpaObj.vendorCity == null || $scope.tpaObj.vendorCity.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem) )// updated by Govind under ER-2138,Er-2672
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_City_must_not_be_empty}</li>';
                                                $scope.isVendorCityError = true;
                                            }
                                            else if(!$scope.isValidVendorInfo($scope.tpaObj.vendorCity)) {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Enter_Vendor_City_in_English_Language_Only}</li>';
                                                $scope.isVendorCityError = true;
                                            }
                                            else
                                                $scope.isVendorCityError = false;
                                            if(($scope.tpaObj.vendorPostal == null || $scope.tpaObj.vendorPostal.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem) )// updated by Govind under ER-2138,ER-2672
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Postal_Code_must_not_be_empty}</li>';
                                                $scope.isVendorPostalError = true;
                                            }
                                            else if(!$scope.isValidVendorInfo($scope.tpaObj.vendorPostal)) {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Enter_Vendor_Postal_Code_In_English}</li>';
                                                $scope.isVendorPostalError = true;
                                            }
                                            else
                                                $scope.isVendorPostalError = false;

                                            //Added by Rajendra Under ER-12100 -- Start
                                            if(($scope.tpaObj.showHideWebsiteField == null || $scope.tpaObj.showHideWebsiteField.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem)){
                                                $scope.errorMsg += '<li>{!$Label.Please_Indicate_that_Your_Company_has_website_and_or_professional_networking_add}</li>';
                                            }
                                            else if(($scope.tpaObj.vendorWebsite == null || $scope.tpaObj.vendorWebsite.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem) && $scope.tpaObj.showHideWebsiteField)
                                            {
                                                $scope.errorMsg += '<li>{!$Label.Company_website_and_or_professional_networking_address_must_not_be_empty}</li>';
                                                $scope.isVendorWebsiteError = true;
                                            }
                                            else if(!$scope.tpaObj.showHideWebsiteField){
                                                $scope.tpaObj.vendorWebsite = '';
                                                $scope.isVendorWebsiteError = false;
                                            }
                                            //Added by Rajendra Under ER-12100 -- END
                                        }

                                        // Added by C.P.Pandey under ER-1721 start
                                        if($scope.viewModeStatus == 'VDV' || $scope.isTPProcessor || ($scope.isUSTPProcessor && $scope.requestType == 'edit'))//Updated by Babita on 6 may 2015 under issue-07049,issue 7109
                                        {
                                            if(($scope.tpaObj.vendorTitle == null || $scope.tpaObj.vendorTitle.trim().length == 0) )
                                            {
                                                //*** Modified by Govind under ER-2672 Start ***//
                                                if(($scope.viewModeStatus == 'VDV' && ((($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))) || ($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV'))
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Vendor_Contact_Title_must_not_be_empty}</li>';
                                                    $scope.isVendorContactTitleError = true;
                                                }
                                                //*** Modified by Govind under ER-2672 End ***//
                                            }
                                            else
                                                $scope.isVendorContactTitleError = false;
                                        }
                                        // Added by C.P.Pandey under ER-1721 end

                                        //***updated by Govind 25 Feb issue 6169-6172 start ***//
                                        if($scope.viewModeStatus == 'VDV' || $scope.isTPProcessor || ($scope.isUSTPProcessor && $scope.requestType == 'edit')) //Updated by Babita on 6 may 2015 under issue-07049,issue 7109
                                        {
                                            //***updated by Govind 25 Feb issue 6169-6172 end ***//
                                            if(($scope.tpaObj.isAuthorisedSigner == null || $scope.tpaObj.isAuthorisedSigner.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))//Modified by Govind under ER-2672
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_indicate_whether_or_not_you_are_authorized_to_sign_the_IMS_Third_Part}</li>'; //Modified by Neha under ER-2882
                                            }
                                            else if($scope.tpaObj.isAuthorisedSigner == 'No')
                                            {
                                                if($scope.tpaObj.authSignerFName == null || $scope.tpaObj.authSignerFName.length == 0)
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Authorized_Signer_First_Name_must_not_be_empty}</li>';
                                                    $scope.isAuthSignerFNameError = true;
                                                }
                                                //*** Added by Neha under issue 8852 Start ***//
                                                else if(!$scope.isValidFNameLName($scope.tpaObj.authSignerFName))
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_Enter_Valid_Authorized_First_Name}</li>';
                                                    $scope.isAuthSignerFNameError = true;
                                                }
                                                //*** Added by Neha under issue 8852 Ends ***//
                                                else
                                                    $scope.isAuthSignerFNameError = false;

                                                if($scope.tpaObj.authSignerLName == null || $scope.tpaObj.authSignerLName.length == 0)
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Authorized_Signer_Last_Name_must_not_be_empty}</li>';
                                                    $scope.isAuthSignerLNameError = true;
                                                }
                                                //*** Added by Neha under issue 8852 Start ***//
                                                else if(!$scope.isValidFNameLName($scope.tpaObj.authSignerLName))
                                                {

                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_Enter_Valid_Authorized_Last_Name}</li>';
                                                    $scope.isAuthSignerLNameError = true;
                                                }
                                                //*** Added by Neha under issue 8852 Ends ***//
                                                else
                                                    $scope.isAuthSignerLNameError = false;

                                                if($scope.tpaObj.authSignerTitle == null || $scope.tpaObj.authSignerTitle.length == 0)
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Authorized_Signer_Title_must_not_be_empty}</li>';
                                                    $scope.isAuthSignerTitleError = true;
                                                }
                                                else
                                                    $scope.isAuthSignerTitleError = false;

                                                if($scope.tpaObj.authSignerEmail == null || $scope.tpaObj.authSignerEmail.length == 0)
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Authorized_Signer_Email_must_not_be_empty}</li>';
                                                    $scope.isAuthSignerEmailError = true;
                                                }
                                                else if($scope.tpaObj.authSignerEmail.length > 0)
                                                {
                                                    if(!$scope.isValidEmail($scope.tpaObj.authSignerEmail))
                                                    {
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Authorized_Signer_Email_Format_is_not_correct}</li>';
                                                        $scope.isAuthSignerEmailError = true;
                                                    }
                                                    //*** Added by Neha under Issse 8852 Starts ***//
                                                    else if($scope.tpaObj.authSignerEmail.toLowerCase()== $scope.tpaObj.vendorContactEmail.toLowerCase())
                                                    {
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Authorized_Signer_Email_can_not_be_same_as_Vendor_Contact_Email}</li>';
                                                        $scope.isAuthSignerEmailError = true;
                                                    }
                                                    //*** Added by Neha under Issse 8852 Ends ***//
                                                    else
                                                        $scope.isAuthSignerEmailError = false;
                                                }
                                                else
                                                    $scope.isAuthSignerEmailError = false;

                                                if($scope.tpaObj.authSignerEmail.length > 0)
                                                {
                                                    if(($scope.viewModeStatus == 'NV' || $scope.tpaObj.isAuthorisedSignerEmailEdited) && ($scope.tpaObj.authSignerEmailConfirmation == null || $scope.tpaObj.authSignerEmailConfirmation.length == 0))
                                                    {
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Please_confirm_the_Authorized_Signer_s_email_address}</li>';  //Modified by Neha under ER-2882
                                                        $scope.isAuthSignerEmailConfirmError = true;
                                                    }
                                                    else if($scope.tpaObj.authSignerEmailConfirmation.length > 0)
                                                    {
                                                        if(!$scope.isValidEmail($scope.tpaObj.authSignerEmailConfirmation))
                                                        {
                                                            $scope.errorMsg += '<li>{!$Label.TPA_Confirm_Authorized_Signer_Email_Format_is_not_correct}</li>';
                                                            $scope.isAuthSignerEmailConfirmError = true;
                                                        }
                                                        else if($scope.tpaObj.authSignerEmailConfirmation.toLowerCase() != $scope.tpaObj.authSignerEmail.toLowerCase()) //modified by Govind under issue 7351
                                                        {
                                                            $scope.errorMsg += '<li>{!$Label.TPA_Confirm_Authorized_Signer_Email_does_not_match_with_Authorized_Signer_Email}</li>';
                                                            $scope.isAuthSignerEmailConfirmError = true;
                                                        }
                                                            else
                                                                $scope.isAuthSignerEmailConfirmError = false;
                                                    }
                                                }
                                                else
                                                    $scope.isAuthSignerEmailConfirmError = false;
                                            }

                                            if(($scope.tpaObj.vendorComplianceFName == null || $scope.tpaObj.vendorComplianceFName.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_First_Name_must_not_be_empty}</li>';
                                                    $scope.isvendorComplianceFNameError = true;
                                                }
                                                else if(($scope.tpaObj.vendorComplianceFName.length > 0) && (!$scope.isValidFNameLName($scope.tpaObj.vendorComplianceFName)))
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_Enter_Valid_Vendor_TPA_Compliance_Contact_First_Name}</li>';
                                                    $scope.isvendorComplianceFNameError = true;
                                                }
                                                    else
                                                        $scope.isvendorComplianceFNameError = false;
                                                
                                                if(($scope.tpaObj.vendorComplianceLName == null || $scope.tpaObj.vendorComplianceLName.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Last_Name_must_not_be_empty}</li>';
                                                    $scope.isvendorComplianceLNameError = true;
                                                }
                                                else if(($scope.tpaObj.vendorComplianceLName.length > 0) && (!$scope.isValidFNameLName($scope.tpaObj.vendorComplianceLName)))
                                                {
                                                    
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_Enter_Valid_Vendor_TPA_Compliance_Contact_Last_Name}</li>';
                                                    $scope.isvendorComplianceLNameError = true;
                                                }
                                                    else
                                                        $scope.isvendorComplianceLNameError = false;
                                                
                                                if(($scope.tpaObj.vendorComplianceTitle == null || $scope.tpaObj.vendorComplianceTitle.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Title_must_not_be_empty}</li>';
                                                    $scope.isvendorComplianceTitleError = true;
                                                }
                                                else
                                                    $scope.isvendorComplianceTitleError = false;
                                                
                                                if(($scope.tpaObj.vendorComplianceEmail == null || $scope.tpaObj.vendorComplianceEmail.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Email_must_not_be_empty}</li>';
                                                    $scope.isvendorComplianceEmailError = true;
                                                }
                                                else if($scope.tpaObj.vendorComplianceEmail.length > 0)
                                                {
                                                    if(!$scope.isValidEmail($scope.tpaObj.vendorComplianceEmail))
                                                    {
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Email_Format_is_not_correct}</li>';
                                                        $scope.isvendorComplianceEmailError = true;
                                                    }
                                                    else
                                                            $scope.isvendorComplianceEmailError = false;
                                                    }
                                            if(($scope.tpaObj.vendorComplianceStreetAddress == null || $scope.tpaObj.vendorComplianceStreetAddress.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Street_Address_must_not_be_empty}</li>';
                                                $scope.isvendorComplianceStreetAddressError = true;
                                            }
                                            else
                                                $scope.isvendorComplianceStreetAddressError = false;
                                            $scope.$log.info('Country::State:::111'+JSON.stringify($scope.tpaObj.vendorComplianceCountry.Default_Value__c)+':::'+JSON.stringify($scope.tpaObj.vendorComplianceState.Default_Value__c)+':::'+JSON.stringify($scope.mlObj.relatedVendorComplianceStateList));
                                            if(($scope.tpaObj.vendorComplianceCountry.Default_Value__c == null || $scope.tpaObj.vendorComplianceCountry.Default_Value__c == '--None--') && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem) ){
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_select_the_Vendor_TPA_Compliance_Contact_Country_from_Selection_Dropd} </li>';
                                                $scope.isvendorComplianceCountryError = true;
                                                }
                                            else
                                                $scope.isvendorComplianceCountryError = false;
                                            if($scope.tpaObj.vendorComplianceState.Default_Value__c == '--None--' && $scope.mlObj.relatedVendorComplianceStateList != null && $scope.mlObj.relatedVendorComplianceStateList.length > 1){
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_select_the_Vendor_TPA_Compliance_Contact_State_from_Selection_Dropdow} </li>';
                                                $scope.isvendorComplianceStateError = true;
                                                }
                                            else
                                                $scope.isvendorComplianceStateError = false;
                                            
                                            if(($scope.tpaObj.vendorComplianceCity == null || $scope.tpaObj.vendorComplianceCity.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_City_must_not_be_empty}</li>';
                                                $scope.isvendorComplianceCityError = true;
                                            }
                                            else
                                                $scope.isvendorComplianceCityError = false;
                                            if(($scope.tpaObj.vendorComplianceZipCode == null || $scope.tpaObj.vendorComplianceZipCode.length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem))// updated by Govind under ER-2138,ER-2672
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Zip_Code_must_not_be_empty}</li>';
                                                $scope.isvendorComplianceZipCodeError = true;
                                            }
                                            else
                                                $scope.isvendorComplianceZipCodeError = false;

                                            if(!$scope.isTPProcessor)
                                            {
                                                if(($scope.tpaObj.isAdditionalVendorRequired == null || $scope.tpaObj.isAdditionalVendorRequired.trim().length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem)) //Modified by Govind under ER-2672
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_indicate_whether_the_primary_vendor_will_be_working_with_or_sharing}</li>';  //Modified by Neha under ER-2882
                                                }
                                            }

                                            if($scope.tpaObj.isAdditionalVendorRequired == 'Yes' && $scope.loadType != 'CNR' && ($scope.tpaSubContContact == null || $scope.tpaSubContContact.length == 0))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_Add_additional_vendors}</li>';
                                            }

                                            // Added by Babita Dadarwal under ER-1669 start
                                            if(($scope.isVendorCopiesEmail == null || $scope.isVendorCopiesEmail.trim().length == 0) && (($scope.tpaObj.vendorLegalName != null && $scope.tpaObj.vendorLegalName.trim().length != 0) || $scope.vendorNotInSystem)) //Modified by Govind under  ER-2672
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_answer_the_question_regarding_additional_vendor_contacts}</li>'; //Modified by Neha under ER-2882
                                            }
                                            else if($scope.isVendorCopiesEmail == 'Yes' && ($scope.vendorCopyEmailList == null || $scope.vendorCopyEmailList.length == 0))
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_Add_at_least_one_Additional_Vendor_Contact_record}</li>';
                                            }
                                            else if($scope.isVendorCopiesEmail == 'Yes' && $scope.vendorCopyEmailList.length > 0)
                                            {
                                                if($scope.isVendorCopyNameEmpty)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Additional_Vendor_Contact_Error}</li>';
                                                if($scope.isVendorCopyEmailEmpty)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Additional_Vendor_Conatct_Email_must_not_be_empty}</li>';
                                                else if(!$scope.validateVendorCopyEmail() && $scope.copyListEmailMatched)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Additional_Vendor_Contact_with_the_same_email_address_is_already_added}</li>';
                                                else if($scope.invalidVendorCopyEmail != null && $scope.invalidVendorCopyEmail)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Additional_Vendor_Contact_Email_Invalid_Contact_Email_Address}</li>';
                                                if($scope.invalidConfirmMail != null && $scope.invalidConfirmMail)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Additional_Vendor_Contact_Email_Invalid_Confirm_Contact_Email_Address}</li>';
                                                else if($scope.emptyConfirmMail != null && $scope.emptyConfirmMail)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Additional_Vendor_Contact_Email_Please_Provide_Confirm_Contact_Email}</li>';
                                                else if($scope.confirmMatch != null && $scope.confirmMatch)
                                                    $scope.errorMsg += '<li>' + $scope.labels.TPA_Additional_Vendor_Contact_Email_Confirm_Contact_Email_and_Contact_Email_does + '</li>';
                                            }
                                            // Added by Babita Dadarwal under ER-1669 End

                                            if($scope.errorMsg.trim().length == 0)
                                            {
                                                $scope.validateSignerObj = {};
                                                if($scope.tpaObj.validateSignerResponse == null)
                                                    $scope.tpaObj.validateSignerResponse = '';
                                                $scope.validateSignerObj.vendorRegistrationNumber = ($scope.tpaObj.vendorRegistrationNumber == null || $scope.tpaObj.vendorRegistrationNumber.length == 0) ? '0' : $scope.tpaObj.vendorRegistrationNumber; //Added by C.P.Pandey Vendor Registration Number ER-1558 (Sprint-5)
                                                $scope.validateSignerObj.vendorName = $scope.tpaObj.vendorLegalName;
                                                $scope.validateSignerObj.contactEmail = $scope.tpaObj.vendorContactEmail;
                                                $scope.validateSignerObj.authorizedSignerEmail = $scope.tpaObj.authSignerEmail;
                                                $scope.validateSignerObj.vendorAddress = $scope.tpaObj.vendorAddress;
                                                $scope.validateSignerObj.vendorCountry =  $scope.mlObj.rootObj.selectedVendorCountry.Default_Value__c;//Modified by Govind under ER-1940
                                                $scope.validateSignerObj.vendorState = $scope.mlObj.rootObj.selectedVendorState.Default_Value__c;//Modified by Govind under ER-1940
                                                $scope.validateSignerObj.vendorCity = $scope.tpaObj.vendorCity;
                                                $scope.validateSignerObj.vendorPostal = $scope.tpaObj.vendorPostal;
                                                $scope.validateSignerObj.vendorAccountId = $scope.tpaObj.vendorAccountId;//Added by Govind under Issue 8706
                                                $scope.validateSignerObj.authorizedSignerRequired = $scope.tpaObj.isAuthorisedSigner;
                                                $scope.validateSignerObj.GUID = $scope.GUID; //Added by C.P.Pandey under CR-7361
                                                //Modified by C.P.Pandey Vendor Registration Number ER-1558 (Sprint-5) Start
                                                if($scope.validateSignerObj.vendorRegistrationNumber != null || $scope.validateSignerObj.vendorRegistrationNumber.length > 0)
                                                {
                                                    $scope.validateSignerObj.reqModeType = 'RegistrationNumberCheck';
                                                }
                                                else if($scope.tpaObj.validateSignerResponse == 'AuthorizedSignerRequired')
                                                {
                                                    $scope.validateSignerObj.reqModeType = 'AuthorizedSignerCheck';
                                                }
                                                $scope.tpaObj.validateSignerResponse = null;
                                                $scope.isAuthSignerEmailError = false;
                                                $scope.isWrongRegistrationNumberError = false;

                                                if($scope.tpaObj.validateSignerResponse != 'TpaProcessorWillProcess' && $scope.tpaObj.validateSignerResponse != 'ValidResult')
                                                {
                                                    showLoading();
                                                    $scope.isPotentialVendorCase = true; //Added by Neha Bansal under ER - 3883
                                                    CNT_TPA_RequestSubmissionForm.validateControlNumberAuthSigner(JSON.stringify($scope.validateSignerObj), function(result, event) {
                                                        $scope.$log.info('Result: ' + result);
                                                        $scope.tpaObj.selectedVendorAccount = ''; //Added by C.P.Pandey under Issue-6918
                                                        $scope.tpaObj.selectedVendorContact = ''; //Added by C.P.Pandey under Issue-6918
                                                        hideLoading();
                                                        if(event.type == 'exception')
                                                        {
                                                            $scope.$log.info('Error: ' + event.message);
                                                            return false;
                                                        }
                                                        if(result.indexOf('Valid') > -1)
                                                        {
                                                            $scope.tpaObj.validateSignerResponse = 'ValidResult';
                                                            if(result.split('~').length > 0)
                                                            {
                                                                $scope.tpaObj.selectedVendorAccount = result.split('~')[1];
                                                                $scope.tpaObj.selectedVendorContact = result.split('~')[2];
                                                            }
                                                            $scope.isPotentialVendorCase = false;
                                                            //if($scope.viewModeStatus != 'VDV')//Commented by Babita on 14 July Under Issue-07497
                                                            //$scope.popupAlert("The Client Project Name is made available for the convenience of the client for the purpose of uniquely identifying a project, and information in that field will not amend, modify or influence the terms or interpretation of any TLLA terms between IMS Health and a vendor."); // Added by Babita on 3 July 2015 under ER-1860 //Commented by Babita on 14 July Under Issue-07497
                                                        }
                                                        else if(result == 'PotentialNewVendor')
                                                        {
                                                            //*** Added by Govind under ER-2672 Start ***//
                                                            $scope.tpaObj.validateSignerResponse = 'TpaProcessorWillProcess';
                                                            $scope.isPotentialVendorCase = true;
                                                            //*** Added by Govind under ER-2672 End ***//
                                                            //Modified by C.P.Pandey custom popup start

                                                        }
                                                        else
                                                        {
                                                            $scope.$log.info(result);
                                                            $scope.isAuthSignerEmailError = false;
                                                            $scope.isVendorContactEmailError = false;
                                                            $scope.isVendorLegalNameError = false;
                                                            $scope.isVendorGlobalBrandingError = false;
                                                            $scope.isWrongRegistrationNumberError = false;
                                                        }

                                                        $scope.tpaObj.validateSignerLastStatus = result;

                                                        if($scope.errorMsg.trim().length > 0)
                                                        {
                                                            $scope.isError = true;
                                                            $scope.errorMsg = '<ul>' + $scope.errorMsg + '</ul>';
                                                            $scope.selectedSection = 'V';
                                                        }
                                                        else
                                                        {
                                                            $scope.errorMsg = '';
                                                            $scope.isError = false;
                                                        }
                                                        $scope.applyChanges();
                                                    });
                                                }
                                                //Modified by C.P.Pandey Vendor Registration Number ER-1558 (Sprint-5) End
                                            }
                                        }
                                        break;

                                    //------------------------------------------------------------------------------------------------------------------

                                    case 'RDA':
                                        $log.info('IN validateForm : case RDA');

                                        //Added by Babita Dadarwal under ER-2516 start
                                        if($scope.checkForAPLDAndRWE())
                                        {
                                            if($scope.requestType == 'renew' || $scope.isRenewedRequest) {
                                                $scope.canRenew = false;
                                                return false;
                                            }
                                            return true;
                                        }

                                        //Added by Babita Dadarwal under ER-2516 End

                                        if($('#dataAccessStartDate').datepicker('getDate') == null && !$scope.saveRequestInDraft)
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Data_Access_Start_Date_cannot_be_empty}</li>';
                                        }
                                        if($('#dataAccessEndDate').datepicker('getDate') == null && !$scope.saveRequestInDraft)
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Data_Access_End_Date_cannot_be_empty}</li>';
                                        }
                                        //*** added by Govind Addendum 20 Feb to validate the data period start date and end date Start ***//
                                        if($('#dataPeriodStartDate').datepicker('getDate') == null && !$scope.saveRequestInDraft && !$scope.isOnlyReferenceDataCatSelected)
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Data_Period_Start_Date_cannot_be_empty}</li>';
                                        }
                                        if($('#dataPeriodEndDate').datepicker('getDate') == null && !$scope.saveRequestInDraft && !$scope.isOnlyReferenceDataCatSelected)
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Data_Period_End_Date_cannot_be_empty}</li>';
                                        }
                                        if($('#dataPeriodStartDate').datepicker('getDate') > $('#dataPeriodEndDate').datepicker('getDate') && $('#dataPeriodEndDate').datepicker('getDate') != null && !$scope.isOnlyReferenceDataCatSelected)
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Data_Period_Start_Date_cannot_be_greater_than_Data_Period_End_Date}</li>';
                                        }
                                        //Added by C.P.Pandey under Issue-7292 start
                                        if($('#dataAccessStartDate').datepicker('getDate') > $('#dataAccessEndDate').datepicker('getDate') && $('#dataAccessEndDate').datepicker('getDate') != null)
                                        {
                                            $scope.errorMsg += '<li>{!$Label.TPA_Data_Access_Start_Date_cannot_be_greater_than_Data_Access_End_Date}</li>';
                                        }
                                        //Added by C.P.Pandey under Issue-7292 end
                                        //Added by C.P.Pandey under Issue-7163 start
                                        if($('#dataAccessStartDate').datepicker('getDate') < (new Date(new Date().setHours(0,0,0,0))))
                                        {
                                            $scope.errorMsg += "<li>{!$Label.TPA_Data_Access_Start_Date_should_not_be_less_than_Today_s_Date}</li>";
                                        }
                                        if($scope.requestType == 'renew' && ($scope.tpaObj.isRenewedReqUseandOfferingChanged == null || $scope.tpaObj.isRenewedReqUseandOfferingChanged.trim().length == 0) && !$scope.saveRequestInDraft)
                                        {
                                            $scope.errorMsg += '<li>Confirm the action you wish to take with this renewal:</li>'; //Modified by Neha under ER-2882
                                        }
                                        //Added by C.P.Pandey under Issue-7163 end

                                        //Added by C.P.Pandey under ER-2495 start
                                        if(!$scope.validateSecondaryOfferingSelected() && $scope.errorMsg == '')
                                        {
                                            $scope.$log.info('$scope.requestType = ' + $scope.requestType + '$scope.isRenewedRequest = ' + $scope.isRenewedRequest);
                            
                                            if($scope.requestType == 'renew' || $scope.isRenewedRequest) {
                                                $scope.canRenew = false;
                                                return false;
                                            }
                                            //12736 start
                                            $scope.errorMsg += "<li>{!$Label.TPA_Every_USE_must_have_at_least_one_Data_Offering_selected_Please_review_and_u}";
                                            $scope.errorMsg += "<ul>" + $scope.useOfferingErrorMessage + "</ul></li>";
                                            // 12736 end
                                        }
                                        //Added by C.P.Pandey under ER-2495 end

                                        //Added by C.P.Pandey under Issue-8093 start
                                        if(!$scope.isObjectEmpty($scope.SelectedDescMap))
                                        {
                                            var ifOfferingRegionMissing = false;
                                            var missingOfferingsRegionRcords = [];
                                            angular.forEach($scope.SelectedDescMap, function(v, k)
                                            {
                                                if(v.dataAsset == null || v.dataAsset.length == 0)
                                                {
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Offerings_and_Region_are_missing_for} <b>' + v.purposeName + '</b> {!$Label.TPA_under} <b>' + v.categoryName + '</b>.</li>';
                                                    ifOfferingRegionMissing = true;
                                                    missingOfferingsRegionRcords.push(k);
                                                }
                                            });

                                            if(ifOfferingRegionMissing)
                                            {
                                                if($scope.requestType == 'renew' || $scope.isRenewedRequest) {
                                                    $scope.canRenew = false;
                                                    return false;
                                                }
                                                $scope.popupAlert('<ul>' + $scope.errorMsg + '</ul><center><b>{!$Label.TPA_Uses_without_offerings_will_remove_from_the_selected_list_To_keep_them_in}</b></center>', function(){//Modified by Govind under ER-1940
                                                    angular.forEach(missingOfferingsRegionRcords, function(v, k)
                                                    {
                                                        $scope.deleteSelectedPurposes($scope.SelectedDescMap[v]);
                                                        $scope.errorMsg = '';
                                                        $scope.isError = false;
                                                    });
                                                });
                                                return true; //Added by C.P.Pandey under ER-1940
                                            }
                                        }
                                        //Added by C.P.Pandey under Issue-8093 end

                                        //*** added by Govind Addendum 20 Feb to validate the data period start date and end date End ***//
                                        if($scope.isObjectEmpty($scope.SelectedDescMap) && !$scope.saveRequestInDraft)
                                        {
                                            if($scope.requestType == 'renew' || $scope.isRenewedRequest) {
                                                $scope.canRenew = false;
                                                return false;
                                            }
                                            if($scope.mlObj.selectedRegion.Default_Value__c == 'None')
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_select_Country_of_Offering}</li>';
                                            }
                                            else
                                            {
                                                $scope.errorMsg += "<li>{!$Label.TPA_Please_ensure_you_have_selected_a_Use_and_at_least_one_Offering_then_select}</li>";//Added by Babita Dadarwal on 25 May 2016 under ER-2730
                                            }
                                        }
                                        else if($scope.errorMsg.trim().length == 0) //Modified by C.P.Pandey under Issue-7222
                                        {
                                            //Added by C.P.Pandey under ER-3485 start
                                            var dateDiffInterval = $('#dataAccessEndDate').datepicker('getDate') - $('#dataAccessStartDate').datepicker('getDate');
                                            //$scope.$log.info('test Date:::' + dateDiffInterval/86400000);
                                            dateDiffInterval = dateDiffInterval/86400000;
                                            if(dateDiffInterval < 30 && !$scope.saveRequestInDraft && !$scope.isThirtyDaysDiffAccepted)//Updated by Babita Dadarwal under ER-3433
                                            {
                                                $scope.popupAlert($scope.labels.TPA_Project_duration_less_than_thirtyOne_days, function(){$scope.isThirtyDaysDiffAccepted = true;});
                                                return true;
                                            }
                                            //Added by C.P.Pandey under ER-3485 end

                                            if($scope.selectedTree.PurposeCategoryId.length > 0 || $scope.selectedTree.OtherDescriptionId.length > 0)
                                            {
                                                var isMarked = false;
                                                $(".dasscb").each(function()
                                                {
                                                    if($(this).is(':checked'))
                                                    {
                                                        isMarked = true;
                                                    }
                                                });
                                                if(!isMarked)
                                                {
                                                    $scope.isOfferingSelected = false; //Added by Sunny Bansal under Issue-07089
                                                    //Updated by C.P.Pandey custom popup start

                                                    //Added by Babita Dadarwal on 25 May 2016 under ER-2730 Start
                                                    $scope.popupAlert('{!$Label.TPA_Your_selection_has_not_been_added_or_updated_Click_OK_then_be_sure_to_cli}');//Modified by Govind under ER-1940
                                                    return true; //Added by C.P.Pandey under ER-1940
                                                    //Added by Babita Dadarwal on 25 May 2016 under ER-2730 End

                                                    //Updated by C.P.Pandey custom popup end
                                                }
                                                else
                                                {
                                                    $scope.isUseAddedAfterBeingSelected = false; //Added by Sunny Bansal under Issue-07089
                                                    //Updated by C.P.Pandey custom popup start

                                                    //Added by Babita Dadarwal on 25 May 2016 under ER-2730 Start
                                                    $scope.popupAlert('{!$Label.TPA_Your_selection_has_not_been_added_or_updated_Click_OK_then_be_sure_to_cli}');//Modified BY Govind under ER-1940
                                                    return true; //Added by C.P.Pandey under ER-1940
                                                    //Added by Babita Dadarwal on 25 May 2016 under ER-2730 End

                                                    //Updated by C.P.Pandey custom popup end
                                                }
                                            }
                                            //*** Added by Sunny Bansal under Issue-07089 starts ***//
                                            else {
                                                $scope.isOfferingSelected = true;
                                                $scope.isUseAddedAfterBeingSelected = true;
                                            }
                                            //*** Added by Sunny Bansal under Issue-07089 ends ***//
                                        }

                                        break;

                                    //-----------------------------------------------------------------------------------------------------------------------------------------

                                    case 'AD':
                                        //Added by Babita Dadarwal under ER-2241 Start
                                        $scope.$log.info('in controller : ddAmaDataTimePer = '+$(".ddAmaDataTimePer option:selected").text());
                                        if($scope.isUSPrescLvlData == null || $scope.isUSPrescLvlData.trim().length == 0 && !$scope.saveRequestInDraft)
                                        {
                                            if($scope.viewModeStatus == 'NV' || $scope.viewModeStatus == 'CDV' || $scope.isTPProcessor || $scope.isUSTPProcessor)
                                            {
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_answer_if_request_includes_US_Prescriber_level_data}</li>';
                                            }
                                        }
                                        else if($scope.isUSPrescLvlData == 'Yes')
                                        {
                                            //***  Added by Govind under ER-2674 Start ***//
                                            if($scope.viewModeStatus == 'NV'  || $scope.viewModeStatus == 'CDV' || $scope.isTPProcessor || $scope.isUSTPProcessor)
                                            {
                                                if(($(".ddAmaDataTimePer option:selected").text() == null || $(".ddAmaDataTimePer option:selected").text().trim() == '--None--') && !$scope.saveRequestInDraft )
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_answer_longest_period_of_time_Vendor_to_access_AMA_data}</li>';
                                                // Added By Neha Bansal under CR-12673 Starts
                                                if($scope.tpaObj.isVendorProvideBannerAds == null && $scope.isBannerAds == true)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_indicate_whether_to_provide_banner_ads_or_not}</li>';
                                                if($scope.isClientReqStoragePermission == null || $scope.isClientReqStoragePermission.trim().length == 0)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_please_indicate_whether_Client_store_the_prescriber_level_IQVIA_data_outside}</li>';
                                                if($scope.isClientReqStoragePermission != null && $scope.isClientReqStoragePermission.length != 0 && $scope.isClientReqStoragePermission == 'Yes') {
                                                    if($(".ddClientEmpDataCount").select2('data') == null || $(".ddClientEmpDataCount").select2('data').length == 0  )
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Please_provide_Client_country_location_s_where_the_IQVIA_Data_will_be_stored}</li>'; 
                                                }
                                                // Added By Neha Bansal under CR-12673 Ends
                                            }
                                            //*** Added by Govind under ER-2674 End ***//

                                           

                                            if($scope.viewModeStatus == 'NV' || $scope.viewModeStatus == 'CDV' || $scope.isTPProcessor || $scope.isUSTPProcessor)
                                            {
                                                if(($("#ddAmaFreDelData option:selected").text() == null || $("#ddAmaFreDelData option:selected").text().trim() == '--None--') && !$scope.saveRequestInDraft)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_answer_frequency_of_the_delivery_to_the_Vendor}</li>';
                                                else if($("#ddAmaFreDelData option:selected").text().trim() == 'Other' && ($scope.freqDelOtherData == null || $scope.freqDelOtherData.trim().length == 0))
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_provide_other_value_for_frequency_of_the_delivery_to_the_Vendor}</li>';

                                                var isSeleced = false;
                                              
                                                //if(!isSeleced && !$scope.saveRequestInDraft)
                                                //$scope.errorMsg += '<li>{!$Label.TPA_Please_select_the_Project_Purpose_specifically_related_to_the_AMA_Prescriber}</li>';

                                                isSeleced = false;
                                                $(".amaPresLvlDataIdChk:checked").each(function() {
                                                    isSeleced = true;
                                                });
                                                if(!isSeleced && !$scope.saveRequestInDraft)
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_answer_type_of_prescriber_level_data_requested}</li>';

                                                isSeleced = false;
                                            }
                                        }
                                        //Added by Babita Dadarwal under ER-2241 End

                                        break;

                                    //-------------------------------------------------------------------------------------------------------------------------

                                    case 'DDT':
                                        if($scope.viewModeStatus == 'VDV' || $scope.isTPProcessor || ($scope.isUSTPProcessor && $scope.requestType == 'edit'))
                                        {
                                            
                                            if($scope.isVendorReqAccessPermission == null || $scope.isVendorReqAccessPermission.trim().length == 0)
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_indicate_whether_Vendor_employee_s_require_remote_access_from_a_nonUS}</li>';
                                            
                                            if($scope.isVendorReqAccessPermission != null && $scope.isVendorReqAccessPermission.length != 0 && $scope.isVendorReqAccessPermission == 'Yes') {
                                                if($(".ddVendorEmpDataAccessedInCount").select2('data') == null || $(".ddVendorEmpDataAccessedInCount").select2('data').length == 0  )
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_answer_where_wil_Vendor_employee_require_remote_access_from_a_non_U_S}</li>'; 
                                                if($(".ddTechforRemoteAccess").select2('data') == null || $(".ddTechforRemoteAccess").select2('data').length == 0  )
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_select_the_secure_technology_s_that_will_be_used_for_remote_access}</li>'; 
                                                if($(".ddTechforRemoteAccess").select2('data') != null && $(".ddTechforRemoteAccess").select2('data').length != 0  && $scope.getMultiSelectedData('ddTechSelectedforRemoteAccess').indexOf('Other') != -1 && ($scope.otherTechforRemoteAccessData == null || $scope.otherTechforRemoteAccessData.length == 0))
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Please_provide_the_Other_technology_s_that_will_be_used_for_remote_access}</li>'; 
                                                if(($scope.tpaObj.ExUSLegalEntityforRemoteAccess == null || $scope.tpaObj.ExUSLegalEntityforRemoteAccess.trim().length == 0) && !$scope.RemoteAccLENotInSystem)
                                                    {
                                                        $scope.errorMsg += '<li>Please use the Search Ex-US Entity Legal Entity button to search for Remote Access.</li>';
                                                    }
                                                    
                                                    if(($scope.tpaObj.isLegalEntityForeign == undefined ||  $scope.tpaObj.isLegalEntityForeign == null)  && !$scope.RemoteAccLENotInSystem){
                                                        $scope.errorMsg += '<li> Please Select the legal entity above a foreign affiliate of the United States legal entity on this TPA request? </li>';
                                                    }
                                                    if(($scope.tpaObj.ExUSLegalEntityforRemoteAccess == null || $scope.tpaObj.ExUSLegalEntityforRemoteAccess.trim().length == 0) && $scope.RemoteAccLENotInSystem )
                                                    {
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Name for Remote Access</li>';
                                                    }
                                                    if(($scope.tpaObj.OffAccessLEAddress == null || $scope.tpaObj.OffAccessLEAddress.length == 0) && (($scope.tpaObj.ExUSLegalEntityforRemoteAccess != null && $scope.tpaObj.ExUSLegalEntityforRemoteAccess.trim().length != 0) || $scope.RemoteAccLENotInSystem) ){
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Address for Remote Access</li>';
                                                    }
                                                    if(($scope.tpaObj.OffAccessLECountry == null || $scope.tpaObj.OffAccessLECountry == '--None--') && (($scope.tpaObj.ExUSLegalEntityforRemoteAccess != null && $scope.tpaObj.ExUSLegalEntityforRemoteAccess.trim().length != 0) || $scope.RemoteAccLENotInSystem) )
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Country for Remote Access </li>';
                                                    if(($scope.tpaObj.OffAccessLECity == null || $scope.tpaObj.OffAccessLECity.length == 0) && (($scope.tpaObj.ExUSLegalEntityforRemoteAccess != null && $scope.tpaObj.ExUSLegalEntityforRemoteAccess.trim().length != 0) || $scope.RemoteAccLENotInSystem) )
                                                    {
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company City for Remote Access</li>';
                                                    }
                                                    if(($scope.tpaObj.OffAccessLEPostal == null || $scope.tpaObj.OffAccessLEPostal.length == 0) && (($scope.tpaObj.ExUSLegalEntityforRemoteAccess != null && $scope.tpaObj.ExUSLegalEntityforRemoteAccess.trim().length != 0) || $scope.RemoteAccLENotInSystem) )
                                                    {
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Postal Code for Remote Access</li>';
                                                    }
                                                    if($scope.VendorRemoteAccessAck == false)
                                                    {
                                                        $scope.errorMsg += '<li>You must attest that you understand and have advised your technical development team to disable download and print functionality in the offshore environment.</li>';
                                                    }
                                                    if($scope.VendorRemoteAccessAck1 == false)
                                                    {
                                                        $scope.errorMsg += '<li>If you are not able to attest to these at this time, please come back via the link provided in the email to complete the request.</li>';
                                                    }
                                            }   
                                            $scope.$log.info('VendorEmpDataStoredInCountry: ' + $scope.VendorEmpDataStoredInCountry);
                                            if($scope.isVendorReqStoragePermission == null || $scope.isVendorReqStoragePermission.trim().length == 0)
                                                $scope.errorMsg += '<li>{!$Label.TPA_Please_indicate_whether_Vendor_employee_s_require_storage_permissions_nonUS}</li>';
                                            if($scope.isVendorReqStoragePermission != null && $scope.isVendorReqStoragePermission.length != 0 && $scope.isVendorReqStoragePermission == 'Yes') {
                                                if($scope.VendorEmpDataStoredInCountry ==  null || $scope.VendorEmpDataStoredInCountry == '--None--')
                                                    $scope.errorMsg += '<li>{!$Label.TPA_please_answer_where_will_Vendor_employee_require_storage_permissions_fromnon}</li>';
                                                if(($scope.tpaObj.ExUSLegalEntityforOffStorage == null || $scope.tpaObj.ExUSLegalEntityforOffStorage.trim().length == 0) && !$scope.OffStorageLENotInSystem)
                                                    {
                                                        $scope.errorMsg += '<li>Please use the Search Ex-US Entity Legal Entity button to search for Offshore Storage.</li>';
                                                    }
                                                    if(($scope.tpaObj.ExUSLegalEntityforOffStorage == null || $scope.tpaObj.ExUSLegalEntityforOffStorage.trim().length == 0) && $scope.OffStorageLENotInSystem )
                                                    {
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Name for Offshore Storage</li>';
                                                    }
                                                    if(($scope.tpaObj.OffStorageLEAddress == null || $scope.tpaObj.OffStorageLEAddress.length == 0) && (($scope.tpaObj.ExUSLegalEntityforOffStorage != null && $scope.tpaObj.ExUSLegalEntityforOffStorage.trim().length != 0) || $scope.OffStorageLENotInSystem) ){
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Address for Offshore Storage</li>';
                                                    }
                                                    if(($scope.tpaObj.OffStorageLECountry == null || $scope.tpaObj.OffStorageLECountry == '--None--') && (($scope.tpaObj.ExUSLegalEntityforOffStorage != null && $scope.tpaObj.ExUSLegalEntityforOffStorage.trim().length != 0) || $scope.OffStorageLENotInSystem) )
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Country for Offshore Storage </li>';
                                                    if(($scope.tpaObj.OffStorageLECity == null || $scope.tpaObj.OffStorageLECity.length == 0) && (($scope.tpaObj.ExUSLegalEntityforOffStorage != null && $scope.tpaObj.ExUSLegalEntityforOffStorage.trim().length != 0) || $scope.OffStorageLENotInSystem) )
                                                    {
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company City for Offshore Storage</li>';
                                                    }
                                                    if(($scope.tpaObj.OffStorageLEPostal == null || $scope.tpaObj.OffStorageLEPostal.length == 0) && (($scope.tpaObj.ExUSLegalEntityforOffStorage != null && $scope.tpaObj.ExUSLegalEntityforOffStorage.trim().length != 0) || $scope.OffStorageLENotInSystem) )
                                                    {
                                                        $scope.errorMsg += '<li>Please Select the Ex-US Entity Legal Company Postal Code for Offshore Storage</li>';
                                                    }
                                                if($scope.tpaObj.OffStorageAuthSignerFName == null || $scope.tpaObj.OffStorageAuthSignerFName.length == 0)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Ex_US_Entity_Authorized_Signer_First_Name_for_Offshore_Storage_mustnotbeempt}</li>'; 
                                                if($scope.tpaObj.OffStorageAuthSignerLName == null || $scope.tpaObj.OffStorageAuthSignerLName.length == 0)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Ex_US_Entity_Authorized_Signer_Last_Name_for_Offshore_Storage_must_notEmpty}</li>'; 
                                                if($scope.tpaObj.OffStorageAuthSignerTitle == null || $scope.tpaObj.OffStorageAuthSignerTitle.length == 0)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Ex_US_Entity_Authorized_Signer_Title_for_Offshore_Storage_must_not_be_empty}</li>'; 
                                                if($scope.tpaObj.OffStorageAuthSignerEmail == null || $scope.tpaObj.OffStorageAuthSignerEmail.length == 0)
                                                    $scope.errorMsg += '<li>{!$Label.TPA_Ex_US_Entity_Authorized_Signer_Email_for_Offshore_Storage_must_not_be_empty}</li>'; 
                                                else if($scope.tpaObj.OffStorageAuthSignerEmail.length > 0)
                                                {
                                                    if(!$scope.isValidEmail($scope.tpaObj.OffStorageAuthSignerEmail))
                                                    {
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Ex_US_Entity_Authorized_Signer_Email_Format_is_not_correct}</li>';
                                                    }
                                                    else if($scope.tpaObj.OffStorageAuthSignerEmailCon == null || $scope.tpaObj.OffStorageAuthSignerEmailCon.length == 0){
                                                        $scope.errorMsg += '<li>{!$Label.TPA_Please_confirm_the_Ex_US_Entity_Authorized_Signer_s_email_address}</li>'; 
                                                    }
                                                    else if($scope.tpaObj.OffStorageAuthSignerEmailCon.length > 0)
                                                    {
                                                        if(!$scope.isValidEmail($scope.tpaObj.OffStorageAuthSignerEmailCon))
                                                        {
                                                            $scope.errorMsg += '<li>{!$Label.TPA_Confirm_Ex_US_Entity_Authorized_Signer_Email_Format_is_not_correct}</li>';
                                                            $scope.isAuthSignerEmailConfirmError = true;
                                                        }
                                                        else if($scope.tpaObj.OffStorageAuthSignerEmailCon.toLowerCase() != $scope.tpaObj.OffStorageAuthSignerEmail.toLowerCase()) 
                                                        {
                                                            $scope.errorMsg += '<li>{!$Label.TPA_Confirm_Ex_US_Entity_Authorized_Signer_Email_does_not_match_with_Ex_US_Entit}</li>';
                                                        }
                                                    }
                                                }    

                                            
                                            }
    
                                        }
                                        
                                        break;
                                }

                                if($scope.errorMsg.trim().length > 0)
                                {
                                    $scope.isError = true;
                                    $scope.errorMsg = '<ul>' + $scope.errorMsg + '</ul>';
                                    $window.scrollTo(0, 0); //Added by C.P.Pandey under ER-2707
                                    $scope.$log.info('scrollCalled:::');
                                }
                                // Updated by Babita Dadarwal under ER-3723 Start
                                else
                                {
                                    $scope.errorMsg = '';
                                    $scope.isError = false;
                                }
                                // Updated by Babita Dadarwal under ER-3723 End

                                $scope.applyChanges();
                                return $scope.isError;
                            }
                            
                            //****** Validation Events end ******//

                            //**** Angular Utility functions start ****//
                            
                            $scope.popupAlert = function(msg, truePart)
                            {
                                popup(msg, {'animate':true}, function(r)
                                {
                                    if(r && truePart != null)
                                        truePart();
                                });

                                //Added by Supriya under ER-3351 start
                                if(angular.element($('#controllerPage')).scope().mlObj.isDataLocMsgAcknowledged == true)
                                {
                                    $(".aButtons button").html('Acknowledge');
                                }
                                else
                                    $(".aButtons button").html('{!$Label.TPA_OK}');
                                //Added by Supriya under ER-3351 end
                            }

                            //Modified by C.P.Pandey under Issue-6921 start
                            $scope.popupConfirm = function(msg, truePart, falsePart, isYesNo, isTranslationNeeded)  //Updated by Vikram Singh under ER-1940
                            {
                                //Modified by C.P.Pandey under ER-1940 start
                                if(isTranslationNeeded == null)
                                    isTranslationNeeded = true;
                                if(isYesNo)
                                {
                                    popup(msg, {'verify':true, 'animate':true}, function(r)
                                    {
                                        if(r)
                                            truePart();
                                        else
                                            falsePart();
                                        haltScreen = false;
                                        $scope.applyChanges();
                                    });
                                    $.each($(".aButtons button"), function(k, v) {
                                        if($(v).text() == 'Yes' && isTranslationNeeded)
                                            $(v).html('{!$Label.TPA_yes}');
                                        else if($(v).text() == 'No' && isTranslationNeeded)
                                            $(v).html('{!$Label.TPA_No}');
                                    });
                                }
                                else
                                {
                                    popup(msg, {'confirm':true, 'animate':true}, function(r)
                                    {
                                        if(r)
                                            truePart();
                                        else
                                            falsePart();
                                        haltScreen = false;
                                        $scope.applyChanges();
                                    });
                                    $.each($(".aButtons button"), function(k, v) {
                                        if($(v).text() == 'Ok' && isTranslationNeeded)
                                            $(v).html('{!$Label.TPA_OK}');
                                        else if($(v).text() == 'Cancel' && isTranslationNeeded)
                                            $(v).html('{!$Label.TPA_Cancel}');
                                    });
                                }
                                //Modified by C.P.Pandey under ER-1940 end
                            }
                            //Modified by C.P.Pandey under Issue-6921 end
                            //****** Utility Events End ******//

                            //$scope.loadForm();

                            $scope.openCloneUsesPopup = function(){
                                var addPopupInstance = $modal.open({
                                    templateUrl : 'cloneUsePopup.html',
                                    controller : cloneUsePopupCtrl,
                                    backdrop : 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve : {
                                        dataFromParent : function() {
                                            if($scope.modalParameters == null)
                                                $scope.modalParameters = {};
                                            $scope.modalParameters.mapSelectedCategoryUse = {};
                                            $scope.modalParameters.isClonable = false;
                                            $scope.modalParameters.SelectedDescMapCloneUse = angular.copy($scope.SelectedDescMap);
                                            $scope.modalParameters.saveDataForCloneUse =  $scope.saveDataForCloneUse;
                                            $scope.modalParameters.clonedPurposeID =  $scope.clonedPurposeID;
                                            $scope.modalParameters.clonedPurposeCatID =  $scope.clonedPurposeCatID;
                                            $scope.modalParameters.Labels = {
                                                sourceUseCategoryCaption : '{!$Label.TPA_Source_Clone_Use_Category_Desc}',
                                                destinationUseCatCaption : '{!$Label.TPA_Destination_Use_Category_Desc}',
                                                cloneUseTableCaption : '{!$Label.TPA_Clone_Use_Table_Caption}',
                                                cloneButton : '{!$Label.TPA_Clone}',
                                                cancelButton : '{!$Label.TPA_Cancel}',
                                                useDefinitionLinkDesc : '{!$Label.TPA_For_more_information_about_this_Use}',
                                                useDefLink : '{!$Label.TPA_Click_Here}',
                                                useCategoryName : '{!$Label.TPA_Category_Name}',
                                                useName : '{!$Label.TPA_Use_Name}',
                                                offeringCategoryName : '{!$Label.TPA_Offering_Category_Name}',
                                                offeringsName : '{!$Label.TPA_Offerings}',
                                                region : '{!$Label.TPA_Region}',
                                                selectAll : '{!$Label.TPA_Select_all_that_apply}'.substr(0,10),
                                                useLabel : '{!$Label.TPA_Use_Label}',
                                                useCategoryLabel : '{!$Label.TPA_Use_Category_Label}'
                                            }
                                            $scope.modalParameters.countOfUses = 0;
                                            $scope.modalParameters.mapSelectedCategoryUse['--None--'] = [];
                                            $scope.modalParameters.mapSelectedCategoryUse['--None--'].push('--None--');
                                            $scope.modalParameters.applyChanges = $scope.applyChanges;
                                            $scope.modalParameters.selectedLanguageField = $scope.mlObj.selectedLanguageField;
                                            angular.forEach($scope.modalParameters.SelectedDescMapCloneUse, function(value, key){
                                                if(!$scope.modalParameters.mapSelectedCategoryUse.hasOwnProperty(value.translatedCategoryName))
                                                    $scope.modalParameters.mapSelectedCategoryUse[value.translatedCategoryName] = ['--None--'];
                                                if(!$scope.modalParameters.mapSelectedCategoryUse[value.translatedCategoryName].includes(value.translatedPurposeName) && value.purposeName != 'Other')
                                                    $scope.modalParameters.mapSelectedCategoryUse[value.translatedCategoryName].push(value.translatedPurposeName);
                                            })
                                            for(let data in $scope.modalParameters.mapSelectedCategoryUse){
                                                if(data != '--None--' && $scope.modalParameters.mapSelectedCategoryUse[data] != null && $scope.modalParameters.mapSelectedCategoryUse[data].length == 1)
                                                    delete $scope.modalParameters.mapSelectedCategoryUse[data];
                                            }
                                            $scope.modalParameters.useCatListDropDownMap = new Map();
                                            $scope.modalParameters.useListDropDownMap = new Map();
                                            $scope.modalParameters.sourceUseList = [];
                                            $scope.modalParameters.tpaPurposeCategoryList = $scope.proposalTreeDataRawSource.tpaPurposeCategoryList;
                                            $scope.modalParameters.secondarypurpose = $scope.proposalTreeDataRawSource.secondarypurpose;
                                            $scope.modalParameters.mapPurposeAndDesc = $scope.proposalTreeDataRawSource.mapPurposeAndDesc;
                                            $scope.modalParameters.useCatListDropDownMap.set('-1', {id: '-1', name: '--None--'});
                                            for(var i=0; i<$scope.modalParameters.tpaPurposeCategoryList.length; i++){
                                                $scope.modalParameters.useCatListDropDownMap.set($scope.modalParameters.tpaPurposeCategoryList[i].Id, {
                                                    id: $scope.modalParameters.tpaPurposeCategoryList[i].Id, 
                                                    name: $scope.modalParameters.tpaPurposeCategoryList[i][$scope.modalParameters.selectedLanguageField]
                                                });
                                            }
                                            
                                            $scope.modalParameters.useListDropDownMap.set('-1:-1', {id: '-1', name: '--None--', catId: '-1', desId: '-1'});
                                            for(var i = 0; i < $scope.modalParameters.secondarypurpose.length; i++) {
                                                var purposedescription = $scope.modalParameters.secondarypurpose[i];
                                                if(purposedescription != null && purposedescription.Purpose__r != null && purposedescription.Purpose__r.Is_Active__c) {
                                                    $scope.modalParameters.useListDropDownMap.set(purposedescription.TPA_Purpose_Category__r.Id + ':'+ purposedescription.Purpose__r.Id, {
                                                        id: purposedescription.Purpose__r.Id, 
                                                        name: purposedescription.Purpose__r[$scope.modalParameters.selectedLanguageField], 
                                                        catId: purposedescription.TPA_Purpose_Category__r.Id,
                                                        desId:  purposedescription.Id
                                                    });
                                                }
                                            }
                                            $scope.modalParameters.useCatListDropDown = Array.from($scope.modalParameters.useCatListDropDownMap.values());
                                            $scope.modalParameters.useListDropDown = Array.from($scope.modalParameters.useListDropDownMap.values());
                                            return $scope.modalParameters;
                                        }
                                    }
                                });
                                    
                            }
                             
                            var cloneUsePopupCtrl = function ($scope, $modalInstance, dataFromParent){
                                $scope.dataFromParent = dataFromParent;
                                
                                $scope.updateUseListSource = function(){
                                    if($scope.dataFromParent.selectedUseList != null)
                                        $scope.dataFromParent.selectedCategorySource = Object.keys($scope.dataFromParent.mapSelectedCategoryUse).filter((key) => $scope.dataFromParent.mapSelectedCategoryUse[key] == $scope.dataFromParent.selectedUseList)[0];
                                    	$scope.dataFromParent.selectedUse = $scope.dataFromParent.selectedUseList[0];
                                    $scope.dataFromParent.UseList = {};
                                    $scope.isUseClonable();
                                }
                                
                                $scope.close = function(){
                                    $scope.dataFromParent.selectedUseClone = '';
                                    $scope.dataFromParent.selectedCategoryClone = '';
                                    $scope.dataFromParent.UseList = {};
                                    $scope.dataFromParent.applyChanges();
                                    $modalInstance.close();
                                }
                                $scope.searchClonedUse = function(){
                                    $scope.dataFromParent.selectedUseClone = $scope.dataFromParent.useListDropDown[0];
                                    $scope.UseDefinitionLink = null;
                                }
                                $scope.useFilter = function(categoryId, selectedUse){
                                    return function(data){
                                        return ((categoryId == data.catId || data.catId == '-1')  && $scope.dataFromParent.selectedCategoryClone != null && (($scope.dataFromParent.selectedCategorySource == $scope.dataFromParent.selectedCategoryClone.name && selectedUse != data.name) || ($scope.dataFromParent.selectedCategorySource != $scope.dataFromParent.selectedCategoryClone.name)));
                                    }
                                }
                                $scope.useDeflink = function(){
                                    for(let name in $scope.dataFromParent.mapPurposeAndDesc){
                                        let masterPurposeRecord = $scope.dataFromParent.mapPurposeAndDesc[name];
                                        if(masterPurposeRecord[$scope.dataFromParent.selectedLanguageField] == dataFromParent.selectedUseClone.name){
                                            $scope.UseDefinitionLink = masterPurposeRecord.IMS_TPA_Purpose_Description__r.records[0].Use_Definition_Page__c;
                                        }
                                    }
                                    $scope.isUseClonable();
                                }
                                $scope.hasValue = function(property){
                                    return (property != undefined && property != null && property != '' && property != '--None--')
                                }
                                $scope.isUseClonable = function(){
                                    if(($scope.dataFromParent.countOfUses > 0)  &&
                                       $scope.hasValue($scope.dataFromParent.selectedUseClone) &&
                                       $scope.hasValue($scope.dataFromParent.selectedUseClone.name) &&
                                       $scope.hasValue($scope.dataFromParent.selectedUse))
                                        $scope.dataFromParent.isClonable = true;
                                    else 
                                        $scope.dataFromParent.isClonable = false;
                                }
                                $scope.updateTable = function(){
                                    $scope.dataFromParent.UseList = {}
                                    $scope.dataFromParent.countOfUses = 0;
                                    for (var key in $scope.dataFromParent.SelectedDescMapCloneUse) {
                                        if ($scope.dataFromParent.SelectedDescMapCloneUse[key] != null &&
                                        $scope.dataFromParent.SelectedDescMapCloneUse[key].translatedPurposeName != null &&
                                        $scope.dataFromParent.SelectedDescMapCloneUse[key].translatedCategoryName != null &&
                                        $scope.dataFromParent.SelectedDescMapCloneUse[key].translatedPurposeName == $scope.dataFromParent.selectedUse &&
                                        $scope.dataFromParent.SelectedDescMapCloneUse[key].translatedCategoryName ==  $scope.dataFromParent.selectedCategorySource ) {
                                            $scope.dataFromParent.UseList[key] = $scope.dataFromParent.SelectedDescMapCloneUse[key];
                                            $scope.dataFromParent.UseList[key].isReqClone = true;
                                            $scope.dataFromParent.countOfUses++;
                                        }
                                    }
                                    $scope.isUseClonable();
                                }
                                $scope.updateInCheckBox = function(useFlag){
                                    if(useFlag == false)
                                        $scope.dataFromParent.countOfUses--;
                                    else
                                        $scope.dataFromParent.countOfUses++;
                                    
                                    $scope.isUseClonable();
                                }
                                $scope.openWindow = function(useName, useDefinitionPage)
                                {
                                    var left = (screen.width/2)-(700/2);
                                    var top = (screen.height/2)-(500/2);
                                    window.open('/imshealthPortal/VFP_TPA_Editor_View'+ '?id='+useDefinitionPage+'&contentFieldApi=' + $scope.dataFromParent.selectedLanguageField,'1396949413930', 'width = 700,height=500,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=' + left + ',top=' + top);
                                    return false;
                                }
                                $scope.cloneUse = function(){
                                    $scope.clonedPurposeID = $scope.dataFromParent.selectedUseClone.id;
                                    $scope.clonedPurposeCatID = $scope.dataFromParent.selectedCategoryClone.id;
                                    
                                    $scope.dataFromParent.clonedPurposeID =  $scope.dataFromParent.selectedUseClone.id;
                                    $scope.dataFromParent.clonedPurposeCatID = $scope.dataFromParent.selectedCategoryClone.id;
                                   
                                    $scope.dataFromParent.SelectedDescMapCloneUse = $scope.dataFromParent.UseList;
                                    
                                    $scope.dataFromParent.saveDataForCloneUse($scope.dataFromParent.selectedUseClone.id,$scope.dataFromParent.selectedCategoryClone.id,$scope.dataFromParent.UseList);
                                    $scope.close();
                                }
                            }
                            cloneUsePopupCtrl.$inject = ['$scope', '$modalInstance', 'dataFromParent'];

                            $scope.openAddressSelectionPopup =  function() {
                                //$scope.$log.info(IN openAddressSelectionPopup);
                                var addPopupInstance = $modal.open({
                                    templateUrl : 'clientContactAddressMapping.html',
                                    controller : addSelectionPopupCtrl,
                                    backdrop : 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve : {
                                        dataFromParent : function() {
                                            if($scope.modalParameters == null) {
                                                $scope.modalParameters = {};
                                            }
                                            $scope.modalParameters.contactAddressCrosswalkList = $scope.contactAddressCrosswalkList;
                                            $scope.modalParameters.lastSelectedAddressRcrd = $scope.lastSelectedAddressRcrd;
                                            $scope.modalParameters.setClientAddress = $scope.setClientAddress;
                                            $scope.modalParameters.setClientAddressTerritory = $scope.setClientAddressTerritory;
                                            $scope.modalParameters.goToHome = $scope.goToHome;
                                            return $scope.modalParameters;
                                        }
                                    }
                                });
                            }
                            
                            var addSelectionPopupCtrl = function($scope, $modalInstance, dataFromParent) { 
                                $scope.dataFromParent = dataFromParent;
                                $scope.dataFromParent.selectedJunctionRecord = null;
                                if($scope.dataFromParent.lastSelectedAddressRcrd != null && $scope.dataFromParent.lastSelectedAddressRcrd.length > 0) {
                                    $scope.dataFromParent.selectedJunctionRecord =  $scope.dataFromParent.lastSelectedAddressRcrd[0].Address__c;
                                    console.log('$scope.dataFromParent.selectedJunctionRecord : ' + $scope.dataFromParent.selectedJunctionRecord);
                                }
                                
                                $scope.ok =  function() {
                                    if($scope.dataFromParent.selectedJunctionRecord == null) {
                                        $scope.dataFromParent.goToHome();
                                    } else {
                                        $.each($scope.dataFromParent.contactAddressCrosswalkList,function(k,v) {
                                            if(v.Address__c == $scope.dataFromParent.selectedJunctionRecord) {
                                                $scope.dataFromParent.setClientAddressTerritory(v.Address__r.Region_Territory__c);
                                                showLoading();
                                                Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.CNT_TPA_RequestSubmissionForm.loadTPProcessorDetils}',v.Address__r.Region_Territory__c, function(result, event){
                                                    if(event.type == 'exception')
                                                    {
                                                        hideLoading();
                                                        console.log('In loadTPProcessorDetils Error:'+event.message);
                                                        return false;
                                                    }
                                                    else
                                                    {
                                                        angularScope.tpProcessorAddressID = result;
                                                        console.log('tpProcessorAddressID:Multi'+angularScope.tpProcessorAddressID);
                                                        angularScope.applyChanges();
                                    					angularScope.updateProgress();
                                                        hideLoading();
                                                    }
                                                },{escape: true});
                                            }
                                                
                                               
                                        });
                                        $scope.dataFromParent.setClientAddress($scope.dataFromParent.selectedJunctionRecord);
                                        $modalInstance.close();
                                    }
                                }
                            }
                            
                            addSelectionPopupCtrl.$inject = ['$scope', '$modalInstance', 'dataFromParent'];
                            
                            if($scope.viewModeStatus == 'NV') {
                                if($scope.contactAddressCrosswalkList.length != 1) {
                                    console.log('0 or more that 1 junction records.');
                                    $scope.openAddressSelectionPopup(); 
                                } else {
                                    console.log('only 1 junction records.');
                                    $scope.clientAddressId = $scope.contactAddressCrosswalkList[0].Address__r.Id;
                                    $scope.clientaddressTerritory = $scope.contactAddressCrosswalkList[0].Address__r.Region_Territory__c;
                                    console.log('$scope.clientaddressTerritory : ' + $scope.clientaddressTerritory);
                                    
                                }                               
                            }
                            
                            if($scope.viewModeStatus == 'NV' || $scope.viewModeStatus == 'CDV'){
                                var ClientConTerritory = '';
                                if($scope.objTpaRequestToEdit != null){
                                    ClientConTerritory = $scope.objTpaRequestToEdit.Client_Contact_Territory__c;
                                    $scope.clientaddressTerritory = ClientConTerritory;
                                }
                                else if (($scope.objTpaRequestToEdit == null || $scope.objTpaRequestToEdit == undefined) && $scope.contactAddressCrosswalkList != null && $scope.contactAddressCrosswalkList.length == 1){
                                    ClientConTerritory = $scope.contactAddressCrosswalkList[0].Address__r.Region_Territory__c;
                                }
                                console.log('$scope.ClientConTerritory : ' + ClientConTerritory);
                                showLoading();
                                Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.CNT_TPA_RequestSubmissionForm.loadTPProcessorDetils}',ClientConTerritory, function(result, event){
                                        if(event.type == 'exception')
                                        {
                                            hideLoading();
                                            console.log('In loadTPProcessorDetils Error:'+event.message);
                                            return false;
                                        }
                                        else
                                        {
                                            angularScope.tpProcessorAddressID = result;
                                            console.log('tpProcessorAddressID:single'+angularScope.tpProcessorAddressID);
                                            angularScope.applyChanges();
                                            angularScope.updateProgress();
                                            hideLoading();
                                        }
                                    },{escape: true});
                            }

                            $scope.openGlobalBrandingVendorLookUp = function()
                            {
                                var vendorInstance = $modal.open({
                                    templateUrl: 'idGlobalBrandingVendorLookUp.html',
                                    controller: GBVendorLookUpCtrl,
                                    backdrop: 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve: {
                                        dataFromParent: function () {
                                            if($scope.modalParameters == null)
                                                $scope.modalParameters = {};
                                            $scope.modalParameters.applyChanges = $scope.applyChanges;
                                            $scope.modalParameters.populateGBVendorDetails =  $scope.populateGBVendorDetails;
                                            $scope.modalParameters.populateVendorComplianceDetails =  $scope.populateVendorComplianceDetails;
                                            $scope.modalParameters.vendorNotListed = $scope.vendorNotListed;
                                            $scope.modalParameters.allCountries = angular.copy($scope.mlObj.allCountries);//Modified by Govind under ER-1940
                                            $scope.modalParameters.isVendorSearchedClicked = false; //Added by Govind under ER-2672
                                            $scope.modalParameters.wordExcludedFromAccountName = angular.copy($scope.wordExcludedFromAccount);//Added by Govind under ER-2180
                                            //*** Added by Govind under ER-1940 Start ***//
                                            $scope.modalParameters.vendorLegalNameLbl = $scope.mlObj.labelsAndButtons.vendorLegalNameLbl;
                                            $scope.modalParameters.vendorSearchCountryLbl = $scope.mlObj.labelsAndButtons.vendorSearchCountryLbl;
                                            $scope.modalParameters.showVendorAccountsBtn = $scope.mlObj.labelsAndButtons.showVendorAccountsBtn;
                                            $scope.modalParameters.vendorContinueBtn = $scope.mlObj.labelsAndButtons.vendorContinueBtn;
                                            $scope.modalParameters.vendorCancelBtn = $scope.mlObj.labelsAndButtons.vendorCancelBtn;
                                            $scope.modalParameters.vendorNotListedNewVendorBtn = $scope.mlObj.labelsAndButtons.vendorNotListedNewVendorBtn;
                                            $scope.modalParameters.vendorSelectOneLbl = $scope.mlObj.labelsAndButtons.vendorSelectOneLbl;
                                            $scope.modalParameters.vendorContactNameLbl = $scope.mlObj.labelsAndButtons.vendorContactNameLbl;
                                            $scope.modalParameters.vendorSelCompBrandNameCountryLbl = $scope.mlObj.labelsAndButtons.vendorSelCompBrandNameCountryLbl;
                                            $scope.modalParameters.vendorCountryLbl = $scope.mlObj.labelsAndButtons.vendorCountryLbl;
                                            $scope.modalParameters.selectedLanguageField = $scope.mlObj.selectedLanguageField;

                                            //*** Added by Govind under ER-1940 End ***//
                                            return $scope.modalParameters;
                                        }
                                    }
                                });
                            }

                            var GBVendorLookUpCtrl = function($scope,$modalInstance,dataFromParent)
                            {
                                $scope.dataFromParent = dataFromParent;
                                $scope.dataFromParent.allVendorsList = [];
                                $scope.dataFromParent.isVendorPresent = false;
                                $scope.dataFromParent.search = $scope.dataFromParent.allCountries[0];
                                $scope.dataFromParent.globalBrandingName = '';

                                $scope.dataFromParent.vendorSelected = null;
                                $scope.dataFromParent.vendorNotPresentMsg = '';
                                $scope.vendorLookupCancel =  function()
                                {
                                    $modalInstance.close();
                                }
                                $scope.continuePopulatingAccount = function()
                                {
                                    $scope.dataFromParent.populateGBVendorDetails($scope.dataFromParent.vendorSelected);
                                    $modalInstance.close();
                                }
                                $scope.notListed = function()
                                {
                                    $scope.dataFromParent.vendorNotListed('GlobalBranding');
                                    $modalInstance.close();
                                }
                                $scope.showAccounts = function()
                                {
                                    $scope.dataFromParent.isVendorSearchedClicked = true; //Added by Govind under ER-2672
                                    var commaSeparatedExcludedWords = $scope.dataFromParent.wordExcludedFromAccountName.toLowerCase().split(',');
                                    var spaceSeparatedAccountName  = $scope.dataFromParent.vendorLegalName.toLowerCase().split(' ');
                                    if($.inArray(spaceSeparatedAccountName[0], commaSeparatedExcludedWords) > -1)
                                        spaceSeparatedAccountName.splice(0,1);
                                    if(spaceSeparatedAccountName != null && spaceSeparatedAccountName.length != 0)
                                    {
                                        if($.inArray(spaceSeparatedAccountName[spaceSeparatedAccountName.length -1], commaSeparatedExcludedWords) > -1)
                                            spaceSeparatedAccountName.splice(spaceSeparatedAccountName.length -1,1);
                                    }
                                    var trimmedAccountName = spaceSeparatedAccountName.join(' ');
                                    var specialCharater = [',','.','^'];
                                    if(trimmedAccountName != null && trimmedAccountName.length != 0)
                                    {
                                        if($.inArray(trimmedAccountName[0], specialCharater) > -1)
                                        {
                                            if(trimmedAccountName.length == 1)
                                                trimmedAccountName = '';
                                            else
                                                trimmedAccountName = trimmedAccountName.substring(1,trimmedAccountName.length);
                                        }
                                    }
                                    if(trimmedAccountName != null && trimmedAccountName.length != 0)
                                    {
                                        if($.inArray(trimmedAccountName[trimmedAccountName.length - 1], specialCharater) > -1)
                                        {
                                            if(trimmedAccountName.length == 1)
                                                trimmedAccountName = '';
                                            else
                                                trimmedAccountName = trimmedAccountName.substring(0,trimmedAccountName.length - 1);
                                        }
                                    }
                                    if(trimmedAccountName == null || trimmedAccountName.length == 0)
                                    {
                                        trimmedAccountName = '@#@#$-';
                                    }
                                    showLoading();
                                    CNT_TPA_RequestSubmissionForm.getAccountOnDomain(JSON.stringify($scope.dataFromParent.search.Default_Value__c),JSON.stringify(trimmedAccountName),function(result, event)//Modified by Govind under ER-1940
                                    {
                                        if(event.status)
                                        {
                                            var tempResult = JSON.stringify(result);
                                            tempResult = tempResult.split('amp;').join('');
                                            tempResult = tempResult.split('&#39;').join('\'');//Added by govind under Issue 8034
                                            $scope.dataFromParent.allVendorsList = JSON.parse(tempResult);
                                            if($scope.dataFromParent.allVendorsList.length == 0)
                                            {
                                                $scope.dataFromParent.isVendorPresent = false;
                                                $scope.dataFromParent.vendorNotPresentMsg = '{!$Label.TPA_The_vendor_legal_name_is_not_found_in_the_country_selected_Please_enter_the}';//Modified by Govind under Issue 8681,Modified by Govind under ER-1940
                                            }
                                            else
                                            {
                                                $scope.dataFromParent.isVendorPresent = true;
                                                $scope.dataFromParent.vendorNotPresentMsg = '';
                                            }
                                        }
                                        hideLoading();
                                        $scope.dataFromParent.applyChanges();
                                    });
                                }
                            }

                            GBVendorLookUpCtrl.$inject = ['$scope', '$modalInstance', 'dataFromParent'];
                        
                            // added by Govind under ER-2138 start
                            $scope.openVendorLookUp = function(vendorList)
                            {
                                var vendorInstance = $modal.open({
                                    templateUrl: 'idVendorLookUp.html',
                                    controller: VendorLookUpCtrl,
                                    backdrop: 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve: {
                                        dataFromParent: function () {
                                            if($scope.modalParameters == null)
                                                $scope.modalParameters = {};
                                            //$scope.modalParameters.globalBrandingName = globalBrandingName ; 
                                            $scope.modalParameters.allVendorsList =  vendorList;  
                                            $scope.modalParameters.applyChanges = $scope.applyChanges;
                                            $scope.modalParameters.populateVendorDetails =  $scope.populateVendorDetails;
                                            $scope.modalParameters.vendorNotListed = $scope.vendorNotListed;
                                            $scope.modalParameters.allCountries = angular.copy($scope.mlObj.allCountries);//Modified by Govind under ER-1940
                                            $scope.modalParameters.isVendorSearchedClicked = false; //Added by Govind under ER-2672
                                            $scope.modalParameters.wordExcludedFromAccountName = angular.copy($scope.wordExcludedFromAccount);//Added by Govind under ER-2180
                                            //*** Added by Govind under ER-1940 Start ***//
                                            $scope.modalParameters.vendorLegalNameLbl = $scope.mlObj.labelsAndButtons.vendorLegalNameLbl;
                                            $scope.modalParameters.vendorSearchCountryLbl = $scope.mlObj.labelsAndButtons.vendorSearchCountryLbl;
                                            $scope.modalParameters.showVendorAccountsBtn = $scope.mlObj.labelsAndButtons.showVendorAccountsBtn;
                                            $scope.modalParameters.vendorContinueBtn = $scope.mlObj.labelsAndButtons.vendorContinueBtn;
                                            $scope.modalParameters.vendorCancelBtn = $scope.mlObj.labelsAndButtons.vendorCancelBtn;
                                            $scope.modalParameters.vendorNotListedNewVendorBtn = $scope.mlObj.labelsAndButtons.vendorNotListedNewVendorBtn;
                                            $scope.modalParameters.vendorSelectOneLbl = $scope.mlObj.labelsAndButtons.vendorSelectOneLbl;
                                            $scope.modalParameters.vendorselectLegalEntityLbl = $scope.mlObj.labelsAndButtons.vendorselectLegalEntityLbl;
                                            $scope.modalParameters.vendorLegalEntityNameLbl = $scope.mlObj.labelsAndButtons.vendorLegalEntityNameLbl;
                                            $scope.modalParameters.vendorAddressLbl = $scope.mlObj.labelsAndButtons.vendorAddressLbl;
                                            $scope.modalParameters.vendorCityLbl = $scope.mlObj.labelsAndButtons.vendorCityLbl;
                                            $scope.modalParameters.vendorStateLbl = $scope.mlObj.labelsAndButtons.vendorStateLbl;
                                            $scope.modalParameters.vendorCountryLbl = $scope.mlObj.labelsAndButtons.vendorCountryLbl;
                                            $scope.modalParameters.selectedLanguageField = $scope.mlObj.selectedLanguageField;

                                            //*** Added by Govind under ER-1940 End ***//
                                            return $scope.modalParameters;
                                        }
                                    }
                                });
                            }

                            var VendorLookUpCtrl = function($scope,$modalInstance,dataFromParent)
                            {
                                $scope.dataFromParent = dataFromParent;
                                //$scope.dataFromParent.allVendorsList = [];
                                //$scope.dataFromParent.isVendorPresent = false;
                                $scope.dataFromParent.search = $scope.dataFromParent.allCountries[0];
                                $scope.dataFromParent.vendorLegalName = '';

                                $scope.dataFromParent.vendorSelected = null;
                                $scope.dataFromParent.vendorNotPresentMsg = '';
                                $scope.vendorLookupCancel =  function()
                                {
                                    $modalInstance.close();
                                }
                                $scope.continuePopulatingAccount = function()
                                {
                                    $scope.dataFromParent.populateVendorDetails($scope.dataFromParent.vendorSelected);
                                    $modalInstance.close();
                                }
                                $scope.notListed = function()
                                {
                                    $scope.dataFromParent.vendorNotListed();
                                    $modalInstance.close();
                                }
                                $scope.showAccounts = function()
                                {
                                    $scope.dataFromParent.isVendorSearchedClicked = true; //Added by Govind under ER-2672
                                    var commaSeparatedExcludedWords = $scope.dataFromParent.wordExcludedFromAccountName.toLowerCase().split(',');
                                    var spaceSeparatedAccountName  = $scope.dataFromParent.vendorLegalName.toLowerCase().split(' ');
                                    if($.inArray(spaceSeparatedAccountName[0], commaSeparatedExcludedWords) > -1)
                                        spaceSeparatedAccountName.splice(0,1);
                                    if(spaceSeparatedAccountName != null && spaceSeparatedAccountName.length != 0)
                                    {
                                        if($.inArray(spaceSeparatedAccountName[spaceSeparatedAccountName.length -1], commaSeparatedExcludedWords) > -1)
                                            spaceSeparatedAccountName.splice(spaceSeparatedAccountName.length -1,1);
                                    }
                                    var trimmedAccountName = spaceSeparatedAccountName.join(' ');
                                    var specialCharater = [',','.','^'];
                                    if(trimmedAccountName != null && trimmedAccountName.length != 0)
                                    {
                                        if($.inArray(trimmedAccountName[0], specialCharater) > -1)
                                        {
                                            if(trimmedAccountName.length == 1)
                                                trimmedAccountName = '';
                                            else
                                                trimmedAccountName = trimmedAccountName.substring(1,trimmedAccountName.length);
                                        }
                                    }
                                    if(trimmedAccountName != null && trimmedAccountName.length != 0)
                                    {
                                        if($.inArray(trimmedAccountName[trimmedAccountName.length - 1], specialCharater) > -1)
                                        {
                                            if(trimmedAccountName.length == 1)
                                                trimmedAccountName = '';
                                            else
                                                trimmedAccountName = trimmedAccountName.substring(0,trimmedAccountName.length - 1);
                                        }
                                    }
                                    if(trimmedAccountName == null || trimmedAccountName.length == 0)
                                    {
                                        trimmedAccountName = '@#@#$-';
                                    }
                                    showLoading();
                                    CNT_TPA_RequestSubmissionForm.getVendorAccount(JSON.stringify($scope.dataFromParent.globalBrandingName),function(result, event)//Modified by Govind under ER-1940
                                    {
                                        if(event.status)
                                        {
                                            var tempResult = JSON.stringify(result);
                                            tempResult = tempResult.split('amp;').join('');
                                            tempResult = tempResult.split('&#39;').join('\'');//Added by govind under Issue 8034
                                            $scope.dataFromParent.allVendorsList = JSON.parse(tempResult);
                                            if($scope.dataFromParent.allVendorsList.length == 0)
                                            {
                                                $scope.dataFromParent.isVendorPresent = false;
                                                $scope.dataFromParent.vendorNotPresentMsg = '{!$Label.TPA_The_vendor_legal_name_is_not_found_in_the_country_selected_Please_enter_the}';//Modified by Govind under Issue 8681,Modified by Govind under ER-1940
                                            }
                                            else
                                            {
                                                $scope.dataFromParent.isVendorPresent = true;
                                                $scope.dataFromParent.vendorNotPresentMsg = '';
                                            }
                                        }
                                        hideLoading();
                                        $scope.dataFromParent.applyChanges();
                                    });
                                }
                            }

                            VendorLookUpCtrl.$inject = ['$scope', '$modalInstance', 'dataFromParent'];
                            //*** added by Govind under ER-2138 End ***//

                            $scope.openExUSLegalEntityLookUp = function(entityTypeVal)
                            {
                                var vendorInstance = $modal.open(
                                {
                                    templateUrl: 'idVendorLookUp1.html',
                                    controller: VendorLookUpCtrl1,
                                    backdrop: 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve:
                                    {
                                        dataFromParent: function ()
                                        {
                                            if($scope.modalParameters == null)
                                                $scope.modalParameters = {};
                                            $scope.modalParameters.applyChanges = $scope.applyChanges;
                                            $scope.modalParameters.populateLegalEntityDetails =  $scope.populateLegalEntityDetails;
                                            $scope.modalParameters.LegalEntityNotListed = $scope.LegalEntityNotListed;
                                            $scope.modalParameters.allCountries = angular.copy($scope.mlObj.allCountries);
                                            $scope.modalParameters.isVendorSearchedClicked = false; 
                                            $scope.modalParameters.wordExcludedFromAccountName = angular.copy($scope.wordExcludedFromAccount);
                                            $scope.modalParameters.entityType = entityTypeVal ;
                                            $scope.modalParameters.vendorLegalNameLbl = 'Please enter the full name of the Ex-U.S. Legal Entity';
                                            $scope.modalParameters.vendorSearchCountryLbl = $scope.mlObj.labelsAndButtons.vendorSearchCountryLbl;
                                            $scope.modalParameters.showVendorAccountsBtn = $scope.mlObj.labelsAndButtons.showVendorAccountsBtn;
                                            $scope.modalParameters.vendorContinueBtn = $scope.mlObj.labelsAndButtons.vendorContinueBtn;
                                            $scope.modalParameters.vendorCancelBtn = $scope.mlObj.labelsAndButtons.vendorCancelBtn;
                                            $scope.modalParameters.vendorNotListedNewVendorBtn = $scope.mlObj.labelsAndButtons.vendorNotListedNewVendorBtn;
                                            $scope.modalParameters.vendorSelectOneLbl = $scope.mlObj.labelsAndButtons.vendorSelectOneLbl;
                                            $scope.modalParameters.vendorContactNameLbl = $scope.mlObj.labelsAndButtons.vendorContactNameLbl;
                                            $scope.modalParameters.vendorAddressLbl = $scope.mlObj.labelsAndButtons.vendorAddressLbl;
                                            $scope.modalParameters.vendorCityLbl = $scope.mlObj.labelsAndButtons.vendorCityLbl;
                                            $scope.modalParameters.vendorStateLbl = $scope.mlObj.labelsAndButtons.vendorStateLbl;
                                            $scope.modalParameters.vendorCountryLbl = $scope.mlObj.labelsAndButtons.vendorCountryLbl;
                                            $scope.modalParameters.selectedLanguageField = $scope.mlObj.selectedLanguageField;

                                            //*** Added by Govind under ER-1940 End ***//
                                            return $scope.modalParameters;
                                        }
                                    }
                                });
                            }
                            var VendorLookUpCtrl1 = function($scope,$modalInstance,dataFromParent)
                            {
                                $scope.dataFromParent = dataFromParent;
                                $scope.dataFromParent.allVendorsList = [];
                                $scope.dataFromParent.isVendorPresent = false;
                                $scope.dataFromParent.search = $scope.dataFromParent.allCountries[0];
                                $scope.dataFromParent.vendorLegalName = '';

                                $scope.dataFromParent.vendorSelected = null;
                                $scope.dataFromParent.vendorNotPresentMsg = '';
                                $scope.vendorLookupCancel =  function()
                                {
                                    $modalInstance.close();
                                }
                                $scope.continuePopulatingAccount = function()
                                {
                                    $scope.dataFromParent.populateLegalEntityDetails($scope.dataFromParent.vendorSelected, $scope.dataFromParent.entityType);
                                    $modalInstance.close();

                                }
                                $scope.notListed = function()
                                {
                                    $scope.dataFromParent.LegalEntityNotListed($scope.dataFromParent.entityType);
                                    $modalInstance.close();
                                }
                                $scope.showAccounts = function()
                                {
                                    $scope.dataFromParent.isVendorSearchedClicked = true; //Added by Govind under ER-2672
                                    var commaSeparatedExcludedWords = $scope.dataFromParent.wordExcludedFromAccountName.toLowerCase().split(',');
                                    var spaceSeparatedAccountName  = $scope.dataFromParent.vendorLegalName.toLowerCase().split(' ');
                                    if($.inArray(spaceSeparatedAccountName[0], commaSeparatedExcludedWords) > -1)
                                            spaceSeparatedAccountName.splice(0,1);
                                    if(spaceSeparatedAccountName != null && spaceSeparatedAccountName.length != 0)
                                    {
                                        if($.inArray(spaceSeparatedAccountName[spaceSeparatedAccountName.length -1], commaSeparatedExcludedWords) > -1)
                                            spaceSeparatedAccountName.splice(spaceSeparatedAccountName.length -1,1);
                                    }
                                    var trimmedAccountName = spaceSeparatedAccountName.join(' ');
                                    var specialCharater = [',','.','^'];
                                    if(trimmedAccountName != null && trimmedAccountName.length != 0)
                                    {
                                        if($.inArray(trimmedAccountName[0], specialCharater) > -1)
                                        {
                                            if(trimmedAccountName.length == 1)
                                                trimmedAccountName = '';
                                            else
                                                trimmedAccountName = trimmedAccountName.substring(1,trimmedAccountName.length);
                                        }
                                    }
                                    if(trimmedAccountName != null && trimmedAccountName.length != 0)
                                    {
                                        if($.inArray(trimmedAccountName[trimmedAccountName.length - 1], specialCharater) > -1)
                                        {
                                            if(trimmedAccountName.length == 1)
                                                trimmedAccountName = '';
                                            else
                                                trimmedAccountName = trimmedAccountName.substring(0,trimmedAccountName.length - 1);
                                        }
                                    }
                                    if(trimmedAccountName == null || trimmedAccountName.length == 0)
                                    {
                                        trimmedAccountName = '@#@#$-';
                                    }
                                    showLoading();
                                    CNT_TPA_RequestSubmissionForm.getAccountOnDomain(JSON.stringify($scope.dataFromParent.search.Default_Value__c),JSON.stringify(trimmedAccountName),function(result, event)//Modified by Govind under ER-1940
                                    {
                                        if(event.status)
                                        {
                                            var tempResult = JSON.stringify(result);
                                            tempResult = tempResult.split('amp;').join('');
                                            tempResult = tempResult.split('&#39;').join('\'');
                                            $scope.dataFromParent.allVendorsList = JSON.parse(tempResult);
                                            if($scope.dataFromParent.allVendorsList.length == 0)
                                            {
                                                $scope.dataFromParent.isVendorPresent = false;
                                                $scope.dataFromParent.vendorNotPresentMsg = '{!$Label.TPA_The_vendor_legal_name_is_not_found_in_the_country_selected_Please_enter_the}';//Modified by Govind under Issue 8681,Modified by Govind under ER-1940
                                            }
                                            else
                                            {
                                                $scope.dataFromParent.isVendorPresent = true;
                                                $scope.dataFromParent.vendorNotPresentMsg = '';
                                            }
                                        }
                                        hideLoading();
                                        $scope.dataFromParent.applyChanges();
                                    });
                                }
                            }
                            VendorLookUpCtrl1.$inject = ['$scope', '$modalInstance', 'dataFromParent'];

                            //Added by Babita Dadarwal under ER-2730 Start
                            $scope.openSelectedUseOffPopup = function (selectedUseOffMap,offeringsRowJson,displayUseColumnJSon, isBulkTPARequest )
                            {
                                var modalInstance = $modal.open( {
                                    templateUrl: 'selctedUseOffPopup.html',
                                    controller: SelectedUseOffModalCtrl,
                                    backdrop: 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve: {
                                        parameters: function ()
                                        {
                                            if($scope.modalOffParameters == null)
                                                $scope.modalOffParameters = {};

                                            $scope.modalOffParameters.Ok = $scope.acceptSelectUseOffPopup;
                                            $scope.modalOffParameters.exportGrid = $scope.exportGrid;

                                            $scope.modalOffParameters.selectedUseMap = selectedUseOffMap;
                                            $scope.modalOffParameters.offeringsRow = offeringsRowJson;
                                            $scope.modalOffParameters.displayUseColumn = displayUseColumnJSon;
                                            $scope.modalOffParameters.isBulkRequest = isBulkTPARequest;

                                            $scope.modalOffParameters.Label1 = '{!$Label.TPA_Please_confirm_the_selected_Use_and_Offerings_combinations_below_are_complet}';
                                            $scope.modalOffParameters.Label2 = '{!$Label.TPA_Selected_Uses_and_Offerings}';
                                            $scope.modalOffParameters.Label3 = '{!$Label.TPA_Category_Name}';
                                            $scope.modalOffParameters.Label4 = '{!$Label.TPA_Use_Name}';
                                            $scope.modalOffParameters.Label5 = '{!$Label.TPA_Offering_Category_Name}';
                                            $scope.modalOffParameters.Label6 = '{!$Label.TPA_Offerings}';
                                            $scope.modalOffParameters.Label7 = '{!$Label.TPA_Region}';
                                            $scope.modalOffParameters.Label8 = '{!$Label.TPA_Go_Back_To_Prior_Screen}';
                                            $scope.modalOffParameters.Label9 = '{!$Label.TPA_Confirm}';
                                            $scope.modalOffParameters.Label10 = '{!$Label.TPA_Export_for_Your_Review_Button}';


                                            $scope.$log.info('selectedUseMap in Open Popup :::: '+ JSON.stringify(selectedUseOffMap));
                                            $scope.$log.info('$scope.modalOffParameters.selectedUseMap in Open Popup :::: '+ JSON.stringify($scope.modalOffParameters.selectedUseMap));

                                            return $scope.modalOffParameters;
                                        }
                                    }
                                });

                                modalInstance.result.then(
                                    function (result)
                                    {
                                        $scope.$log.info('Selected use and Offering notice popup:::'+JSON.stringify(selectedUseOffMap));
                                    },
                                    function () {
                                        $scope.selectedSection = 'RDA'; //Added by Shaik under CR-12675
                                        $scope.$log.info('Modal dismissed at: ' + new Date());
                                    });

                            };


                            var SelectedUseOffModalCtrl = function($scope, $modalInstance, parameters)
                            {
                                $scope.parameters = parameters;

                                $scope.cancel = function ()
                                {
                                    $modalInstance.dismiss('cancel');
                                    $scope.goToNextTab = false;
                                };

                                $scope.Ok = function ()
                                {
                                    $modalInstance.close();
                                    $scope.parameters.Ok();
                                    $scope.goToNextTab = true;
                                };
                                $scope.exportData = function ()
                                {
                                    $scope.parameters.exportGrid($scope.parameters.offeringsRow,$scope.parameters.displayUseColumn);
                                };
                            };

                            SelectedUseOffModalCtrl.$inject = ['$scope', '$modalInstance', 'parameters'];

                            $scope.acceptSelectUseOffPopup = function ()
                            {
                                // Added by Babita Dadarwal under ER-2106 Start
                                $scope.checkIsNotificationRequired();
                            }

                            //Added by Babita Dadarwal under ER-2730 start
                            $scope.scrollToSelectUse = function() {
                                $window.scrollTo(0, 0);
                            }
                            $scope.collapseLabelForUseSec = '{!$Label.TPA_collapseLabelForUseSec}';
                            $scope.collapseLabelForOffSec = '{!$Label.TPA_collapseLabelForOffSec}';
                            $scope.useCollapseLabel = 'Collapse';
                            $scope.offCollapseLabel = 'Collapse';
                            $scope.openCloseTree = function(className,mode){
                                var previuosState = (mode == 'use' ? $scope.useCollapseLabel : $scope.offCollapseLabel); 
                                $('.'+className).each(function(){
                                    var parentClass = $(this).parent().prop('className');
                                    var isOpen = parentClass.includes('active');
                                    if(parentClass != null && ((previuosState == 'Collapse' && !isOpen) || (previuosState == 'UnCollapse' && isOpen))){
                                        $(this).click();
                                    }
                                });
                                if(mode == 'off'){
                                    $('.offPriName').each(function(){
                                        var parentClass = $(this).parent().prop('className');
                                        var isOpen = parentClass.includes('active');
                                        if(parentClass != null && ((previuosState == 'Collapse' && !isOpen) || (previuosState == 'UnCollapse' && isOpen))){
                                            $(this).click();
                                        }
                                    });
                                }
                                if(mode == 'use'){
                                    $scope.useCollapseLabel = $scope.useCollapseLabel == 'Collapse' ? 'UnCollapse' : 'Collapse';
                                }
                                if(mode == 'off'){
                                    $scope.offCollapseLabel = $scope.offCollapseLabel == 'Collapse' ? 'UnCollapse' : 'Collapse';
                                }
                            }
                            
                            //Function to open the offering Notification Popup
                            $scope.openOffNoticePopup = function (clientNote , offeringsNotificationList)
                            {
                                var modalInstance = $modal.open(
                                    {
                                        templateUrl: 'offNotificationPopup.html',
                                        controller: OffNoticeModalInstanceCtrl,
                                        backdrop: 'static',
                                        keyboard: false,
                                        size: 'me',
                                        resolve:
                                        {
                                            parameters: function ()
                                            {
                                                if($scope.modalOffParameters == null)
                                                    $scope.modalOffParameters = {};
                                                $scope.modalOffParameters.isAcknowledged = $scope.isAcknowledged;

                                                if($scope.viewModeStatus == 'CDV' || $scope.viewModeStatus == 'NV')
                                                {
                                                    if($scope.isTPProcessor || $scope.isUSTPProcessor)
                                                        $scope.modalOffParameters.userHeading = '{!JSENCODE($Label.TPA_Client_Vendor_Notification)}';
                                                    else
                                                        $scope.modalOffParameters.userHeading = '{!JSENCODE($Label.TPA_Client_Notification)}';
                                                }
                                                else{
                                                    $scope.modalOffParameters.userHeading = '{!JSENCODE($Label.TPA_Vendor_Notification)}';
                                                }

                                                $scope.modalOffParameters.clientNotification = clientNote;
                                                $scope.modalOffParameters.offeringNotifications = offeringsNotificationList;
                                                $scope.modalOffParameters.offNotificationLabel = '{!JSENCODE($Label.TPA_Offering_Notifications)}';
                                                $scope.modalOffParameters.acknowledgeLabel = '{!JSENCODE($Label.TPA_Acknowledge)}';
                                                $scope.modalOffParameters.cancelLabel = '{!JSENCODE($Label.TPA_Cancel)}';
                                                
                                                $scope.$log.info('Client Note in Open Popup :::: '+ clientNote);
                                                $scope.$log.info('offeringsNotificationList in Open Popup :::: '+ JSON.stringify(offeringsNotificationList));
                                                $scope.$log.info('$scope.modalOffParameters.offeringNotifications in Open Popup :::: '+ JSON.stringify($scope.modalOffParameters.offeringNotifications));
                                                return $scope.modalOffParameters;
                                            }
                                        }
                                    });

                                modalInstance.result.then(
                                    function (result)
                                    {
                                        $scope.$log.info('Offering notice popup');
                                    },
                                    function () {
                                        $scope.$log.info('Modal dismissed at: ' + new Date());
                                    });
                            };
                            //Added by Babita Dadarwal under ER-2106 End
                            
                            //Use Definition Popup for Vendors
                            $scope.openUseDefinitionPopup = function (useDefinitionsList) {
                                var modalInstance = $modal.open( {
                                    templateUrl: 'useDefinitionPopup.html',
                                    controller: UseDefinitionModalInstanceCtrl,
                                    backdrop: 'static',
                                    keyboard: false,
                                    size: 'me',
                                    resolve: {
                                        parameters: function () {
                                            if($scope.modalOffParameters == null)
                                                $scope.modalOffParameters = {};
                                            
                                            $scope.modalOffParameters.useDefinitionList = useDefinitionsList;
                                            $scope.modalOffParameters.openOfferingNotificationPopup = $scope.openOfferingNotificationPopup;
                                            $scope.modalOffParameters.acknowledgeLabel = '{!$Label.TPA_Acknowledge}';
                                            $scope.modalOffParameters.cancelLabel = '{!$Label.TPA_Cancel}';

                                            return $scope.modalOffParameters;
                                        }
                                    }
                                });

                                modalInstance.result.then(
                                    function (result)
                                    {
                                        $scope.$log.info('use definition popup');
                                    },
                                    function () {
                                        $scope.$log.info('Modal dismissed at: ' + new Date());
                                    });
                            };

                            //Use definition popup controller
                            var UseDefinitionModalInstanceCtrl = function($scope, $modalInstance, parameters) {
                                $scope.parameters = parameters;

                                $scope.renderBootstrapTooltip = function()
                                {
                                    applyBootstrapTooltip('right', '.rightTooltip');
                                    applyBootstrapTooltip('left', '.leftTooltip');
                                    applyBootstrapTooltip('bottom', '.bottomTooltip');
                                    applyBootstrapTooltip('top', '.topTooltip');
                                }

                                $scope.cancel = function ()
                                {
                                    $modalInstance.dismiss('cancel');
                                };

                                $scope.acknowledge = function ()
                                {
                                    $modalInstance.close();
                                    $scope.parameters.openOfferingNotificationPopup();
                                };
                            };

                            UseDefinitionModalInstanceCtrl.$inject = ['$scope', '$modalInstance', 'parameters'];
                          
                            //****** C.P.Pandey under ER-1954 template events end ******//
                            $scope.$log.info('viewModeStatus::::'+$scope.viewModeStatus+'----isTPProcessor::::'+$scope.isTPProcessor+'----isUSTPProcessor::::'+$scope.isUSTPProcessor+'----requestType::::'+$scope.requestType+'----isVendorPartVisible::::'+$scope.isVendorPartVisible);
                            $scope.$log.info('#### IsLangOverride: '+$scope.mlObj.isLangOverride+', isVendorLangLocked: '+$scope.mlObj.isVendorLangLocked+', IsShowVendorPrivacyPolicyBoard: '+$scope.IsShowVendorPrivacyPolicyBoard+', isLastSelectedLanguageSet: '+{!isLastSelectedLanguageSet});
                        }]);
                    <!-- Page Controller End -->

                    //****** C.P.Pandey under ER-1954 to open popup window with provided template Start ******//
                   
                    //****** C.P.Pandey under ER-1954 to open popup window with provided template End ******//

                    //Added by Babita dadarwal under ER-2106 Start
                    //Function to open off notice popup window with provided template
                    var OffNoticeModalInstanceCtrl = function($scope, $modalInstance, parameters) {
                        $scope.parameters = parameters;

                        $scope.renderBootstrapTooltip = function()
                        {
                            applyBootstrapTooltip('right', '.rightTooltip');
                            applyBootstrapTooltip('left', '.leftTooltip');
                            applyBootstrapTooltip('bottom', '.bottomTooltip');
                            applyBootstrapTooltip('top', '.topTooltip');
                        }

                        $scope.cancel = function ()
                        {
                            $modalInstance.dismiss('cancel');
                        };

                        $scope.acknowledge = function ()
                        {
                            $modalInstance.close();
                            $scope.parameters.isAcknowledged();
                        };
                    };

                    OffNoticeModalInstanceCtrl.$inject = ['$scope', '$modalInstance', 'parameters'];

                    //*** function to sort Json Key-Value Pair Object Start***//
                    function sortJsonKeyValuePair(inputObject)
                    {
                        var arr = [];
                        var outputObject = {};

                        for (var key in inputObject)
                        {
                            if (inputObject.hasOwnProperty(key)) {
                                arr.push(key);
                            }
                        }

                        if(arr != null && arr.length > 0)
                        {
                            arr = arr.sort();
                            for(var k = 0; k < arr.length; k++)
                            {
                                outputObject[arr[k]] = inputObject[arr[k]];
                            }
                        }
                        return outputObject;
                    }
                    //*** function to sort Json Key-Value Pair Object End***//

                    //*** Tree View Script Start ***//
                    function treeViewSetup()
                    {
                        $( '.tv li' ).each( function() {
                            if( $( this ).children( 'ul' ).length > 0 ) {
                                $( this ).addClass( 'parent' );
                            }
                        });

                        $( '.tv li.parent > a' ).unbind( "click" ).click( function( )
                        {
                            $( this ).parent().toggleClass( 'active' );
                            $( this ).parent().children( 'ul' ).animate({
                                height: 'toggle'
                            }, "slow");
                            //toggle( "slow" );
                        });
                        //$('.assets > ul > li > ul > li:last-child > a').css('float', 'left');
                    }

                    //*** Tree View Script End ***//

                    var childWindow;
                    var winClosed;

                    //*** function disables parent window when child window opens Start ***//
                    function parent_disable()
                    {
                        if(childWindow != null && !childWindow.closed)
                        {
                            childWindow.focus();
                            return false;
                        }
                        return true;
                    }
                    //*** function disables parent window when child window opens End ***//

                    //*** function executes when page and DOM loads completely ***//
                    var amalistValuesList = sortJsonKeyValuePair({!AMAlistValuesData});
                    var amaPrescLvlList = sortJsonKeyValuePair({!AmaPrescLvlData});
                    var UseandCategoryMap = sortJsonKeyValuePair({!UsesWithCategoryMap});
                


                    var imsSoftList = {!ImsSoftwareData};

                    var isPermanentDown = {!isTPAPermanentDown};
                    var isRestrictedUser = {!isRestrictedUser};
                    var portalDownMessage = '{!Message}';
                    
                    $(document).ready(function() {
                        if('{!currentUserProfileName}' == 'TPA Vendor Community User') {
                            var footerbar = document.getElementsByClassName("zen-pageFooter");
                            if(footerbar != null && footerbar.length > 0) {
                                footerbar[0].classList.add("hideGlobalHeader");
                            }
                        }
                        if(isPermanentDown) {
                            $('.customPopupFooter .aButtons').css("display","none");
                            $('#backWhiteOverlay').css("display", "");
                            $('#pageBody').keydown(function(objEvent) {
                                if (objEvent.keyCode == 9) {  //tab pressed
                                    objEvent.preventDefault(); // stops its action
                                }
                                if (objEvent.keyCode == 13) {  //enter pressed
                                    objEvent.preventDefault(); // stops its action
                                }
                            });
                        }
						
                        if(angularScope.objTpaRequestToEdit != null) {
                            let lastId = '';
                            if(angularScope.viewModeStatus == 'VDV'){
                                loadFormForVendor(lastId,null);
                            }
                            else{
                                showLoading();
                                CNT_TPA_RequestSubmissionForm.loadUsesAndAssets(angularScope.objTpaRequestToEdit.Id, null, '', 'Client', function(result, event) {
                                angularScope.$log.warn( result);

                                if(event.type == 'exception')
                                {
                                    hideLoading();
                                    console.log('In loadUsesAndAssets Error1:');
                                    angularScope.$log.info('In loadUsesAndAssets Error: ' + event.message);
                                    return false;
                                }
                                else {
                                    console.log('In loadUsesAndAssets success1:');
                                    
                                    angularScope.$log.info('In loadUsesAndAssets succes: ');
                                    angularScope.objLoadUsesAndAssets = result;
                                   // angularScope.loadExistingTPARequestData();
                                    if(angularScope.viewModeStatus != 'VDV'){
                                        angularScope.loadExistingTPARequestData();
                                    }else{
                                        angularScope.loadExistingTPARequestDataForVendor();
                                    }
                                    angularScope.applyChanges();
                                    angularScope.updateProgress();
                                    hideLoading();
                                }
                            },{escape : false});

                            }
                            
                            
                        } else {
                            angularScope.loadForm();
                        }
                        
                        $('#countryMultiSelect').select2({placeholder: "Select Country", width: '50%', closeOnSelect:false});
	                    $('#offeringCateMultiSelect').select2({placeholder: "Select Offering Category", width: '50%', closeOnSelect:false});

                        var countriesList = {!Countries}; 
                        $.each(countriesList,function(k,v){
                            if(k != null )
                                $('#countryMultiSelect').append($("<option></option>").attr("value",v.Default_Value__c).text(v.Default_Value__c));
                        });
                        let offeringCategoryMap = new Map();  
                        // if(angularScope.tpaObj.isBulkRequest == 'true'){
                        // $.each(angularScope.offeringsRow,function(k,v){
                        //     if(k != null && !offeringCategoryMap.has(v.offCat) ){
                        //         offeringCategoryMap.set(v.offCat,v.primOffId);
                        //         $('#offeringCateMultiSelect').append($("<option></option>").attr("value",v.offCat).text(v.offCat));
                        //     }
                        // });}
                        loadDates();
                        angularScope.applyChanges();
                    });
                    
                    function loadFormForVendor(lastId,PreOrNext) {
                        showLoading();
                        CNT_TPA_RequestSubmissionForm.loadUsesAndAssets(angularScope.objTpaRequestToEdit.Id, lastId, PreOrNext, 'Vendor', function(result, event) {
                            angularScope.$log.warn( result);

                            if(event.type == 'exception') {
                                hideLoading();
                                console.log('In loadUsesAndAssets Error1:');
                                angularScope.$log.info('In loadUsesAndAssets Error: ' + event.message);
                                return false;
                            } else {
                                console.log('In loadUsesAndAssets success1:');
                                if(angularScope.noOfRecords < 100){
                                    angularScope.currentDataRange = 0 + '-' + angularScope.noOfRecords;
                                }
                                angularScope.$log.info('In loadUsesAndAssets succes: ');
                                angularScope.objLoadUsesAndAssets = result;
                                angularScope.objLoadUsesAndAssetsLastId = angularScope.objLoadUsesAndAssets.existedTpaPurposes[angularScope.objLoadUsesAndAssets.existedTpaPurposes.length - 1].Id;
                                angularScope.loadExistingTPARequestDataForVendor();
                                angularScope.sortedDescMap = Object.entries(angularScope.SelectedDescMap).map(([key, value]) => ({...value, key: key}))
                                angularScope.mlObj.sortResults(angularScope.sortedDescMap, 'translatedCategoryName', true);
                                angularScope.applyChanges();
                                angularScope.updateProgress();
                                hideLoading();
                            }
                        },{escape : false});
                    }
                    //*** function to load JQuery Calendar ***//
                    function loadDates()
                    {
                      //  $scope.$log.info('here');
                        $(".datepicker").datepicker({showOn: "button", buttonImage: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAALdQTFRFMzMyAAAAMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMy////j2KaIAAAADt0Uk5TAAAEgzuRhtCH6aaF09KLFnt66xoGAwLsBw8Mfnj3GDiBNGyCNW19d/YOHw118hlDmj8UAfAuEBuv9eqZZ685AAAAAWJLR0Q8p2phzwAAAAlwSFlzAAAASAAAAEgARslrPgAAALxJREFUGNM9jIcOgkAQBUcseLZDVzwrKtgL9nr//18qqC+ZvGSy+8Ahm+WHA7l8wXWLxZRCPocqlSvVWq36oVIuKZTGq0P9g4dWNISm33J832n5TaSB0bQ7bbrdpLTBCD3bZzCgb3vIWwQMR2PCkPFoSJCKaMJ0yiRKhTCzcxYL5naWvGiWqzUirFfL76hnN2y3bKyXXMTs9geiiMN+R2xQR06Zb04cFefLNb4FWkQHt/h6OXN/PM0/z8f9BT8gFJGascv+AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTA4LTA1VDA1OjMwOjQ2LTA0OjAwb0yWxAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0wOC0wNVQwNTozMDo0Ni0wNDowMB4RLngAAAAASUVORK5CYII=", buttonImageOnly: true});
                        $(".datepicker").datepicker( "option", "dateFormat", 'mm/dd/yy' );

                        $(".datepicker").datepicker("option","changeYear", true);
                        $(".datepicker").datepicker("option","changeMonth", true);
                        $(".datepicker").datepicker("option","buttonText","{!$Label.TPA_click_here_to_open_calendar}");
                        $( ".datepicker" ).datepicker( "option", $.datepicker.regional[angularScope.mlObj.selectedLanguageCode]); //Multilanguage calendar
                        //*** Added by Govind under ER-2953 Start ***//
                        $( "#dataPeriodStartDate").datepicker( "option", "yearRange", "1999:+0" ); // Modidifed by Neha bansal under CR-12300
                        $( "#dataPeriodEndDate").datepicker( "option", "yearRange", "2004:2045" );
                        var minDatePeriodDate = new Date(2004, 00, 01);  // Added by Neha bansal under CR-12300
                        var mindataPeriodStartDate = new Date(1999, 00, 01);  // Modified by Neha bansal under CR-12300
                        $("#dataPeriodStartDate").datepicker("option","minDate", mindataPeriodStartDate); // Modified by Neha bansal under CR-12300
                        $("#dataPeriodEndDate").datepicker("option","minDate", minDatePeriodDate);

                        //*** Added by Govind under ER-2953 End ***//
                        var dateObject = new Date();
                        var minDate = new Date(dateObject);
                        if ($(".datepicker").val() !== undefined || $(".datepicker").val().length == 0)
                        {
                            $("#dataAccessStartDate").datepicker("setDate", dateObject);
                            minDate.setDate(minDate.getDate()+365);
                            minDate.setDate(minDate.getDate()-364);
                        }
                        //Modified by C.P.Pandey under Issue-7163 start
                        if(angularScope.requestType != 'view' && angularScope.requestType != 'edit' &&  angularScope.requestType != 'clone' && angularScope.requestType != 'renew')
                        {
                            $("#dataAccessStartDate").datepicker("option","minDate", 0);
                            $("#dataAccessEndDate").datepicker("option","minDate", minDate);
                        }
                        //Modified by C.P.Pandey under Issue-7163 end
                        var maxDate = new Date(dateObject);
                        maxDate.setFullYear(maxDate.getFullYear() + 1);
                        maxDate.setDate(maxDate.getDate()-1);
                        if(angularScope.requestType != 'view')
                            $("#dataAccessEndDate").datepicker("option","maxDate", maxDate);
                        $("#dataAccessEndDate").change();
                        $("#dataAccessEndDate").datepicker("refresh");
                        //*** added by govind Addendum to set the maximum data period start date user can select start ***//
                        var dataPeriodStartDate = new Date();
                        dataPeriodStartDate.setDate(dataPeriodStartDate.getDate()-1);
                        if(angularScope.requestType != 'view')
                            $("#dataPeriodStartDate").datepicker("option","maxDate", dataPeriodStartDate);
                        //*** added by govind Addendum to set the maximum data period start date user can select End ***//
                        if(angularScope.objTpaRequestToEdit != null && !angularScope.isObjectEmpty(angularScope.objTpaRequestToEdit)) //Modified by C.P.Pandey under Issue-7282
                        {
                            //Modified by C.P.Pandey under Issue-7222 start
                            var dateOnlyDASD = angularScope.objTpaRequestToEdit.Data_Access_Start_Date__c;
                            dateOnlyDASD = dateOnlyDASD.split('-');

                            var endDate = null;// Added by Govind under ER-1736
                            var dateDiff = null;// Added by Govind under ER-1736

                            //*** Modified by Sunny Bansal under CR-6373 and Issue-07482 starts ***//
                            if(dateOnlyDASD.length == 3) {
                                $('#dataAccessStartDate').datepicker("setDate", new Date(dateOnlyDASD[0],dateOnlyDASD[1]-1,dateOnlyDASD[2]));
                                $("#dataAccessStartDate").change();
                                $("#dataAccessStartDate").datepicker("refresh");
                            }

                            //*** Added By Govind under CR 8415 Start ***//
                            if(angularScope.requestType == 'renew' )
                            {
                                var dateObject = new Date();
                                var minDate = new Date(dateObject);
                                $('#dataAccessStartDate').datepicker("setDate", minDate);
                                $("#dataAccessStartDate").change();
                                $("#dataAccessStartDate").datepicker("refresh");
                            }

                            //*** Added By Govind under CR-2459 Start ***//
                            if((angularScope.requestType == 'edit' || angularScope.requestType == 'clone') && (new Date() > new Date(dateOnlyDASD[0],dateOnlyDASD[1]-1,dateOnlyDASD[2]) || $('#dataAccessStartDate').datepicker('getDate') > new Date())) //Modified by C.P.Pandey under ER-3485
                            {
                                var dateObject = new Date();
                                var minDate = new Date(dateObject);
                                //Modified by C.P.Pandey under ER-3485 start
                                if(new Date() > new Date(dateOnlyDASD[0],dateOnlyDASD[1]-1,dateOnlyDASD[2]))
                                {
                                    $('#dataAccessStartDate').datepicker("setDate", minDate);
                                    $("#dataAccessStartDate").change(); //added by neha under ER-2975
                                }
                                //Modified by C.P.Pandey under ER-3485 end
                                $('#dataAccessStartDate').datepicker("option","minDate",minDate );
                            }
                            //*** Added By Govind under CR-2459 End ***//

                            //*** Modified by Sunny Bansal under CR-6373 and Issue-07482 ends ***//
                            if(angularScope.objTpaRequestToEdit.Data_Access_End_Date__c != null)
                            {
                                var dateOnlyDAED = angularScope.objTpaRequestToEdit.Data_Access_End_Date__c;
                                dateOnlyDAED = dateOnlyDAED.split('-');
                                //*** Modified by Govind under ER-1736 Start ***//
                                endDate = new Date(dateOnlyDAED[0],dateOnlyDAED[1]-1,dateOnlyDAED[2]);

                                //*** Modified by Govind under Issue 8334 Start ***//
                                if(angularScope.requestType == 'renew') {
                                    dateDiff = angularScope.findDateDiff(endDate);
                                    if(dateDiff > 0)
                                    {
                                        endDate.setFullYear(endDate.getFullYear() + 1);
                                        endDate.setDate(endDate.getDate() - 1);
                                    }
                                    else
                                    {
                                        endDate = new Date(dateObject);
                                        endDate.setFullYear(endDate.getFullYear() + 1);
                                        endDate.setDate(endDate.getDate() - 1);
                                    }
                                }
                                else if(angularScope.objTpaRequestToEdit != null && angularScope.objTpaRequestToEdit.Parent_Request__r != null && angularScope.objTpaRequestToEdit.Parent_Request__r.Renewed_As__c != null && angularScope.objTpaRequestToEdit.Parent_Request__r.Renewed_As__c == angularScope.objTpaRequestToEdit.Id ) {
                                    var oldAccessDate = angularScope.objTpaRequestToEdit.Parent_Request__r.Data_Access_End_Date__c;
                                    oldAccessDate = oldAccessDate.split('-');
                                    var  oldEndDate = new Date(oldAccessDate[0],oldAccessDate[1]-1,oldAccessDate[2]);
                                    dateDiff = angularScope.findDateDiff(oldEndDate);
                                }

                                //*** Added By Govind under CR-2459 Start ***//
                                if((angularScope.requestType == 'clone' || angularScope.requestType == 'edit') && new Date() > new Date(dateOnlyDASD[0],dateOnlyDASD[1]-1,dateOnlyDASD[2]))
                                {
                                    endDate = new Date(dateObject);
                                    endDate.setFullYear(endDate.getFullYear() + 1);
                                    endDate.setDate(endDate.getDate() - 1);
                                }
                                //*** Added By Govind under CR-2459 End ***//
                                //*** Modified by Govind under Issue 8334 End ***//
                                if(dateOnlyDAED.length == 3)
                                {
                                    //Modified by C.P.Pandey under ER-3485 start
                                    if(new Date() > new Date(dateOnlyDASD[0],dateOnlyDASD[1]-1,dateOnlyDASD[2]))
                                    {
                                        $('#dataAccessEndDate').datepicker("option","maxDate",endDate );
                                    }
                                    //Modified by C.P.Pandey under ER-3485 end
                                    // added by neha under ER-2975 strats
                                    if(angularScope.requestType == 'view')
                                    {
                                        $('#dataAccessEndDate').datepicker("setDate",endDate );
                                    }
                                    // added by neha under ER-2975 ends
                                }
                                //*** Modified by Govind under ER-1736 End ***//
                            }

                            //Added by C.P.Pandey under Issue-7163 start
                            if(dateOnlyDASD.length == 3)
                            {
                                var endDateMax = new Date(dateOnlyDASD[0],dateOnlyDASD[1]-1,dateOnlyDASD[2]);

                                if((angularScope.requestType == 'renew' || angularScope.requestType == 'view') && angularScope.objTpaRequestToEdit.Data_Access_End_Date__c != null)//Updated by Babita Dadarwal under ER-3433
                                {
                                    var dateOnlyDAED = angularScope.objTpaRequestToEdit.Data_Access_End_Date__c;
                                    dateOnlyDAED = dateOnlyDAED.split('-');
                                    endDateMax = new Date(dateOnlyDAED[0],dateOnlyDAED[1]-1,dateOnlyDAED[2]);
                                    endDateMax.setFullYear(endDateMax.getFullYear() + 1);
                                    endDateMax.setDate(endDateMax.getDate());
                                }
                                else
                                {
                                    endDateMax.setFullYear(endDateMax.getFullYear() + 1);
                                    endDateMax.setDate(endDateMax.getDate()-1);
                                }
                                //*** Added By Govind under ER-1736 Start ***//
                                if(endDate != null && dateDiff != null) {
                                    if(dateDiff > 0 && ((angularScope.objTpaRequestToEdit != null && angularScope.objTpaRequestToEdit.Parent_Request__r != null && angularScope.objTpaRequestToEdit.Parent_Request__r.Renewed_As__c != null && angularScope.objTpaRequestToEdit.Parent_Request__r.Renewed_As__c == angularScope.objTpaRequestToEdit.Id && angularScope.requestType != 'view'))){
                                        endDateMax.setDate(endDateMax.getDate()+ dateDiff);
                                    }
                                }
                                //*** Added By Govind under ER-1736 End ***//

                                $("#dataAccessEndDate").change();
                                $("#dataAccessEndDate").datepicker("refresh");
                            }

                            //*** Added By Govind under CR 8415 End ***//
                            //Added by C.P.Pandey under Issue-7163 end
                            //*** added by govind 20 Feb Addendum to load the dates start ***//
                            if(angularScope.objTpaRequestToEdit.Data_Period_Start_Date__c != null)
                            {
                                var dateOnlyDPSD = angularScope.objTpaRequestToEdit.Data_Period_Start_Date__c;
                                dateOnlyDPSD = dateOnlyDPSD.split('-');
                                $('#dataPeriodStartDate').datepicker("setDate", new Date(dateOnlyDPSD[0],dateOnlyDPSD[1]-1,dateOnlyDPSD[2]));
                            }
                            if(angularScope.objTpaRequestToEdit.Data_Period_End_Date__c != null)
                            {
                                var dateOnlyDPED = angularScope.objTpaRequestToEdit.Data_Period_End_Date__c;
                                dateOnlyDPED = dateOnlyDPED.split('-');
                                //added by neha under ER-2975 starts
                                var maxDate = new Date(dateOnlyDPED);
                                if(angularScope.requestType == 'edit'){
                                    $("#dataPeriodEndDate").datepicker("option","maxDate", maxDate);
                                    var minDate = $( "#dataPeriodEndDate" ).datepicker( "option", "minDate" );
                                    var minDate = $( "#dataPeriodEndDate" ).datepicker( "option", "maxDate" );
                                    //added by neha under ER-2975 ends
                                    $('#dataPeriodEndDate').datepicker("setDate", new Date(dateOnlyDPED[0],dateOnlyDPED[1]-1,dateOnlyDPED[2]));
                                    if (angularScope.objTpaRequestToEdit.Parent_Request__r.Data_Period_End_Date__c != null) {
                                       var parentDateOnlyDPED = angularScope.objTpaRequestToEdit.Parent_Request__r.Data_Period_End_Date__c;
                                       parentDateOnlyDPED = parentDateOnlyDPED.split('-');
                                       console.log('parentDateOnlyDPED'+parentDateOnlyDPED);
                                       var parentDate = parentDateOnlyDPED[1]+'/'+parentDateOnlyDPED[2]+'/'+parentDateOnlyDPED[0];
                                       angularScope.previousDataPeriodEndDate = parentDate;
                                    }
                                }
                                if (angularScope.requestType == 'clone' || angularScope.requestType == 'renew') {
                                    $("#dataPeriodEndDate").datepicker("option","maxDate", maxDate);
                                    var minDate = $( "#dataPeriodEndDate" ).datepicker( "option", "minDate" );
                                    var minDate = $( "#dataPeriodEndDate" ).datepicker( "option", "maxDate" );
                                    $('#dataPeriodEndDate').datepicker("setDate", null);
                                    console.log('dateOnlyDPED'+dateOnlyDPED.reverse().toString().replaceAll(',','/'));
                                    var date = dateOnlyDPED[1]+'/'+dateOnlyDPED[0]+'/'+dateOnlyDPED[2];
                                    angularScope.previousDataPeriodEndDate = date;
                                }
                            }
                            else{
                                if(angularScope.requestType == 'edit' && angularScope.objTpaRequestToEdit.Parent_Request__r.Data_Period_End_Date__c != null){
                                        
                                    var parentDateOnlyDPED = angularScope.objTpaRequestToEdit.Parent_Request__r.Data_Period_End_Date__c;
                                    parentDateOnlyDPED = parentDateOnlyDPED.split('-');
                                    console.log('parentDateOnlyDPED'+parentDateOnlyDPED);
                                    var parentDate = parentDateOnlyDPED[1]+'/'+parentDateOnlyDPED[2]+'/'+parentDateOnlyDPED[0];
                                    angularScope.previousDataPeriodEndDate = parentDate;
                                    
                                }
                              }
                            //*** added by govind 20 Feb Addendum to load the dates End ***//
                            //Modified by C.P.Pandey under Issue-7222 end
                        }

                        var defaultDAEndDate = $('#dataAccessStartDate').datepicker('getDate'); //Added by C.P.Pandey under ER-3485
                        defaultDAEndDate.setFullYear(defaultDAEndDate.getFullYear() + 1); //Added by C.P.Pandey under ER-3485
                        $("#dataAccessEndDate").datepicker("option","defaultDate", defaultDAEndDate); //Added by C.P.Pandey under ER-3485

                        //Added by C.P.Pandey under ER-3296 start
                        var extPassedValue = getParameterByName('extPassedValue');
                        if(getParameterByName('requestType') == 'new' && getParameterByName('extAction') == 'ExtNewReq' && extPassedValue != null && extPassedValue.length > 0)
                        {
                            extPassedValue = decodeURIComponent(extPassedValue).split(':~');
                            var extPassedValueMap = {};
                            $.each(extPassedValue, function(k, v){
                                if(v != null && v.length > 0 && v.split('=').length == 2)
                                    extPassedValueMap[v.split('=')[0]] = v.split('=')[1];
                            });
                            angularScope.$log.info('extPassedValue::::');
                            angularScope.$log.info(extPassedValueMap);
                            angularScope.isClientCopiesEmail = 'No';
                            angularScope.tpaObj.isAdditionalVendorRequiredTP = 'No';
                            if(extPassedValueMap['CPN'] != null && extPassedValueMap['CPN'].length > 0)
                            {
                                angularScope.tpaObj.clientProjectName = extPassedValueMap['CPN'];
                            }
                            if(extPassedValueMap['CEACC'] != null && extPassedValueMap['CEACC'].length > 0 && (extPassedValueMap['CEACC'] == 'Yes' || extPassedValueMap['CEACC'] == 'No'))
                            {
                                angularScope.isClientCopiesEmail = extPassedValueMap['CEACC'];
                            }
                            if(extPassedValueMap['VCFN'] != null && extPassedValueMap['VCFN'].length > 0)
                            {
                                angularScope.tpaObj.vendorContactFName = extPassedValueMap['VCFN'];
                            }
                            if(extPassedValueMap['VCLN'] != null && extPassedValueMap['VCLN'].length > 0)
                            {
                                angularScope.tpaObj.vendorContactLName = extPassedValueMap['VCLN'];
                            }
                            if(extPassedValueMap['VCE'] != null && extPassedValueMap['VCE'].length > 0)
                            {
                                angularScope.tpaObj.vendorContactEmail = extPassedValueMap['VCE'];
                                angularScope.tpaObj.confirmVendorContactEmail = extPassedValueMap['VCE'];
                            }
                            if(extPassedValueMap['PVSDAV'] != null && extPassedValueMap['PVSDAV'].length > 0 && (extPassedValueMap['PVSDAV'] == 'Yes' || extPassedValueMap['PVSDAV'] == 'No'))
                            {
                                angularScope.tpaObj.isAdditionalVendorRequiredTP = extPassedValueMap['PVSDAV'];
                            }
                            var dateManipulator;
                            if(extPassedValueMap['DASD'] != null && extPassedValueMap['DASD'].length > 0 && isValidDate(extPassedValueMap['DASD']))
                            {
                                dateManipulator = extPassedValueMap['DASD'].split('/');
                                if(dateManipulator.length == 3)
                                {
                                    $('#dataAccessStartDate').datepicker("setDate", new Date(dateManipulator[2],dateManipulator[0]-1,dateManipulator[1]));
                                    $("#dataAccessStartDate").change();
                                }
                            }
                            if(extPassedValueMap['DAED'] != null && extPassedValueMap['DAED'].length > 0 && isValidDate(extPassedValueMap['DAED']))
                            {
                                dateManipulator = extPassedValueMap['DAED'].split('/');
                                $('#dataAccessEndDate').datepicker("setDate", new Date(dateManipulator[2],dateManipulator[0]-1,dateManipulator[1]));
                                $("#dataAccessEndDate").change();
                            }
                            if(extPassedValueMap['DPSD'] != null && extPassedValueMap['DPSD'].length > 0 && isValidDate(extPassedValueMap['DPSD']))
                            {
                                dateManipulator = extPassedValueMap['DPSD'].split('/');
                                $('#dataPeriodStartDate').datepicker("setDate", new Date(dateManipulator[2],dateManipulator[0]-1,dateManipulator[1]));
                                $("#dataPeriodStartDate").change();
                            }
                            if(extPassedValueMap['DPED'] != null && extPassedValueMap['DPED'].length > 0 && isValidDate(extPassedValueMap['DPED']))
                            {
                                dateManipulator = extPassedValueMap['DPED'].split('/');
                                $('#dataPeriodEndDate').datepicker("setDate", new Date(dateManipulator[2],dateManipulator[0]-1,dateManipulator[1]));
                                $("#dataPeriodEndDate").change();
                            }
                            if(extPassedValueMap['PROV'] != null && extPassedValueMap['PROV'].length > 0)
                            {
                                angularScope.mlObj.selectedDataProvidedBy = angularScope.setSelectedValueInSelectedLang(angularScope.mlObj.dataProvidedByList, extPassedValueMap['PROV']);
                            }
                            if(extPassedValueMap['FOD'] != null && extPassedValueMap['FOD'].length > 0)
                            {
                                angularScope.mlObj.selectedFrequencyOfDelivery = angularScope.setSelectedValueInSelectedLang(angularScope.mlObj.frequencyOfDeliveryList, extPassedValueMap['FOD']);
                                if(extPassedValueMap['FOD'] == 'Other' && extPassedValueMap['FODOT'] != null && extPassedValueMap['FODOT'].length > 0)
                                {
                                    angularScope.freqOfDelOtherDDTData = extPassedValueMap['FODOT'];
                                }
                            }
                        }
                        //Added by C.P.Pandey under ER-3296 end

                        //Added by C.P.Pandey under CR-11745 Starts
                        $(".overlayBack").on("click", function(e) {
                            $('.ddoneKeyDataCountry').select2("close");
                        });
                        $(".overlayContentOuter").on("click", function(e) {
                            $('.ddoneKeyDataCountry').select2("close");
                        });
                        //Added by C.P.Pandey under CR-11745 Ends
                    }
                    var popupAlert = function(msg, truePart)
                    {
                        popup(msg, {'animate':true}, 
                        function(r)
                        {
                            if(r && truePart != null)
                                truePart();                    
                        });
                    }
                </script>
                <!-- ****** AngularJS script End ****** -->
                <apex:slds />
            </head>
            <!-- Head section end -->

            <!-- Body start -->
            <body id="pageBody" oncontextmenu="return false;">
            <div id="backWhiteOverlay" style="position:absolute;z-index:10000 !important;width:100%;height:100%;display:none;"></div>
                <div class="slds-scope">
                    <c:VFC_TPA_LoadingImage />
                    <apex:form html-autocomplete="off" html-class="slds-form slds-form_horizontal">
                        <apex:actionFunction action="{!saveRequestAF}" name="resubmitFrom" rerender="setRequestResultPanel">
                            <apex:param name="tpaRequestJSON" assignTo="{!reqObjString}" value="" /> 
                        </apex:actionFunction>
                        <apex:outputPanel id="setRequestResultPanel" style="display:none">
                            requestSubmissionResult: {!requestSubmissionResult}
                            <script type="text/javascript">
                                var result = '{!requestSubmissionResult}';
                                console.log('result in redirect: '+result);
                                if(result != null) {
                                    if(result.indexOf('success') > -1){
                                        console.log('redirectionUrl: '+result.split('~')[1]);
                                        angularScope.postSubmitActivity(result.split('~')[1]);
                                    } else {
                                        hideLoading();
                                        console.log('Error: ' + event.message);
                                        angularScope.submitStatus = 'error'; 
                                        if((angularScope.isTPProcessor 
                                            || angularScope.isUSTPProcessor
                                            || angularScope.viewModeStatus == 'NV' 
                                            || angularScope.viewModeStatus == 'CDV')) 
                                        {  
                                            angularScope.goToHome(); 
                                        }
                                    }
                                }
                                hideLoading();
                            </script>
                        </apex:outputPanel>
                        <div id="ng-app" ng-app="TpaAccessRequest">
                            <div id="controllerPage" ng-controller="controllerPage">
                                <div ng-show="!mlObj.isClientFromUS && !mlObj.isVendorLangLocked" style="display:none;width:100%; height:550px;">
                                    <c:VFC_TPA_Multilingual_Menu_Component />
                                </div>
                                <nav class="menu" ng-if="!mlObj.isClientFromUS && requestType == 'view'">
                                    <ul class="menuUl">
                                        <li ng-repeat="(k,v) in mlObj.languageMap" class="menuLi {{k}}">
                                            <span class="menuLink" title="{{v.split('~')[0]}}" onclick="setViewLang('{{k}}');">{{v.split('~')[2]}}</span>
                                        </li>
                                    </ul>
                                </nav>
                                <table width="100%" align="right" style="margin-top: -25px;" > 
                                    <tr align="right">
                                        <td align="right">
                                            <apex:outputlink value="{!$Label.TPA_Privacy_Policy_URL}" target="_blank"><font color="blue" style="text-decoration: underline;float: right;">{!$Label.TPA_Privacy_Policy}</font></apex:outputlink><!--&nbsp;&nbsp;|&nbsp;&nbsp;<apex:outputlink value="https://www.brainshark.com/imshealth/vu?pi=zFKz36Lj8z2GfMz0" target="_blank"><font color="blue" style="text-decoration: underline;">Instructional Video</font></apex:outputlink>Updated by Jyotsna Er-1011 30 Sep -->
                                        </td>
                                        <td width="10px">
                                            &nbsp;
                                        </td>
                                    </tr>
                                    <tr align="right" ng-if="requestType=='view' && {!TLLA_Doc != null} && (objTpaRequestToEdit.Request_Status__c == 'In Effect' || objTpaRequestToEdit.Request_Status__c == 'Expired')">
                                        <td align="right">
                                            <apex:outputlink value="/servlet/servlet.FileDownload?file={!TLLA_Doc}" target="_blank"><font color="blue" style="text-decoration: underline;float: right;">Executed TLLA Document</font></apex:outputlink><!--&nbsp;&nbsp;|&nbsp;&nbsp;<apex:outputlink value="https://www.brainshark.com/imshealth/vu?pi=zFKz36Lj8z2GfMz0" target="_blank"><font color="blue" style="text-decoration: underline;">Instructional Video</font></apex:outputlink>Updated by Jyotsna Er-1011 30 Sep -->
                                        </td>
                                        <td width="10px">
                                            &nbsp;
                                        </td>
                                    </tr>
                                    <tr align="right" ng-if="requestType=='view' && {!AMA_Doc != null} && (objTpaRequestToEdit.Request_Status__c == 'In Effect' || objTpaRequestToEdit.Request_Status__c == 'Expired')">
                                        <td align="right">
                                            <apex:outputlink value="/servlet/servlet.FileDownload?file={!AMA_Doc}" target="_blank"><font color="blue" style="text-decoration: underline;float: right;">Executed AMA Document</font></apex:outputlink><!--&nbsp;&nbsp;|&nbsp;&nbsp;<apex:outputlink value="https://www.brainshark.com/imshealth/vu?pi=zFKz36Lj8z2GfMz0" target="_blank"><font color="blue" style="text-decoration: underline;">Instructional Video</font></apex:outputlink>Updated by Jyotsna Er-1011 30 Sep -->
                                        </td>
                                        <td width="10px">
                                            &nbsp;
                                        </td>
                                    </tr>
                                </table>
                                <div>
                                    <img alt="Print" style="display:none;cursor:pointer;width:32px;height:32px;float:right;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAAK/INwWK6QAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH3wYcCwoXz1qbcQAADLFJREFUWMPNWGlsXcd1/ma5y1v4NpKiZVELZYnabDneIsmyJdlVEVllACF1W6QIEKC/bDg/YiioURgFHMRBUNRNgQZpgcLxjwZtNhspDC9yENCylQiWrAiWbcaSqLgUKVmkueiRb713Zs7pj/veI7VYUdP+6AAXM3z3cuab75zznTMD/D9v4kYvn376XwAAvq+lMY6sdQ/09haeDAIvIiJxUyu0mpSSms04NTLy4fM9Pbe+lk578plnHqODB7+B7373Hz7z//SNJlVKAQB6egpiZmYetVrj/r17P/+lDRtWU7MZSSl/H8bkPTMjCDwaHb0gjx49Er3wwnde+/hjghACmUzXDWe4IUAhZPKR1vA8BSFgwtBHEHjW97US4voAGQAxQMQgZhhLCALtUmHgM5MFgLVrk7mJ6A8HSOQ6vbUWRE60JlTMUFfgY4DBcMRwlCzsmEEExNbB9zWICUT8P3KNGwJ0zrZ6B+csrLVg5ha717KWAAOIOWGQF8fcMrVrbfr/FCCzA5EFkW1BuQocA44YRNxibbEnZhARkn0x+BqAfCMIvw+gWcKgg3Omw+DNgHPELdaS75i5s+m26/GN8d0cg0QORImZ2wDbE7sWELoOOGr5oHMOTARm7vi1tf8LEz/yyCMAgIWFT9HTM9Bh0Fq3BGDiWzcC12aWHYGJgZa52wClFOjuLmFwcBsAQAiB4eHh6wPcv3//FSEvhIDWPrLZEEop5HLdmJycUm2fccRgcEdOrgfOOQaI4MiBuMUgkwSAdDqxwuXLl5HP51GtVlEsFvHUU0/h2LFjOHz4cAJwaGgIACClRLVaxYULE7jjjjsxPT0lRkaOyHPnjmPLlnuUEDlHxM02g8QMhrgGXGfskoBgIpB1ACXmZaL6M8/8My5dOqP37Nnt4jjG1NQkFwolOnLkbczMzMBai507d8I5B5XJhOjqysHzNHzfRy6XU41GXSilubu7l999900MD7/lPK/2oFLe17/whT9e2dNTRGScYAbcElN22HMMdg5EBHIOxlikU76Imk3xxhtvFE+ePHT+1VdfGWk0ptHffxul02kWArK3t1c2Gg1ks1kwM8rlMvSKFasAAMZYUa1WMTk56er1uiyXZ/rS6XR/X9+adaWSW9ffv+aJzZvvXm6MYQDSUcvUzHBEif5Ra+wokSVLYKIkSJhFsxnxnj0PDpw65f2wVou/HwT++x9+eOp3tVp1Qqlgyvd9t2rVKmGMEUopLhQK0M45zM3NitHRM7xmzdrA9/VfrFix/ksrVjx0e1/f8lXLlvV5hUIJW7dupl/84rCzxqpOFIu2v0pAMFgwBAMCvKQKSRRbJHIljDF08OBT6Q8+GHnq8uVZTE1N2ampSxcvXJgYmZq69J/G2H8fHh6ub9y4QYRhmnUQhOLYseO8b9++DDP/eOfOXUM7d+6iVavWyHy+wFprJ6WCMRU5PvFvUkgBAhAZC2bAOIKz1GKuZVbrQM6BOYneqBnDGgspBSYmJuTAwGretGmrS5TBqvn58urx8fMrf/Wrt/a/+eYvv7JmzcCfj42NTa1fPyj09PSnqljM23K5/I0vf/krQ4899oSpVusiiiI0mw1B5FQQhJie/gT5XA6zs3X85sRHiOJkQeYk4gWSXAzmjiiTIzAY1jhEjTqiyKBYLGJi4qLI562K4whKKw58n27fspW2b7/f5nK5XT/4wb9+p7//jr/asWN3klG7urKFoaEvHvv2t/9+MJPJUhxHUikNIQDnCLlcF44fP4pKpYahoSFUKvPwfQ8CAp2KRrQsLhZ/Y04yCRiI4hiZTBcOHXodSmkMDGxGpVpB6AUw1qJhG8ilc2xtLJ599m8qhw69vgPgEa2UQF/fsq2bNm0Z7O3tpWq1In3fR1vvmAWUkqjVquju7kWz2UQcWxjjWuyhAyiRF2oJOyU5uMMqo1aLEQQZ1OsLCEIP5EKUaxX8aP4o+k0PHs1sE5QL3caNW7reeefo7nq9MqJ7e3uRzxc+t2bNAHzfYyEEkkI0YUJKCSKHKIrR1ZXHwkINcRxDSgkpBYgIcWwRRTGMSYBdWwAkDlCvGygVwpgZaCWgtYL0JDarldh2yyCcdkiHGaxePYBisXjn+vW3QQ8OboAQYu2yZcsgRMKWlAk4IYB6PUYURWAW0DpEtdpomd6gWm2gXo9aKfBKNq9uzAwpI1grYSxBKUAqieXFHqztXo4mxYisgack+vpuQTqdue3tt49qnclkAaAnn+8CM0HKZGfWOtRqzUR02UAIDWaJKIpRqdRRLlcRxw6LjLeB3Cj1J9pkYoDIInElQh0xpBTwtAYERLFYQCqVLgHIaM8LIARnPM+H70v4voc4tqjXm2BmpFIBFhZqkNJDFEU4f/4TLCzUO+Zvs3OzTQiFZtPCOYswTMFaA9VSTa0V0ukAmUwanuelAHja8zSIHEZGziOV6kF3dxpB4CGbDWGMg+d5rcAgnDp1FnNzC/B9vYSptmJf3++WHhyZGUJINBo1NBoNFAolGAN4ngIzUKs1MD7+KUZHL0IkviK073swBiKOLc6d+wRnzxqUSl3o6ckjn08jm01Da4ULF2ZQLjfBTHCOWqyJlt8B155g23qYjNuMe56GlA5SCgSBh2q1junpeczMzOPy5SoAhSiyHbfRSZVMTSkFUqkAjYbD3FwVs7MVaK0QhgmbO3bcCWaGMQ5xHKPRiBBFMeLYwJirzyuidRLU8H0PYegjDAP4vg+tFZRSmJuLMTHxAep1A+cWfTkMfczPA865GABpIoa1ZkEISk5epCGl6vDg+yHiGNA6hOcpZDLJwp6noLWGUosRf6VAt0t8hrWJbhpjW5txiGMHz0shlVpknogQBB4AB2NMHUCsK5V5KKVnnTNIpQIQGUgpIYSEtTGOHRtGHEedMzK1zhltAIvOf7WsLA2MxQ20TcdM8P0A9957P7T2wcmRFGEYsjExoqg5C6Chp6cvoVDoGYvjBsIwgLVxy0QeFhbqeP31l7CwsAAhBKIo+kydu9mW3DIEYGbkcjncc8/nkUrlYK3pqEajUUG1Wrv45JOPWz0/vwCtw3NJftUiCDwIAXieh3LZoK/vFqRSGaxatRK7d++GMaYF8lqgN4Nda43Dh9/C+Pg4crkuEBmEoQdjEqsEgSfm5+cwP18ee/nlV6BnZmZQq9XPzM3NzCnFpUwmZCIWQRCi2azB9z2k0yF27dqF++67D5VKtaV/S6O0HbVXnvjajLV/s9aiWCwAAF588UX4vocoqiOTSSGKRMtyQkxNTWJ6evqMlIAul+sQQkxOTV06Wa9X9vb09FIUxUopgfXr1+Ppp/8W77wzgl27tqOrK41sNgchWvcuHX+8eowlY+r4rLUW6XQWDzywC7OzTezdez+k9KGURBD48DyPKpV5ef78x5/Esf0AAPSBAwf03Xd/zo6NffzK6dMjex999E/58uWqJXIin+8Ss7PzslRahv7+5XCOkU7TdQAtBs4ioMV3bcDtU2NfXwHFYjeIfCxffgs3mxErleJiMUsvvXREnjlz+jiAUWaGrlar7uTJ91As5l549dWXh2q1+t7Vqwc4m82JYrGA998/h40bVwMAms0kSJKIw1Xg6ArmFtm78rs4NrA2j02bBvDrXx/HQw89IKanp0W1WuHx8TH185//dHJ0dPSfAPCKFbdKceDAAZw4cVxcuPAJA+havrxv/+rVA9t7enrXplKZvp07/+SuJ574Sz+54UpKqWQxLAGwFNxShq8El7BJ0Fqiv78X3/rWP9KJE0c+NKZ5cXJy8uL4+NiHc3PlXwIY8TwhjGHWURRhy5bbeevWOwWAitb6J6nUhhfHx6eclHh4y5bBQ1pL1GoRAxBLzbUIrm1GusbsV/fMjGo1hnOgu+66XX7ve9//4bJlG59bv367fO+99wgAHn74YQwPDzMAqG3btmNs7L/w29+OYH5+QeTzBfW1rz2u7rlniyuVer6+b9+O+7PZVOQcSSEESym43SePbD1Lx4qVklc8WqvOI6VkpYRbufJWdebM71LDwz/+j9On37XHj5/Qs7Mz+Oijj7iTMpvNBgYHN2Dduq1Yt24zW5umr371WZfNBrd885uP/1mpVEAUWV9K3dHo5GaYr6polmaQqysbvkJ6AMA5J7u68rxt230P/uxnP/0jIYqv7dnzIG3ceC+dPXsKs7OfJtVPkm99PP/8YZw/P4q5uUkRRYKdc/l8Xv9ICLeGiGOgleuwNChoiVlpSQTTZ/y9+B0RsecpLpcXwqNH33o6m82/VCqV5MGDf0fvv38Mzz3310nmWrqrUqkPAFCvV0SzWWcAAYAsgBtfJP/hrV00VgBc90LuvwEltZ1U2TOq5gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0wNi0yOFQxMToxMDoyMy0wNDowMKDiIg0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTUtMDYtMjhUMTE6MTA6MjMtMDQ6MDDRv5qxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==" ng-show="requestType=='view' && !isPrintAction && (objTpaRequestToEdit.Request_Status__c == 'In Effect' || objTpaRequestToEdit.Request_Status__c == 'Expired')" onclick="printDiv()" /> <!-- Modified by Sunny Bansal under ER-2167 -->
                                </div>
                                <apex:pageBlock html-ng-hide="IsShowVendorMessageBoard || IsShowVendorPrivacyPolicyBoard || !mlObj.isVendorLangLocked"><!-- Updated By Vikram Singh under ER-1940 --><!-- Updated by Babita on 10 july 2015 under ER-2067 -Add ng-hide condition--> <!-- Modified by Sunny Bansal under ER-2051 -->
                                    <!-- Page Buttons Start -->
                                    <apex:pageBlockButtons location="bottom">
                                        <div ng-show="!isPrintAction" style="float:left;">
                                            <button class="slds-button slds-button_outline-brand "
                                                    style="display:none;"
                                                    onclick="return false;"
                                                    ng-confirm-click="cancelMessageCustom"
                                                    confirmed-click="invokeParentDisabled() && requestCancel();"
                                                    ng-show="viewModeStatus == 'CDV' || viewModeStatus == 'NV'"
                                                    ng-click="">
                                                {!$Label.TPA_Cancel}
                                            </button><!-- Modified by Govind uner CR-8838 -->
                                        </div>
                                        <div ng-show="!isPrintAction" style="float:right;"><!-- Modified by C.P.Pandey under ER-2025 -->
                                            
                                            <button class="slds-button slds-button_outline-brand"
                                                    style="display:none;"
                                                    onclick="return false;"
                                                    ng-show="((selectedSection != 'CS' && viewModeStatus == 'VDV') || (selectedSection != 'V' && (viewModeStatus == 'CDV' || viewModeStatus == 'NV'))) && (!((tllaLanguageChosen && tllaLanguageChosen != '--None--') || viewModeStatus == 'CDV' || viewModeStatus == 'NV' || !{!vendorDocumentLanguageEnabled}) || !Client_Approved__c || !Client_Approved1__c || (!tpaObj.Client_Approved2__c && {!(tpaRequestEditType != 'v')}) || ({!(tpaRequestCallType != 'clone')} && {!(tpaRequestEditType != 'v')} && isClientRequestEdited == 'No'))"
                                                    ng-click="invokeParentDisabled() && screenNavigationCancel('Previous');"><!-- Modified by Shaik under CR-12675 -->
                                                {!$Label.TPA_Previous}
                                            </button> <!-- Modified By C.P.Pandey under CR-6341 --><!-- Modified By C.P.Pandey under Issue-7368 --> <!-- Modified By Sunny Bansal under CR-6373 -->
                                            <!-- Updated by Babita Dadarwal under ER-3433 Start-->
                                            <button class="slds-button slds-button_outline-brand"
                                                    style="display:none;"
                                                    onclick="return false;"
                                                    ng-disabled="((requestType == 'edit'||requestType == 'renew')&&(viewModeStatus == 'CDV'||viewModeStatus == 'NV')&&selectedSection == 'RDA'&&isOldUsesOfferingsExisted)"
                                                    ng-show="((requestType == 'new' || requestType == 'clone' || objTpaRequestToEdit.Request_Status__c == 'Client Draft') && (tpaObj.vendorContactFName != null && tpaObj.vendorContactFName != '') && requestType != 'view')"
                                                    ng-click="saveRequestInDraft=true;submitForm();">
                                                {!$Label.TPA_SAVE_Incomplete_TPA_Request} 
                                            </button>
                                            <!-- Updated by Babita Dadarwal under ER-3433 End-->
                                            <button class="slds-button slds-button_success"
                                                    style="display:none;"
                                                    onclick="return false;"
                                                    ng-disabled="((requestType == 'edit'||requestType == 'renew'||requestType == 'clone')&&(viewModeStatus == 'CDV'||viewModeStatus == 'NV')&&selectedSection == 'RDA'&&isOldUsesOfferingsExisted) || (((!tpaObj.prescriberAck) || (!amaAcknowledged)) && !amaAcknowledged1 && selectedSection == 'AD' && isUSPrescLvlData=='Yes' && requestType != 'view') ||  ((requestType == 'edit'|| requestType == 'clone' ||  requestType == 'new') && isUSPrescLvlData!='Yes' && !selectedUSPrescriberData && requiresAMADataforUseOffering && selectedSection == 'AD') ||(selectedSection == 'DDT' && (isUSPrescLvlData=='Yes' && isVendorReqAccessPermission =='No' && mlObj.rootObj.selectedVendorCountry.Default_Value__c != 'United States')&& VendorRemoteAccess_No == false)"
                                                    ng-show="selectedSection != 'F'"
                                                    ng-click="invokeParentDisabled() && screenNavigationCancel('Next');">
                                                {!$Label.TPA_Next}
                                            </button><!-- Modified by C.P.Pandey under ER-1952 --><!-- Updated by Babita Dadarwal under ER-2241 --><!--modified by supriya Johari under Er-2455 -->
                                        </div>
                                    </apex:pageBlockButtons>
                                    <!-- Page Buttons End -->

                                    <!-- Progress Menu Bar Section Start -->
                                    <div class="slds-tabs_default slds-tabs_medium" ng-hide="IsShowVendorMessageBoard || IsShowVendorPrivacyPolicyBoard || !mlObj.isVendorLangLocked">
                                        <ul class="slds-tabs_default__nav" role="tablist">
                                            <li class="slds-tabs_default__item"
                                                id="CSID"
                                                style="display:none;"
                                                ng-show="viewModeStatus == 'VDV'"
                                                role="presentation">
                                                <a class="slds-tabs_default__link"
                                                href="javascript:void(0);"
                                                role="tab"
                                                aria-selected="false"
                                                aria-controls="tab-default-CSID"
                                                id="tab-default__CSID">
                                                    {!$Label.TPA_Client_Request_Summary}
                                                </a>
                                            </li>
                                            <li class="slds-tabs_default__item"
                                                id="VID"
                                                style="display:none;"
                                                ng-show="true"
                                                role="presentation">
                                                <a class="slds-tabs_default__link"
                                                href="javascript:void(0);"
                                                role="tab"
                                                aria-selected="true"
                                                aria-controls="tab-default-VID"
                                                id="tab-default__VID">
                                                    {!$Label.TPA_Client_amp_Vendor_Details}
                                                </a>
                                            </li>
                                            <li class="slds-tabs_default__item"
                                                id="RDAID"
                                                style="display:none;"
                                                ng-show="viewModeStatus == 'CDV' || viewModeStatus == 'NV'"
                                                role="presentation">
                                                <a class="slds-tabs_default__link"
                                                href="javascript:void(0);"
                                                role="tab"
                                                aria-selected="false"
                                                aria-controls="tab-default-RDAID"
                                                id="tab-default__RDAID">
                                                    {!$Label.TPA_Request_Details_Offering_s}
                                                </a>
                                            </li>
                                            <li class="slds-tabs_default__item" 
                                                id="ADID" 
                                                style="display:none;" 
                                                ng-show="isAmaTab" 
                                                role="presentation">
                                                <a class="slds-tabs_default__link" 
                                                href="javascript:void(0);" 
                                                role="tab" 
                                                aria-selected="true" 
                                                aria-controls="tab-default-ADID" 
                                                id="tab-default__ADID">
                                                    {!$Label.TPA_AMA_DATA}
                                                </a>
                                            </li>
                                            <li class="slds-tabs_default__item" 
                                                id="DDTID" 
                                                style="display:none;" 
                                                ng-hide="(viewModeStatus == 'CDV' && !isTPProcessor && !isUSTPProcessor && !isVendorPartVisible) || viewModeStatus == 'NV' || isUSPrescLvlData == 'No'"
                                                role="presentation">
                                                <a class="slds-tabs_default__link" 
                                                href="javascript:void(0);" 
                                                role="tab" 
                                                aria-selected="true" 
                                                aria-controls="tab-default-DDTID" 
                                                id="tab-default__DDTID"><!--Modified by Shaik under CR-12675 -->
                                                    {!$Label.TPA_Data_Delivery_Transmission}
                                                </a>
                                            </li>
                                            <li class="slds-tabs_default__item" 
                                                id="FID" 
                                                style="display:none;" 
                                                ng-show="true" 
                                                role="presentation">
                                                <a class="slds-tabs_default__link" 
                                                href="javascript:void(0);" 
                                                role="tab" 
                                                aria-selected="true" 
                                                aria-controls="tab-default-FID" 
                                                id="tab-default__FID">
                                                    {!$Label.TPA_Finalize}
                                                </a>
                                            </li>
                                        </ul>

                                        <!-- Error Message Box Start -->
                                        <div ng-show="isError"
                                            class="slds-box slds-theme_alert-texture slds-theme_error slds-m-top_small"
                                            role="alert"
                                            style="display:none;">
                                            <div><span class="slds-text-heading--medium"><strong>Errors:</strong></span></div>
                                            <span ng-bind-html-unsafe="errorMsg"></span>
                                        </div>
                                        <!-- Error Message Box End -->

                                        <div style="margin-bottom:20px;display:none;" ng-if="requestType != 'renew' && requestType != 'clone' && mlObj.isVendorLangLocked">
                                            <b><u>{!tpaRequestToEdit.Name}</u></b>
                                        </div>

                                        <!-- Client Summary Section Start -->
                                        <div id="tab-default-CSID"
                                            class="slds-tabs_default__content"
                                            role="tabpanel"
                                            aria-labelledby="tab-default__CSID">
                                            <div ng-show="selectedSection == 'CS'">
                                                <apex:pageBlockSection columns="1" title="{!$Label.TPA_Client_Project_Information}" collapsible="false" html-style="background-color:white;">
                                                    <div class="slds-form-element slds-form-element_readonly slds-form-element_horizontal">
                                                    <span class="slds-form-element__label">{!$Label.TPA_Client_Project_Name}</span>
                                                    <div class="slds-form-element__control">
                                                        <div class="slds-form-element__static">{{tpaObj.clientProjectName}}</div>
                                                    </div>
                                                    </div>
                                                </apex:pageBlockSection>
                                                
                                                <!-- Added by Babita on 30 June 2015 under ER-1860 End-->
                                                <apex:pageBlockSection columns="2" title="{!$Label.TPA_Project_Dates}" collapsible="false" html-style="background-color:white;margin-top: 15px;">
                                                    <div class="slds-grid">
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <div class="slds-form-element slds-form-element_readonly slds-form-element_horizontal">
                                                            <span class="slds-form-element__label">{!$Label.TPA_Data_Access_Start_Date}</span>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-form-element__static"><span ng-bind="objTpaRequestToEdit.Data_Access_Start_Date__c | date:'MM/dd/yyyy'"></span></div>
                                                            </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <div class="slds-form-element slds-form-element_readonly slds-form-element_horizontal">
                                                            <span class="slds-form-element__label">{!$Label.TPA_Data_Access_End_Date}</span>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-form-element__static"><span ng-bind="objTpaRequestToEdit.Data_Access_End_Date__c | date:'MM/dd/yyyy'"></span></div>
                                                            </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:pageBlockSection>
                                                <apex:pageBlockSection columns="2" title="{!$Label.TPA_Time_Period_Covered_by_IMS_Data}" collapsible="false" html-style="background-color:white;margin-top: 15px;">
                                                    <div style="padding-left: 7px; margin-bottom: 5px;" ng-if="objTpaRequestToEdit.Data_Period_Start_Date__c != null">
                                                        <p >{!$Label.TPA_Data_Time_Periods_are_subject_to_Client}</p>
                                                        <ul style="padding-left: 15px; list-style:outside;">
                                                            <li>{!$Label.TPA_A_valid_license_includes_a_current_contract}</li>
                                                            <li>{!$Label.TPA_If_the_dates_include_any_future_time_periods_then_there_must_be_a_contract}</li>
                                                        </ul>
                                                    </div>    
                                                    <div class="slds-grid">
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <div class="slds-form-element slds-form-element_readonly slds-form-element_horizontal" style="padding-left: 7px;">
                                                            <span class="slds-form-element__label">{!$Label.TPA_Data_Period_Start_Date}</span>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-form-element__static"><span ng-bind="objTpaRequestToEdit.Data_Period_Start_Date__c | date:'MM/dd/yyyy'"></span></div>
                                                            </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <div class="slds-form-element slds-form-element_readonly slds-form-element_horizontal">
                                                            <span class="slds-form-element__label">{!$Label.TPA_Data_Period_End_Date}</span>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-form-element__static"><span ng-bind="objTpaRequestToEdit.Data_Period_End_Date__c | date:'MM/dd/yyyy'"></span></div>
                                                            </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:pageBlockSection>

                                                <apex:pageblockSection title="{!$Label.TPA_Selected_Uses_and_Offerings}" columns="1" collapsible="false" html-style="background-color:white;">
                                                    <table class="list" ng-show="sortedDescMap.length > 0">
                                                        <tr class="headerRow">
                                                            <th>{!$Label.TPA_Category_Name}</th>
                                                            <th>{!$Label.TPA_Use_Name}</th>
                                                            <th>{!$Label.TPA_Offering_Category_Name}</th>
                                                            <th>{!$Label.TPA_Offerings}</th>
                                                            <th>{!$Label.TPA_Region}</th>
                                                        </tr>
                                                        <!-- <tr class="dataRow" ng-repeat="(k,v) in SelectedDescMap  |  myLimitTo : pageSize : currentIndex" onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" onmouseout="if (window.hiOff){hiOff(this);} " onmouseover="if (window.hiOn){hiOn(this);} "> -->

                                                        <tr class="dataRow" ng-repeat="(k,v) in sortedDescMap" onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" onmouseout="if (window.hiOff){hiOff(this);} " onmouseover="if (window.hiOn){hiOn(this);} ">
                                                            <td class="dataCell">
                                                                {{v.translatedCategoryName}}
                                                            </td>
                                                            <td class="dataCell">
                                                                {{v.translatedPurposeName}}
                                                                <span ng-if="v.purposeName.indexOf('Other') > -1">:<br />{{v.selectDes}}</span>
                                                            </td>
                                                            <td class="dataCell">{{v.translatedOfferingCategoryName}}</td>
                                                            <td class="dataCell">
                                                                {{v.translatedDataAsset}}
                                                                <span ng-if="v.dataAsset.indexOf('Other') > -1">:<br />{{v.selectdataAssDetails}}</span>
                                                            </td>
                                                            <td class="dataCell">
                                                                {{v.country}}
                                                            </td>
                                                        </tr>
                                                           
                                                           
                                                    </table>
                                                    <span style="display: inline-block;margin: 5px;padding-left: 45% ;">
                                                        <button class="slds-button slds-button_brand" ng-click="prevUseOffData()" ng-disabled="currentPageNo <= 1" onclick="return false;">Prev</button>
                                                        <button class="slds-button slds-button_brand" ng-click="nextUseOFfData()"  ng-disabled="currentPageNo >= Math.ceil(noOfRecords/100)" onclick="return false;">Next</button>
                                                    </span>
                                                    <span style="padding-left: 32%;;">{{currentDataRange}} Records of {!noOfRecords} Records </span>
                                                </apex:pageblockSection>

                                                <apex:pageBlockSection columns="2" title="{!$Label.TPA_Client_Contact_Information}" collapsible="false" html-style="background-color:white;">
                                                    <div class="slds-grid slds-wrap">
                                                        <div class="slds-col slds-size_1-of-1">
                                                            <div class="slds-grid">
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly">
                                                                    <div class=" slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">{!$Label.TPA_Client_Contact_Name}</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">{{currentUser.Name}}</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly">
                                                                    <div class="slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">{!$Label.TPA_Client_Company_Name}</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">{{currentUser.CompanyName}}</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <div class="slds-grid">
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly">
                                                                    <div class="slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">{!$Label.TPA_Email}</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">{{currentUser.Email}}</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly ">
                                                                    <div class="slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">&nbsp;</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">&nbsp;</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:pageBlockSection>
                                                <apex:pageBlockSection columns="2" title="{!$Label.TPA_Client_Representative_Header}" collapsible="false" html-style="background-color:white;">
                                                    <div class="slds-grid slds-wrap">
                                                        <div class="slds-col slds-size_1-of-1">
                                                            <div class="slds-grid">
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly">
                                                                    <div class="slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">{!$Label.TPA_Client_Representative_Name}</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">{{tpaObj.clientRepresentativeName}}</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly">
                                                                    <div class="slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">{!$Label.TPA_Client_Representative_Email}</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">{{tpaObj.clientRepresentativeEmail}}</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <div class="slds-grid">
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly">
                                                                    <div class="slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">{!$Label.TPA_Client_Representative_Title}</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">{{tpaObj.clientRepresentativeTitle}}</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-col slds-size_1-of-2 slds-form-element slds-form-element_readonly ">
                                                                    <div class="slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">&nbsp;</span>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-form-element__static">&nbsp;</div>
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:pageBlockSection>
                                            </div>
                                        </div>
                                        <!-- Vendor Section Start -->
                                        <div id="tab-default-VID"
                                            class="slds-tabs_default__content"
                                            role="tabpanel"
                                            aria-labelledby="tab-default__VID">
                                            <div ng-show="selectedSection == 'V' || isPrintAction" style="display:none;">
                                                <div ng-if="viewModeStatus == 'VDV' || isTPProcessor || isVendorPartVisibleToUSTPProcessor || isVendorPartVisible">
                                                    <fieldset class="viewModeVendorGreyOut" ng-disabled="requestType == 'view' || isVendorPartVisible">
                                                        <apex:pageBlockSection title="{!$Label.TPA_Select_Company_Branded_Name}" columns="2" collapsible="false" html-class="imsheader"  html-ng-hide="isVendorPartVisible">
                                                            <div class="slds-grid" ng-if="viewModeStatus == 'VDV' || isTPProcessor || isUSTPProcessor">
                                                                <div class="slds-col slds-align_absolute-left">
                                                                    <button class="slds-button slds-button_brand"  ng-click="openGlobalBrandingVendorLookUp()" onclick="return false;"><b>{!$Label.TPA_Global_Branding_Vendor_Button}</b></button>
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSection>
                                                        <fieldset  class="vendorLookUpGreyOut"  ng-show="(tpaObj.globalBrandingName != null && tpaObj.globalBrandingName.length != 0) || vendorGBNotInSystem">
                                                            <apex:pageBlockSection title="{!$Label.TPA_Global_Branding_Vendor_Information}" columns="2" collapsible="false" html-class="imsheader" html-style="background-color:white;margin-top:15px;">
                                                                <apex:outputPanel >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Company_Branded_Name}
                                                                        </label>
                                                                        <!--<c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_enter_the_Vendor_s_legal_name}"/>-->
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <div>
                                                                                <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.globalBrandingName" 
                                                                                ng-class="{'errStyle':isVendorGlobalBrandingError,'':!isVendorGlobalBrandingError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Country}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select id="idVendorCountry" ng-change="relateVenStateCountry();" class="ddVendorCountry slds-select" 
                                                                                    ng-model="mlObj.rootObj.selectedVendorCountry" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : 
                                                                                                v.Default_Value__c for v in mlObj.vendorCountryList" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                            </apex:pageBlockSection>
                                                        </fieldset>
                                                    </fieldset>
                                                    <fieldset class="viewModeVendorGreyOut" ng-disabled="requestType == 'view' || isVendorPartVisible">
                                                        <apex:pageBlockSection title="{!$Label.TPA_Vendor_Company}" columns="2" collapsible="false" html-class="imsheader"  html-ng-show="!isVendorPartVisible && (tpaObj.globalBrandingName != null && tpaObj.globalBrandingName.length != 0) && !vendorGBNotInSystem"><!-- Updated by Babita Dadarwal under ER-2672 -->
                                                            <div class="slds-grid" ng-if="viewModeStatus == 'VDV' || isTPProcessor || isUSTPProcessor">
                                                                <div class="slds-col slds-align_absolute-left">
                                                                    <button class="slds-button slds-button_brand"  ng-click="showVendors()" onclick="return false;" ><b> {!$Label.TPA_SEARCH_VENDOR_ACCOUNT} </b></button>
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSection>
                                                        <fieldset  class="vendorLookUpGreyOut"  ng-show="(tpaObj.vendorLegalName != null && tpaObj.vendorLegalName.length != 0) || vendorNotInSystem"><!-- added by Govind under ER-2138--><!--Updated by Govind under ER-2672-->
                                                            <apex:pageBlockSection title="{!$Label.TPA_Vendor_Information}" columns="2" collapsible="false" html-class="imsheader" html-style="background-color:white;margin-top:15px;">
                                                                <apex:outputPanel >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Legal_Entity_Name}
                                                                        </label>
                                                                        <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_enter_the_Vendor_s_legal_name}"/>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <div>
                                                                                <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.vendorLegalName" 
                                                                                ng-class="{'errStyle':isVendorLegalNameError,'':!isVendorLegalNameError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_Address}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.vendorAddress" 
                                                                                ng-class="{'errStyle':isVendorAddressError,'':!isVendorAddressError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_StateProvince}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select class="slds-select" id="idVendorState" ng-model="mlObj.rootObj.selectedVendorState" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : v.Default_Value__c for v in mlObj.relatedVendorStateList" 
                                                                                    ng-disabled="mlObj.relatedVendorStateList == null || 
                                                                                                mlObj.relatedVendorStateList.length <= 1" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_City}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-class="{'errStyle':isVendorCityError,'':!isVendorCityError}" 
                                                                                ng-model="tpaObj.vendorCity" ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Postal_Code}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="20" ng-class="{'errStyle':isVendorPostalError,'':!isVendorPostalError}" 
                                                                                ng-model="tpaObj.vendorPostal" ng-disabled="requestType == 'view' || isVendorPartVisible"
                                                                                style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:outputPanel >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label" style="text-align: justify;">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.Do_you_have_a_Company_website_and_or_professional_networking_address}
                                                                        </label>
                                                                        <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.Provide_company_website_and_or_professional_network_address_such_as_LinkedIn_Fa}"/>
                                                                        <div id="opPanel" class="slds-form-element__control slds-m-left--x-small">
                                                                            <span class="slds-radio"> 
                                                                                <input id="opPanelYes" ng-model="tpaObj.showHideWebsiteField" ng-value="true" type="radio" />
                                                                                <label class="slds-radio__label" for="opPanelYes">
                                                                                    <span class="slds-radio_faux"></span>
                                                                                    <span class="slds-form-element__label">
                                                                                        {!$Label.TPA_Yes_statement}
                                                                                    </span>
                                                                                </label>
                                                                            </span> 
                                                                            <span class="slds-radio">
                                                                                <input id="opPanelNo" ng-model="tpaObj.showHideWebsiteField" ng-value="false" type="radio" ng-click="tpaObj.vendorWebsite = '';"/>
                                                                                <label class="slds-radio__label" for="opPanelNo">
                                                                                    <span class="slds-radio_faux"></span>
                                                                                    <span class="slds-form-element__label">
                                                                                        {!$Label.TPA_No}
                                                                                    </span>
                                                                                </label>
                                                                            </span>
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <!--<apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label slds-m-left--small">
                                                                            {!$Label.TPA_Phone}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="40" ng-model="tpaObj.vendorPhone" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>-->
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element" ng-show="tpaObj.showHideWebsiteField">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.Company_website_and_or_professional_networking_address}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control" ng-show="tpaObj.showHideWebsiteField">
                                                                            <input class="slds-input" type="text" maxlength="255" 
                                                                                ng-class="{'errStyle':isVendorWebsiteError,'':!isVendorWebsiteError}" 
                                                                                ng-model="tpaObj.vendorWebsite" ng-disabled="requestType == 'view' || isVendorPartVisible"
                                                                                style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                            </apex:pageBlockSection>
                                                        </fieldset>
                                                    </fieldset>
                                                </div>
                                                
                                                <fieldset class="viewModeGreyOut" ng-disabled="requestType == 'view'"><!-- Modified by C.P.Pandey under Issue-7246 -->
                                                    <!-- updated by Govind End 25 Jan -->
                                                    <!-- Added by Babita on 30 June 2015 under ER-1860 Start -->
                                                    <apex:pageBlockSection title="{!$Label.TPA_Client_Project_Information}" html-ng-hide="viewModeStatus == 'VDV'" columns="1" collapsible="false">
                                                        <apex:outputPanel >
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label">
                                                                    {!$Label.TPA_Client_Project_Name}
                                                                </label>
                                                                <div class="slds-form-element__control">
                                                                    <input class="slds-input" type="text" maxlength="75" ng-model="tpaObj.clientProjectName" ng-disabled="requestType == 'view'" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) -->
                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Short_name_or_description_used_by_the_client_to_identify_distinguish_the_p}"/>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <p class="slds-text-body_regular" style="color:#1414FF;border:1px solid black;padding: inherit;padding: 0.2% 1%;text-align: justify;">{!$Label.TPA_The_Client_Project_Name_is_made_available_for_the_convenience_of_the_client}</p> <!-- Added by Babita on 14 July 2015 Under Issue-07497,Updated by Govind under ER-2689 -->
                                                    </apex:pageBlockSection>

                                                    <fieldset ng-hide="viewModeStatus == 'VDV'" class="viewModeGreyOut" ng-disabled="requestType == 'view'">
                                                        <apex:pageBlockSection columns="1" collapsible="false" title="{!$Label.TPA_Client_Representative_Header}">
                                                         
                                                             <label class="slds-form-element__label" style="max-width: calc(32% - 1.25rem) !important;">
                                                                {!$Label.TPA_Client_TPA_Representative}
                                                             </label>
                                                             <ul style="padding-left: 2rem; list-style:outside;">
                                                                 <li>{!$Label.TPA_The_Client_TPA_Representative_may_be_the_same_as_or_different}</li>
                                                                 <li>{!$Label.TPA_This_individual_is_directly_involved_and_knowledgeable_about_the_specific}</li>
                                                                 <li>{!$Label.TPA_They_will_be_copied_on_all_communications}</li>
                                                                 <li>{!$Label.TPA_They_will_be_referenced_in_the_Third_Party_Limited_License_Agreement}</li>
                                                               </ul>
                                                         
                                                            <apex:outputPanel html-class="slds-form-element">
                                                               
                                                                <label class="slds-form-element__label" style="max-width: calc(32% - 1.25rem) !important;">
                                                                    <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Client_Representative_Checkbox_Content}
                                                                </label>
                                                                <div class="slds-form-element__control">
                                                                    <span class="slds-radio">
                                                                        <input type="radio" id="clientRepresentativeYes" name="clientRepresentative" value="Yes" ng-model="isUserClientRepresentativeInTLLA" ng-click="addClientRepresentativeEmail();"/>
                                                                        <label class="slds-radio__label" for="clientRepresentativeYes">
                                                                            <span class="slds-radio_faux"></span>
                                                                            <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                        </label>
                                                                    </span>
                                                                    <span class="slds-radio">
                                                                        <input type="radio" id="clientRepresentativeNo" name="clientRepresentative" value="No" ng-model="isUserClientRepresentativeInTLLA" ng-click="removeClientRepresentativeCopies()"/>
                                                                        <label class="slds-radio__label" for="clientRepresentativeNo">
                                                                            <span class="slds-radio_faux"></span>
                                                                            <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                        </label>
                                                                    </span>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel >
                                                                <div class="zIndexOut" ng-show="isUserClientRepresentativeInTLLA == 'No'">
                                                                    <apex:pageBlockSection columns="2" collapsible="false" html-style="background-color:white;">
                                                                                                                                    
                                                                    <apex:pageBlockSectionItem >
                                                                        <div class="slds-form-element">
                                                                            <label class="slds-form-element__label">
                                                                                <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Client_Representative_Name}
                                                                            </label>
                                                                            <div id="opPanel" class="slds-form-element__control">
                                                                                <input class="slds-input"
                                                                                       type="text"
                                                                                       maxlength="255"
                                                                                       ng-model="tpaObj.clientRepresentativeName"
                                                                                       ng-class="{'errStyle':isClientRepresentativeNameError,'':!isClientRepresentativeNameError}"
                                                                                       ng-disabled="requestType == 'view'"
                                                                                       style="width: 100% !important;" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) -->
                                                                            </div>
                                                                        </div>
                                                                    </apex:pageBlockSectionItem>
                                                                    <apex:pageBlockSectionItem >
                                                                        <div class="slds-form-element">
                                                                            <label class="slds-form-element__label">
                                                                                <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Client_Representative_Email}
                                                                            </label>
                                                                            <div id="opPanel" class="slds-form-element__control">
                                                                                <input class="slds-input"
                                                                                       type="text"
                                                                                       maxlength="255"
                                                                                       ng-model="tpaObj.clientRepresentativeEmail"
                                                                                       ng-class="{'errStyle':isClientRepresentativeEmailError,'':!isClientRepresentativeEmailError}"
                                                                                       ng-disabled="requestType == 'view'"
                                                                                       style="width: 100% !important;" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) -->
                                                                            </div>
                                                                        </div>
                                                                    </apex:pageBlockSectionItem>
                                                                    <apex:pageBlockSectionItem >
                                                                        <div class="slds-form-element">
                                                                            <label class="slds-form-element__label">
                                                                               {!$Label.TPA_Client_Representative_Title}
                                                                            </label>
                                                                            <div id="opPanel" class="slds-form-element__control">
                                                                                <input class="slds-input"
                                                                                       type="text"
                                                                                       maxlength="255"
                                                                                       ng-model="tpaObj.clientRepresentativeTitle"
                                                                                       ng-class="{'errStyle':isClientRepresentativeTitleError,'':!isClientRepresentativeTitleError}"
                                                                                       ng-disabled="requestType == 'view'"
                                                                                       style="width: 100% !important;" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) -->
                                                                            </div>
                                                                        </div>
                                                                    </apex:pageBlockSectionItem>
                                                                    </apex:pageBlockSection>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSection>
                                                    </fieldset>

                                                    <apex:pageBlockSection title="{!$Label.TPA_Client_Access_Type_Group_or_Individual}" html-ng-hide="viewModeStatus == 'VDV' || queueList == null || queueList.length == 0" columns="1" collapsible="false">
                                                        <apex:outputPanel html-class="slds-form-element">
                                                                <label class="slds-form-element__label" style="max-width: calc(32% - 1.25rem) !important;">
                                                                    <abbr class="slds-required" title="required"></abbr> {{labels.TPA_This_TPA_request_will_default_to_the_selected_Client_Group_GroupName_plea}}
                                                                </label>
                                                                <div class="slds-modal__content">
                                                                    <fieldset class="slds-form-element">
                                                                        <div class="slds-form-element__control" style="padding-left: 41px;">
                                                                            <span class="slds-radio slds-m-around_x-small" ng-repeat="v in queueList">
                                                                                <div class="slds-radio">
                                                                                <input type="radio"
                                                                                id="{{v.Id}}"
                                                                                value="{{v.Id}}"
                                                                                name="dptaa"
                                                                                ng-model="tpaObj.selectedQueue" checked="true" ng-disabled="requestType == 'edit' || requestType == 'renew'"/>                              
                                                                                <label class="slds-radio__label" for="{{v.Id}}">
                                                                                    <span class="slds-radio_faux"></span>
                                                                                    <span class="slds-form-element__label" >
                                                                                        {{v.Name}}
                                                                                    </span>
                                                                                </label>
                                                                            </div>
                                                                           
                                                                            </span>                                                      
                                                                        </div>
                                                                    </fieldset>
                                                                    <span class="slds-radio" > 
                                                                        <input id="opPanelYes" ng-model="tpaObj.selectedQueue" value="Individial User" type="radio" ng-disabled="requestType == 'edit' || requestType == 'renew'" />
                                                                        <label class="slds-radio__label" for="opPanelYes" style="padding-left: 50px">
                                                                            <span class="slds-radio_faux"></span>
                                                                            <span class="slds-form-element__label">
                                                                                Individual User
                                                                            </span>
                                                                        </label>
                                                                    </span> 
                                                                </div>
                                                        </apex:outputPanel>
                                                            
                                                    </apex:pageBlockSection>
                                                    
                                                
                                                    <fieldset ng-hide="viewModeStatus == 'VDV'" class="viewModeGreyOut" ng-disabled="requestType == 'view'">
                                                        <apex:pageBlockSection columns="1" collapsible="false" title="{!$Label.TPA_Client_Copies}">
                                                            <apex:outputPanel html-class="slds-form-element">
                                                                <label class="slds-form-element__label" style="max-width: calc(32% - 1.25rem) !important;">
                                                                    <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Send_confirmation_related_emails_to_additional_client_contacts}
                                                                </label>
                                                                <div class="slds-form-element__control">
                                                                    <span class="slds-radio">
                                                                        <input type="radio" id="clientCopiesYes" name="options1" value="Yes" ng-model="isClientCopiesEmail" ng-click="addClientCopyEmail();"/>
                                                                        <label class="slds-radio__label" for="clientCopiesYes">
                                                                            <span class="slds-radio_faux"></span>
                                                                            <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                        </label>
                                                                    </span>
                                                                    <span class="slds-radio">
                                                                        <input type="radio" id="clientCopiesNo" name="options1" value="No" ng-model="isClientCopiesEmail" ng-click="removeAllClientCopies()"/>
                                                                        <label class="slds-radio__label" for="clientCopiesNo">
                                                                            <span class="slds-radio_faux"></span>
                                                                            <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                        </label>
                                                                    </span>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel >
                                                                <div class="zIndexOut" ng-show="isClientCopiesEmail == 'Yes'">
                                                                    <table class="slds-table slds-table_bordered"
                                                                        ng-show="clientCopyEmailList.length > 0">
                                                                        <thead>
                                                                            <tr >
                                                                                <th ng-if="viewModeStatus != 'VDV' && requestType != 'view'"
                                                                                    scope="col">{!$Label.TPA_Action}</th>
                                                                                <th scope="col"><abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Contact_Name}</th>
                                                                                <th scope="col">{!$Label.TPA_Contact_Title}</th>
                                                                                <th scope="col">{!$Label.TPA_Contact_Phone}</th>
                                                                                <th scope="col"><abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Contact_Email}</th>
                                                                                <th ng-if="requestType != 'view' && viewModeStatus != 'VDV'"
                                                                                    scope="col"><abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Confirm_Contact_Email}</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr ng-repeat="obj in clientCopyEmailList" repeat-Done="repeat-Done" repeat-Done-Data="clientCopyEmail">
                                                                                <td ng-if="viewModeStatus != 'VDV' && requestType != 'view'">
                                                                                    <a href="javascript:void(0)" ng-confirm-click="{!$Label.TPA_Are_you_sure_you_want_to_delete_this_Client_Copy_record}" confirmed-click="clientCopyEmailList.splice($index, 1);applyChanges();">{!$Label.TPA_Delete}</a>
                                                                                </td>
                                                                                <td>
                                                                                    <input type="text" maxlength="255" ng-model="obj.Name" class="slds-input" ng-class = "{'errStyle' : obj.ErrorName, '' : !obj.ErrorName}"/>
                                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_enter_the_first_and_last_name_of_the_additional_contact}"/>
                                                                                </td>
                                                                                <td>
                                                                                    <input type="text" maxlength="255" ng-model="obj.Title__c" class="slds-input"/>
                                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_enter_the_contact_s_title_in_the_company_e_g_Director_of_Marketing}"/>
                                                                                </td>
                                                                                <td>
                                                                                    <input type="text" maxlength="40" ng-model="obj.Phone__c" class="slds-input"/>
                                                                                </td>
                                                                                <td>
                                                                                    <input type="text" maxlength="80" ng-model="obj.Email__c" ng-change="obj.IsConfirmRequired = true;" ng-class="{'errStyle':obj.ErrorMsg.trim().length > 0,'':obj.ErrorMsg.trim().length == 0}" class="slds-input"/>
                                                                                    <div class="errorMsg" ng-show="obj.ErrorMsg.trim().length > 0">{{obj.ErrorMsg}}</div>
                                                                                </td>
                                                                                <td ng-if="requestType != 'view' && viewModeStatus != 'VDV'">
                                                                                    <input class="slds-input" type="text"  id = '{{$index}}' ng-model="obj.isAdditionalConfirmEmail" ng-class="{'errStyle':obj.ConfirmErrorMsg.trim().length > 0,'':obj.ConfirmErrorMsg.trim().length > 0}" ng-focus = "disableCopyContactMail({{$index}})"/>
                                                                                    <div class="errorMsg" ng-show="obj.ConfirmErrorMsg.trim().length > 0">{{obj.ConfirmErrorMsg}}</div>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                        <input class="slds-button slds-button_outline-brand slds-m-top_small" type="button" ng-disabled="clientCopyEmailList.length > 0 && isClientCopyEmailEmpty" onclick="return false;" ng-click="addClientCopyEmail();" value="{!$Label.TPA_Add_Contact}" />
                                                                        <div style="transform: translate(106px, calc(0% + -26px));">
                                                                            <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Click_here_to_add_a_new_contact_to_the_distribution_list}"/>
                                                                        </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSection>
                                                    </fieldset>
                                                    <!-- Added by Govind under ER-2689 End -->
                                                    <apex:pageBlockSection title="{!$Label.TPA_Vendor_Contact_Information}"
                                                                        columns="2"
                                                                        collapsible="false"
                                                                        html-ng-show="((tpaObj.vendorLegalName != null
                                                                                        && tpaObj.vendorLegalName.length != 0
                                                                                        )
                                                                                        || (vendorNotInSystem)
                                                                                        )
                                                                                        ||(viewModeStatus == 'CDV' || viewModeStatus == 'NV')"><!-- Modified by Govind under ER-2672 -->
                                                        <apex:pageBlockSectionItem >
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label">
                                                                    <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_Contact_First_Name}
                                                                </label>
                                                                <div id="opPanel" class="slds-form-element__control">
                                                                    <input class="slds-input"
                                                                        type="text"
                                                                        maxlength="255"
                                                                        ng-model="tpaObj.vendorContactFName"
                                                                        ng-class="{'errStyle':isVendorContactFNameError,'':!isVendorContactFNameError}"
                                                                        ng-disabled="requestType == 'view'"
                                                                        style="width: 100% !important;" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) -->
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem >
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label">
                                                                    <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_Contact_Last_Name}
                                                                </label>
                                                                <div class="slds-form-element__control">
                                                                    <input class="slds-input"
                                                                        type="text"
                                                                        maxlength="255"
                                                                        ng-model="tpaObj.vendorContactLName"
                                                                        ng-class="{'errStyle':isVendorContactLNameError,'':!isVendorContactLNameError}"
                                                                        ng-disabled="requestType == 'view'"
                                                                        style="width: 100% !important;" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) -->
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSectionItem>
                                                        <!-- added by Govind 22 Feb TP Procesor functionality start -->
                                                        <apex:pageBlockSectionItem rendered="{!((formDisplayMode == 'VDV'
                                                                                                || $Profile.Name == 'TPA Processor Profile CCP'
                                                                                                || ($Profile.Name == 'US TP Processor Profile CCP' && formDisplayMode == 'CDV')
                                                                                                || isVendorPartVisibleToClient)
                                                                                                )}">
                                                            <div class="slds-form-element" ><!-- Updated by Babita Dadarwal under ER-3552 -->
                                                                <!-- added by Govind 22 Feb TP Procesor functionality end -->
                                                                <label class="slds-form-element__label">
                                                                    <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_Title}
                                                                </label>
                                                                <div class="slds-form-element__control">
                                                                    <input class="slds-input"
                                                                        type="text"
                                                                        maxlength="255"
                                                                        ng-model="tpaObj.vendorTitle"
                                                                        alphanumeric-Only="alphanumeric-Only"
                                                                        ng-class="{'errStyle':isVendorContactTitleError,'greyOut':(requestType == 'view' || isVendorPartVisible),'':!isVendorContactTitleError}"
                                                                        ng-disabled="requestType == 'view' || isVendorPartVisible"
                                                                        style="width: 100% !important;" /> <!-- Modified by C.P.Pandey under ER-1721 --> <!-- Modified by C.P.Pandey under Issue-7246 -->
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSectionItem>
                                                        
                                                        <apex:pageBlockSectionItem >
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label">
                                                                    <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_Contact_Email}
                                                                </label>
                                                                <div class="slds-form-element__control">
                                                                    <input class="slds-input"
                                                                        type="text"
                                                                        maxlength="80"
                                                                        ng-change="tpaObj.isVendorContactEmailEdited = true;validateVendorEmail()"
                                                                        ng-model="tpaObj.vendorContactEmail"
                                                                        ng-class="{'errStyle':isVendorContactEmailError,'':!isVendorContactEmailError}" 
                                                                        ng-blur="acknowledSameVendCompliaAndAuthSignEmail();"
                                                                        ng-disabled="requestType == 'view'"
                                                                        style="width: 100% !important;" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) --> <!-- Added by C.P.Pandey under CR-6878 --><!--Modified by Govind under Issue-7735-->
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSectionItem>
                                                        <!-- added by Govind issue 6336 start -->
                                                        <apex:pageBlockSectionItem dataStyleClass="classAuthSignEmailConf" labelStyleClass="classAuthSignEmailConf" html-ng-hide="requestType == 'view'">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label">
                                                                    <abbr class="slds-required" title="required" ng-hide="(viewModeStatus == 'VDV' || viewModeStatus == 'CDV') && !tpaObj.isVendorContactEmailEdited">* </abbr>{!$Label.TPA_Confirm_Vendor_Contact_Email}
                                                                </label>
                                                                <div class="slds-form-element__control">
                                                                    <input class="slds-input"
                                                                        type="text"
                                                                        id="ConfirmVendorContactEmail"
                                                                        maxlength="80"
                                                                        ng-disabled="(viewModeStatus == 'VDV' || viewModeStatus == 'CDV') && !tpaObj.isVendorContactEmailEdited && requestType == 'view'"
                                                                        ng-model="tpaObj.confirmVendorContactEmail"
                                                                        ng-class="{'errStyle':isConfirmVendorContactEmailError,'':!isConfirmVendorContactEmailError}"
                                                                        style="width: 100% !important;" /><!--Updated By Babita Dadarwal under Issue-08307 (Add ng-disabled) --> <!-- Added by C.P.Pandey under CR-6878 -->
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSectionItem>
                                                        <!-- added by Govind issue 6336 End -->
                                                    </apex:pageBlockSection>
                                                    <!-- updated by Govind Start 25 Jan -->
                                                </fieldset>
                                                
                                                <div ng-if="viewModeStatus == 'VDV' 
                                                            || isVendorPartVisible 
                                                            || isTPProcessor 
                                                            || isVendorPartVisibleToUSTPProcessor">
                                                    <fieldset class="viewModeVendorGreyOut" ng-disabled="requestType == 'view' || isVendorPartVisible">
                                                        <apex:pageBlockSection columns="1" 
                                                                            collapsible="false" 
                                                                            html-style="background-color:white;" 
                                                                            html-ng-show="(tpaObj.vendorLegalName != null 
                                                                                            && tpaObj.vendorLegalName.length != 0) 
                                                                                            || (vendorNotInSystem)">
                                                            <apex:outputPanel html-class="slds-form-element slds-form-element_horizontal">
                                                                <label class="slds-form-element__label" style="text-align:justify;">
                                                                    {!$Label.TPA_Are_you_authorized_to_sign_the_IMS_Data_Use_agreement_to_be_provided}
                                                                </label>
                                                                <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_indicate_if_you_are_authorized_to_sign_the_IMS_Health_Third_Party_Lim}"/>
                                                                <div id="opPanel" class="slds-form-element__control slds-m-left--x-small">
                                                                    <span class="slds-radio">
                                                                        <input id="vendorAuthorizedSignerYes" type="radio" name="vendorAuthorizedSigner" value="Yes" ng-model="tpaObj.isAuthorisedSigner" />
                                                                        <label class="slds-radio__label" for="vendorAuthorizedSignerYes">
                                                                            <span class="slds-radio_faux"></span>
                                                                            <span class="slds-form-element__label">
                                                                                {!$Label.TPA_Yes_statement}
                                                                            </span>
                                                                        </label>
                                                                    </span>
                                                                    <span class="slds-radio">
                                                                        <input id="vendorAuthorizedSignerNo" type="radio" name="vendorAuthorizedSigner" value="No" ng-model="tpaObj.isAuthorisedSigner" />
                                                                        <label class="slds-radio__label" for="vendorAuthorizedSignerNo">
                                                                            <span class="slds-radio_faux"></span>
                                                                            <span class="slds-form-element__label">
                                                                                {!$Label.TPA_No}
                                                                            </span>
                                                                        </label>
                                                                    </span>
                                                                    
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSection>
                                                    </fieldset>
                                                </div>
                                                <!-- Vendor/VendorContact Section End -->

                                                <!-- Authorized Signer Section Start -->
                                                <!-- added by Govind 22 Feb TP Procesor functionality start -->
                                                <div ng-if="(viewModeStatus == 'VDV' || isVendorPartVisible || isTPProcessor || isVendorPartVisibleToUSTPProcessor) &&  tpaObj.isAuthorisedSigner == 'No'"><!-- Added by Babita on 6 july 2015 under issue-07426 -->
                                                    <fieldset class="viewModeVendorGreyOut" ng-disabled="requestType == 'view' || isVendorPartVisible"><!-- Modified by C.P.Pandey under Issue-7246 -->
                                                        <!-- added by Govind 22 Feb TP Procesor functionality end -->
                                                        <apex:pageBlockSection title="{!$Label.TPA_Authorized_Signer_Information}" columns="1" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                            <apex:pageBlockSection columns="1" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                                <label>{!$Label.TPA_Please_enter_the_information_below_for_the_individual_within_your_company_th}</label>
                                                            </apex:pageBlockSection>
                                                            <apex:pageBlockSection columns="2" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_first_name}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.authSignerFName" 
                                                                                ng-class="{'errStyle':isAuthSignerFNameError,'':!isAuthSignerFNameError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_Last_Name}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.authSignerLName" 
                                                                                ng-class="{'errStyle':isAuthSignerLNameError,'':!isAuthSignerLNameError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_Title}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.authSignerTitle" 
                                                                                ng-class="{'errStyle':isAuthSignerTitleError,'':!isAuthSignerTitleError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <!-- updated by Govind 25 Feb issue 6169-6172 start -->
                                                                <div rendered="{!(tpaRequestCallType != 'view')}">
                                                                </div>
                                                                <!-- updated by Govind 25 Feb issue 6169-6172 end -->
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_Email_Address}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="80" ng-model="tpaObj.authSignerEmail" 
                                                                                ng-change="tpaObj.isAuthorisedSignerEmailEdited = true;"
                                                                                ng-class="{'errStyle':isAuthSignerEmailError,'':!isAuthSignerEmailError}" 
                                                                                ng-blur="acknowledSameVendCompliaAndAuthSignEmail();"
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                    <apex:pageBlockSectionItem dataStyleClass="classAuthSignEmailConf" labelStyleClass="classAuthSignEmailConf" rendered="{!(tpaRequestCallType != 'view')}">
                                                                        <div class="slds-form-element">
                                                                            <label class="slds-form-element__label">
                                                                                <abbr class="slds-required" title="required" ng-show="((viewModeStatus == 'VDV' || viewModeStatus == 'CDV') && tpaObj.isAuthorisedSignerEmailEdited) || tpaObj.authSignerEmail == ''">* </abbr>{!$Label.TPA_Confirm_Authorized_Signer_Email_Address}
                                                                            </label>
                                                                            <div id="opPanel" class="slds-form-element__control">
                                                                                <input class="slds-input" type="text" maxlength="80" id="AuthorisedSignerEmailConfirmation" 
                                                                                    ng-model="tpaObj.authSignerEmailConfirmation" 
                                                                                    ng-focus = "disableCopyContactMail('AuthorisedSignerEmailConfirmation')"
                                                                                    ng-class="{'errStyle':isAuthSignerEmailConfirmError,'':!isAuthSignerEmailConfirmError}" 
                                                                                    ng-disabled="((viewModeStatus == 'VDV' || viewModeStatus == 'CDV') && !tpaObj.isAuthorisedSignerEmailEdited && requestType == 'view') || isVendorPartVisible" style="width: 100% !important;"/>
                                                                            </div>
                                                                        </div>
                                                                    </apex:pageBlockSectionItem>
                                                                <tr>
                                                                    <td colspan="4">
                                                                        <span class="panelText messageBox slds-text-body_regular" style="color:#1414FF;border:1px solid black;padding: inherit;padding: 0.2% 1%;text-align: justify;">{!$Label.TPA_Note_if_authorized_signers_email_address_is_entered_the_system_shall_send}</span>
                                                                    </td>
                                                                </tr>
                                                            </apex:pageBlockSection>
                                                        </apex:pageBlockSection>
                                                    </fieldset>
                                                </div>
                                                <!-- Authorized Signer Section End -->
                                                <!-- Vendor TPA Compliance Contact Section Start -->
                                                <div ng-if="(viewModeStatus == 'VDV' || isVendorPartVisible || isTPProcessor || isVendorPartVisibleToUSTPProcessor)">
                                                    <fieldset class="viewModeVendorGreyOut" ng-disabled="requestType == 'view' || isVendorPartVisible">
                                                        <apex:pageBlockSection title="{!$Label.TPA_Vendor_TPA_Compliance_Contact_Information}" columns="1" collapsible="false" html-class="imsheader" html-style="background-color:white;" html-ng-show="(tpaObj.vendorLegalName != null && tpaObj.vendorLegalName.length != 0) || (vendorNotInSystem)">
                                                            <apex:pageBlockSection columns="1" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                                <label>{!$Label.TPA_Please_provide_the_name_and_contact_information_of_the_Vendor_employee_most}</label>
                                                            </apex:pageBlockSection>
                                                            <apex:pageBlockSection columns="2" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_First_Name}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.vendorComplianceFName" 
                                                                                ng-class="{'errStyle':isvendorComplianceFNameError,'':!isvendorComplianceFNameError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Last_Name}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.vendorComplianceLName" 
                                                                                ng-class="{'errStyle':isvendorComplianceLNameError,'':!isvendorComplianceLNameError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Job_Title}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.vendorComplianceTitle" 
                                                                                ng-class="{'errStyle':isvendorComplianceTitleError,'':!isvendorComplianceTitleError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Email}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="80" ng-model="tpaObj.vendorComplianceEmail" 
                                                                                ng-class="{'errStyle':isvendorComplianceEmailError,'':!isvendorComplianceEmailError}" ng-blur="acknowledSameVendCompliaAndAuthSignEmail();"
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Street_Address}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.vendorComplianceStreetAddress" 
                                                                                ng-class="{'errStyle':isvendorComplianceStreetAddressError,'':!isvendorComplianceStreetAddressError}" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_City}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-class="{'errStyle':isvendorComplianceCityError,'':!isvendorComplianceCityError}" 
                                                                                ng-model="tpaObj.vendorComplianceCity" ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Country}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select id="idVendorCountry" ng-change="relateVenComplianceStateCountry();" class="ddVendorCountry slds-select" 
                                                                                    ng-model="tpaObj.vendorComplianceCountry" ng-class="{'errStyle':isvendorComplianceCountryError,'':!isvendorComplianceCountryError}" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : 
                                                                                                v.Default_Value__c for v in mlObj.vendorComplianceCountryList" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_State_Province}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select class="slds-select" id="idVendorState" ng-model="tpaObj.vendorComplianceState" ng-class="{'errStyle':isvendorComplianceStateError,'':!isvendorComplianceStateError}" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : v.Default_Value__c for v in mlObj.relatedVendorComplianceStateList" 
                                                                                    ng-disabled="mlObj.relatedVendorComplianceStateList == null || 
                                                                                                mlObj.relatedVendorComplianceStateList.length <= 1" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Vendor_TPA_Compliance_Contact_Zip_Code}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="20" ng-class="{'errStyle':isvendorComplianceZipCodeError,'':!isvendorComplianceZipCodeError}" 
                                                                                ng-model="tpaObj.vendorComplianceZipCode" ng-disabled="requestType == 'view' || isVendorPartVisible"
                                                                                style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                            </apex:pageBlockSection>
                                                        </apex:pageBlockSection>
                                                    </fieldset>
                                                </div>
                                                <!-- Vendor TPA Compliance Contact Section End -->

                                                <!-- Additional Vendors Section Start -->
                                                <div class="vendSection">
                                                    <fieldset class="viewModeGreyOut" ng-disabled="requestType == 'view'"> <!-- Added by C.P.Pandey under Issue-7060 --><!-- Modified by C.P.Pandey under Issue-7246 -->
                                                        <div ng-show="viewModeStatus == 'CDV' || isUSTPProcessor || viewModeStatus == 'NV' || isTPProcessor">
                                                            <apex:pageBlockSection columns="2" collapsible="false" title="{!$Label.TPA_Additional_Vendors_Client_Response}"  ><!-- Modified by Govind under Issue 8679 -->
                                                                <div ng-if="viewModeStatus != 'VDV'"><!-- Added by Babita on 6 july 2015 under issue-07426 -->
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Will_the_primary_vendor_be_working_with_or_sharing_the_data_with_any_additio}
                                                                        </label>
                                                                        <div class="slds-form-element__control">
                                                                            <span class="slds-radio">
                                                                                <input type="radio"
                                                                                    id="primaryVendorYes"
                                                                                    ng-disabled="requestType == 'view'"
                                                                                    name="additionalVendorTP"
                                                                                    value="Yes"
                                                                                    ng-model="tpaObj.isAdditionalVendorRequiredTP"/>
                                                                                <label class="slds-radio__label" for="primaryVendorYes">
                                                                                    <span class="slds-radio_faux"></span>
                                                                                    <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                                </label>
                                                                            </span>
                                                                            <span class="slds-radio">
                                                                                <input type="radio"
                                                                                    id="primaryVendorNo"
                                                                                    ng-disabled="requestType == 'view'"
                                                                                    name="additionalVendorTP"
                                                                                    value="No"
                                                                                    ng-model="tpaObj.isAdditionalVendorRequiredTP"/>
                                                                                <label class="slds-radio__label" for="primaryVendorNo">
                                                                                    <span class="slds-radio_faux"></span>
                                                                                    <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                                </label>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        <p ng-show="tpaObj.isAdditionalVendorRequiredTP == 'Yes'" class="slds-text-body_regular">{!$Label.TPA_Each_third_party_will_be_treated_as_a_separate_vendor_You_will_need_to_subm} </p>
                                                                    </div>
                                                                </div>
                                                                <!-- added by Govind 22 Feb TP Processor functionality end -->
                                                            </apex:pageBlockSection>
                                                        </div>
                                                        <div ng-show="viewModeStatus == 'VDV' || isUSTPProcessor || isVendorPartVisible || isTPProcessor" >
                                                            <apex:pageBlockSection columns="2" collapsible="false" title="{!$Label.TPA_Additional_Vendors_Vendor_Response}"  html-style="background-color:white;" html-ng-show="(tpaObj.vendorLegalName != null && tpaObj.vendorLegalName.length != 0) || (vendorNotInSystem)"><!-- Modified by Govind under ER-2672 -->
                                                                <div class="slds-form-element">             
                                                                    <label class="slds-form-element__label">
                                                                        <span ng-if="viewModeStatus == 'VDV' || isTPProcessor || isVendorPartVisibleToUSTPProcessor || 
                                                                                    isVendorPartVisible">
                                                                                {!$Label.TPA_As_the_primary_vendor_identified_by_the_client_do_you_intend_to_share_the_I}
                                                                        </span>
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <span class="slds-radio">
                                                                            <input id="addinalVendorRespoYes" type="radio" 
                                                                                    ng-disabled="requestType == 'view' || isVendorPartVisible" name="additionalVendor" 
                                                                                    value="Yes" ng-model="tpaObj.isAdditionalVendorRequired" />
                                                                            <label class="slds-radio__label" for="addinalVendorRespoYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_Yes_statement}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input id="addinalVendorRespoNo" type="radio" 
                                                                                    ng-disabled="requestType == 'view' || isVendorPartVisible" 
                                                                                    name="additionalVendor" value="No" 
                                                                                    ng-click="viewModeStatus == 'VDV' && removeAllAdditionalVendors()" 
                                                                                    ng-model="tpaObj.isAdditionalVendorRequired" />
                                                                            <label class="slds-radio__label" for="addinalVendorRespoNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_No}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                    
                                                                </div>
                                                                <tr ng-if="tpaObj.isAdditionalVendorRequired == 'Yes' && (viewModeStatus == 'VDV' || ((isTPProcessor || (isUSTPProcessor && requestType == 'edit')) && requestType != 'view'))" >
                                                                </tr>
                                                                <tr ng-if="tpaObj.isAdditionalVendorRequired == 'Yes' && (viewModeStatus == 'VDV' || ((isTPProcessor || (isUSTPProcessor && requestType == 'edit')) && requestType != 'view'))" >
                                                                </tr>
                                                            </apex:pageBlockSection>
                                                        </div>
                                                    </fieldset>
                                                    <div class="data2Col" ng-if="viewModeStatus == 'VDV' || isTPProcessor || isVendorPartVisibleToUSTPProcessor || 
                                                                                isVendorPartVisible || (viewModeStatus == 'NV' && (requestType == 'clone' || 
                                                                                requestType == 'renew') && tpaObj.isAdditionalVendorRequired == 'Yes')" 
                                                        ng-show="additionalVendorList.length > 0">

                                                    </div>
                                                </div>
                                                <!-- Additional Vendors Section End -->
                                                <div ng-if="viewModeStatus == 'VDV' || isTPProcessor || isVendorPartVisibleToUSTPProcessor || isVendorPartVisible">
                                                    <fieldset class="viewModeVendorGreyOut" ng-disabled="requestType == 'view' || isVendorPartVisible">
                                                        <apex:pageBlockSection title="{!$Label.TPA_Services_Related_To_IMS_Offerings}" columns="1" collapsible="false" 
                                                                                html-class="imsheader" html-style="background-color:white;margin-top:15px;" 
                                                                                html-ng-show="(tpaObj.vendorLegalName != null && tpaObj.vendorLegalName.length != 0) || 
                                                                                                (vendorNotInSystem)">
                                                            <apex:outputPanel >
                                                                {!$Label.TPA_Does_the_Vendor_have_please_check_all_that_apply}
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" style="max-width: 80%;">
                                                                        {!$Label.TPA_Does_Vendor_have_1_any_products_or_services_which_are_competitive_with_the}
                                                                    </label>
                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_select_if_the_requested_Offering_s_have_any_competitive_services}"/>
                                                                    <div class="slds-form-element__control" style="margin-left: 49%;">
                                                                        <span class="slds-radio">
                                                                            <input id="srvRelatedToIQVIAOffYes" type="radio" name="imsCompetitionServices" value="Yes" 
                                                                            ng-model="tpaObj.competitiveServiceToOfferings"/>
                                                                            <label class="slds-radio__label" for="srvRelatedToIQVIAOffYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_Yes_statement}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input id="srvRelatedToIQVIAOffNo" type="radio" name="imsCompetitionServices" value="No" 
                                                                            ng-model="tpaObj.competitiveServiceToOfferings"/>
                                                                            <label class="slds-radio__label" for="srvRelatedToIQVIAOffNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_No}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" style="max-width: 80%;">
                                                                        {!$Label.TPA_A_competitive_product_or_service_as_described_above_but_is_still_being_des}
                                                                    </label>
                                                                    <div class="slds-form-element__control" style="margin-left: 49%;">
                                                                        <span class="slds-radio">
                                                                            <input id="srvRelatedToIQVIAOffYes2" type="radio" name="imsCompetitionServices2" value="Yes" 
                                                                            ng-model="tpaObj.competitiveServiceToOfferings2"/>
                                                                            <label class="slds-radio__label" for="srvRelatedToIQVIAOffYes2">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_Yes_statement}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input id="srvRelatedToIQVIAOffNo2" type="radio" name="imsCompetitionServices2" value="No" 
                                                                            ng-model="tpaObj.competitiveServiceToOfferings2"/>
                                                                            <label class="slds-radio__label" for="srvRelatedToIQVIAOffNo2">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_No}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" style="max-width: 80%;">
                                                                        {!$Label.TPA_A_product_or_service_that_contains_similar_data_elements_as_the_IQVIA_Data}
                                                                    </label>
                                                                    <div class="slds-form-element__control" style="margin-left: 49%;">
                                                                        <span class="slds-radio">
                                                                            <input id="srvRelatedToIQVIAOffYes3" type="radio" name="imsCompetitionServices3" value="Yes" 
                                                                            ng-model="tpaObj.competitiveServiceToOfferings3"/>
                                                                            <label class="slds-radio__label" for="srvRelatedToIQVIAOffYes3">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_Yes_statement}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input id="srvRelatedToIQVIAOffNo3" type="radio" name="imsCompetitionServices3" value="No" 
                                                                            ng-model="tpaObj.competitiveServiceToOfferings3"/>
                                                                            <label class="slds-radio__label" for="srvRelatedToIQVIAOffNo3">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_No}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSection>
                                                    </fieldset>
                                                </div>
                                                <!-- Vendor Copies Section Start -->
                                                <fieldset style="border:0;padding:0;margin:0;" ng-if="viewModeStatus == 'VDV' || isTPProcessor || isVendorPartVisibleToUSTPProcessor || isVendorPartVisible" class="viewModeGreyOut viewModeVendorGreyOut" ng-disabled="requestType == 'view' || (viewModeStatus == 'CDV' && isVendorPartVisible)">
                                                    <apex:pageBlockSection columns="1" collapsible="false" title="{!$Label.TPA_Additional_Vendor_Contacts}"  html-style="background-color:white;" html-ng-show="(tpaObj.vendorLegalName != null && tpaObj.vendorLegalName.length != 0) || (vendorNotInSystem)"><!-- Modified by govind under ER-2672 -->
                                                        <apex:pageBlockSectionItem >
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" style="max-width: 37%;">
                                                                        {!$Label.TPA_Send_confirmation_related_emails_to_additional_vendor_contacts}
                                                                    </label>
                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_People_added_in_this_section_will_be_included_in_the_email_distribution_list}"/>
                                                                    <div class="slds-form-element__control slds-m-left--x-small" style="margin-left: 6%;">
                                                                        <span class="slds-radio">
                                                                            <input id="addinalVendorYes" type="radio" name="vendorCopyEmail" value="Yes" 
                                                                                    ng-model="isVendorCopiesEmail" ng-click="addVendorCopyEmail();"/>
                                                                            <label class="slds-radio__label" for="addinalVendorYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_Yes_statement}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input id="addinalVendorNo" type="radio" name="vendorCopyEmail" value="No" ng-model="isVendorCopiesEmail" 
                                                                                    ng-click="removeAllVendorCopies()" />
                                                                            <label class="slds-radio__label" for="addinalVendorNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">
                                                                                    {!$Label.TPA_No}
                                                                                </span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                
                                                        </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <div ng-show="isVendorCopiesEmail == 'Yes'">
                                                            <apex:outputPanel >
                                                                <div class="zIndexOut" ng-show="isVendorCopiesEmail == 'Yes'">
                                                                    <table class="slds-table slds-table_bordered"
                                                                        ng-show="vendorCopyEmailList.length > 0">
                                                                        <thead>
                                                                            <tr >
                                                                                <th ng-if="viewModeStatus != 'NV' && requestType != 'view' && !isVendorPartVisible"
                                                                                    scope="col">{!$Label.TPA_Action}</th>
                                                                                <th scope="col"><abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Contact_Name}</th>
                                                                                <th scope="col">{!$Label.TPA_Contact_Title}</th>
                                                                                <th scope="col">{!$Label.TPA_Contact_Phone}</th>
                                                                                <th scope="col"><abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Contact_Email}</th>
                                                                                <th ng-if="requestType != 'view' && viewModeStatus != 'NV'"
                                                                                    scope="col"><abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Confirm_Contact_Email}</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr class="dataRow" ng-repeat="obj in vendorCopyEmailList" repeat-Done="repeat-Done" repeat-Done-Data="vendorCopyEmail" onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" onmouseout="if (window.hiOff){hiOff(this);} " onmouseover="if (window.hiOn){hiOn(this);} ">
                                                                                <td ng-if="viewModeStatus != 'NV' && requestType != 'view' && !isVendorPartVisible">
                                                                                    <a href="javascript:void(0)" ng-confirm-click="{!$Label.TPA_Are_you_sure_you_want_to_delete_this_Vendor_Copy_record}" confirmed-click="vendorCopyEmailList.splice($index, 1);applyChanges();">{!$Label.TPA_Delete}</a>
                                                                                </td>
                                                                                <td>
                                                                                    <input class="slds-input" type="text" maxlength="255" ng-model="obj.Name" ng-class = "{'errStyle' : obj.ErrorName, '' : !obj.ErrorName}" ng-disabled="requestType == 'view' || (viewModeStatus == 'CDV' && isVendorPartVisible)" />
                                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_enter_the_first_and_last_name_of_the_additional_contact}"/>
                                                                                </td>
                                                                                <td>
                                                                                    <input class="slds-input" type="text" maxlength="255" ng-model="obj.Title__c" ng-disabled="requestType == 'view' || (viewModeStatus == 'CDV' && isVendorPartVisible)" />
                                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_enter_the_contact_s_title_in_the_company_e_g_Director_of_Marketing}"/>
                                                                                </td>
                                                                                <td>
                                                                                    <input class="slds-input" type="text" maxlength="40" ng-model="obj.Phone__c" ng-disabled="requestType == 'view' || (viewModeStatus == 'CDV' && isVendorPartVisible)" />
                                                                                </td>
                                                                                <td>
                                                                                    <input class="slds-input" type="text" maxlength="80" ng-model="obj.Email__c" 
                                                                                        ng-change="obj.IsConfirmRequired = true;" 
                                                                                        ng-class="{'errStyle':obj.ErrorMsg.trim().length > 0,'':obj.ErrorMsg.trim().length == 0}" 
                                                                                        ng-disabled="requestType == 'view' || (viewModeStatus == 'CDV' && isVendorPartVisible)" />
                                                                                    <div class="errorMsg" ng-show="obj.ErrorMsg.trim().length > 0">{{obj.ErrorMsg}}</div>
                                                                                </td>
                                                                                <td class="dataCell" ng-if="requestType != 'view' && viewModeStatus != 'NV'">
                                                                                    <input class="slds-input" type="text"  id = '{{$index}}' ng-model="obj.isAdditionalConfirmEmail" 
                                                                                ng-class="{'errStyle':obj.ConfirmErrorMsg.trim().length > 0,'':obj.ConfirmErrorMsg.trim().length > 0}" ng-focus = "disableCopyContactMail({{$index}})" ng-disabled="requestType == 'view' || (viewModeStatus == 'CDV' && isVendorPartVisible)" />
                                                                                    <div class="errorMsg" ng-show="obj.ConfirmErrorMsg.trim().length > 0">{{obj.ConfirmErrorMsg}}</div>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <input class="slds-button slds-button_outline-brand slds-m-top_small" type="button" style="margin-top:10px;" ng-disabled="(vendorCopyEmailList.length > 0 && isVendorCopyEmailEmpty) || requestType == 'view' || (viewModeStatus == 'CDV' && isVendorPartVisible) " onclick="return false;" ng-click="addVendorCopyEmail();" value="{!$Label.TPA_Add_Contact}" />
                                                                    <div style="transform: translate(106px, calc(0% + -26px));">
                                                                        <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Click_here_to_add_a_new_contact_to_the_distribution_list}"/>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </apex:pageBlockSection>
                                                </fieldset>
                                                <!-- Vendor Copies Section End -->
                                                <!-- Added by Babita Dadarwal under ER-1669 End -->
                                            </div>
                                            <hr ng-show="isPrintAction" style="display:none;border:2px solid #10A6F0;"/><!-- Added by C.P.Pandey under ER-2025 -->
                                        </div>
                                        <!-- Vendor Section End -->

                                        <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                                        <div id="tab-default-RDAID"
                                            class="slds-tabs_default__content"
                                            role="tabpanel"
                                            aria-labelledby="tab-default__RDAID">
                                            <!-- Request Details/Offering(s) Section Start -->
                                            <div ng-show="selectedSection == 'RDA' || isPrintAction" style="display:none;">
                                                <div id="msgAlert" style="margin: 0 auto; width:50%;max-width: 75%;display:none;" ng-show="(requestType == 'edit' || requestType == 'renew' || requestType == 'clone') && (objLoadUsesAndAssets.removedUses.length > 0 || objLoadUsesAndAssets.removedOfferings.length > 0)">
                                                    <div id="le-alert" class="alert alert-warn alert-block fade in" style="margin-top: 10px; border: 1px solid #c00; background-color: #ffc;">
                                                        <h5>{!$Label.TPA_The_following_USES_and_or_Data_Offerings_are_no_longer_available}</h5>
                                                        <br />
                                                        <p style="text-decoration:underline;margin-top:5px; font-weight:bold;">{!$Label.TPA_List_of_Uses}:</p>
                                                        <ol ng-show="objLoadUsesAndAssets.removedUses.length > 0">
                                                            <li ng-repeat="(k,v) in objLoadUsesAndAssets.removedUses track by $index"><b>{{v.split(':')[0]}}</b>  under <b>{{v.split(':')[2]}}</b> for  <b>{{v.split(':')[1]}}</b>.</li><!--Modified by Govind under ER-1749--><!-- Modified by C.P.Pandey under Issue-7746 -->
                                                        </ol>
                                                        <p style="text-decoration:underline;margin-top:5px; font-weight:bold;">{!$Label.TPA_List_of_Data_Offerings}:</p>
                                                        <ol ng-show="objLoadUsesAndAssets.removedOfferings.length > 0">
                                                            <li ng-repeat="(k,v) in objLoadUsesAndAssets.removedOfferings track by $index"><b>{{v.split(';')[0]}}</b> under <b>{{v.split(';')[1]}}</b> for <b>{{v.split(';')[2]}}</b>{{v.split(';')[6]}}.</li><!-- Modified by C.P.Pandey under Issue-7746 --><!-- Updated by Babita Dadarwal under Issue-08461 and ER-2593 -->
                                                        </ol>

                                                        <div style="text-align:left;">
                                                            <hr style="margin-top:0px !important;margin-bottom:5px !important;border-top: 1px solid #000 !important;" />
                                                            
                                                            <label style="font-weight:bolder;font-size:13px !important;"><u>{!$Label.TPA_Note}:</u>&nbsp;&nbsp;{!$Label.TPA_Previously_selected_Uses_and_or_Data_Offerings_are_no_longer_valid_please_C}<br />
                                                            </label>
                                                            
                                                        </div>
                                                        <div style="text-align:right;">
                                                            <input type="button" value="OK" ng-click="removeOldUsesOfferings();" />
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <apex:pageBlockSection title="{!$Label.TPA_Project_Dates}" collapsible="false">
                                                    <apex:pageBlockSectionItem >
                                                        <apex:outputPanel layout="block" styleClass="slds-form-element ">
                                                            <label class="slds-form-element__label">
                                                                <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Data_Access_Start_Date}
                                                            </label>
                                                            <div class="slds-form-element__control">
                                                                <div class="requiredInput">
                                                                    <input type="text" style="float:left;" maxlength="255" ng-click="popupAlert('{!$Label.TPA_Click_on_the_calendar_icon_next_to_the_text_box_and_select_the_Date}');" placeholder="{!$Label.TPA_Date_Access_Start_Date}" readonly="readonly" ng-class="{'greyOut':requestType == 'view','':requestType != 'view'}" class="datepicker" id="dataAccessStartDate" /> <!-- Modified by C.P.Pandey under Issue-6885 --><!-- Modified by C.P.Pandey under Issue-7246Updated by Govind ,ER-1940 -->
                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Start_Date_cannot_be_prior_to_today_s_date_and_should_reflect_the_date_that}"/>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem >
                                                        <apex:outputPanel layout="block" styleClass="slds-form-element ">
                                                            <label class="slds-form-element__label">
                                                                <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Data_Access_End_Date}
                                                            </label>
                                                            <div class="slds-form-element__control">
                                                                <div class="requiredInput">
                                                                    <input type="text" maxlength="255" ng-click="popupAlert('{!$Label.TPA_Click_on_the_calendar_icon_next_to_the_text_box_and_select_the_Date}');" placeholder="{!$Label.TPA_Date_Access_End_Date}" readonly="readonly" ng-class="{'greyOut':requestType == 'view','':requestType != 'view'}" class="datepicker" id="dataAccessEndDate" /> <!-- Modified by C.P.Pandey under Issue-6885 --><!-- Modified by C.P.Pandey under Issue-7246,Updated by Govind under ER-1940 -->
                                                                    <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_If_the_project_requires_access_for_less_than_12_months_please_enter_the_exp}"/>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                </apex:pageBlockSection>

                                                <apex:pageBlockSection title="{!$Label.TPA_Large_Third_Party_Access_TPA_Request}" collapsible="false" html-ng-if="isBulkMatrixAccess == true">
                                                    <apex:outputPanel >
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" style="max-width: 37%;">
                                                                {!$Label.TPA_Do_you_need_to_create_a_large_TPA_Request}
                                                            </label>
                                                            <c:VFC_TPA_LightningHelpText cHlpTxt="Select Yes If you want to create a Bulk TPA Request otherwise no"/>
                                                            <div class="slds-form-element__control slds-m-left--x-small" style="margin-left: 6%;">
                                                                <span class="slds-radio">
                                                                    <input id="BulkTPARequestYes" type="radio" name="BulkTPARequest" value="true"
                                                                            ng-model="tpaObj.isBulkRequest" ng-disabled="requestType=='view'" ng-click="bulkSelection('Yes')"/>
                                                                    <label class="slds-radio__label" for="BulkTPARequestYes">
                                                                        <span class="slds-radio_faux"></span>
                                                                        <span class="slds-form-element__label">
                                                                            {!$Label.TPA_Yes_statement}
                                                                        </span>
                                                                    </label>
                                                                </span>
                                                                <span class="slds-radio">
                                                                    <input id="BulkTPARequestNo" type="radio" name="BulkTPARequest" value="false"
                                                                            ng-model="tpaObj.isBulkRequest" ng-disabled="requestType=='view'" ng-click="bulkSelection('No')"/>
                                                                    <label class="slds-radio__label" for="BulkTPARequestNo">
                                                                        <span class="slds-radio_faux"></span>
                                                                        <span class="slds-form-element__label">
                                                                            {!$Label.TPA_No}
                                                                        </span>
                                                                    </label>
                                                                </span>
                                                            </div>
                                                        </div> 
                                                        <div class="slds-form-element" ng-show="(tpaObj.isBulkRequest == 'true' && selectedSection == 'RDA' && requestType!='view' && (requestType != 'renew' && !isRenewedRequest)) || ((requestType == 'renew' || isRenewedRequest) && (tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal' && tpaObj.isBulkRequest == 'true'))">
                                                            <label class="slds-form-element__label" ><b>Download CSV Template</b></label>
                                                            <button class="slds-button slds-button_success"  ng-click="exportCSVTemplate()" onclick="return false;">Download csv</button>
                                                        </div>
                                                        <div class="slds-form-element" ng-show="(tpaObj.isBulkRequest == 'true' && selectedSection == 'RDA' && requestType!='view' && (requestType != 'renew' && !isRenewedRequest)) || ((requestType == 'renew' || isRenewedRequest) && (tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal' && tpaObj.isBulkRequest == 'true'))">
                                                            <label class="slds-form-element__label" ><b>{!$Label.TPA_Upload_CSV_File}</b></label>
                                                            <input class="slds-button slds-button_neutral" type="file" id="uploadFileId" name='file' onchange="showLoading();angular.element(this).scope().validateFile(this.value, ['csv'])" />
                                                        </div>
                                                    </apex:outputPanel>                                                
                                                </apex:pageBlockSection>

                                                <apex:pageBlockSection title="{!$Label.TPA_Filter_IQVIA_Data_Offering_Selections}" columns="1" collapsible="false" html-style="background-color:white;" html-ng-show="(tpaObj.isBulkRequest == 'true' && selectedSection == 'RDA' && requestType!='view' && (requestType != 'renew' && !isRenewedRequest)) || ((requestType == 'renew' || isRenewedRequest) && (tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal' && tpaObj.isBulkRequest == 'true'))">
                                                    <apex:pageBlockSectionItem >  
                                                        <apex:outputPanel >                                                      
                                                            <div class="slds-form-element slds-form-element_horizontal" style="color:black; font-size:12px">
                                                                {!$Label.TPA_Filter_IQVIA_Data_Offering_Selections_under_statement}
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem >  
                                                        <apex:outputPanel >                                                      
                                                            <div class="slds-form-element slds-form-element_horizontal slds-form-element_1-col">
                                                                <label class="slds-form-element__label slds-float_left" ><b>{!$Label.TPA_Filter_by_Country_of_Offering_s}</b></label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container slds-size_1-of-2">
                                                                        <select id="countryMultiSelect" multiple="multiple" >
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem >
                                                        <apex:outputPanel >
                                                            <div class="slds-form-element slds-form-element_horizontal slds-form-element_1-col">
                                                                <label class="slds-form-element__label slds-float_right" ><b>{!$Label.TPA_Filter_by_Offering_Category_s}</b></label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container slds-size_1-of-2">
                                                                        <select id="offeringCateMultiSelect" multiple="multiple" >
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem >
                                                        <div>
                                                            <input type="text" class="slds-input" ng-model="PrimaryOffName" id="PrimaryOffName" placeholder="{!$Label.TPA_text_above_open_text_search_box}" /> <br />
                                                        </div>    
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem >
                                                        <div align="center" draggable="false">
                                                            <button class="slds-button slds-button_brand" ng-click="updateCountrySelections()" ng-disabled="isDisplayButtonDisabled" onclick="return false;">{!$Label.TPA_Display_Filtered_Results_button}</button>
                                                            <!-- <button class="slds-button slds-button_neutral" ng-click="addCloneUse()" onclick="return false;" >ADD USE</button> -->
                                                            <!--<button class="slds-button slds-button_neutral" ng-click="saveSelection()" onclick="return false;" >{!$Label.TPA_Add_Selections_button}</button> -->
                                                            <!--<button class="slds-button slds-button_neutral" onclick="return false;" >EXPORT</button>-->
                                                        </div>
                                                    </apex:pageBlockSectionItem>                                                       
                                                    
                                                </apex:pageBlockSection>
                                                <apex:pageBlockSection title="{!$Label.TPA_SELECT_IQVIA_Data_Offerings_and_Associated_Third_Party_Use_s_header}" columns="1" collapsible="false" html-style="background-color:white;" html-ng-if="(isMatrixUIDisplay == 'true' && tpaObj.isBulkRequest == 'true' && selectedSection == 'RDA' && requestType!='view' && (requestType != 'renew' && !isRenewedRequest)) || ((requestType == 'renew' || isRenewedRequest) && (tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal' && isMatrixUIDisplay == 'true' && tpaObj.isBulkRequest == 'true'))">
                                                    <apex:pageBlockSectionItem >  
                                                        <apex:outputPanel >                                                      
                                                            <div class="slds-form-element slds-form-element_horizontal" style="color:black;font-size:12px">
                                                                {!$Label.TPA_text_under_SELECT_IQVIA_Data_Offerings_and_Associated_TP_Use_s_header}
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem >                                                    
                                                            <div class="table" id='FilterSection'>
                                                                <table class="list slds-table slds-table_bordered slds-table_fixed-layout slds-table_col-bordered" style="margin:10px;">
                                                                    <thead>
                                                                        <tr>
                                                                            <th colspan="4"></th>
                                                                            <th scope="col" class="slds-size--1-of-4 td-fixed-width" style ="text-align:center; border: 2px solid rgb(211,211,211); border-bottom:0">
                                                                                <button class="slds-button slds-button_brand" ng-click="saveSelection()" onclick="return false;">{!$Label.TPA_Save_Selections_button}</button>
                                                                            </th>
                                                                        </tr>
                                                                        <tr class="headerRow">
                                                                            <th scope="col" ng-click="changeSortingOrSortingColumn('country','Country')" class="slds-size--1-of-8 td-fixed-width" style="padding:4% 0">Offering Country<span ng-bind-html-unsafe="ascImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='ascCountry','':sortOrder=='descCountry'}"></span><span ng-bind-html-unsafe="descImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='descCountry','':sortOrder=='ascCountry'}"></span></th>
                                                                            <th scope="col" ng-click="changeSortingOrSortingColumn('offCat','OffCat')" class="slds-size--1-of-5 td-fixed-width" style="padding:4% 0">Offering Category<span ng-bind-html-unsafe="ascImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='ascOffCat','':sortOrder=='descOffCat'}"></span><span ng-bind-html-unsafe="descImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='descOffCat','':sortOrder=='ascOffCat'}"></span></th>
                                                                            <th scope="col" ng-click="changeSortingOrSortingColumn('primOffName','PrimOffName')" style="padding:4% 0">Primary Offering Name<span ng-bind-html-unsafe="ascImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='ascPrimOffName','':sortOrder=='descPrimOffName'}"></span><span ng-bind-html-unsafe="descImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='descPrimOffName','':sortOrder=='ascPrimOffName'}"></span></th>
                                                                            <th scope="col" ng-click="changeSortingOrSortingColumn('secOffName','SecOffName')" style="padding:4% 0">Secondary Offering Name<span ng-bind-html-unsafe="ascImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='ascSecOffName','':sortOrder=='descSecOffName'}"></span><span ng-bind-html-unsafe="descImage" ng-class="{'sortingHighlighterForIcon':sortOrder=='descSecOffName','':sortOrder=='ascSecOffName'}"></span></th>
                                                                            <th data-ng-repeat="(k,v) in displayUseColumn.columns track by $index" 
                                                                                scope="col" class="slds-size--1-of-4 td-fixed-width"
                                                                            ng-show="k==displayUseColumn.selectedColumn" style="padding:1% 0; border-right: 2px solid rgb(211,211,211);border-left: 2px solid rgb(211,211,211)">
                                                                                <div class="slds-cell-wrap">
                                                                                    <abbr class="slds-required" title="required">* </abbr> Use Category <select class="slds-select" ng-options="item.name for item in v.use_Category" ng-model="v.selectedUseCategory" ng-disabled="disableCheckBoxAndDropDown == 'true'"></select>
                                                                                    
                                                                                    <abbr class="slds-required" title="required">* </abbr> Use <select class="slds-select" ng-options="useItem.name for useItem in v.use | filter : useFilter(v.selectedUseCategory.id)" ng-model="v.selectedUse" ng-change="checkUseDuplicacy(v, k);checkOtherUseInfo(v, k)" ng-disabled="disableCheckBoxAndDropDown == 'true'" style="margin-left:50px"></select>
                                                                                    <!-- <button class="slds-button slds-button_outline-brand"  ng-click="addCloneUse($index+1)" onclick="return false;" >Clone Use Selection</button> -->
                                                                                </div>
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody >
                                                                        
                                                                        <tr class="dataRow" ng-repeat="(k,v) in offRowitemsToArray | filter : offeringCountryFilter(selectedCountries,selectOffCategory) | filter : PrimaryOffName | orderBy: columnSortBy : isDescending | myLimitTo : pageSize : currentIndex" onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" onmouseout="if (window.hiOff){hiOff(this);} " onmouseover="if (window.hiOn){hiOn(this);} ">                                                                         
                                                                            <td class="dataCell" ng-class="{'sortingHighlighter':columnSortBy=='country','':columnSortBy!='country'}">
                                                                                {{v.country}}
                                                                            </td>
                                                                            <td class="dataCell" ng-class="{'sortingHighlighter':columnSortBy=='offCat','':columnSortBy!='offCat'}" style="height:50px;">
                                                                                <div style="margin: auto;">
                                                                                    <span class="slds-cell-wrap" >{{v.offCat}}</span>
                                                                                </div>
                                                                            </td>
                                                                            <td class="dataCell" ng-class="{'sortingHighlighter':columnSortBy=='primOffName','':columnSortBy!='primOffName'}" style="height:50px;">
                                                                                <div style="margin: auto;">
                                                                                    <span class="slds-cell-wrap" >{{v.primOffName}}</span>
                                                                                </div>
                                                                            </td>
                                                                            <td class="dataCell" ng-class="{'sortingHighlighter':columnSortBy=='secOffName','':columnSortBy!='secOffName'}" style="height:50px;">
                                                                                <div style="margin: auto;" >
                                                                                    <span class="slds-cell-wrap" >{{v.secOffName}}</span>
                                                                                </div>
                                                                            </td>
                                                                            <td class="dataCell" 
                                                                                data-ng-repeat="(k1,v1) in v.selections"
                                                                                ng-show="k1.split('_')[2]==displayUseColumn.selectedColumn.split('_')[1]" 
                                                                                style="border: 2px solid rgb(211,211,211)!important; border-top:0 !important; border-bottom:0 !important">
                                                                                <div class="slds-checkbox slds-align_absolute-center" >
                                                                                    <input type="checkbox"
                                                                                        class="dasscb noOutline "
                                                                                        id="{{k1}}"
                                                                                        ng-click="collectOtherInfo(v, k1, v1)"
                                                                                        ng-model="v1.isChecked" 
                                                                                        ng-disabled="disableCheckBoxAndDropDown == 'true'"/>
                                                                                    <label class="slds-checkbox__label" for="{{k1}}">
                                                                                        <span class="slds-checkbox_faux"></span>
                                                                                    </label>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th scope="col" class="slds-size--1-of-5 td-fixed-width" style ="text-align:center; border: 2px solid rgb(211,211,211); border-top:0">
                                                                                <button class="slds-button slds-button_brand" ng-click="prevBulkMatrix()" ng-disabled="currentPageNo <= 1" onclick="return false;">Prev</button>
                                                                                Page {{currentPageNo}} of {{Math.ceil(((offRowitemsToArray | filter : offeringCountryFilter(selectedCountries,selectOffCategory) | filter : PrimaryOffName).length)/pageSize)}}
                                                                                <button class="slds-button slds-button_brand" ng-click="nextBulkMatrix()" ng-disabled="currentPageNo >= Math.ceil(((offeringsRow | filter : offeringCountryFilter(selectedCountries,selectOffCategory) | filter : PrimaryOffName).length)/pageSize)" onclick="return false;">Next</button>
                                                                            </th>
                                                                            <th colspan="3"></th>
                                                                            <th scope="col" class="slds-size--1-of-5 td-fixed-width" style ="text-align:center; border: 2px solid rgb(211,211,211); border-top:0">
                                                                                <button class="slds-button slds-button_brand" ng-click="saveSelection()" onclick="return false;">{!$Label.TPA_Save_Selections_button}</button>
                                                                            </th>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>        
                                                            </div>
                                                        <br/>
                                                        </apex:pageBlockSectionItem>
                                                </apex:pageBlockSection>
                                                
                                                <apex:pageblockSection title="{!$Label.TPA_Select_Uses}" columns="1" collapsible="false" html-style="background-color:white;" html-ng-if="(tpaObj.isBulkRequest == 'false' &&  selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal') ) ) )"><!-- Updated by Babita Dadarwal under CR-12675 -->
                                                    <apex:pageBlockSectionItem >
                                                        <a href="javascript:void(0)" ng-click="openCloseTree('purpCategory','use')"> <span class='colLabel' > {{collapseLabelForUseSec}} </span> </a>
                                                        <br/><br/>
                                                        <div class="container tv slds-m-left_large">
                                                            <ul>
                                                                <li ng-repeat="(k,v) in categoryMap | orderBy:'Default_value'"
                                                                    repeat-Done="repeat-Done"
                                                                    repeat-Done-Data="treeLoadCall"><!-- Updated by Babita Dadrwal under ER-1940 on 19 July 2016 -->
                                                                    <a href="javascript:void(0)" class="purpCategory">{{v.value}}</a><!-- Modified by C.P.Pandey under ER-2140 -->
                                                                    <ul ng-repeat="objA in CategoryPurposeMap | filter:categoryPurposeMapFilterFn(v)">
                                                                        <li ng-repeat="objC in objA.value">
                                                                            <span ng-repeat="obj in objC.IMS_TPA_Purpose_Description__r.records | filter:tpaPurposeCategoryFilterFn(v)">
                                                                                <div class="slds-radio">
                                                                                    <input type="radio"
                                                                                        class="purdesc noOutline "
                                                                                        id="{{obj.Id}}"
                                                                                        value="{{objC.Id}}~{{obj.Id}}~{{v.value}}~{{obj.TPA_Purpose_Category__c}}"
                                                                                        name="dpt"
                                                                                        ng-model="selectedTree.PurposeCategoryId"
                                                                                        ng-click="purposeCategoryTreeChange('{{objC.Id}}~{{obj.Id}}~{{v.Default_value}}~{{objC.Primary_Purpose_Name__c}}');" /><!-- Modified by C.P.Pandey under ER-2140 Updated by Babita Dadarwal under ER-1940 -->
                                                                                    <!-- Updated by Babita Dadrwal under ER-1940 on 19 July 2016 Start-->
                                                                                    <label class="slds-radio__label" for="{{obj.Id}}">
                                                                                        <span class="slds-radio_faux"></span>
                                                                                        
                                                                                        <a href="javascript:void(0)">
                                                                                            <span class="slds-form-element__label"
                                                                                                ng-if="mlObj.selectedLanguageField == null || objC[mlObj.selectedLanguageField] == null">
                                                                                                {{objC.Primary_Purpose_Name__c}}
                                                                                            </span>
                                                                                            <span class="slds-form-element__label" ng-if="mlObj.selectedLanguageField != null">
                                                                                                {{objC[mlObj.selectedLanguageField]}}
                                                                                            </span>
                                                                                        </a>

                                                                                        
                                                                                        <a href="javascript:void(0)" ng-if="obj.Use_Definition_file_exist__c == '' || obj.Use_Definition_file_exist__c == false">{{obj.Description__c}}</a>
                                                                                        <span ng-if="obj.Use_Definition_file_exist__c == true">
                                                                                            
                                                                                            <span>&nbsp;&nbsp;&nbsp;&nbsp;{!$Label.TPA_For_more_information_about_this_Use}</span>
                                                                                            <a href="javascript:void(0)" ng-click="openWindow(objC.Primary_Purpose_Name__c, obj.Use_Definition_Page__c)">
                                                                                                <font color="blue"><u>{!$Label.TPA_Click_Here}</u></font>
                                                                                            </a>
                                                                                            
                                                                                        </span>
                                                                                    </label>
                                                                                </div>
                                                                            </span>
                                                                            <span ng-if="objC.Primary_Purpose_Name__c == 'Other'">
                                                                                <div style="vertical-align:top;float:left" class="slds-radio">
                                                                                    <input type="radio"
                                                                                        class="purdesc noOutline"
                                                                                        value="{{v.key}}~{{objC.Primary_Purpose_Name__c}}~{{v.value}}"
                                                                                        id="{{objC.Id}}{{v.key}}POther"
                                                                                        ng-model="selectedTree.OtherDescriptionId"
                                                                                        ng-click="purposeCategoryTreeOtherChange('{{objA.key}}-{{v.key}}-POther');"
                                                                                        name="dpt" />
                                                                                    <label class="slds-radio__label" for="{{objC.Id}}{{v.key}}POther">
                                                                                        <span class="slds-radio_faux"></span>
                                                                                        <a href="javascript:void(0)">
                                                                                            <span class="slds-form-element__label" ng-if="mlObj.selectedLanguageField == null || objC[mlObj.selectedLanguageField] == null">{{objC.Primary_Purpose_Name__c}}</span>
                                                                                            <span class="slds-form-element__label" ng-if="mlObj.selectedLanguageField != null">{{objC[mlObj.selectedLanguageField]}}</span>
                                                                                        </a>
                                                                                    </label>
                                                                                    <!-- Updated by Babita Dadrwal under ER-1940 on 12 Oct 2016 End-->
                                                                                </div>
                                                                                <div>
                                                                                    <textarea class="otherDescUses slds-textarea"
                                                                                            maxlength="255"
                                                                                            style="resize:none; margin-left:0.5em; width: 50% !important;"
                                                                                            rows="2"
                                                                                            cols="30"
                                                                                            id="{{objA.key}}-{{v.key}}-POther"
                                                                                            ng-blur="duplicateInSelectedUses('{{objA.key}}~{{v.key}}~POther~{{v.value}}');"
                                                                                            name="{{v.key}}~{{objC.Id}}"
                                                                                            disabled="disabled">
                                                                                    </textarea> <!--Modified by C.P.Pandey under Issue-7282 -->
                                                                                </div>
                                                                            </span>
                                                                        </li>
                                                                    </ul>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </apex:pageBlockSectionItem>
                                                </apex:pageblockSection>
                                                <!-- Purpose Tree Section End -->
                                                <!-- Country Of Offering Section Start -->
                                                <apex:pageblockSection title="{!$Label.TPA_Country_Region}" columns="2" collapsible="false" html-style="background-color:white;" html-ng-if="(tpaObj.isBulkRequest == 'false' &&  selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal') ) ) )">
                                                    <apex:pageBlockSectionItem >
                                                        <apex:outputPanel layout="block" styleClass="slds-form-element " html-ng-show="(selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest  || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal') ) ) )" style="float:left;"><!-- Updated by Babita Dadarwal under CR-12675 -->
                                                            <label class="slds-form-element__label">
                                                                <abbr class="slds-required" title="required">* </abbr>{{labels.TPA_Country_Region_Label}}
                                                            </label>
                                                            <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Please_select_the_country_from_which_the_desired_offering_s_originate}"/>
                                                            <div class="slds-form-element__control">
                                                                <div class="requiredInput">
                                                                    <select id="ddRegion"
                                                                            ng-model="mlObj.selectedRegion"
                                                                            ng-change="duplicateInSelectedUses(selectedTree.selectedUseKey);generateOfferingTree();"
                                                                            ng-disabled="isUseOffInEditMode"
                                                                            class="slds-input"
                                                                            ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : v.Default_Value__c for v in mlObj.translatedMap[mlObj.selectedLanguageField+'~TPA_Request__c~Picklist~Region__c']">
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                                                </apex:pageblockSection>
                                                <!-- Country Of Offering Section End -->

                                                <!-- Offerings Tree Section Start -->
                                                <apex:pageblockSection title="{!$Label.TPA_Select_Offerings}" columns="1" collapsible="false" html-style="background-color:white;" html-ng-if="(tpaObj.isBulkRequest == 'false' &&  selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest  || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal') ) ) )"><!-- Updated by Babita Dadarwal under CR-12675 -->
                                                    <div ng-show="mlObj.selectedRegion.Default_Value__c != 'None' && (selectedTree.PurposeCategoryId.trim().length != 0 || selectedTree.OtherDescriptionId.trim().length != 0)">
                                                        <a  href="javascript:void(0)" ng-click="openCloseTree('offGeoLevelName','off')"> 
                                                            <span  class="colLabel"> {{collapseLabelForOffSec}} </span> 
                                                        </a>
                                                    </div>
                                                    <br/>
                                                    <div ng-show="mlObj.selectedRegion.Default_Value__c != 'None' && (selectedTree.PurposeCategoryId.trim().length != 0 || selectedTree.OtherDescriptionId.trim().length != 0)" class="container tv assets slds-m-left_large">
                                                        <ul>
                                                            <li ng-repeat="(k,v) in MapofGoeLevels | orderBy:'order'" repeat-Done="repeat-Done" repeat-Done-Data="treeLoadCall">
                                                                <a href="javascript:void(0)" class="offGeoLevelName" >{{v.value}}</a><!-- Modified by C.P.Pandey under ER-2140 -->
                                                                <ul ng-repeat="objA in Cat_DataAssests_Map | filter:categoryPurposeMapFilterFn(v)">
                                                                    <li ng-repeat="objB in objA.value track by $index">
                                                                        <div class="slds-checkbox" ng-if="objB.IMS_Secondary_Data_Assets__r == null">
                                                                            <input style="margin-left:0.3em;"
                                                                                type="checkbox"
                                                                                class="dasscb noOutline"
                                                                                id="{{objB.Id}}"
                                                                                geoLevel="{{v.value}}"
                                                                                priOffringName="{{objB.Asset_Name__c}}"
                                                                                ng-click="assetCheckboxChange(objB); checkIfCountrySelectionBoxAvailable(objB.Geo_Level__c + ':' +objB.Asset_Name__c.toLowerCase() + ':', selectedTree.PurposeCategoryId, objB);disableOnekeyOfferings(objB);"
                                                                                ng-model="objB.isChecked" />
                                                                            <label class="slds-checkbox__label" for="{{objB.Id}}">
                                                                                <span class="slds-checkbox_faux"></span>
                                                                            </label>
                                                                        </div>
                                                                        <a href="javascript:void(0)" style="margin-left:0.3em;" class='offPriName'>
                                                                            <span ng-if="mlObj.selectedLanguageField == null || objB[mlObj.selectedLanguageField] == null">
                                                                                {{objB.Asset_Name__c}}
                                                                                <font ng-if="objB.Asset_Name__c == '{!$Label.TPA_PharMetrics_Plus_Health_Plan_Claims}'"> - Specify if 'full database' or which specific market(s) will be shared: </font></span>
                                                                            <span ng-if="mlObj.selectedLanguageField != null">{{objB[mlObj.selectedLanguageField]}}</span>
                                                                            <span ng-if="objB.Asset_Name__c == 'Managed Care Workbook - New View'">{{tpaSuffixes.manCareWorkBook}}</span>
                                                                            <span ng-if="objB.Asset_Name__c == 'Managed Care Workbook - PBM Plans'">{{tpaSuffixes.manCareWorkBook_PBM}}</span> <!-- Added by Supriya Johari under ER-4038 -->
                                                                            <span ng-if="objB.Asset_Name__c == 'LAAD - Longitudinal Access and Adjudication Data'" ng-bind-html-unsafe="tpaSuffixes.LAAD_suffix"></span> <!-- Added by Supriya Johari under ER-4038 -->
                                                                            <span ng-if="objB.Asset_Name__c == 'Patient Reference File'">{{tpaSuffixes.PatientRefFile_suffix}}</span> <!-- Added by Neha Bansal under CR-11862 -->
                                                                            <span ng-if="objB.Asset_Name__c == 'Payer Companion File' 
                                                                                        || objB.Asset_Name__c == 'Provider Companion File' ">{{tpaSuffixes.Reference_File_Suffix}}</span> <!-- Added by Neha Bansal under CR-12545,CR-12552 -->
                                                                            <span ng-if="objB.Asset_Name__c == 'Nostradata Source of Business (LRx)' 
                                                                                        || objB.Asset_Name__c == 'Longitudinal Patient Diagnosis' 
                                                                                        || objB.Asset_Name__c == 'CH Combined Hos and Ret Profit AU' 
                                                                                        || objB.Asset_Name__c == 'CH-Hospital Profits' 
                                                                                        || objB.Asset_Name__c == 'CH-Other Outlet Profits' " 
                                                                                class="ng-scope ng-binding">
                                                                                Provide Market
                                                                            </span>
                                                                            <span ng-if="objB.Asset_Name__c == 'Medical Device & Supply Audit (MDSA)'">{{tpaSuffixes.MDSA}}</span> <!-- Added by Neha Bansal under ER-4090 -->
                                                                            <span ng-if="objB.Asset_Name__c.indexOf('{!$Label.TPA_STI_Data_Offering_Name}') !== -1">{{tpaSuffixes.StiData_suffix}}</span>
                                                                            <span ng-if="objB.Asset_Name__c == 'CWH NZ Scan data'">{{tpaSuffixes.CWH_NZ_Scan_data_Suffix}}</span>
                                                                        </a>
                                                                        <span style="margin-left: 0.5em;"
                                                                            class="slds-icon_container slds-icon-utility-info"
                                                                            title="{{OfferingSpecificAdditionMap.HoverDescriptions[objB.Asset_Name__c]}}"
                                                                            ng-if="OfferingSpecificAdditionMap.HoverDescriptions[objB.Asset_Name__c]">
                                                                            <svg class="slds-icon slds-icon_xx-small slds-icon-text-default">
                                                                                <use xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info')}"></use>
                                                                            </svg>
                                                                        </span>
                                                                        <span style="margin-left: 0.5em;"
                                                                            class="slds-icon_container slds-icon-utility-info"
                                                                            title="{{OfferingSpecificAdditionMap.HoverDescriptions[objB.Asset_Name__c + '~' + objB.BU__c]}}"
                                                                            ng-if="OfferingSpecificAdditionMap.HoverDescriptions[objB.Asset_Name__c + '~' + objB.BU__c]">
                                                                            <svg class="slds-icon slds-icon_xx-small slds-icon-text-default">
                                                                                <use xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info')}"></use>
                                                                            </svg>
                                                                        </span>
                                                                        <span style="margin-left: 0.5em;"
                                                                              class="slds-icon_container slds-icon-utility-info"
                                                                              title="{{OfferingSpecificAdditionMap.HoverDescriptions['Medpages Data']}}"
                                                                              ng-if="objB.Asset_Name__c.includes('Medpages Data') && OfferingSpecificAdditionMap.HoverDescriptions['Medpages Data']">
                                                                            <svg class="slds-icon slds-icon_xx-small slds-icon-text-default">
                                                                                <use xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info')}"></use>
                                                                            </svg>
                                                                        </span>
                                                                        <span style="margin-left: 0.5em;"
                                                                              class="slds-icon_container slds-icon-utility-info"
                                                                              title="{{OfferingSpecificAdditionMap.HoverDescriptions['Medpages Pro Search']}}"
                                                                              ng-if="objB.Asset_Name__c.includes('Medpages Pro Search') && OfferingSpecificAdditionMap.HoverDescriptions['Medpages Pro Search']">
                                                                            <svg class="slds-icon slds-icon_xx-small slds-icon-text-default">
                                                                                <use xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info')}"></use>
                                                                            </svg>
                                                                        </span>
                                                                        <input type="text" placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                            ng-if="objB.Asset_Name__c == 'APLD Custom Study Name & Project Delivery Date:'"  
                                                                            style="resize:none;margin-left:1.5em;" rows="2" cols="30" 
                                                                            id="idApldStudyName" />
                                                                        <input type="text"  maxlength="255" 
                                                                            ng-if="objB.Asset_Name__c == 'APLD Custom Study Name & Project Delivery Date:'" 
                                                                            style="resize:none;margin-left:0.5em;" rows="2" cols="30" 
                                                                            id="idApldDeliveryDate" 
                                                                            ng-focus = "disableCopyfreeTextOfffields('idApldDeliveryDate')" />
                                                                          
                                                                        <ul ng-if="objB.IMS_Secondary_Data_Assets__r != null">
                                                                            <span style="display:block;position:relative;margin-left:-0.5%;margin-top:0.5%;margin-bottom:0.5%;color:red;" 
                                                                                ng-if="objB.Asset_Name__c == 'APLD Custom Study Name & Project Delivery Date:'" >
                                                                                {!$Label.TPA_Select_one_or_more_of_the_following_assets_that_are_included_in_this_APLD_Cu}
                                                                            </span>
                                                                            <li ng-repeat="objC in objB.IMS_Secondary_Data_Assets__r.records">
                                                                                <div class="slds-checkbox">
                                                                                    <input type="checkbox"
                                                                                        ng-model="objC.isChecked"
                                                                                        class="dasscb noOutline"
                                                                                        id="{{objC.Id}}"
                                                                                        parId = "{{objB.Id}}"
                                                                                        SecName = "{{objC.Secondary_Asset_Name__c}}"
                                                                                        ng-click="secondaryAssetCheckboxChange(objC); checkIfCountrySelectionBoxAvailable(objB.Geo_Level__c + ':' +objB.Asset_Name__c.toLowerCase() + ':' + objC.Secondary_Asset_Name__c.toLowerCase(), selectedTree.PurposeCategoryId, objC);"/>
                                                                                    <label class="slds-checkbox__label" for="{{objC.Id}}">
                                                                                        <span class="slds-checkbox_faux"></span>
                                                                                    </label>
                                                                                </div>
                                                                                <!-- Updated by Babita Dadrwal under ER-1940 on 18 July 2016 Start-->
                                                                                <a href="javascript:void(0)" style="margin-left:0.3em;">
                                                                                    <span ng-if="(mlObj.selectedLanguageField == null || objC[mlObj.selectedLanguageField] == null) ">{{objC.Secondary_Asset_Name__c}}</span>
                                                                                    <span ng-if="objC.Secondary_Asset_Name__c == 'AU Profits'
                                                                                                || objC.Secondary_Asset_Name__c == 'Nostradata LRx - Volume'
                                                                                                || objC.Secondary_Asset_Name__c == 'Nostradata Source of Business (LRx)'
                                                                                                || objC.Secondary_Asset_Name__c == 'AU DDD Hospital Profits'
                                                                                                || objC.Secondary_Asset_Name__c == 'AU Other Outlet Data Profits'
                                                                                                || objC.Secondary_Asset_Name__c == 'Combined Hos and Ret Profit AU'
                                                                                                || objC.Secondary_Asset_Name__c == 'Pharmacy Scan'"
                                                                                        class="ng-scope ng-binding">Provide Market</span> <!--Added by neha under ER-3509 --> <!-- Modified by Neha Bansal CR-12352 -->
                                                                                    <span ng-if="mlObj.selectedLanguageField != null">{{objC[mlObj.selectedLanguageField]}}</span>
                                                                                    <span ng-if="objC.Secondary_Asset_Name__c == 'Xponent PlanTrak'">{{tpaSuffixes.XponentPlanTrak}}</span> <!-- Added by Neha Bansal under ER-4090 -->
                                                                                </a>
                                                                                
                                                                                <span style="margin-left: 0.5em;"
                                                                                    class="slds-icon_container slds-icon-utility-info"
                                                                                    title="{{OfferingSpecificAdditionMap.HoverDescriptions[objC.Secondary_Asset_Name__c]}}"
                                                                                    ng-if="OfferingSpecificAdditionMap.HoverDescriptions[objC.Secondary_Asset_Name__c]">
                                                                                    <svg class="slds-icon slds-icon_xx-small slds-icon-text-default">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info')}"></use>
                                                                                    </svg>
                                                                                </span>
                                                                                 
                                                                                <input type="text"
                                                                                    maxlength="255" placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'BrandImpact Custom Study Name & Project Delivery Date:'"
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2"
                                                                                    cols="30"
                                                                                    disabled="disabled"
                                                                                    id="idBrandImpactStudyName"
                                                                                    class="slds-input" />
                                                                                <input type="text"
                                                                                    maxlength="255"
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'BrandImpact Custom Study Name & Project Delivery Date:'"
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2"
                                                                                    cols="30"
                                                                                    disabled="disabled"
                                                                                    id="idBrandImpactDeliveryDate"
                                                                                    class="slds-input" />
                                                                                
                                                                                <input type="text"
                                                                                    placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'Channel Dynamics Custom Study Name & Project Delivery Date:'"
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2"
                                                                                    cols="30"
                                                                                    disabled="disabled"
                                                                                    id="idChannelDynamicsStudyName"
                                                                                    class="slds-input" /> <!-- Modified By neha bansal under CR-12296 -->
                                                                                <input type="text"
                                                                                    maxlength="255"
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'Channel Dynamics Custom Study Name & Project Delivery Date:'"
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2"
                                                                                    cols="30"
                                                                                    disabled="disabled"
                                                                                    id="idChannelDynamicsDeliveryDate"
                                                                                    ng-focus = "disableCopyfreeTextOfffields('idChannelDynamicsDeliveryDate')"
                                                                                    class="slds-input" /> <!-- Modified By neha bansal under CR-12296 -->

                                                                                <input type="text"
                                                                                    maxlength="255" placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'Data Niche Associates (DNA) Medicaid Data: OutlierView Labeler Codes:'"
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2"
                                                                                    cols="30"
                                                                                    disabled="disabled"
                                                                                    id="idOutlinerLabelCode"
                                                                                    class="slds-input" /> <!-- Modified By Neha Bansal Under CR-11862 -->
                                                                                    <a href="javascript:void(0)">
                                                                                        <span ng-if="objC.Secondary_Asset_Name__c == 'Data Niche Associates (DNA) Medicaid Data: OutlierView Labeler Codes:'">
                                                                                            {{tpaSuffixes.Outliner_suffix}}
                                                                                        </span>
                                                                                    </a>
                                                                                    <span style="margin-left: 0.5em;"
                                                                                            class="slds-icon_container slds-icon-utility-info"
                                                                                            title="Data Periods: provide quarters of data to be accessed, e.g., 1Q2017 - 4Q2017."
                                                                                            ng-if="objC.Secondary_Asset_Name__c == 'Data Niche Associates (DNA) Medicaid Data: OutlierView Labeler Codes:'">
                                                                                        <svg class="slds-icon slds-icon_xx-small slds-icon-text-default">
                                                                                            <use xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#info')}"></use>
                                                                                        </svg>
                                                                                    </span>
                                                                                    <input type="text"
                                                                                        maxlength="255"
                                                                                        ng-if="objC.Secondary_Asset_Name__c == 'Data Niche Associates (DNA) Medicaid Data: OutlierView Labeler Codes:'"
                                                                                        style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                        rows="2"
                                                                                        cols="30"
                                                                                        disabled="disabled"
                                                                                        id="idOutlinerDate"
                                                                                        class="slds-input" /> 

                                                                                
                                                                                <input type="text"
                                                                                    placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'ProVoice Custom Study Name & Project Delivery Date:'"
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2"
                                                                                    cols="30"
                                                                                    disabled="disabled"
                                                                                    id="idProVoiceStudyName"
                                                                                    class="slds-input" />
                                                                                <input type="text"
                                                                                    maxlength="255"
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'ProVoice Custom Study Name & Project Delivery Date:'"
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2"
                                                                                    cols="30"
                                                                                    disabled="disabled"
                                                                                    id="idProVoiceDeliveryDate"
                                                                                    class="slds-input" />
 
                                                                                <input type="text"
                                                                                    placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                                    ng-if="objC.Secondary_Asset_Name__c == 'AU Profits'
                                                                                            || objC.Secondary_Asset_Name__c == 'Nostradata LRx - Volume'
                                                                                            || objC.Secondary_Asset_Name__c == 'Nostradata Source of Business (LRx)'
                                                                                            || objC.Secondary_Asset_Name__c == 'AU DDD Hospital Profits'
                                                                                            || objC.Secondary_Asset_Name__c == 'AU Other Outlet Data Profits'
                                                                                            || objC.Secondary_Asset_Name__c == 'Combined Hos and Ret Profit AU'
                                                                                            || objC.Secondary_Asset_Name__c == 'Pharmacy Scan' "
                                                                                    style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                    rows="2" cols="30"
                                                                                    disabled="disabled"
                                                                                    id="{{ 'id-' + objC.Secondary_Asset_Name__c }}"
                                                                                    class="slds-input" /> 
                                                                                <span ng-if="objC.Secondary_Asset_Name__c == 'STI Data Custom Report Name:'">  [Please populate report name]</span> <input type="text" placeholder="Please populate report name" maxlength="255" ng-if="objC.Secondary_Asset_Name__c == 'STI Data Custom Report Name:'" style="resize:none;margin-left:1.5em;width:202px;" rows="2" cols="30" disabled="disabled" id="idSTIDataCustomReportName" ng-focus = "disableCopyfreeTextOfffields('idSTIDataCustomReportName')"/> <!-- Added by Rajendra Under CR-12737 -->
                                                                                <span ng-repeat="obj in OffCountryMap | filter : offCountriesMapFilterFn(v.value + ':' +objB.Asset_Name__c.toLowerCase().substring(0,14) + ':' + objC.Secondary_Asset_Name__c.toLowerCase()) ">
                                                                                    <button class="btn btn-default countrySel" id="{{  'id-' + v.value + ':' +objB.Asset_Name__c.toLowerCase().substring(0,14) + ':' + objC.Secondary_Asset_Name__c.toLowerCase() }}" disabled = "true" ng-click="showOffCountrySelectionBox(v.value + ':' +objB.Asset_Name__c.toLowerCase() + ':' + objC.Secondary_Asset_Name__c.toLowerCase(), selectedTree.PurposeCategoryId);" onclick="return false;">Select Countries</button>
                                                                                    <span style="color: #000000; margin-top:5px !important;margin-bottom:5px !important;" > {{ filerString( mlObj.selectedMultipleCountryMap[v.value + ':' +objB.Asset_Name__c.toLowerCase().substring(0,14) + ':' + objC.Secondary_Asset_Name__c.toLowerCase()].toString() ); }}
                                                                                    </span>
                                                                                </span>
                                                                                 
                                                                            </li>
                                                                        </ul>
                                                                        <textarea class="otherDescAssets slds-textbox"
                                                                                placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                                ng-if="objB.Asset_Name__c == 'Other'"
                                                                                ng-model="objB.otherDetail"
                                                                                style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                                rows="2"
                                                                                cols="30"
                                                                                id="{{objB.Id}}daOther"
                                                                                name="{{objB.Id}}"
                                                                                disabled="disabled">
                                                                        </textarea>
                                                                        <!-- Added by Govind under ER-2483 Start -->
                                                                         
                                                                        <input type="text"
                                                                            placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                            ng-if="objB.Asset_Name__c == 'RWE Custom Study Name & Project Delivery Date:'"
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2"
                                                                            cols="30"
                                                                            disabled="disabled"
                                                                            id="idRweStudyName"
                                                                            class="slds-input" /> <!-- Modified By neha bansal under CR-12296 -->
                                                                        <input type="text"
                                                                            maxlength="255"
                                                                            ng-if="objB.Asset_Name__c == 'RWE Custom Study Name & Project Delivery Date:'"
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2"
                                                                            cols="30"
                                                                            disabled="disabled"
                                                                            id="idRweDeliveryDate"
                                                                            ng-focus = "disableCopyfreeTextOfffields('idRweDeliveryDate')"
                                                                            class="slds-input" /> <!-- Modified By neha bansal under CR-12296 -->
 
                                                                      
                                                                        <input type="text"
                                                                            placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                            ng-if="objB.Asset_Name__c == lbConsumerProfile"
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2"
                                                                            cols="30"
                                                                            disabled="disabled"
                                                                            id="idConsumerStudyName"
                                                                            class="slds-input" /> 
                                                                        <input type="text"
                                                                            maxlength="255"
                                                                            ng-if="objB.Asset_Name__c == lbConsumerProfile"
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2"
                                                                            cols="30"
                                                                            disabled="disabled"
                                                                            id="idConsumerDeliveryDate"
                                                                            ng-focus = "disableCopyfreeTextOfffields('idConsumerDeliveryDate')"
                                                                            class="slds-input" /> 
                                                                         
                                                                        <input type="text"
                                                                            placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                            ng-if="objB.Asset_Name__c == lbROI"
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2"
                                                                            cols="30"
                                                                            disabled="disabled"
                                                                            id="idROIStudyName"
                                                                            class="slds-input" /> 
                                                                        <input type="text"
                                                                            maxlength="255"
                                                                            ng-if="objB.Asset_Name__c == lbROI"
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2" cols="30" disabled="disabled"
                                                                            id="idROIDeliveryDate"
                                                                            ng-focus = "disableCopyfreeTextOfffields('idROIDeliveryDate')"
                                                                            class="slds-input" />
                                                                        <input type="text"
                                                                            placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                            ng-if="objB.Asset_Name__c == 'Customized IQVIA Data - Specify name of Customized Data will be shared:' && objB.Geo_Level__c == 'National'  "
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2" cols="30" disabled="disabled"
                                                                            id="idCustomizedData"
                                                                            class="slds-input" />
                                                                        <input type="text"
                                                                            placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                            ng-if="objB.Asset_Name__c == 'Customized IQVIA Data - Specify name of Customized Data will be shared:' && objB.Geo_Level__c == 'Sub-National' "
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2" cols="30" disabled="disabled"
                                                                            id="idCustomizedDataSubNat"
                                                                            class="slds-input" />
                                                                         
                                                                        
                                                                        <input type="text"
                                                                            placeholder="{!$Label.TPA_max_char_limit_is_255}" 
                                                                            ng-if="objB.Asset_Name__c == 'Nostradata Source of Business (LRx)'
                                                                                    || objB.Asset_Name__c == 'Longitudinal Patient Diagnosis'
                                                                                    ||objB.Asset_Name__c == 'CH Combined Hos and Ret Profit AU'
                                                                                    || objB.Asset_Name__c == 'CH-Hospital Profits'
                                                                                    || objB.Asset_Name__c == 'CH-Other Outlet Profits'
                                                                                    || objB.Asset_Name__c == 'CH-Retail Profits'
                                                                                    || objB.Asset_Name__c == '{!$Label.TPA_PharMetrics_Plus_Health_Plan_Claims}'
                                                                                    || objB.Asset_Name__c == 'LAAD - Longitudinal Access and Adjudication Data'
                                                                                    || objB.Asset_Name__c == 'Patient Reference File'
                                                                                    || objB.Asset_Name__c == 'Provider Companion File' 
                                                                                    || objB.Asset_Name__c == 'Payer Companion File'
                                                                                    || objB.Asset_Name__c == 'CWH NZ Scan data'"
                                                                            style="resize:none;margin-left:0.5em;width: 20% !important;"
                                                                            rows="2"
                                                                            cols="30"
                                                                            disabled="disabled"
                                                                            id="{{ 'id-' + objB.Asset_Name__c }}"
                                                                            class="slds-input" /> <!--Modified by neha under ER-3738 ends --> <!--Modified by Neha Bansal under CR-11862, CR-12296  -->
                                                                        <!--Added by neha under ER-3509 ends -->
                                                                        <!-- Commented by Rajendra under CR-12737 --><!--<input type="text" maxlength="255" ng-if="objB.Asset_Name__c.indexOf('{!$Label.TPA_STI_Data_Offering_Name}') !== -1" style="resize:none;margin-left:0.5em;" rows="2" cols="30" disabled="disabled" id="idStiData" ng-focus="disableCopyfreeTextOfffields('idStiData')" placeholder="Please populate report name"> </input> -->
                                                                        <span ng-repeat="obj in OffCountryMap | filter : offCountriesMapFilterFn(v.value + ':' +objB.Asset_Name__c.toLowerCase().substring(0,14) + ':') ">
                                                                            <button class="btn btn-default countrySel" id="{{ 'id-' +  v.value + ':' +objB.Asset_Name__c.toLowerCase().substring(0,14) + ':' }}"  disabled = "true" ng-click="showOffCountrySelectionBox(v.value + ':' +objB.Asset_Name__c.toLowerCase() + ':', selectedTree.PurposeCategoryId);" onclick="return false;">Select Countries</button>
                                                                            <span style="color: #000000; margin-top:5px !important;margin-bottom:5px !important;" > {{ filerString( mlObj.selectedMultipleCountryMap[v.value + ':' +objB.Asset_Name__c.toLowerCase().substring(0,14) + ':'].toString() ); }}
                                                                            </span>
                                                                        </span>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </div>

                                                    <div class="overlayBack" ng-show="mlObj.showOffCountrySelOption"></div>
                                                    <div class="overlayContentOuter" ng-show="mlObj.showOffCountrySelOption">
                                                        <div class="overlayContentInner">
                                                            <div class="multipleCountrySel">
                                                                Will you be sharing the same licensed offering from other countries for this permitted use? If so, please select all the intended countries below
                                                            </div>
                                                            <div class="ddoneKeyDataCountry" multiple="multiple">
                                                            </div>
                                                            <div class="overlayButtons">
                                                                <button ng-click="saveOffCountrySelectionBox(mlObj.geoLevelOffCombinationVal);" onclick="return false;">Save Selected Countries</button>
                                                                <button ng-click="mlObj.showOffCountrySelOption = false;" onclick="return false;">Cancel</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:pageblockSection>
                                                <!-- Offerings Tree Section End -->
                                                
                                                <apex:pageblockSection title="{!$Label.TPA_Selected_Uses_and_Offerings}" collapsible="false" columns="1" html-style="background-color:white;">
                                                </apex:pageblockSection>
                                                <div class="slds-form-element slds-form-element_horizontal" style="color:black;font-size:12px" ng-if="(tpaObj.isBulkRequest == 'true' && selectedSection == 'RDA' && requestType!='view' && (requestType != 'renew' && !isRenewedRequest)) || ((requestType == 'renew' || isRenewedRequest) && (tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal' && tpaObj.isBulkRequest == 'true'))">
                                                    <p>{!$Label.TPA_Description_Under_Selected_Permitted_Uses_and_Offerings_Line_1}</p>
                                                    <p>{!$Label.TPA_Description_Under_Selected_Permitted_Uses_and_Offerings_Line_2}</p>
                                                    <p>{!$Label.TPA_Description_Under_Selected_Permitted_Uses_and_Offerings_Line_3}</p>               
                                                </div>
                                                <div class="slds-form-element slds-form-element_horizontal" ng-if="((requestType=='view' || requestType=='edit') && isRenewedorModifiedRenewed != null && (isRenewedorModifiedRenewed =='Modified Renewal' || isRenewedorModifiedRenewed =='Renewed')) || (selectedSection == 'RDA' && requestType!='view' && requestType == 'renew' && !isRenewedRequest)">
                                                    <div class="slds-form-element slds-form-element_horizontal" style="margin-left: 10px;margin-top:10px;">
                                                        <label ><b><span style="color: orange !important;font-size: 15px;">{!$Label.TPA_Confirm_the_action_you_wish_to_take_with_this_renewal}  </span> </b></label>
                                                    </div>
                                                </div>
                                                <apex:pageblockSection collapsible="false" columns="2" html-style="background-color:white;">
                                                    <apex:pageBlockSectionItem html-ng-if="((requestType=='view' || requestType=='edit') && isRenewedorModifiedRenewed != null && (isRenewedorModifiedRenewed =='Modified Renewal' || isRenewedorModifiedRenewed =='Renewed')) || (selectedSection == 'RDA' && requestType!='view' && requestType == 'renew' && !isRenewedRequest)">
                                                        <apex:outputPanel layout="block" styleClass="slds-form-element ">
                                                            <button id = "modifiedRenewButton"
                                                                    class="slds-button slds-button_outline-brand" 
                                                                    onclick="return false;" 
                                                                    ng-disabled = "(requestType=='view' && isRenewedorModifiedRenewed != null)"
                                                                    ng-show="((requestType=='view' || requestType=='edit') && isRenewedorModifiedRenewed != null ) || (selectedSection == 'RDA' && requestType!='view' && requestType == 'renew' && !isRenewedRequest)"
                                                                    ng-click="popupAlert('{!$Label.TPA_Edit_Delete_option_available_now_to_add_edit_delete_selected_offerings}');isOfferingEditPopupEnable();">
                                                                <b>{!$Label.TPA_Modified_Renewal_I_Need_to_Make_Some_Changes}</b>
                                                            </button>
                                                            <span style="height: 20px;margin-right:50px;" ng-show="((requestType=='view' || requestType=='edit') && isRenewedorModifiedRenewed != null ) || (selectedSection == 'RDA' && requestType!='view' && requestType == 'renew' && !isRenewedRequest)">
                                                                <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Click_this_button_to_Add_Edit_Delete_the_selected_offerings}"/>
                                                            </span>
                                                            <button id = "renewedButton"
                                                                    class="slds-button slds-button_outline-brand" 
                                                                    onclick="return false;"
                                                                    ng-disabled = "(requestType=='view' && isRenewedorModifiedRenewed != null) || (requestType=='edit' && isRenewedorModifiedRenewed != null && isRenewedorModifiedRenewed =='Modified Renewal')"
                                                                    ng-show="((requestType=='view' || requestType=='edit') && isRenewedorModifiedRenewed != null ) || (selectedSection == 'RDA' && requestType!='view' && requestType == 'renew' && !isRenewedRequest)"
                                                                    ng-click="isOfferingEditDisable();">
                                                                <b>{!$Label.TPA_Renew_No_Use_s_or_Offering_s_Changes}</b>
                                                            </button>
                                                            <span style="height: 20px;margin-left:3px;" ng-show="((requestType=='view' || requestType=='edit') && isRenewedorModifiedRenewed != null) || (selectedSection == 'RDA' && requestType!='view' && requestType == 'renew' && !isRenewedRequest)">
                                                                <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Click_this_button_if_no_change_required_in_selected_offerings}"/>
                                                            </span>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                </apex:pageblockSection>
                                                    
                                                <apex:pageblockSection collapsible="false" columns="1" id="pbssrl" html-style="background-color:white;">
                                                    <button class="slds-button slds-button_brand" 
                                                        onclick="return false;"
                                                        ng-if="(tpaObj.isBulkRequest == 'true' && selectedSection == 'RDA' && requestType!='view' && (requestType != 'renew' && !isRenewedRequest)) || ((requestType == 'renew' || isRenewedRequest) && (tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal' && tpaObj.isBulkRequest == 'true'))"
                                                        ng-click="addCloneUse()">
                                                        <b>{!$Label.TPA_Add_New_Use_Offering_Combination}</b>
                                                    </button>
                                                    <button class="slds-button slds-button_brand" 
                                                        onclick="return false;"
                                                        ng-if="!isObjectEmpty(SelectedDescMap) && (tpaObj.isBulkRequest != 'true') &&(selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal')))) "
                                                        ng-click="openCloneUsesPopup()">
                                                        <b>{!$Label.TPA_Clone_Use_Button}</b>
                                                    </button>
                                                    <a href = '/servlet/servlet.FileDownload?file={!cloneUseGuide}'
                                                       target="_blank"
                                                        ng-if="!isObjectEmpty(SelectedDescMap) && (tpaObj.isBulkRequest != 'true') &&(selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal')))) ">
                                                        {!$Label.TPA_Clone_Use_Link}                                                    
                                                    </a>
                                                    <table class="list" style="margin-bottom:10px;" ng-if="!isObjectEmpty(SelectedDescMap)">
                                                        <tr class="headerRow">
                                                            <th ng-show="(selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal')  ) ) ) ">{!$Label.TPA_Action}</th><!-- Updated by Babita Dadarwal under CR-12675 -->
                                                            <th style="min-width:125px;" ng-class="{'sortingHighlighter':(columnsToSortBy != null && columnsToSortBy[0] =='translatedCategoryName'),'':(columnsToSortBy != null && columnsToSortBy[0] !='translatedCategoryName')}" ng-click="changeSortingOrSortingColumnForSelectedUseOff('translatedCategoryName')">
                                                                {!$Label.TPA_Category_Name}
                                                                <span ng-bind-html-unsafe="ascImage" ng-show="sortOrderForSelected !='asctranslatedCategoryName' && sortOrderForSelected !='desctranslatedCategoryName'"></span>
                                                                <span ng-show="sortOrderForSelected=='asctranslatedCategoryName'" >&#x25B2;</span>
                                                                <span ng-show="sortOrderForSelected=='desctranslatedCategoryName'">&#x25BC;</span>
                                                            </th>
                                                            <th style="min-width:135px;" ng-class="{'sortingHighlighter':(columnsToSortBy != null && columnsToSortBy[0] =='translatedPurposeName'),'':(columnsToSortBy != null && columnsToSortBy[0] !='translatedPurposeName')}" ng-click="changeSortingOrSortingColumnForSelectedUseOff('translatedPurposeName')">
                                                                {!$Label.TPA_Use_Name}
                                                                <span ng-bind-html-unsafe="ascImage" ng-show="sortOrderForSelected !='asctranslatedPurposeName' && sortOrderForSelected !='desctranslatedPurposeName'"></span>
                                                                <span ng-show="sortOrderForSelected=='asctranslatedPurposeName'" >&#x25B2;</span>
                                                                <span ng-show="sortOrderForSelected=='desctranslatedPurposeName'">&#x25BC;</span>
                                                            </th>
                                                            <th style="min-width:115px;" ng-class="{'sortingHighlighter':(columnsToSortBy != null && columnsToSortBy[0] =='translatedOfferingCategoryName'),'':(columnsToSortBy != null && columnsToSortBy[0] !='translatedOfferingCategoryName')}" ng-click="changeSortingOrSortingColumnForSelectedUseOff('translatedOfferingCategoryName')">
                                                                {!$Label.TPA_Offering_Category_Name}
                                                                <span ng-bind-html-unsafe="ascImage" ng-show="sortOrderForSelected !='asctranslatedOfferingCategoryName' && sortOrderForSelected !='desctranslatedOfferingCategoryName'"></span>
                                                                <span ng-show="sortOrderForSelected=='asctranslatedOfferingCategoryName'" >&#x25B2;</span>
                                                                <span ng-show="sortOrderForSelected=='desctranslatedOfferingCategoryName'">&#x25BC;</span>
                                                            </th>
                                                            <th>{!$Label.TPA_Offerings}</th>
                                                            <th style="min-width:100px;" ng-class="{'sortingHighlighter':(columnsToSortBy != null && columnsToSortBy[0] =='country'),'':(columnsToSortBy != null && columnsToSortBy[0] !='country')}"  ng-click="changeSortingOrSortingColumnForSelectedUseOff('country')">
                                                                {!$Label.TPA_Region}
                                                                <span ng-bind-html-unsafe="ascImage" ng-show="sortOrderForSelected !='asccountry' && sortOrderForSelected !='desccountry'"></span>
                                                                <span ng-show="sortOrderForSelected=='asccountry'" >&#x25B2;</span>
                                                                <span ng-show="sortOrderForSelected=='desccountry'">&#x25BC;</span>
                                                            </th>
                                                        </tr>
                                                        <tr class="dataRow" ng-repeat="(k,v) in SelectedDescMap | toArray | orderBy : columnsToSortBy : isDescendingForSelected " onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" onmouseout="if (window.hiOff){hiOff(this);} " onmouseover="if (window.hiOn){hiOn(this);} ">
                                                            <td ng-show="(selectedSection == 'RDA' && requestType!='view') && ((requestType != 'renew' && !isRenewedRequest)  || ((requestType == 'renew' || isRenewedRequest || isUSTPProcessor || isTPProcessor) && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal') ) ) ) "><!-- Updated by Babita Dadarwal under CR-12675 -->
                                                                <a href="javascript:void(0)" ng-show="tpaObj.isBulkRequest == 'true'" style="text-decoration:underline;" ng-click="viewBulkUseOfferingSelection(v);movetoFilterSection();">{!$Label.TPA_View}</a>
                                                                <span style="color:#999;" ng-show="tpaObj.isBulkRequest == 'true' && !isOldUsesOfferingsExisted && !isUseOffInEditMode"> | </span>
                                                                <a href="javascript:void(0)" ng-show="tpaObj.isBulkRequest == 'true'" style="text-decoration:underline;" ng-click="addCloneUse(v);movetoFilterSection();">{!$Label.TPA_Clone}</a>
                                                                <span style="color:#999;" ng-show="tpaObj.isBulkRequest == 'true' && !isOldUsesOfferingsExisted && !isUseOffInEditMode"> | </span>
                                                                <a href="javascript:void(0)" ng-show="tpaObj.isBulkRequest == 'false' && !isOldUsesOfferingsExisted" style="text-decoration:underline;" ng-click="editUseOfferingSelection(v);">{!$Label.TPA_Edit}</a>
                                                                <span style="color:#999;" ng-show="tpaObj.isBulkRequest == 'false' && !isOldUsesOfferingsExisted && !isUseOffInEditMode"> | </span>
                                                                <a href="javascript:void(0)" ng-show="tpaObj.isBulkRequest == 'true' && !isOldUsesOfferingsExisted" style="text-decoration:underline;" ng-click="editBulkUseOfferingSelection(v);movetoFilterSection();">{!$Label.TPA_Edit}</a>
                                                                <span style="color:#999;" ng-show="tpaObj.isBulkRequest == 'true' && !isOldUsesOfferingsExisted && !isUseOffInEditMode"> | </span>
                                                                <a href="javascript:void(0)" ng-show="tpaObj.isBulkRequest == 'false' && !isUseOffInEditMode" style="text-decoration:underline;" ng-confirm-click="{!$Label.TPA_Are_you_sure_you_want_to_delete_this_Use_Offering_record}" confirmed-click="deleteSelectedPurposes(v);">{!$Label.TPA_Delete}</a><!-- Added by C.P.Pandey under ER-2140 -->
                                                                <a href="javascript:void(0)" ng-show="tpaObj.isBulkRequest == 'true' && !isUseOffInEditMode" style="text-decoration:underline;" ng-confirm-click="{!$Label.TPA_SELECT_IQVIA_Data_Offerings_and_Associated_Third_Party_Use_s_delete}" confirmed-click="deleteSelectedPurposes(v);">{!$Label.TPA_Delete}</a>
                                                            </td>
                                                            <td class="dataCell" >
                                                                {{v.translatedCategoryName}}<!-- Modified by Babita Dadarwal under ER-1940 on 20 July 2016  -->
                                                            </td>
                                                            <td class="dataCell" >
                                                                <a href="javascript:void(0);" style="text-decoration:underline;" ng-click="jsshowDescription('desDetail{{v.key}}', v.selectDes, v.isUseDefinitionfileExist, v.purposeName, v.useDefinitionPage)">{{v.translatedPurposeName}}</a><!-- Modified by Babita Dadarwal under ER-1940 on 20 July 2016  -->
                                                                <div id="desDetail{{v.key}}" style="word-wrap: break-word;max-width:350px">
                                                                </div>
                                                            </td>
                                                            <td class="dataCell" >{{v.translatedOfferingCategoryName}}</td>
                                                            <td class="dataCell">
                                                                <a href="javascript:void(0);" style="text-decoration:underline;" ng-click="v.assetDetails = true;" ng-if="requestType != 'view'">{{v.translatedDataAsset}}</a><!-- Modified by Babita Dadarwal under ER-1940 on 20 July 2016  -->
                                                                <a href="javascript:void(0);" style="text-decoration:underline;" ng-click="v.assetDetails = true;" ng-if="requestType == 'view'">{{v.translatedDataAssetsInViewMode}}</a><!-- Modified by Babita Dadarwal under ER-1940 on 20 July 2016  -->
                                                                <div ng-show="v.assetDetails" style="word-wrap: break-word;max-width:350px;width:auto">
                                                                    {{v.selectdataAssDetails}}
                                                                </div>
                                                            </td>
                                                            <td class="dataCell">
                                                                {{v.country}}
                                                            </td>
                                                        </tr>
                                                        <tr class="dataRow" ng-repeat="(k,v) in oldUseOfferingList" onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" onmouseout="if (window.hiOff){hiOff(this);} " onmouseover="if (window.hiOn){hiOn(this);} ">
                                                            <td ng-hide="requestType == 'view'"><a href="javascript:void(0)" style="text-decoration:underline;" ng-confirm-click="{!$Label.TPA_Are_you_sure_you_want_to_delete_this_Use_Offering_record}" confirmed-click="oldUseOfferingList.splice($index, 1);applyChanges();">Delete</a></td>
                                                            <td class="dataCell">
                                                                {{v.categoryName}}
                                                            </td>
                                                            <td class="dataCell">
                                                                <a href="javascript:void(0);" style="text-decoration:underline;" ng-click="">{{v.useName}}</a>
                                                            </td>
                                                            <td class="dataCell">
                                                                {{v.translatedOfferingCategoryName}}
                                                                
                                                            </td>
                                                            <td class="dataCell">
                                                                <a href="javascript:void(0);" style="text-decoration:underline;" ng-click="">{{v.offerings}}</a>
                                                            </td>
                                                            <td class="dataCell">
                                                                {{v.region}}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </apex:pageblockSection>

                                                <div ng-show="(tpaObj.isBulkRequest == 'false' && selectedSection == 'RDA' && requestType!='view')" style="display:none;" class="slds-align--absolute-center"> 
                                                    <button  style="color: red !important;" 
                                                        class="slds-button slds-button_outline-brand"
                                                        ng-if="(!isUseOffInEditMode && requestType != 'renew' && !isRenewedRequest) || (!isUseOffInEditMode && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal') || isUSTPProcessor || isTPProcessor))"
                                                        ng-disabled="mlObj.selectedRegion.Default_Value__c == '--None--'" 
                                                        onclick="return false;" 
                                                        ng-click="addUses();">
                                                            {!$Label.TPA_Add_Selection}
                                                    </button>
                                                    <!-- Updated by Babita Dadarwal under CR-12675 -->
                                                    <span ng-if="(!isUseOffInEditMode && requestType != 'renew' && !isRenewedRequest) || (!isUseOffInEditMode && tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal')" style="height: 20px;"><!-- Updated by Babita Dadarwal under CR-12675 -->
                                                        <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Click_here_to_save_the_selected_Purpose_Use_and_Offering_s_to_the_TPA_req}"/>
                                                    </span>
                                                    
                                                    <button style="color: red !important;" 
                                                            class="slds-button slds-button_outline-brand"
                                                            ng-if="(isUseOffInEditMode && requestType != 'renew' && !isRenewedRequest) || (isUseOffInEditMode && ((tpaObj.isRenewedReqUseandOfferingChanged != null && tpaObj.isRenewedReqUseandOfferingChanged == 'Modified Renewal') || isUSTPProcessor || isTPProcessor))"
                                                            ng-disabled="mlObj.selectedRegion.Default_Value__c == '--None--'" 
                                                            onclick="return false;" 
                                                            ng-click="updateUseOff();">
                                                        {!$Label.TPA_Update_Selection}
                                                    </button>
                                                </div>
                                                <!-- Changes Under ticket 4069 -->
                                                <apex:pageBlockSection columns="1" title="{!$Label.TPA_Time_Period_Covered_by_IMS_Data}" collapsible="false" html-ng-show="!isOnlyReferenceDataCatSelected">
                                                    <apex:pageBlockSection columns="1">
                                                        <apex:pageBlockSectionItem dataStyle="padding-left: 7px;" >   
                                                            <div>
                                                                <p >{!$Label.TPA_Data_Time_Periods_are_subject_to_Client}</p>
                                                                <ul style="padding-left: 15px; list-style:outside;">
                                                                    <li>{!$Label.TPA_A_valid_license_includes_a_current_contract}</li>
                                                                    <li>{!$Label.TPA_If_the_dates_include_any_future_time_periods_then_there_must_be_a_contract}</li>
                                                                </ul>
                                                            </div>
                                                        </apex:pageBlockSectionItem>
                                                    </apex:pageBlockSection>
                                                    <apex:pageBlockSection columns="2">
                                                        <apex:pageBlockSectionItem dataStyle="padding-bottom: 0;padding-left: 1px;">
                                                            <apex:outputPanel layout="block" styleClass="slds-form-element " style="margin-bottom: 0;">
                                                                <label class="slds-form-element__label">
                                                                    <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Data_Period_Start_Date}
                                                                </label>
                                                                <div class="slds-form-element__control ">
                                                                    <div class="requiredInput"> 
                                                                        <input type="text" ng-click="popupAlert('{!$Label.TPA_Click_on_the_calendar_icon_next_to_the_text_box_and_select_the_Date}');" placeholder="{!$Label.TPA_Date_Period_Start_Date}" readonly="readonly" ng-class="{'greyOut':requestType == 'view','':requestType != 'view'}" class="datepicker" id="dataPeriodStartDate" /> <!-- Modified by C.P.Pandey under Issue-6885 --><!-- Modified by C.P.Pandey under Issue-7246,Updated by Govind under ER-1940 -->
                                                                        <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Data_Period_Start_Date_indicates_the_beginning_earliest_date_that_the_data_e}"/>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem dataStyle="padding-bottom: 0;" >
                                                            <apex:outputPanel layout="block" styleClass="slds-form-element " style="margin-bottom: 0;">
                                                                <div>
                                                                    <label class="slds-form-element__label">
                                                                        <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Data_Period_End_Date}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="requiredInput">
                                                                            <input type="text" ng-click="popupAlert('{!$Label.TPA_Click_on_the_calendar_icon_next_to_the_text_box_and_select_the_Date}');" placeholder="{!$Label.TPA_Date_Period_End_Date}" readonly="readonly" ng-class="{'greyOut':requestType == 'view','':requestType != 'view'}" class="datepicker" id="dataPeriodEndDate" ng-focus="acknowledDataAccessEndDateEmptyPopup();" /> <!-- Modified by C.P.Pandey under Issue-6885 --><!-- Modified by C.P.Pandey under Issue-7246,Updated by Govind under ER-1940 -->
                                                                            <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_Data_Period_End_Date_indicates_the_end_date_that_the_data_extract_will_be_ap}"/>
                                                                        </div>
                                                                    </div>
                                                                </div>  
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem dataStyle="padding: 0;">
                                                            <apex:outputPanel></apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem dataStyle="padding: 0;">
                                                            <div class="slds-clearfix" style="position: absolute;">
                                                                <div class="slds-float_left">
                                                                    <label ng-if="previousDataPeriodEndDate != null" style="margin-left: 2.2em;">
                                                                        {!$Label.TPA_Prior_Data_Period_End_Date} {{previousDataPeriodEndDate}}
                                                                    </label>                                                                   
                                                                </div>
                                                            </div>
                                                        </apex:pageBlockSectionItem>
                                                    </apex:pageBlockSection>
                                                </apex:pageBlockSection>
                                                                                           
                                            </div>
                                            <!-- Request Details/Offering(s) Section End -->
                                            <hr ng-show="isPrintAction" style="display:none;border:2px solid #10A6F0;"/>
                                        </div>

                                        <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                                        <div id="tab-default-ADID"
                                            class="slds-tabs_default__content"
                                            role="tabpanel"
                                            aria-labelledby="tab-default__ADID">
                                            <!-- AMA Data Section Start -->
                                            <div ng-show="selectedSection == 'AD' || (isAmaTab  && requestType == 'view' && isPrintAction)" style="display:none;"><!-- Modified by C.P.Pandey under Issue-7479 -->
                                                <!-- added by Govind 22 Feb to show the Vendor part start -->
                                                <fieldset ng-disabled="requestType == 'view'"><!-- Modified by C.P.Pandey under Issue-7479 --><!-- Added by Babita on 6 july 2015 under issue-07426 -->
                                                    <!-- added by Govind 22 Feb to show the Vendor part end -->
                                                    <apex:pageblockSection html-class="amaClientSection" title="{!$Label.TPA_Client_Selected_U_S_Provider_Level_Attributes}" collapsible="false" columns="1" html-style="background-color:white;" > <!-- Modified by Sunny Bansal under ER-2024 -->
                                                        <!-- Added by Sunny Bansal under ER-2024 starts -->
                                                        <label class="slds-form-element__label"  ng-if="viewModeStatus == 'CDV' || viewModeStatus == 'NV'">
                                                            <span class="slds-form-element__label"  style="font-size:13px;color: #1797c0 !important;font-weight:bold;" > {!$Label.TPA_Please_acknowledge_you_have_read_the_following} </span>
                                                        </label>
                                                        <div class="slds-checkbox">
                                                    			<input  type="checkbox" class="dasscb noOutline" id="amaPrescriberAck" ng-model="tpaObj.prescriberAck"  />                                              
                                                        		<label class="slds-checkbox__label" for="amaPrescriberAck" ng-if="viewModeStatus == 'CDV' || viewModeStatus == 'NV'">
                                                        			<span class="slds-checkbox_faux "></span>
                                                            		<span class="slds-form-element__label" style="font-size:12px" > {!$Label.TPA_The_United_States_prescriber_level_data_provided_by_IQVIA_has_been_sourced} </span>
																</label>
                                                    		</div>
                                                        <div >
                                                            <apex:outputPanel >
                                                                <!-- Added by Sunny Bansal under ER-2024 ends -->
                                                                <apex:panelGrid columns="2">
                                                                    <label class="slds-form-element__label">{{labels.TPA_Does_this_request_include_any_of_the}}</label>
                                                                    <div class="slds-form-element__control">
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="usPrescLvlDataYes" class="noOutline" name="usPrescLvlData" value="Yes" ng-model="isUSPrescLvlData" ng-disabled="viewModeStatus == 'VDV'" />
                                                                            <label class="slds-radio__label" for="usPrescLvlDataYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="usPrescLvlDataNo" class="noOutline" name="usPrescLvlData" value="No" ng-model="isUSPrescLvlData" ng-click="showRequiresAMAforUSeOffering()" ng-disabled="viewModeStatus == 'VDV'" ng-change="emptyAmaPresLvlData();"/>
                                                                            <label class="slds-radio__label" for="usPrescLvlDataNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </apex:panelGrid>
                                                            </apex:outputPanel> <!-- Added by Sunny Bansal under ER-2024 -->
                                                        </div> <!-- Added by Sunny Bansal under ER-2024 -->
                                                        <div >
                                                            <apex:outputPanel ><br/>
                                                                <label class="slds-form-element__label">{!$Label.TPA_The_following_are_Provider_Level_Attributes}</label> <br/><br/>
                                                                <table style="border:1px solid black;border-collapse:collapse">
                                                                    <apex:repeat value="{!presciberLevelAttributesList}" var="row">
                                                                        <tr>
                                                                            <apex:repeat value="{!presciberLevelAttributesList[row]}" var="attribute">
                                                                                <td style="border: 1px solid rgb(107, 109, 112) !important;" class="slds-p-around_small">
                                                                                    <div class="slds-checkbox">
                                                                                        <input id="{!attribute}" type="Checkbox" class="amaPresLvlDataIdChk" value="{!attribute}" ng-disabled="viewModeStatus == 'VDV' || isUSPrescLvlData != 'Yes'"/>
                                                                                        <label class="slds-checkbox__label" for="{!attribute}">
                                                                                            <span class="slds-checkbox_faux "></span>
                                                                                            <span class="slds-form-element__label " > {!attribute}<span ng-show="{!attribute == 'Medical Education Number (ME#)'}">(Not permitted for Lettershop uses)</span> </span>
                                                                                        </label>
                                                                                    </div>
                                                                                    <span ng-show="{!attribute=='CMS UPIN'|| attribute=='IQVIA Prescriber ID'}">
                                                                                        <c:VFC_TPA_LightningHelpText cHlpTxt="{!IF(attribute=='CMS UPIN',$Label.TPA_AMA_CMS_UPIN , $Label.TPA_AMA_IMS_Prescriber_ID )}"/>
                                                                                    </span>
                                                                                </td> <!-- Modified by supriya under ER-3768-->
                                                                            </apex:repeat>
                                                                        </tr>
                                                                    </apex:repeat>
                                                                </table>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <apex:pageBlockSectionItem html-ng-if="isUSPrescLvlData=='Yes' && (isBannerAds == true) ">
                                                            <apex:outputPanel >
                                                                <apex:panelGrid columns="2">
                                                                    <label class="slds-form-element__label">{{labels.TPA_Will_the_Third_Party_Vendor_provide_Banner_Ad}}</label>
                                                                    <div class="slds-form-element__control">
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="VendorProvideBannerAdsYes" class="noOutline" name="VendorProvideBannerAds" value="Yes" ng-model="tpaObj.isVendorProvideBannerAds" ng-disabled="viewModeStatus == 'VDV'" />
                                                                            <label class="slds-radio__label" for="VendorProvideBannerAdsYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="VendorProvideBannerAdsNo" class="noOutline" name="VendorProvideBannerAds" value="No" ng-model="tpaObj.isVendorProvideBannerAds" ng-disabled="viewModeStatus == 'VDV'"/>
                                                                            <label class="slds-radio__label" for="VendorProvideBannerAdsNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </apex:panelGrid>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem html-ng-if="isUSPrescLvlData=='Yes'">
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label">
                                                                        {!$Label.TPA_What_is_the_longest_period_of_time_the_vendor_will_have_access_to_the_AMA}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <select id="ddAmaDataTimePeriod" class="ddAmaDataTimePer slds-input" ng-model="selectedAmaDataTimePeriod" ng-options="v for v in AmaDataTimePeriod" ng-change="amaDataPeriodChanged();" ng-disabled="(viewModeStatus == 'VDV') || disableGT90Option">
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>

                                                        <apex:pageBlockSectionItem html-ng-show="isUSPrescLvlData=='Yes'" >
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label">
                                                                        {!$Label.TPA_What_is_the_frequency_of_the_delivery_to_the_Vendor}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <select id="ddAmaFreDelData" class="slds-input" ng-model="selectedAmaFreDelData" ng-options="v for v in AmaFreqDeliveryList" ng-change="freqDelDataChanged();" ng-disable="AmaFreqDeliveryList.length == 0" ng-disabled="viewModeStatus == 'VDV'">
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem html-ng-show="isUSPrescLvlData=='Yes'">
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element" ng-show="freqDelDataChangeToOther">
                                                                    <label class="slds-form-element__label">
                                                                        {!$Label.TPA_Other_frequency_of_the_delivery_to_the_Vendor}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <input id="otherFre" class="slds-input" type="text" maxlength="255" ng-model="freqDelOtherData" ng-disabled="viewModeStatus == 'VDV'"/>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem html-ng-show="isUSPrescLvlData=='Yes'">
                                                            <apex:outputPanel >
                                                                <apex:panelGrid columns="2">
                                                                    <label class="slds-form-element__label">{{labels.TPA_Does_Client_store_the_prescriber}}</label>
                                                                    <div class="slds-form-element__control">
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="clientReqStoragePerYes" class="noOutline" name="ClientReqStoragePer" value="Yes" ng-model="isClientReqStoragePermission" ng-disabled="viewModeStatus == 'VDV'" />
                                                                            <label class="slds-radio__label" for="clientReqStoragePerYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="clientReqStoragePerNo" class="noOutline" name="ClientReqStoragePer" value="No" ng-model="isClientReqStoragePermission" ng-change="AMADataLocationChange('clientStorageLoc');" ng-disabled="viewModeStatus == 'VDV'"/>
                                                                            <label class="slds-radio__label" for="clientReqStoragePerNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </apex:panelGrid>
                                                            </apex:outputPanel>
                                                            </apex:pageBlockSectionItem>
                                                            <apex:pageBlockSectionItem html-ng-show="isUSPrescLvlData=='Yes' && isClientReqStoragePermission"> 
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label">
                                                                        {!$Label.TPA_Provide_Client_country_location_s_where_the_IQVIA_Data_will_be_stored}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <select id="ddClientEmpDataCountry" class="ddClientEmpDataCount slds-select" multiple="multiple" ng-disabled="viewModeStatus == 'VDV'">
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                    </apex:pageblockSection>
                                                </fieldset>
                                                <apex:pageblockSection title="Acknowledgement" collapsible="false" columns="1" html-style="background-color:white;" html-ng-hide="requestType == 'view' || isUSPrescLvlData != 'Yes'">
                                                    <div class="slds-checkbox">
                                                    <input  type="checkbox" class="dasscb noOutline" id="amaAcknowledgement" ng-model="amaAcknowledged"  />
                                                    	<label class="slds-checkbox__label" for="amaAcknowledgement" ng-if="viewModeStatus == 'CDV' || viewModeStatus == 'NV'">
                                                        	<span class="slds-checkbox_faux "></span>
                                                            <span class="slds-form-element__label " > {!$Label.TPA_Based_on_the_responses_provided_regarding_the_data_to_be_shared_under_this} </span>
                                                        </label>
                                                    </div>
                                                    <div class="slds-checkbox">
                                                    <input  type="checkbox" class="dasscb noOutline" id="amaAcknowledgement1" ng-model="amaAcknowledged1"  />
                                                        <label class="slds-checkbox__label" for="amaAcknowledgement1" ng-if="viewModeStatus == 'VDV'">
                                                        	<span class="slds-checkbox_faux "></span>
                                                            <span class="slds-form-element__label " > {!$Label.TPA_Based_on_the_responses_provided_regarding_the_data_to_be_shared_under_change} </span>
                                                        </label>
                                                    </div>
                                                </apex:pageblockSection>
                                            </div>
                                            <!-- AMA Data Section End -->
                                            <hr ng-show="isPrintAction" style="display:none;border:2px solid #10A6F0;"/><!-- Added by C.P.Pandey under ER-2025 -->
                                        </div>

                                        <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                                        <div id="tab-default-DDTID"
                                            class="slds-tabs_default__content"
                                            role="tabpanel"
                                            aria-labelledby="tab-default__DDTID">
                                            <!-- Data Delivery/Transmission Section Start -->
                                            <div ng-show="selectedSection == 'DDT'" style="display:none;" class="removeBorder"><!-- Modified by C.P.Pandey under ER-2025 -->
                                                
                                                <fieldset class="viewModeGreyOut" ng-disabled="requestType == 'view'"><!-- Modified by C.P.Pandey under Issue-7246 -->
                                                    <apex:pageblockSection title="{!$Label.TPA_Data_Delivery}" collapsible="false" columns="1" html-style="background-color:white;">
                                                        

                                                        <div ng-if="(isUSPrescLvlData=='Yes') && viewModeStatus == 'VDV' || isVendorPartVisible || isTPProcessor || isVendorPartVisibleToUSTPProcessor">
                                                            <apex:pageblockSection title="Remote Access for Non-U.S. Location: " collapsible="false" columns="1" html-class="imsheader" html-style="background-color:white;margin-top:15px;" >
                                                                <div style ="margin-top:10px;">
                                                                    <label><span>{!$Label.TPA_Requires_permission_to_access_U_S_prescriber_level_data_stored_on_U_S_server}</span></label><br/>
                                                                    <label><span>{!$Label.TPA_System_infrastructure_must_be_approved_by_AMA_IT_Security}</span></label>
                                                                </div>
                                                            </apex:pageblockSection>
                                                        </div>

                                                        <apex:pageBlockSectionItem html-ng-show="isUSPrescLvlData=='Yes'">
                                                            <apex:outputPanel >
                                                                <apex:panelGrid columns="2">
                                                                    <label class="slds-form-element__label">{!$Label.TPA_Will_Vendor_employee_s_require_remote_access_from_a_non_U_S_location}</label>
                                                                    <div class="slds-form-element__control">
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="vendorReqAccessPerYes" class="noOutline" name="VendorReqAccessPer" value="Yes" ng-model="isVendorReqAccessPermission" />
                                                                            <label class="slds-radio__label" for="vendorReqAccessPerYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="vendorReqAccessPerNo" class="noOutline" name="VendorReqAccessPer" value="No" ng-model="isVendorReqAccessPermission" ng-change="AMADataLocationChange('vendorAccessLoc');"/>
                                                                            <label class="slds-radio__label" for="vendorReqAccessPerNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </apex:panelGrid>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem html-ng-show="isUSPrescLvlData=='Yes' && isVendorReqAccessPermission"> 
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label">
                                                                        {!$Label.TPA_Provide_Vendor_Employee_country_location_s_where_the_IQVIA_Data_will_be_remo}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <select id="ddVendorEmpDataAccessedInCountry" class="ddVendorEmpDataAccessedInCount slds-select" multiple="multiple" >
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem html-ng-show="isUSPrescLvlData=='Yes' && isVendorReqAccessPermission"> 
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label">
                                                                        {!$Label.TPA_Please_select_the_secure_technology_s_that_will_be_used_for_remote_access}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <select id="ddTechSelectedforRemoteAccess" style="width: 100% !important" class="ddTechforRemoteAccess slds-select" multiple="multiple" >
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>

                                                        <apex:pageBlockSectionItem html-ng-show="otherTechforRemoteAccessSel && (isUSPrescLvlData=='Yes' && isVendorReqAccessPermission)"> 
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label">
                                                                        Other technology(s) that will be used for remote access:
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                    <input class="slds-input" type="text" maxlength="255" ng-model="otherTechforRemoteAccessData" />
                                                                </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>

                                                        <div style="margin-top:10px;" html-ng-show="(isUSPrescLvlData=='Yes' && isVendorReqAccessPermission)">      
                                                            <div class="slds-checkbox">
                                                                <input style="margin-left:0.3em;float:left;" type="checkbox" class="dasscb noOutline" id="cbVendorRemoteAccessAck" ng-model="VendorRemoteAccessAck"/> 
                                                                <label class="slds-checkbox__label" for="cbVendorRemoteAccessAck">
                                                                    <span ng-if="isUSPrescLvlData=='Yes' && isVendorReqAccessPermission" class="slds-checkbox_faux "></span>
                                                                    <span style="font-size:12px !important;" class="slds-form-element__label " ng-if="isUSPrescLvlData=='Yes' && isVendorReqAccessPermission"> &nbsp;&nbsp;{!$Label.Third_Party_Support_User_attests_that_it_has_disabled_and_will_disable_during} </span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px;" html-ng-show="(isUSPrescLvlData=='Yes' && isVendorReqAccessPermission)">
                                                            <div class="slds-checkbox">
                                                                <input style="margin-left:0.3em;float:left;" type="checkbox" class="dasscb noOutline" id="cbVendorRemoteAccessAck1" ng-model="VendorRemoteAccessAck1"/>
                                                                <label class="slds-checkbox__label" for="cbVendorRemoteAccessAck1">
                                                                    <span ng-if="isUSPrescLvlData=='Yes' && isVendorReqAccessPermission" class="slds-checkbox_faux "></span>
                                                                    <span style="font-size:12px !important;" class="slds-form-element__label " ng-if="isUSPrescLvlData=='Yes' && isVendorReqAccessPermission"> &nbsp;&nbsp;{!$Label.Third_Party_Support_User_attests_that_it_has_provided_the_above_requirements_to} </span>
                                                                </label>
                                                            </div>
                                                        </div>

                                                        <div style="margin-top:24px;" html-ng-show="(isUSPrescLvlData=='Yes' && isVendorReqAccessPermission)"> </div>
                                                        <apex:pageBlockSectionItem html-ng-show="(isUSPrescLvlData=='Yes' && isVendorReqAccessPermission)"  html-class="imsheader"  >
                                                            <apex:outputPanel >
                                                                <label class="lbl" style="width:29%;float:left;">Vendor Ex-U.S. Legal Entity For Remote Access: </label>
                                                                <div ng-show="isVendorReqAccessPermission">
                                                                    <div style="margin-left:15%;float:left;min-width:200px;max-width:500px;">
                                                                        <button class="slds-button slds-button_text-destructive" onclick="return false;"  ng-click="openExUSLegalEntityLookUp('remoteAccess')" > Search Ex-US Legal Entity</button> 
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>    
                                                        </apex:pageBlockSectionItem>
                                                        <!-- Here comes the changes -->
                                                        <apex:pageBlockSectionItem html-ng-show="(isUSPrescLvlData=='Yes' && isVendorReqAccessPermission =='No' && mlObj.rootObj.selectedVendorCountry.Default_Value__c != 'United States')" html-class="imsheader">
                                                            <apex:outputPanel >
                                                                <div>
                                                                    <div class="slds-checkbox">
                                                                        <input style="margin-left:0.3em;float:left;" type="checkbox" class="dasscb noOutline" id="VendorRemoteAccess" ng-model="VendorRemoteAccess_No"/> 
                                                                        <label class="slds-checkbox__label" for="VendorRemoteAccess">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span style="font-size:12px !important;" class="slds-form-element__label"> &nbsp;&nbsp;{!$Label.You_have_indicated_that_remote_access_from_outside_the_United_States_is_not_requ    } </span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>



                                                        <fieldset  class="vendorLookUpGreyOut"  ng-show="tpaObj.showLegalEntityforAccess">
                                                            <apex:pageBlockSection html-ng-if="tpaObj.showLegalEntityforAccess" title="Vendor Ex-U.S. Legal Entity For Remote Access: " columns="2" collapsible="false" html-class="amaClientSection" html-style="background-color:white;">
                                                                <apex:pageBlockSectionItem html-ng-if="tpaObj.showLegalEntityforAccess">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity Name
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <div>
                                                                                <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.ExUSLegalEntityforRemoteAccess" 
                                                                                ng-disabled="requestType == 'view'" style="width: 100% !important;"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforAccess">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity Address
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.OffAccessLEAddress" 
                                                                                ng-disabled="requestType == 'view'" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforAccess">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>Ex-US Legal Entity Country
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select id="idVendorCountry" ng-change="relateLEStateCountry('remoteAccess');" class="ddVendorCountry slds-select" 
                                                                                    ng-model="tpaObj.OffAccessLECountry" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : 
                                                                                                v.Default_Value__c for v in mlObj.vendorCountryList" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforAccess">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required"> </abbr>Ex-US Legal Entity State/Province
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select class="slds-select" id="idVendorState" ng-model="tpaObj.OffAccessLEState" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : v.Default_Value__c for v in mlObj.relatedOffAccessStateList" 
                                                                                    ng-disabled="mlObj.relatedOffAccessStateList == null || 
                                                                                                mlObj.relatedOffAccessStateList.length <= 1" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforAccess">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity City
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" 
                                                                                ng-model="tpaObj.OffAccessLECity" ng-disabled="requestType == 'view'" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforAccess">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity Zip/Post Code
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="20" 
                                                                                ng-model="tpaObj.OffAccessLEPostal" ng-disabled="requestType == 'view'"
                                                                                style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>

                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforAccess">
                                                                    <apex:outputPanel >
                                                                        <apex:panelGrid columns="2">
                                                                            <label class="slds-form-element__label">
                                                                                <abbr class="slds-required" title="required">* </abbr> {!$label.Is_the_legal_entity_above_a_foreign_affiliate_of_the_United_States_legal_entity}
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <span class="slds-radio">
                                                                                    <input type="radio" id="isLegalEntityForeignYes" class="noOutline" name="LegalEntityForeign" value="true" ng-model="tpaObj.isLegalEntityForeign" />
                                                                                    <label class="slds-radio__label" for="isLegalEntityForeignYes">
                                                                                        <span class="slds-radio_faux"></span>
                                                                                        <span class="slds-form-element__label" ng-disabled="requestType == 'view'">{!$Label.TPA_Yes_statement}</span>
                                                                                    </label>
                                                                                </span>
                                                                                <span class="slds-radio">
                                                                                    <input type="radio" id="isLegalEntityForeignNo" class="noOutline" name="LegalEntityForeign" value="false" ng-model="tpaObj.isLegalEntityForeign"/>
                                                                                    <label class="slds-radio__label" for="isLegalEntityForeignNo">
                                                                                        <span class="slds-radio_faux"></span>
                                                                                        <span class="slds-form-element__label" ng-disabled="requestType == 'view'">{!$Label.TPA_No}</span>
                                                                                    </label>
                                                                                </span>
                                                                            </div>
                                                                        </apex:panelGrid>
                                                                    </apex:outputPanel>
                                                                </apex:pageBlockSectionItem>
                                                            </apex:pageBlockSection>
                                                        </fieldset>

                                                        <div ng-if="(isUSPrescLvlData=='Yes') && viewModeStatus == 'VDV' || isVendorPartVisible || isTPProcessor || isVendorPartVisibleToUSTPProcessor">
                                                            <apex:pageblockSection title="United States prescriber level data storage in a location(s) outside of the United States:" collapsible="false" columns="1" html-class="imsheader" html-style="background-color:white;margin-top:15px;">
                                                                <div style ="margin-top:10px;">
                                                                    <label><span>{!$Label.TPA_Requires_direct_AMA_license_to_utilize_access_and_or_store_U_S_prescriber_l}</span></label><br/>
                                                                    <label><span>{!$Label.TPA_Offshore_locations_are_limited_related_to_storage_permissions}</span></label>
                                                                </div>
                                                            </apex:pageblockSection>
                                                        </div>

                                                        <apex:pageBlockSectionItem html-ng-show="(isUSPrescLvlData=='Yes') && viewModeStatus == 'VDV' || isVendorPartVisible || isTPProcessor || isVendorPartVisibleToUSTPProcessor">
                                                            <apex:outputPanel >
                                                                <apex:panelGrid columns="2">
                                                                    <label class="slds-form-element__label">{!$Label.TPA_Will_Vendor_employee_s_require_storage_permissions_from_a_non_U_S_location}</label>
                                                                    <div class="slds-form-element__control">
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="VendorReqStoragePerYes" class="noOutline" name="VendorReqStoragePer" value="Yes" ng-model="isVendorReqStoragePermission" />
                                                                            <label class="slds-radio__label" for="VendorReqStoragePerYes">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_Yes_statement}</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-radio">
                                                                            <input type="radio" id="VendorReqStoragePerNo" class="noOutline" name="VendorReqStoragePer" value="No" ng-model="isVendorReqStoragePermission" ng-change="AMADataLocationChange('vendorStorageLoc');"/>
                                                                            <label class="slds-radio__label" for="VendorReqStoragePerNo">
                                                                                <span class="slds-radio_faux"></span>
                                                                                <span class="slds-form-element__label">{!$Label.TPA_No}</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </apex:panelGrid>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem html-ng-show="(isUSPrescLvlData=='Yes' && isVendorReqStoragePermission )"> 
                                                            <apex:outputPanel >
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label">
                                                                        {!$Label.TPA_Provide_Vendor_Employee_country_location_s_where_the_IQVIA_Data_will_be_stor}
                                                                    </label>
                                                                    <div class="slds-form-element__control">
                                                                        <select id="ddVendorEmpDataStoredInCountry" class="slds-select" ng-model="VendorEmpDataStoredInCountry" ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : v.Default_Value__c for v in mlObj.translatedMap[mlObj.selectedLanguageField+'~AMA_Agreement_Detail__c~Picklist~Vendor_Employee_Store_Data_in_country__c']" >
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:pageBlockSectionItem>
                                                        <apex:pageBlockSectionItem html-ng-show="(isUSPrescLvlData=='Yes' && isVendorReqStoragePermission)"  html-class="imsheader"  >
                                                            <apex:outputPanel >
                                                                <label class="lbl" style="width:29%;float:left;">Vendor Ex-U.S. Legal Entity For Offshore Storage: </label>
                                                                <div ng-show="isVendorReqStoragePermission">
                                                                    <div style="margin-left:15%;float:left;min-width:200px;max-width:500px;">
                                                                        <button class="slds-button slds-button_text-destructive" onclick="return false;"  ng-click="openExUSLegalEntityLookUp('OffshoreStorage')" > Search Ex-US Legal Entity</button> 
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>    
                                                        </apex:pageBlockSectionItem>

                                                        <fieldset  class="vendorLookUpGreyOut"  ng-show="tpaObj.showLegalEntityforStorage">
                                                            <apex:pageBlockSection html-ng-show="tpaObj.showLegalEntityforStorage" title="Vendor Ex-U.S. Legal Entity For Offshore Storage: " columns="2" collapsible="false" html-class="amaClientSection" html-style="background-color:white;">
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforStorage">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity Name
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <div>
                                                                                <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.ExUSLegalEntityforOffStorage" 
                                                                                ng-disabled="requestType == 'view'" style="width: 100% !important;"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforStorage">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity Address
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.OffStorageLEAddress" 
                                                                                ng-disabled="requestType == 'view'" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforStorage">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>Ex-US Legal Entity Country
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select id="idVendorCountry" ng-change="relateLEStateCountry('OffshoreStorage');" class="ddVendorCountry slds-select" 
                                                                                    ng-model="tpaObj.OffStorageLECountry" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : 
                                                                                                v.Default_Value__c for v in mlObj.vendorCountryList" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforStorage">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required"> </abbr>Ex-US Legal Entity State/Province
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <select class="slds-select" id="idVendorState" ng-model="tpaObj.OffStorageLEState" 
                                                                                    ng-options="v[mlObj.selectedLanguageField] != null ? v[mlObj.selectedLanguageField] : v.Default_Value__c for v in mlObj.relatedOffStorageStateList" 
                                                                                    ng-disabled="mlObj.relatedOffStorageStateList == null || 
                                                                                                mlObj.relatedOffStorageStateList.length <= 1" 
                                                                                    style="width: 100% !important;">
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforStorage">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity City
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" 
                                                                                ng-model="tpaObj.OffStorageLECity" ng-disabled="requestType == 'view'" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem html-ng-show="tpaObj.showLegalEntityforStorage">
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr> Ex-US Legal Entity Zip/Post Code
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="20" 
                                                                                ng-model="tpaObj.OffStorageLEPostal" ng-disabled="requestType == 'view'"
                                                                                style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                            </apex:pageBlockSection>
                                                        </fieldset>
                                                        
    													<apex:pageBlockSection html-ng-show="(isVendorReqStoragePermission )" title="{!$Label.TPA_Authorized_Signer_Information}" columns="1" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                            <apex:pageBlockSection columns="1" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                                <label>{!$Label.TPA_Please_enter_the_information_below_for_the_individual_within_your_company_th}</label>
                                                            </apex:pageBlockSection>
                                                            <apex:pageBlockSection columns="2" collapsible="false" html-class="imsheader" html-style="background-color:white;">
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_first_name}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.OffStorageAuthSignerFName"
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_Last_Name}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.OffStorageAuthSignerLName"
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_Title}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="255" ng-model="tpaObj.OffStorageAuthSignerTitle" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                <div rendered="{!(tpaRequestCallType != 'view')}">
                                                                </div>
                                                                <apex:pageBlockSectionItem >
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label">
                                                                            <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Authorized_Signer_Email_Address}
                                                                        </label>
                                                                        <div id="opPanel" class="slds-form-element__control">
                                                                            <input class="slds-input" type="text" maxlength="80" ng-model="tpaObj.OffStorageAuthSignerEmail" 
                                                                                ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                        </div>
                                                                    </div>
                                                                </apex:pageBlockSectionItem>
                                                                    <apex:pageBlockSectionItem dataStyleClass="classAuthSignEmailConf" labelStyleClass="classAuthSignEmailConf" rendered="{!(tpaRequestCallType != 'view')}">
                                                                        <div class="slds-form-element">
                                                                            <label class="slds-form-element__label">
                                                                                <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Confirm_Authorized_Signer_Email_Address}
                                                                            </label>
                                                                            <div id="opPanel" class="slds-form-element__control">
                                                                                <input class="slds-input" type="text" maxlength="80" id="ddOffStorageAuthSignerEmailCon" 
                                                                                    ng-model="tpaObj.OffStorageAuthSignerEmailCon" 
                                                                                    ng-disabled="requestType == 'view' || isVendorPartVisible" style="width: 100% !important;"/>
                                                                            </div>
                                                                        </div>
                                                                    </apex:pageBlockSectionItem>
                                                            </apex:pageBlockSection>
                                                        </apex:pageBlockSection>
                                                    </apex:pageblockSection>
                                                </fieldset>

                                                <div ng-if="viewModeStatus == 'CDV' || viewModeStatus == 'NV'" style="display:none;">
                                                    <fieldset class="viewModeGreyOut" ng-disabled="requestType == 'view'"> <!-- Modified by C.P.Pandey under Issue-7246 -->


                                                    </fieldset>
                                                </div>
                                            </div>
                                            <!-- Data Delivery/Transmission Section End -->
                                            <!--<hr ng-show="isPrintAction" style="display:none;border:2px solid #10A6F0;"/>--><!-- Added by C.P.Pandey under ER-2025 -->
                                        </div>

                                        <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                                        <div id="tab-default-FID"
                                            class="slds-tabs_default__content"
                                            role="tabpanel"
                                            aria-labelledby="tab-default__FID">
                                            <!-- Finalize Section Start -->
                                            <div ng-show="selectedSection == 'F' || isPrintAction" style="display:none;" class="removeBorder"><!-- Modified by C.P.Pandey under ER-2025 -->
                                                
                                                <div ng-if="viewModeStatus == 'VDV'" ng-show="additionalVendorList.length > 0">
                                                    <apex:pageBlockSection columns="1" title="{!$Label.TPA_Additional_Vendor_Information}" html-ng-show="viewModeStatus == 'VDV'" collapsible="false" html-style="background-color:white;">
                                                        <table class="list slds-table slds-table--bordered slds-table_col-bordered slds-border_left slds-border_right">
                                                            <tr class="headerRow">
                                                                <th class="slds-theme_shade">Vendor&#39;s Legal Entity Name</th>
                                                                <th class="slds-theme_shade">Vendor&#39;s Contact First Name</th>
                                                                <th class="slds-theme_shade">Vendor&#39;s Contact Last Name</th>
                                                            </tr>
                                                            <tr class="dataRow" ng-repeat="obj in additionalVendorList" repeat-Done="repeat-Done" repeat-Done-Data="clientCopyEmail" onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" onmouseout="if (window.hiOff){hiOff(this);} " onmouseover="if (window.hiOn){hiOn(this);} ">
                                                                <td class="dataCell">
                                                                    {{obj.Company_Name__c}}
                                                                </td>
                                                                <td class="dataCell">
                                                                    {{obj.Contact_first_Name__c}}
                                                                </td>
                                                                <td class="dataCell">
                                                                    {{obj.Contact_Last_Name__c}}
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </apex:pageblocksection>
                                                </div>
                                                <apex:pageblockSection id="idMarkasPrivate" title="{!$Label.TPA_Mark_Request_as_Private}" html-ng-show="viewModeStatus == 'CDV' || viewModeStatus == 'NV'" collapsible="false" columns="1" html-style="background-color:white;">
                                                    <apex:outputPanel >
                                                        <div class="slds-form-element">
                                                            <span class="slds-radio">
                                                                <input id="{!$Label.TPA_Mark_this_request_as_PUBLIC_within_my_organization_within_the_IMS_third_part}" type="radio" class="noOutline" value="Public" name="requestPublicPrivate" ng-click="validateOnRequestScopeChange();" ng-model="isRequestPublic" ng-disabled="requestType == 'view'" />
                                                                <label class="slds-radio__label" for="{!$Label.TPA_Mark_this_request_as_PUBLIC_within_my_organization_within_the_IMS_third_part}">
                                                                    <span class="slds-radio_faux"></span>
                                                                    <span class="slds-form-element__label">
                                                                        {!$Label.TPA_Mark_this_request_as_PUBLIC_within_my_organization_within_the_IMS_third_part}
                                                                    </span>
                                                                </label>
                                                            </span>
                                                            <c:VFC_TPA_LightningHelpText cHlpTxt="{!$Label.TPA_A_Data_Policy_Administrator_is_an_individual_within_your_organization_who_ha}"/>
                                                            <!-- <div class="slds-form-element__control">
                                                            </div> -->
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel >
                                                        <div class="slds-form-element">
                                                            <span class="slds-radio">
                                                                <input id="{!$Label.TPA_Mark_this_request_as_PRIVATE_within_my_organization_within_the_IMS_third_par}" type="radio" class="noOutline" value="Private" name="requestPublicPrivate" ng-click="validateOnRequestScopeChange();" ng-model="isRequestPublic" ng-disabled="requestType == 'view'" />
                                                                <label class="slds-radio__label" for="{!$Label.TPA_Mark_this_request_as_PRIVATE_within_my_organization_within_the_IMS_third_par}">
                                                                    <span class="slds-radio_faux"></span>
                                                                    <span class="slds-form-element__label">
                                                                        {!$Label.TPA_Mark_this_request_as_PRIVATE_within_my_organization_within_the_IMS_third_par}
                                                                    </span>
                                                                </label>
                                                            </span>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:pageblockSection>
                                                <apex:pageblockSection title="{!$Label.TPA_Documents_Generation_Language}" collapsible="false" columns="2" html-style="background-color:white;" html-ng-show="tpaRequestEditTypeModal == 'v' && {!vendorDocumentLanguageEnabled}" >
                                                	<apex:pageBlockSectionItem >
                                                        <apex:outputPanel layout="block" styleClass="slds-form-element " style="float:left;"><!-- Updated by Babita Dadarwal under CR-12675 -->
                                                            <label class="slds-form-element__label">
                                                        
                                                                <abbr class="slds-required" title="required">* </abbr>{!$Label.TPA_Please_select_one_of_the_available_languages_you_wish_for_your_agreement}
                                                            </label>
                                                            <div class="slds-form-element__control">
                                                                <div class="requiredInput">
                                                                    <select id="tllaLanguage"
                                                                            ng-model="tllaLanguageChosen"
                                                                            ng-disabled="requestType == 'view'"
                                                                            class="slds-input"
                                                                            ng-options="val for val in tllaLanguageOptions">
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:pageBlockSectionItem>
                                                    <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                                                </apex:pageblockSection>
                                                <apex:pageblockSection title="{!$Label.TPA_Acknowledgement}" collapsible="false" columns="1" html-style="background-color:white;" html-ng-hide="requestType == 'view'">
                                                    <!-- Added by Shaik under CR-12675 Start-->
                                                    <div ng-if="viewModeStatus == 'CDV' || viewModeStatus == 'NV'">
                                                        <div class="slds-checkbox">
                                                            <input style="margin-left:0.3em;float:left;" type="checkbox" class="dasscb noOutline" id="cbClientApproval2" ng-model="tpaObj.Client_Approved2__c"/>
                                                            <label class="slds-checkbox__label" for="cbClientApproval2">
                                                                <span class="slds-checkbox_faux "></span>
                                                                <span class="slds-form-element__label "> &nbsp;&nbsp;{!$Label.TPA_Client_will_deliver_the_data_unless_Client_has_already_made_other_written_ar} </span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <!-- Added by Shaik under CR-12675 End-->
                                                    <div style="margin-top:10px;"><!-- Modified by Shaik under CR-12675 -->         
                                                        <div class="slds-checkbox">
                                                            <input style="margin-left:0.3em;float:left;" type="checkbox" class="dasscb noOutline" id="cbClientApproval" ng-model="Client_Approved__c"/> 
                                                            <label class="slds-checkbox__label" for="cbClientApproval">
                                                                <span class="slds-checkbox_faux "></span>
                                                                <span class="slds-form-element__label " ng-if="viewModeStatus == 'CDV' || viewModeStatus == 'NV'"> &nbsp;&nbsp;{!$Label.TPA_I_have_reviewed_the_Uses_Offerings_and_delivery_items_specified_and_acknowl} </span>
                                                                <span class="slds-form-element__label " ng-if="viewModeStatus == 'VDV'"> &nbsp;&nbsp;{!$Label.TPA_I_acknowledge_that_the_above_information_is_correct_and_consent_to_share_thi} </span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div style="margin-top:10px;">
                                                        <div class="slds-checkbox">
                                                            <input style="margin-left:0.3em;float:left;" type="checkbox" class="dasscb noOutline" id="cbClientApproval1" ng-model="Client_Approved1__c"/>
                                                            <label class="slds-checkbox__label" for="cbClientApproval1">
                                                                <span class="slds-checkbox_faux "></span>
                                                                <span class="slds-form-element__label " ng-if="viewModeStatus == 'CDV' || viewModeStatus == 'NV'"> &nbsp;&nbsp;{!$Label.TPA_An_Approved_Third_Party_Limited_License_Agreement_Request_will_permit_you_to} </span>
                                                                <span class="slds-form-element__label " ng-if="viewModeStatus == 'VDV'"> &nbsp;&nbsp;{!$Label.TPA_A_fully_executed_third_party_limited_license_agreement_resulting_from_this_r} </span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div ng-show="((tllaLanguageChosen && tllaLanguageChosen != '--None--') || viewModeStatus == 'CDV' || viewModeStatus == 'NV' || !{!vendorDocumentLanguageEnabled}) && Client_Approved__c && Client_Approved1__c && (tpaObj.Client_Approved2__c || {!(tpaRequestEditType == 'v')}) && requestType!='view' && submitStatus=='yetToSubmit' && ({!(tpaRequestCallType == 'clone')} || {!(tpaRequestEditType == 'v')} || isClientRequestEdited == 'Yes' || isRequestScopeChanged)" align="center"><!-- Modified by C.P.Pandey under Issue-7368 --> <!-- Modified by Sunny Bansal under Issue-07853 --><!-- Modified by Shaik under CR-12675 -->
                                                        <button class="slds-button slds-button_outline-brand slds-m-top_small" style="font-weight:bold;color:red !important;" onclick="return false;" ng-click="submitStatus='submitted';submitForm();">{!$Label.TPA_Submit_Request}</button> <!-- Modified by Sunny Bansal under CR-6373 --> <!-- Modified by C.P.Pandey under Issue-7368 -->
                                                    </div>
                                                </apex:pageblockSection>
                                                <div ng-show="requestType == 'view' && !isPrintAction" align="center"><!-- Modified by C.P.Pandey under ER-2025 -->
                                                    <button class="btn btn-default slds-button slds-button_text-destructive" style="font-weight:bold;color:red;" onclick="return false;" ng-click="goToHome();">{!$Label.TPA_Back_To_Home_Screen}</button>
                                                </div>
                                            </div>
                                            <!-- Finalize Section End -->
                                        </div>
                                    </div>
                                    <!-- Progress Menu Bar Section End -->
                                </apex:pageBlock>

                    <div ng-include="'{!$Resource.TpaModalPopUps}'"></div> <!-- Added by Govind under ER-2138 -->
                    <div ng-include="'{!$Resource.TpaExUSLegalEntityPopUps}'"></div> <!--Added By Neha Bansal under CR-12673 -->
                    <div ng-include="'{!$Resource.TPA_Global_Branding_Vendor_Popup}'"></div> 
                    <div ng-include="'{!$Resource.TPA_OffNotificationPopup}'"></div>
                    <div ng-include="'{!$Resource.TPA_UseDefinitionPopup}'"></div> 
                    <div ng-include="'{!$Resource.TPA_IdOtherInfoPopUp}'"></div>
                    <!-- <div ng-include="'{!$Resource.TPA_ClientContactAddressMapping}'"></div> -->
                    <div ng-include="'{!$Resource.TPA_selctedUseOffPopup}'"></div>
                    <div ng-include="'{!$Resource.TPA_CloneUsePopup}'"></div>
                    <script type="text/ng-template" id="clientContactAddressMapping.html">
                        <div id="addressJunctionSelectionDiv" class="slds-scope">
                            <style type="text/css">
                                .slds-modal__container {
                                    width: 60% !important;
                                    max-width: 75rem !important;
                                }
                            </style>

                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container" style="z-index:1">
                                    <header class="slds-modal__header">
                                        <h2 class="slds-text-heading_medium slds-hyphenate" ng-if="dataFromParent.contactAddressCrosswalkList.length > 0">
                                            {!$Label.Please_select_the_correct_company_name_and_address_for_this_request}
                                        </h2>                           
                                        <h2 class="slds-text-heading_medium slds-hyphenate" ng-if="dataFromParent.contactAddressCrosswalkList == null || dataFromParent.contactAddressCrosswalkList.length == 0">
                                            Please create an address first to create a request.
                                        </h2>                                               
                                    </header>
                                    <div class="slds-modal__content">
                                        <fieldset class="slds-form-element">
                                            <!--<legend class="slds-form-element__legend slds-form-element__label">Radio Group Label</legend>-->
                                            <div class="slds-form-element__control">
                                                <span class="slds-radio slds-m-around_x-small" ng-repeat="v in dataFromParent.contactAddressCrosswalkList">
                                                    <input type="radio" 
                                                           id="{{v.Id}}" 
                                                           ng-value="v.Address__c" 
                                                           name="contactAddressJunRecords" 
                                                           ng-model="dataFromParent.selectedJunctionRecord" />
                                                    <label class="slds-radio__label" for="{{v.Id}}">
                                                        <span class="slds-radio_faux"></span>
                                                        <span class="slds-form-element__label">
                                                            {{v.Address__r.Name}} - {{v.Address__r.TPA_Address_Street__c}}, {{v.Address__r.TPA_Address_City__c}}, {{v.Address__r.TPA_Address_State__c}}, {{v.Address__r.TPA_Address_Country__c}}
                                                        </span>
                                                    </label>
                                                </span>                                                      
                                            </div>
                                        </fieldset>
                                    </div>
                                    <footer class="slds-modal__footer"> 
                                        <div class="slds-text-align_center slds-m-top_x-small slds-m-bottom_x-small">
                                            <button class="slds-button slds-button_outline-brand" ng-click="$parent.ok()" ng-disabled="dataFromParent.selectedJunctionRecord == null && ( dataFromParent.contactAddressCrosswalkList != null && dataFromParent.contactAddressCrosswalkList.length != 0)">{!$Label.TPA_OK}</button>
                                        </div>
                                    </footer>
                                </div>
                                <div class="slds-backdrop slds-backdrop_open" style="z-index:0"></div>
                            </section>
                        </div>
                    </script>


                
                                <div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" ng-hide="!IsShowVendorMessageBoard" style="display:none">
                                    <div class="slds-modal__container" style="z-index: 1">
                                        <header class="slds-modal__header">
                                            <h2 class="slds-text-heading_medium slds-hyphenate">
                                            </h2>
                                        </header>
                                        <div class="slds-modal__content slds-p-around_small">
                                            <apex:outputText value="{!msgBoardContent}" escape="false" />
                                        </div>
                                        <footer class="slds-modal__footer">
                                            <div class="slds-text-align_center slds-m-top_x-small slds-m-bottom_x-small">
                                                <button class="slds-button slds-button_outline-brand slds-float_left" onclick="return false;" ng-click="hideVendorMessageBoard();">{!$Label.TPA_Continue}</button>
                                                <button class="slds-button slds-button_outline-brand" style="float: right; margin-left: 10px; margin-right: 10px;" onclick="return false;" ng-click="goBackToChangeLanguagePage();" ng-show="{!NOT(isLastSelectedLanguageSet)} && !mlObj.isClientFromUS && mlObj.selectedLanguageCode != 'en_US'" >Change Language</button>
                                                <button class="slds-button slds-button_outline-brand" style="float: right;" onclick="return false;" ng-click="goBackToChangeLanguagePage();" ng-show="{!NOT(isLastSelectedLanguageSet)} && !mlObj.isClientFromUS" >{!$Label.TPA_Change_Language}</button>
                                            </div>
                                        </footer>
                                    </div>
                                    <div class="slds-backdrop slds-backdrop_open" style="z-index: 0"></div>
                                </div>

                                <div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" ng-hide="!IsShowVendorPrivacyPolicyBoard || !mlObj.isVendorLangLocked" style="display:none">
                                    <div class="slds-modal__container" style="z-index: 1">
                                        <header class="slds-modal__header">
                                            <h2 class="slds-text-heading_medium slds-hyphenate">
                                            </h2>
                                        </header>
                                        <div class="slds-modal__content slds-p-around_small">
                                            <apex:outputText value="{!msgPrimaryBoardContent}" escape="false" />
                                        </div>
                                        <footer class="slds-modal__footer">
                                            <div class="slds-text-align_center slds-m-top_x-small slds-m-bottom_x-small">
                                                <button class="slds-button slds-button_outline-brand" onclick="return false;" ng-click="hideVendorPrivacyPolicyBoard();">{!$Label.TPA_OK}</button>
                                            </div>
                                        </footer>
                                    </div>
                                    <div class="slds-backdrop slds-backdrop_open" style="z-index: 0"></div>
                                </div>
                                <div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" ng-hide="!clientSummaryPopup" style="display:none">
                                    <div class="slds-modal__container" style="z-index: 1">
                                        <header class="slds-modal__header">
                                            <h2 class="slds-text-heading_medium slds-hyphenate">
                                            </h2>
                                        </header>
                                        <div class="slds-modal__content slds-p-around_small" >
                                            <apex:outputText value="{!$Label.TPA_Please_review_information_on_this_screen_If_incorrect_do_not_proceed}" escape="false" />
                                        </div>
                                        <footer class="slds-modal__footer">
                                            <div class="slds-text-align_center slds-m-top_x-small slds-m-bottom_x-small">
                                                <button class="slds-button slds-button_outline-brand" onclick="return false;" ng-click="hideClientSummaryPopup();">{!$Label.TPA_Continue}</button>
                                            </div>
                                        </footer>
                                    </div>
                                    <div class="slds-backdrop slds-backdrop_open" style="z-index: 0"></div>
                                </div>
                            </div>
                        </div>
                    </apex:form>
                </div>
            </body>
            <!-- Body End -->
        </html> 
    </apex:outputPanel> <!-- Added for site to community logic submission-->
</apex:page>
