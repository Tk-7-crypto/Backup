<apex:page controller="CNT_TPA_ReportingServices" sidebar="false" lightningStylesheets="true">
  <apex:slds />
  <html>
  <head>
    <meta charset="UTF-8" />
    <title>TPA Reporting Services</title>
    <script src="/soap/ajax/52.0/connection.js" type="text/javascript"></script>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'scripts/jquery-2.0.2.min.js')}"/>
    <script src="{!$Resource.TPAJqueryUI}" type="text/javascript"></script>
    <link href="{!URLFOR($Resource.TPAJqueryUICss)}" rel="stylesheet" />
    

    <!-- *** Angular-JS Library reference *** -->
    <apex:includeScript value="{!$Resource.AngularJS}"/>    
    <!-- *** Angular-JS Library reference *** -->
    
    <apex:includeScript value="{!$Resource.TpaDateTimeFormatter}"/>

    <!-- *** Bootstrap Javascript Library reference *** -->
    <script src="{!$Resource.BootstrapJS}" type="text/javascript"></script>
    <!-- *** Bootstrap Javascript Library reference *** -->

    <!-- *** JQGrid-Widget Library reference *** -->
    <apex:stylesheet value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/styles/jqx.base.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/styles/jqx.office.css')}" />
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxcore.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxdata.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxbuttons.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxscrollbar.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxlistbox.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxdropdownlist.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxmenu.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.filter.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.sort.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.grouping.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.selection.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxpanel.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxcalendar.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/globalization/globalize.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.columnsresize.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'jqwidgets/jqxgrid.pager.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'scripts/demos.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.TPA_Jquery_Widgets, 'scripts/generatedata.js')}"/>
    <!-- *** JQGrid-Widget Library reference *** -->

    <!-- *** JQuery Custom Popup reference *** -->
    <script src="{!URLFOR($Resource.TpaCustomPopup, 'popup.js')}" type="text/javascript"></script>
    <link href="{!URLFOR($Resource.TpaCustomPopup, 'popup.css')}" rel="stylesheet" />
    <!-- *** JQuery Custom Popup reference *** -->
        
    <!-- *** Multi Select Control CSS reference *** -->
    <link href="{!URLFOR($Resource.TpaMultiSelect, 'select2.css')}" rel="stylesheet" />
    <!-- *** Multi Select Control CSS reference *** -->

    <!-- *** Multi Select Control Javascript Library reference *** -->
    <script src="{!URLFOR($Resource.TpaMultiSelect, 'select2.js')}" type="text/javascript"></script>
    <!-- *** Multi Select Control Javascript Library reference *** -->

    <script type="text/javascript">         
        sforce.connection.sessionId = '{!$Api.Session_ID}';
        Visualforce.remoting.timeout = 120000; // Set timeout at page level
        var reoportType = getParameterByName('c__report');
        var reportingApp = angular.module('reportingServicesApp',[]);
        reportingApp.controller('reportingServicesController',function($scope,$timeout,$log) {
          $scope.$log = $log;
            $scope.rootObj = {};
            //$scope.rootObj.reoportType = getParameterByName('report');
            $scope.rootObj.reportData;
            $scope.rootObj.qr = '';
            $scope.rootObj.reportTitle = '';
            $scope.rootObj.isReportAccessible = {!isUserHasReportAccess};//Added by C.P.Pandey under ER-2532
            var offset = -5.0;
            var serverDate;
            var utc;
            var remoteCallCounter = 0;
            var currentDate = new Date();
            var dayInMs = 1000*60*60*24;
            $scope.rootObj.tpaReqToSuppress = "{!$Setup.TPA_Settings__c.TPA_To_Suppress_From_Reports__c}";
            utc = currentDate.getTime() + (currentDate.getTimezoneOffset() * 60000);
            currentDate = new Date(utc + (3600000*offset));
            var resultArray = [];

            $scope.rootObj.isAcknowledged = false;
            $scope.rootObj.clientDetailsAcknowledgeMessage = '<div id="idAcknowledge" style="height:400px; overflow-y: scroll; border: 2px solid #c6c6c6; padding: 0px 5px; background-color: #fff;"><div id="page_1">';
            
            $scope.rootObj.clientDetailsAcknowledgeMessage += '<div class="dclr"></div><p class="p0 ft0">Guidelines</p><p class="p1 ft0">On the Handling and Use of Third Party Program Information</p><p class="p2 ft1">Introduction</p><p class="p3 ft2">When an {!($Label.TPA_IQVIA_Keyword)} client wishes to have the {!($Label.TPA_IQVIA_Keyword)} data assets the client licensed from {!($Label.TPA_IQVIA_Keyword)} used by a third party service provider ("vendor"), under the client license agreements with {!($Label.TPA_IQVIA_Keyword)}, the client is required to ensure a third party agreement ("TPA Agreement") is in place between {!($Label.TPA_IQVIA_Keyword)} and the vendor. The TPA Agreement is a limited license granted by {!($Label.TPA_IQVIA_Keyword)} to the vendor allowing the vendor to use the {!($Label.TPA_IQVIA_Keyword)} Data specified by the Client only for a specified purpose, for the Client’s exclusive benefit.</p><p class="p4 ft3">{!($Label.TPA_IQVIA_Keyword)} has built a robust TPA program so that clients can easily and efficiently get TPA Agreements in place, using intuitive online tools to initiate and evaluate TPA requests, automatically generate the TPA Agreements and get them executed. To initiate the process to put a TPA Agreement in place, the client submits a third party access request using {!($Label.TPA_IQVIA_Keyword)}&#39; online system to supply the identity of the vendor they wish to work with, what they wish the vendor to do for them (called a "Permitted Use" within the third party program), the {!($Label.TPA_IQVIA_Keyword)} licensed offerings they wish to share, and some specific additional data sub- setting.</p><p class="p5 ft4">In connection with the new TPA Agreement, {!($Label.TPA_IQVIA_Keyword)} has significantly reduced the amount of information we receive from clients (and their vendors) and generalized the information collected through the use of dropdown menus. This is a practical approach to protect client and vendor confidential information <nobr>---</nobr> don’t disclose it to {!($Label.TPA_IQVIA_Keyword)} Health in the first instance. In addition, much of the information we receive through the TPA Program is information we likely already obtained outside of the TPA Program &ndash; for example, through publicly available information or through our daily interactions with clients, or by responding to RFPs, and by providing client services, etc. Therefore, the amount of information we have access to as a result of the TPA Program is really quite limited, and most of that information is information we would ordinarily obtain through other means.</p>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '<p class="p6 ft1">Responsible Use of TPA Information</p><p class="p7 ft4">Even so, clients expect that we&#39;ll use responsibly the information we might not have had if not for the TPA Program (TPA Information). In general, we must use the TPA Information only to:</p><p class="p8 ft4"><span class="ft5">•</span><span class="ft6">Protect our substantial investments in our Intellectual Property (i.e., by reviewing the risk to our IP posed by certain TPA requests);</span></p><p class="p9 ft8"><span class="ft5">•</span><span class="ft7">Administer and improve the TPA Program; and</span></p><p class="p10 ft8"><span class="ft5">•</span><span class="ft7">Ensure Vendors&#39; compliance with their TPA Agreements.</span></p><p class="p11 ft3">On the other hand, we must ensure that TPA Information is not used in direct sales activities to <nobr>"counter-detail."</nobr> By that term, we mean that we must ensure that such information is not used to attempt to win specific work for a client that we are interested in or that was awarded to a competitive vendor. Nor will we use the TPA Information to interfere with the work the vendor is doing in connection with the TPA.</p><p class="p12 ft2">The attached <span class="ft9">TPA Information Governance Matrix </span>is intended to give more specific guidance to implement these principles. It describes (1) who within {!($Label.TPA_IQVIA_Keyword)} (based on roles and responsibilities) may have access to (2) different types of TPA Information (based on the level of detail) and (3) what they can use that information for. For questions about this Guidance, please contact <nobr><a href="mailto:TP-US@iqvia.com"><span class="ft11">TP-US@iqvia.com</span></a></nobr></p>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '<br /><p class="p16 ft12">TPA Information Governance Matrix</p><table cellspacing="0" cellpadding="0" class="t0"><tbody><tr><td class="tr0 td0"><p class="p17 ft13">&nbsp;</p></td><td class="tr0 td1"><p class="p17 ft13">&nbsp;</p></td><td class="tr0 td2"><p class="p17 ft13">&nbsp;</p></td><td class="tr0 td3"><p class="p17 ft13">&nbsp;</p></td><td class="tr0 td4" colspan="2"><p class="p18 ft14">{!($Label.TPA_IQVIA_Keyword)} Roles</p></td><td class="tr0 td5"><p class="p17 ft13">&nbsp;</p></td></tr><tr><td class="tr1 td6"><p class="p17 ft13">&nbsp;</p></td><td class="tr1 td7"><p class="p17 ft13">&nbsp;</p></td><td class="tr1 td8"><p class="p17 ft13">&nbsp;</p></td><td class="tr1 td9"><p class="p17 ft13">&nbsp;</p></td><td class="tr1 td10" colspan="2"><p class="p19 ft14">Account &amp; GKAM Leaders</p></td><td class="tr2 td11" rowspan="2"><p class="p20 ft14">Senior Mgmt<a href="#page_3"><span class="ft15">ii</span></a></p></td></tr><tr><td class="tr3 td6"><p class="p17 ft13">&nbsp;</p></td><td class="tr3 td7"><p class="p21 ft14">TP Request</p></td><td class="tr3 td8"><p class="p17 ft13">&nbsp;</p></td><td class="tr3 td9"><p class="p17 ft13">&nbsp;</p></td><td class="tr3 td10" colspan="2"><p class="p22 ft14">Client Services,</p></td></tr><tr><td class="tr4 td12"><p class="p23 ft14">Data Level</p></td><td class="tr4 td13"><p class="p24 ft14">Information</p></td><td class="tr4 td14"><p class="p25 ft14">Account Sales Person</p></td><td class="tr4 td15"><p class="p17 ft13">&nbsp;</p></td><td class="tr4 td16" colspan="2"><p class="p22 ft14">Business mgrs, GTO<span class="ft15">i</span></p></td><td class="tr4 td17"><p class="p26 ft14">&amp; Product Mgmt</p></td></tr>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '<tr><td class="tr3 td18"><p class="p17 ft13">&nbsp;</p></td><td class="tr3 td19"><p class="p27 ft16">Client legal entity</p></td><td class="tr5 td20" rowspan="2"><p class="p28 ft16">No</p></td><td class="tr3 td21"><p class="p17 ft13">&nbsp;</p></td><td class="tr5 td22" rowspan="2" colspan="2"><p class="p29 ft16">Note 2</p></td><td class="tr5 td23" rowspan="2"><p class="p30 ft16">Note 1</p></td></tr><tr><td class="tr6 td18"><p class="p17 ft17">&nbsp;</p></td><td class="tr7 td24" rowspan="2"><p class="p27 ft16">information</p></td><td class="tr6 td21"><p class="p17 ft17">&nbsp;</p></td></tr><tr><td class="tr6 td18"><p class="p17 ft17">&nbsp;</p></td><td class="tr8 td25"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td26"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td27"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td28"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td29"><p class="p17 ft18">&nbsp;</p></td></tr><tr><td class="tr9 td18"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td19"><p class="p27 ft16">Client contact</p></td><td class="tr10 td20" rowspan="2"><p class="p25 ft16">No</p></td><td class="tr9 td21"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td30"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td31"><p class="p17 ft13">&nbsp;</p></td><td class="tr10 td23" rowspan="2"><p class="p30 ft16">Note 1</p></td></tr><tr><td class="tr11 td18" rowspan="3"><p class="p31 ft14">Individual Project</p></td><td class="tr7 td19"><p class="p27 ft16">information <span class="ft19">(Who’s</span></p></td><td class="tr7 td21"><p class="p17 ft13">&nbsp;</p></td><td class="tr12 td22" rowspan="2" colspan="2"><p class="p22 ft16">Note 2</p></td></tr><tr><td class="tr13 td24" rowspan="2"><p class="p27 ft19">involved?)</p></td><td class="tr14 td20"><p class="p17 ft20">&nbsp;</p></td><td class="tr14 td21"><p class="p17 ft20">&nbsp;</p></td><td class="tr14 td23"><p class="p17 ft20">&nbsp;</p></td></tr>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '<tr><td class="tr15 td25"><p class="p17 ft21">&nbsp;</p></td><td class="tr15 td26"><p class="p17 ft21">&nbsp;</p></td><td class="tr15 td27"><p class="p17 ft21">&nbsp;</p></td><td class="tr15 td28"><p class="p17 ft21">&nbsp;</p></td><td class="tr15 td29"><p class="p17 ft21">&nbsp;</p></td></tr><tr><td class="tr9 td18"><p class="p31 ft14">Details</p></td><td class="tr9 td19"><p class="p27 ft16">Vendor information</p></td><td class="tr12 td20" rowspan="2"><p class="p25 ft16">No</p></td><td class="tr9 td21"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td30"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td31"><p class="p17 ft13">&nbsp;</p></td><td class="tr12 td23" rowspan="2"><p class="p30 ft16">Note 1</p></td></tr><tr><td class="tr6 td18"><p class="p17 ft17">&nbsp;</p></td><td class="tr16 td24" rowspan="2"><p class="p27 ft19">(with who?)</p></td><td class="tr6 td21"><p class="p17 ft17">&nbsp;</p></td><td class="tr16 td27" rowspan="2"><p class="p29 ft16">Note 2</p></td><td class="tr6 td31"><p class="p17 ft17">&nbsp;</p></td></tr><tr><td class="tr17 td18"><p class="p17 ft22">&nbsp;</p></td><td class="tr6 td25"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td26"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td28"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td29"><p class="p17 ft17">&nbsp;</p></td></tr><tr><td class="tr9 td18"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td19"><p class="p27 ft16">Project specific</p></td><td class="tr11 td20" rowspan="2"><p class="p25 ft16">No</p></td><td class="tr9 td21"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td30"><p class="p17 ft13">&nbsp;</p></td><td class="tr9 td31"><p class="p17 ft13">&nbsp;</p></td><td class="tr11 td23" rowspan="2"><p class="p30 ft16">Note 1</p></td></tr><tr><td class="tr3 td18"><p class="p17 ft13">&nbsp;</p></td><td class="tr3 td19"><p class="p27 ft19"><span class="ft16">details </span>(uses / offerings,</p></td><td class="tr3 td21"><p class="p17 ft13">&nbsp;</p></td><td class="tr18 td22" rowspan="2" colspan="2"><p class="p22 ft16">Note 2</p></td></tr><tr><td class="tr14 td18"><p class="p17 ft20">&nbsp;</p></td> <td class="tr9 td24" rowspan="2"><p class="p27 ft19">dates, etc)</p></td><td class="tr14 td20"><p class="p17 ft20">&nbsp;</p></td><td class="tr14 td21"><p class="p17 ft20">&nbsp;</p></td><td class="tr14 td23"><p class="p17 ft20">&nbsp;</p></td></tr><tr><td class="tr8 td32"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td25"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td26"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td27"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td28"><p class="p17 ft18">&nbsp;</p></td><td class="tr8 td29"><p class="p17 ft18">&nbsp;</p></td></tr>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '<tr><td class="tr3 td18"><p class="p31 ft14">Aggregated Project</p></td><td class="tr3 td19"><p class="p27 ft16">By Client legal entity</p></td><td class="tr19 td20" rowspan="2"><p class="p28 ft16">No</p></td><td class="tr3 td33"><p class="p17 ft13">&nbsp;</p></td><td class="tr19 td34" rowspan="2" colspan="2"><p class="p29 ft16">Note 3</p></td><td class="tr19 td35" rowspan="2"><p class="p30 ft16">Note 3</p></td></tr><tr><td class="tr3 td18" rowspan="3"><p class="p31 ft14">Details</p></td><td class="tr15 td19"><p class="p17 ft21">&nbsp;</p></td><td class="tr15 td33"><p class="p17 ft21">&nbsp;</p></td></tr><tr><td class="tr20 td24"><p class="p17 ft23">&nbsp;</p></td><td class="tr20 td25"><p class="p17 ft23">&nbsp;</p></td><td class="tr20 td36"><p class="p17 ft23">&nbsp;</p></td><td class="tr20 td37"><p class="p17 ft23">&nbsp;</p></td><td class="tr20 td38"><p class="p17 ft23">&nbsp;</p></td><td class="tr20 td39"><p class="p17 ft23">&nbsp;</p></td></tr><tr><td class="tr3 td19" rowspan="2"><p class="p27 ft16">By vendor entity</p></td><td class="tr21 td20"><p class="p17 ft24">&nbsp;</p></td><td class="tr21 td33"><p class="p17 ft24">&nbsp;</p></td><td class="tr21 td40"><p class="p17 ft24">&nbsp;</p></td><td class="tr21 td41"><p class="p17 ft24">&nbsp;</p></td><td class="tr21 td35"><p class="p17 ft24">&nbsp;</p></td></tr><tr><td class="tr3 td18" rowspan="2"><p class="p31 ft25">(Most recent 30 days</p></td><td class="tr3 td20" rowspan="2"><p class="p25 ft16">No</p></td><td class="tr22 td33"><p class="p17 ft26">&nbsp;</p></td><td class="tr3 td34" rowspan="2" colspan="2"><p class="p22 ft16">Note 3</p></td><td class="tr3 td35" rowspan="2"><p class="p30 ft16">Note 3</p></td></tr><tr><td class="tr21 td19"><p class="p17 ft24">&nbsp;</p></td><td class="tr21 td33"><p class="p17 ft24">&nbsp;</p></td></tr><tr><td class="tr16 td18" rowspan="2"><p class="p31 ft25">activity excluded)</p></td><td class="tr6 td24"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td25"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td36"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td37"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td38"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td39"><p class="p17 ft17">&nbsp;</p></td></tr><tr><td class="tr18 td19" rowspan="2"><p class="p27 ft16">By Offering</p></td><td class="tr18 td20" rowspan="2"><p class="p25 ft16">No</p></td><td class="tr8 td33"><p class="p17 ft18">&nbsp;</p></td><td class="tr19 td42" rowspan="2" colspan="2"><p class="p22 ft16">Note 3</p></td><td class="tr19 td43" rowspan="2"><p class="p30 ft16">Note 3</p></td></tr><tr><td class="tr9 td18"><p class="p17 ft13">&nbsp;</p></td><td class="tr23 td44"><p class="p17 ft27">&nbsp;</p></td></tr><tr><td class="tr7 td18"><p class="p17 ft13">&nbsp;</p></td><td class="tr3 td45"><p class="p27 ft16">By Use</p></td><td class="tr5 td46" rowspan="2"><p class="p25 ft16">No</p></td><td class="tr3 td47"><p class="p17 ft13">&nbsp;</p></td><td class="tr5 td48" rowspan="2" colspan="2"><p class="p22 ft16">Note 3</p></td><td class="tr5 td49" rowspan="2"><p class="p30 ft16">Note 3</p></td></tr><tr><td class="tr6 td18"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td19"><p class="p17 ft17">&nbsp;</p></td><td class="tr6 td33"><p class="p17 ft17">&nbsp;</p></td></tr><tr><td class="tr24 td32"><p class="p17 ft28">&nbsp;</p></td><td class="tr24 td24"><p class="p17 ft28">&nbsp;</p></td><td class="tr24 td25"><p class="p17 ft28">&nbsp;</p></td><td class="tr24 td36"><p class="p17 ft28">&nbsp;</p></td><td class="tr24 td37"><p class="p17 ft28">&nbsp;</p></td><td class="tr24 td38"><p class="p17 ft28">&nbsp;</p></td><td class="tr24 td39"><p class="p17 ft28">&nbsp;</p></td></tr>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '</tbody></table>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '<p class="p32 ft29"><span class="ft0">Note 1 </span>&ndash; TPA Information available only to support manual reviews to insure risk to {!($Label.TPA_IQVIA_Keyword)} intellectual property is at an acceptably low level.</p><p class="p33 ft31"><span class="ft30">Note 2 </span>&ndash; TPA Information can only be accessed at behest of a client in support of the clients request pertaining to one or more of the client’s third party access requests.</p><p class="p34 ft34"><span class="ft32">Note 3 </span>&ndash; TPA Information consists only of aggregated data accessed via standard reports prepared by {!($Label.TPA_IQVIA_Keyword)} Alliance Team. Standard reports contain data aged more than 30 days; current <nobr>30-days</nobr> will not be provided. Used for TP Program administration activities including IP risk analysis, auditing, client / vendor account management (<span class="ft33">pertaining to third party activities</span>), third party program enhancements (<span class="ft33">e.g. rules, process flows, data entry, documentation</span>) and compliance.</p><hr style="margin-top:27px;" /><p class="p35 ft16"><span class="ft35">i </span>This group also includes Client Services Management, HQ Services Mgrs, Project Managers and other similar client support and delivery roles.</p><p class="p35 ft16"><span class="ft35">ii </span>This includes members of local country Executive Teams and the Global Leadership Team.</p><p class="p13 ft10">CONFIDENTIAL</p>';

            $scope.rootObj.clientDetailsAcknowledgeMessage += '</div></div>';
            $scope.searchData = {};             

            var isAcknowledgeButtonEnabled = false;
            $scope.popupAlert = function(msg, truePart, falsePart, buttonText, buttonTextCancel)
            {
                popup(msg, {'confirm':true,'animate':true}, 
                function(r)
                {
                    if(r && truePart != null)
                        truePart();
                    else if(falsePart != null)
                        falsePart();
                });
                if(buttonText != null)
                {
                    $('.aButtons button').each(function(){
                        if($(this).attr('value') == 'ok')
                        {
                            $(this).html(buttonText);
                            $(this).attr('disabled','disabled').addClass('disabled');
                        }
                    });
                    $('#idAcknowledge').scroll(function () {
                        if (($(this).scrollTop() > $(this)[0].scrollHeight - $(this).height() - 50) && !isAcknowledgeButtonEnabled) {
                            $('.aButtons button').each(function(){
                                $(this).removeAttr('disabled').removeClass('disabled');
                            });
                            isAcknowledgeButtonEnabled = true;
                            $('.appriseOverlay').click();
                        }
                    });
                }
                if(buttonTextCancel != null)
                {
                    $('.aButtons button').each(function(){
                        if($(this).attr('value') == 'cancel')
                        {
                            $(this).html(buttonTextCancel);
                        }
                    });
                }
            }
            $scope.applyChanges = function()
            {
                if ($scope.$root.$$phase != '$apply' && $scope.$root.$$phase != '$digest')
                    $scope.$apply();
            }
            
            $scope.loadCDL = function(searchFilter,lastRecordCreatedId)
            {
                if(remoteCallCounter == 0)
                    showLoading();
                CNT_TPA_ReportingServices.loadReport(reoportType, 1000, searchFilter, lastRecordCreatedId, function(result, event){
                    if(event.type == 'exception')
                    {
                        //$scope.$log.info('Error: ' + event.message);
                        hideLoading();
                        $scope.popupAlert('<b>Report Timed Out</b> - Please adjust or add more filters');
                        return false;                                    
                    }
                    else
                    {	$scope.$log.info('callInvoked:'+remoteCallCounter+':::'+result.length);
                        if(result == null || (result != null && result.length == 0)){
                            hideLoading();
                        	$scope.popupAlert('No Data To Export');
                        	return false;
                        }
                     	if(result != null)
                            $.merge(resultArray, result);
                        if(result.length == 1000)
                        {
                            remoteCallCounter++;
                            $scope.loadCDL(searchFilter,result[result.length - 1].Id);
                            return false;
                        }$scope.$log.info('callInvoked1:'+remoteCallCounter+':::'+result.length);
                        $scope.rootObj.reportData = resultArray;
                        $scope.rootObj.tempReqReference = '';
                        $scope.rootObj.tempVendorAddress = '';
    
                        var source =
                        {
                            localdata: $scope.rootObj.reportData,
                            datatype: "array",
                            sortcolumn: 'Name',
                            sortdirection: 'desc',
                            datafields:
                            [
                                { name: 'Id', type: 'string' },
                                { name: 'Name', type: 'string' },
                                { name: 'Service_Provider_Address__c', type: 'string' },
                                { name: 'Client_Address__c', type: 'string' },
                                { name: 'Request_Status__c', type: 'string' },
                                { name: 'CreatedDate', type: 'date' },
                                { name: 'Data_Access_Start_Date__c', type: 'date' },
                                { name: 'Data_Access_End_Date__c', type: 'date' },
                                { name: 'Service_ProviderName', map: 'Service_Provider_Address__r>Name', type: 'string' },
                                { name: 'Vendor_Company_Name__c', type: 'string' },
                                { name: 'Service_Provider_Billing_Address__c', type: 'string' },
                                { name: 'Secondary_Client_Contact_Territory__c', type: 'string' },
                                { name: 'Vendor_e_mail__c', type: 'string' },
                                { name: 'Vendor_Contact_Email_Client__c', type: 'string' },
                                { name: 'Service_Provider_Contact_f__c', type: 'string' },
                                { name: 'ClientContact__r.Name', map: 'ClientContact__r>Name', type: 'string' },
                                { name: 'Client_Address__r.Name', map: 'Client_Address__r>Name', type: 'string' },
                                { name: 'Client_Contact_Territory__c', type: 'string' },
                            ]
                        };
                        var dataAdapter = new $.jqx.dataAdapter(source,
                        {
                            autoBind: true,
                            beforeLoadComplete: function (records) {
                              var data = new Array();
                              // update the loaded records. Dynamically add EmployeeName and EmployeeID fields. 
                              for (var i = 0; i < records.length; i++) {
                                  $scope.rootObj.tempReqReference = records[i];
                                  $scope.rootObj.tempReqReference.reqIdLink = '<a href="https://' + window.location.host + '/' + $scope.rootObj.tempReqReference.Id + '" target="blank">' + $scope.rootObj.tempReqReference.Name + '</a>';
                                  if($scope.rootObj.tpaReqToSuppress == null || ($scope.rootObj.tpaReqToSuppress != null && $scope.rootObj.tpaReqToSuppress.indexOf($scope.rootObj.tempReqReference.Name) == -1 && $scope.rootObj.tpaReqToSuppress.indexOf($scope.rootObj.tempReqReference['Client_Address__r.Name']) == -1 && $scope.rootObj.tpaReqToSuppress.indexOf($scope.rootObj.tempReqReference.VendorName) == -1))
                                  {  
                                      data.push(angular.copy($scope.rootObj.tempReqReference));
                                  }
                              }
                              return data;
                            }
                          }
                        );
                        $("#jqxgrid").jqxGrid(
                        {
                            width: '100%',
                            source: dataAdapter,                
                            altrows: false,
                            sortable: true,
                            groupable: true,
                            showfilterrow: false,
                            filterable: true,
                            selectionmode: 'none',
                            pageable: false,
                            autoheight: false,
                            columnsresize: true,
                            enabletooltips: true,
                            theme: 'office',
                            autorowheight: false,
                            pagesizeoptions: ['10', '20', '50', '100', '200'],
                            columns: [
                              { text: 'TPA Number', datafield: 'reqIdLink', filterable: true, groupable:false, width:'6%', cellsrenderer: tooltiprenderer},
                              { text: 'Current Status', datafield: 'Request_Status__c',filtertype: 'text', groupable:false,width:'11%'},
                              { text: 'Client', datafield: 'Client_Address__r.Name', filterable:true, groupable:false,width:'10%' },
                               { text: 'Requesting Country', datafield: 'Client_Contact_Territory__c', filterable:true, groupable:false,width:'10%' },
                                  { text: 'Requesting For Country', datafield: 'Secondary_Client_Contact_Territory__c',filterable: true,groupable:false,width:'10%'},
                              { text: 'Date Submitted', datafield: 'CreatedDate',filterable: true,cellsformat: 'MM/dd/yyyy',filtertype: 'date', groupable:false,width:'7%'},
                              { text: 'Data Access Start Date', datafield: 'Data_Access_Start_Date__c',filterable: true,cellsformat: 'MM/dd/yyyy',filtertype: 'date', groupable:false,width:'9%'},
                              { text: 'Data Access End Date', datafield: 'Data_Access_End_Date__c',filterable: true,cellsformat: 'MM/dd/yyyy',filtertype: 'date', groupable:false,width:'9%'},
                              { text: 'Vendor Name', datafield: 'Vendor_Company_Name__c',filterable: true,filtertype: 'text', groupable:false,width:'10%'},
                              { text: 'Vendor Address', datafield: 'Service_Provider_Billing_Address__c',filterable: true,width:'15%'},
                              { text: 'Client Contact Name', datafield: 'ClientContact__r.Name',filterable: true,filtertype: 'text', groupable:false,width:'10%'},
                            ],
                            groups: ['Client_Address__r.Name'],                            
                        });                
            
                        $("#jqxgrid").on("filter", function (event) {
                            $scope.filtersObjArray = $("#jqxgrid").jqxGrid('getfilterinformation');
                            if($scope.filtersObjArray != null && $scope.filtersObjArray.length > 0)
                            {                               
                                $("#jqxgrid").jqxGrid('expandallgroups');    
                            }
                            else
                                $("#jqxgrid").jqxGrid('collapseallgroups');
                        });
                		$("#excelExport").jqxButton();
            			$("#excelExport").click(function () {
                            $scope.$log.info($scope.searchData);
                			exportData(JSON.stringify($scope.searchData));
            			});
                        hideLoading();
                        $scope.applyChanges();
                    }
                });
            }
            
            $scope.gridLoaded = false;
            $scope.loadITPR = function(searchFilter,lastRecordCreatedId)
            {
                if(remoteCallCounter == 0)
                    showLoading();

                CNT_TPA_ReportingServices.loadReport(reoportType, 1000,searchFilter ,lastRecordCreatedId, function(result, event){
                    if(event.type == 'exception')
                    {
                        //$scope.$log.info('Error: ' + event.message);
                        hideLoading();
                        $scope.popupAlert('<b>Report Timed Out</b> - Please adjust or add more filters');
                        return false;                                    
                    }
                    else
                    {
                        $scope.$log.info('callInvoked0:'+remoteCallCounter+':::'+result.length);
                        if(result != null)
                            $.merge(resultArray, result);
                        if(result.length == 1000)
                        {
                            remoteCallCounter++;
                            $scope.loadITPR(searchFilter,result[result.length - 1].Id);
                            return false;
                        }$scope.$log.info('callInvoked01:'+remoteCallCounter+':::'+result.length);
                        
                        $scope.rootObj.reportData = resultArray;
                        if(!$scope.isBulkSelected){
                        var use = '';
                        var offerings = '';
                        var secDAExistedFlag = false;
                        angular.forEach($scope.rootObj.reportData, function(value, key) {
                            if(value.Purposes__r != null && !Array.isArray(value.Purposes__r))
                                value.Purposes__r = [value.Purposes__r.records];
                            if(value.Data_Assets__r != null && !Array.isArray(value.Data_Assets__r))
                                value.Data_Assets__r = [value.Data_Assets__r];
                            if(value.TPA_Tertiary_Data_Assets__r != null && !Array.isArray(value.TPA_Tertiary_Data_Assets__r))
                                value.TPA_Tertiary_Data_Assets__r = [value.TPA_Tertiary_Data_Assets__r];
                            value.UseOfferings = {};
                            value.UseOfferings.uolist = [];
                            angular.forEach(value.Purposes__r, function(purpValue, purpKey) {
                                use = purpValue.Name;
                                offerings = '';
                                if(value.Data_Assets__r != null)
                                    angular.forEach(value.Data_Assets__r, function(daValue, daKey){
                                        if(daValue.Purpose__c == purpValue.Id)
                                        {
                                            secDAExistedFlag = false;
                                            if(value.TPA_Tertiary_Data_Assets__r != null)
                                                angular.forEach(value.TPA_Tertiary_Data_Assets__r, function(sdaValue, sdaKey){
                                                    if(sdaValue.TPA_Data_Asset__c == daValue.Id)
                                                    {
                                                        offerings += sdaValue.Secondary_Asset_Name__c + ', ';
                                                        secDAExistedFlag = true;
                                                    }
                                                });
                                            if(!secDAExistedFlag)
                                            {
                                                offerings += daValue.Asset_Name__c + ', ';
                                            }
                                        }
                                    });                                
                                //$scope.$log.info('use-offerings::::' + use + '----' + offerings+'----'+value.Id);
                                var useOffering = {};
                                useOffering.use = use;
                                useOffering.offering = offerings.slice(0,-2);
                                useOffering.country = purpValue.BU__c
                                value.UseOfferings.uolist.push(angular.copy(useOffering));
                            });
                        });
                        }
                        //$scope.$log.info($scope.rootObj.reportData);
                        //$scope.$log.info('value:'+$scope.rootObj.reportData.length);
                
                        $scope.rootObj.tempReqReference = '';
                        $scope.rootObj.tempVendorAddress = '';

                        var source =
                        {
                            localdata: $scope.rootObj.reportData,
                            datatype: "array",
                            sortcolumn: 'Name',
                            sortdirection: 'desc',
                            datafields:
                            [
                                { name: 'Id', type: 'string' },
                                { name: 'Name', type: 'string' },
                                { name: 'Service_Provider_Address__c', type: 'string' },
                                { name: 'Client_AddressName',map: 'Client_Address__r>Name', type: 'string' },
                                { name: 'Request_Status__c', type: 'string' },
                                { name: 'Client_Billing_Address__c', type: 'string'},
                                { name: 'Service_Provider_Billing_Address__c', type: 'string'},
                                { name: 'Client_Full_Name__c', type: 'string' },
                                { name: 'Vendor_Company_Name__c', type: 'string' },
                                { name: 'Service_ProviderName', map: 'Service_Provider_Address__r>Name', type: 'string' },
                                { name: 'Service_Provider_Contact_f__c', type: 'string' },
                                { name: 'Vendor_e_mail__c', type: 'string' },
                                { name: 'Vendor_Contact_Email_Client__c', type: 'string' },
                                { name: 'Authorized_Signer_Full_Name__c', type: 'string' },
                                { name: 'Client_Request_Submission__c', type: 'date' },
                                { name: 'Vendor_App_Submitted__c', type: 'date' },
                                { name: 'In_IMS_Review__c', type: 'date' },
                                { name: 'TPA_Assigned_TP_Processor__r.Name',map: 'TPA_Assigned_TP_Processor__r>Name' , type: 'string' },
                                { name: 'Internal_Pending_Status__c', type: 'string' },
                                { name: 'Sent_for_Signature__c', type: 'date' },
                                { name: 'Signature_Received__c', type: 'date' },
                                { name: 'In_Effect_Date__c', type: 'date' },
                                { name: 'Agreement_Effective_Date__c', type: 'date' },
                                { name: 'Data_Access_End_Date__c', type: 'date' },
                                { name: 'Manual_Trigger_Reasons__c', type: 'string' },
                                { name: 'TP_Processor_Name__c', type: 'string' },
                                { name: 'TPA_Doc_Link__c', type: 'string' },
                                { name: 'DataAssetCount', map: 'Data_Assets__r>BillingPostalCode', type: 'string' },


                                { name: 'CreatedDate', type: 'date' },
                                { name: 'Data_Access_Start_Date__c', type: 'date' },
                                { name: 'Cancelled__c', type: 'date' },
                                { name: 'Expired_Date__c', type: 'date' },
                                { name: 'IMS_Denied__c', type: 'date' },
                                { name: 'Signature_Under_Validation__c', type: 'date' },
                                { name: 'TPA_Approved_Awaiting_AMA_Approval__c', type: 'date' },
                                

                                { name: 'Service_Provider_Address__r.Name', map: 'Service_Provider_Address__r>Name', type: 'string' },
                                { name: 'ClientContact__r.Name', map: 'ClientContact__r>Name', type: 'string' },
                            ]
                        };
                        var dataAdapter = new $.jqx.dataAdapter(source,
                        {
                            autoBind: true,
                            beforeLoadComplete: function (records) {
                              var data = new Array();
                              // update the loaded records. Dynamically add EmployeeName and EmployeeID fields. 
                              for (var i = 0; i < records.length; i++) {
                                  $scope.rootObj.tempReqReference = records[i];
                                  if($scope.rootObj.tempReqReference.Service_Provider_Address__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.VendorName = $scope.rootObj.tempReqReference.Service_ProviderName;
                                  }
                                  else
                                  {
                                    $scope.rootObj.tempReqReference.VendorName = $scope.rootObj.tempReqReference.Vendor_Company_Name__c;
                                  }
                                  $scope.rootObj.tempReqReference.VendorContactEmail = $scope.rootObj.tempReqReference.Vendor_e_mail__c != null ? $scope.rootObj.tempReqReference.Vendor_e_mail__c : $scope.rootObj.tempReqReference.Vendor_Contact_Email_Client__c;
                                  $scope.rootObj.tempReqReference.AuthorizedSigner = $scope.rootObj.tempReqReference.Authorized_Signer_Full_Name__c ;
                                  if($scope.rootObj.tempReqReference.Client_Request_Submission__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.Client_Request_Submission__c.getTime() + ($scope.rootObj.tempReqReference.Client_Request_Submission__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.Client_Request_Submission__c = serverDate;
                                  }
                                  if($scope.rootObj.tempReqReference.Vendor_App_Submitted__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.Vendor_App_Submitted__c.getTime() + ($scope.rootObj.tempReqReference.Vendor_App_Submitted__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.Vendor_App_Submitted__c = serverDate;
                                  }
                                  if($scope.rootObj.tempReqReference.In_IMS_Review__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.In_IMS_Review__c.getTime() + ($scope.rootObj.tempReqReference.In_IMS_Review__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.In_IMS_Review__c = serverDate;
                                  }
                                  if($scope.rootObj.tempReqReference.Sent_for_Signature__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.Sent_for_Signature__c.getTime() + ($scope.rootObj.tempReqReference.Sent_for_Signature__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.Sent_for_Signature__c = serverDate;
                                  }
                                  if($scope.rootObj.tempReqReference.Signature_Received__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.Signature_Received__c.getTime() + ($scope.rootObj.tempReqReference.Signature_Received__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.Signature_Received__c = serverDate;
                                  }
                                  if($scope.rootObj.tempReqReference.In_Effect_Date__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.In_Effect_Date__c.getTime() + ($scope.rootObj.tempReqReference.In_Effect_Date__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.In_Effect_Date__c = serverDate;
                                  }
                                  if($scope.rootObj.tempReqReference.CreatedDate != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.CreatedDate.getTime() + ($scope.rootObj.tempReqReference.CreatedDate.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.CreatedDate = serverDate;
                                  }                         
                                  if($scope.rootObj.tempReqReference.Cancelled__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.Cancelled__c.getTime() + ($scope.rootObj.tempReqReference.Cancelled__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.Cancelled__c = serverDate;
                                  }                         
                                  if($scope.rootObj.tempReqReference.Expired_Date__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.Expired_Date__c.getTime() + ($scope.rootObj.tempReqReference.Expired_Date__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.Expired_Date__c = serverDate;
                                  }                         
                                  if($scope.rootObj.tempReqReference.IMS_Denied__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.IMS_Denied__c.getTime() + ($scope.rootObj.tempReqReference.IMS_Denied__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.IMS_Denied__c = serverDate;
                                  }                         
                                  if($scope.rootObj.tempReqReference.Signature_Under_Validation__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.Signature_Under_Validation__c.getTime() + ($scope.rootObj.tempReqReference.Signature_Under_Validation__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.Signature_Under_Validation__c = serverDate;
                                  }                         
                                  if($scope.rootObj.tempReqReference.TPA_Approved_Awaiting_AMA_Approval__c != null)
                                  {
                                      utc = $scope.rootObj.tempReqReference.TPA_Approved_Awaiting_AMA_Approval__c.getTime() + ($scope.rootObj.tempReqReference.TPA_Approved_Awaiting_AMA_Approval__c.getTimezoneOffset() * 60000);
                                      serverDate = new Date(utc + (3600000*offset));
                                      $scope.rootObj.tempReqReference.TPA_Approved_Awaiting_AMA_Approval__c = serverDate;
                                  }
                                  
                                  if($scope.rootObj.tempReqReference.Request_Status__c == 'Awaiting Vendor Signature' && $scope.rootObj.tempReqReference.Sent_for_Signature__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.Sent_for_Signature__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == 'Awaiting Vendor Submission' && $scope.rootObj.tempReqReference.Client_Request_Submission__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.Client_Request_Submission__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == 'Cancelled' && $scope.rootObj.tempReqReference.Cancelled__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.Cancelled__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == 'Expired' && $scope.rootObj.tempReqReference.Expired_Date__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.Expired_Date__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == '{!$Label.TPA_IQVIA_Denied_Status}' && $scope.rootObj.tempReqReference.IMS_Denied__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.IMS_Denied__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == 'In Effect' && $scope.rootObj.tempReqReference.In_Effect_Date__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.In_Effect_Date__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == '{!$Label.TPA_In_Review_By_IQVIA_Status}' && $scope.rootObj.tempReqReference.In_IMS_Review__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.In_IMS_Review__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == 'Signature Under Validation' && $scope.rootObj.tempReqReference.Signature_Under_Validation__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.Signature_Under_Validation__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == 'TPA Approved Awaiting AMA Approval' && $scope.rootObj.tempReqReference.TPA_Approved_Awaiting_AMA_Approval__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.TPA_Approved_Awaiting_AMA_Approval__c)/dayInMs);
                                  }
                                  else if($scope.rootObj.tempReqReference.Request_Status__c == 'In Auto Approval Process' && $scope.rootObj.tempReqReference.Vendor_App_Submitted__c != null)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = Math.round((currentDate-$scope.rootObj.tempReqReference.Vendor_App_Submitted__c)/dayInMs);
                                  }

                                  if($scope.rootObj.tempReqReference.CurrentStateInFrom >= 0)
                                  {
                                    $scope.rootObj.tempReqReference.CurrentStateInFrom = 'From ' + $scope.rootObj.tempReqReference.CurrentStateInFrom + ($scope.rootObj.tempReqReference.CurrentStateInFrom == 1 ? ' day' : ' days') +  ' in <b>' + $scope.rootObj.tempReqReference.Request_Status__c + '</b>';
                                  }

                                  $scope.rootObj.tempReqReference.reqIdLink = '<a href="https://' + window.location.host + '/' + $scope.rootObj.tempReqReference.Id + '" target="blank">' + $scope.rootObj.tempReqReference.Name + '</a>';
                                  if($scope.rootObj.tempReqReference.TPA_Doc_Link__c != null)
                                      $scope.rootObj.tempReqReference.TPA_Doc_Link__c = '<a href="' + $scope.rootObj.tempReqReference.TPA_Doc_Link__c + '" target="blank">TLLA</a>';


                                  if($scope.rootObj.tpaReqToSuppress == null || ($scope.rootObj.tpaReqToSuppress != null && $scope.rootObj.tpaReqToSuppress.indexOf($scope.rootObj.tempReqReference.Name) == -1 && $scope.rootObj.tpaReqToSuppress.indexOf($scope.rootObj.tempReqReference.Client_Full_Name__c) == -1 && $scope.rootObj.tpaReqToSuppress.indexOf($scope.rootObj.tempReqReference.VendorName) == -1))
                                  {
                                      data.push(angular.copy($scope.rootObj.tempReqReference));
                                  }
                              }
                              return data;
                            }
                          }
                        );

                        // create nested grid.
                        var initrowdetails = function (index, parentElement, gridElement, record) {
                            if($scope.isBulkSelected){
                            	return;
                            }
                            var id = record.uid.toString();
                            var grid = $($(parentElement).children()[0]);
                            var nestedSource =
                              {
                                  datafields: [
                                      { name: 'country', map: 'country', type: 'string' },
                                      { name: 'offering', map: 'offering', type: 'string' },
                                      { name: 'use', map: 'use', type: 'string' }
                                  ],
                                  datatype: "json",
                                  root: 'uolist',
                                  localdata: $scope.rootObj.reportData[index].UseOfferings
                              };
                            var nestedAdapter = new $.jqx.dataAdapter(nestedSource);
                            if (grid != null) {
                                grid.jqxGrid({
                                    source: nestedAdapter, 
                                    theme: 'office', 
                                    width: '100%',
                                    height: 180,
                                    autoheight: false,
                                    columns: [
                                        { text: "Use", datafield: "use", width:'20%' },
                                        { text: "Offerings", datafield: "offering", width:'70%' },
                                        { text: "Country Of Region", datafield: "country", width:'10%' }
                                   ]
                                });
                            }
                        }
                        
                        if(!$scope.gridLoaded){
                        	$scope.initializeGrid(dataAdapter,initrowdetails);
                            $scope.gridLoaded = true;
                        }
                        else{
                        	$scope.reloadGrid(dataAdapter,initrowdetails);
                        }
                        
                        hideLoading();
                    } 
                });    
            }
            
            $scope.reloadGrid = function(dataAdapter,initrowdetails){
                $("#jqxgrid").jqxGrid({ source: dataAdapter , 
                                       	rowdetails: $scope.isBulkSelected ? false : true,
                                       	initrowdetails: initrowdetails,
                                      	rowdetailstemplate: { rowdetails: "<div id='grid' style='margin: 10px;'></div>",rowdetailsheight:200, rowdetailshidden: true },
                                      });
            }
                                
            $scope.initializeGrid = function(dataAdapter,initrowdetails){
            	$("#jqxgrid").jqxGrid(
                        {
                            width: '100%',
                            height: 500,
                            source: dataAdapter,                
                            altrows: false,
                            sortable: true,
                            groupable: false,
                            showfilterrow: false,
                            filterable: true,
                            selectionmode: 'none',
                            pageable: true,
                            autoheight: false,
                            columnsresize: true,
                            enabletooltips: true,
                            theme: 'office',
                            autorowheight: false,
                            rowdetails: true,
                            initrowdetails: initrowdetails,
                            rowdetailstemplate: { rowdetails: "<div id='grid' style='margin: 10px;'></div>",rowdetailsheight: ($scope.isBulkSelected ? 0 : 200), rowdetailshidden: true },
                            pagesizeoptions: ['10', '20', '50', '100', '200'],
                            columns: [
                              { text: 'TPA Number', datafield: 'reqIdLink', filterable: true, groupable:false, width:'6%', cellsrenderer: tooltiprenderer},
                              { text: 'Client Name', datafield: 'Client_AddressName', groupable:false, width:'11%'},
                              { text: 'Client Address', datafield: 'Client_Billing_Address__c',width:'15%'},
                              { text: 'Client Contact Name', datafield: 'ClientContact__r.Name', groupable:false,width:'10%'},
                              { text: 'Vendor Name', datafield: 'VendorName', groupable:false,width:'10%'},
                              { text: 'Vendor Address', datafield: 'Service_Provider_Billing_Address__c',width:'15%'},
                              { text: 'Vendor Contact Name', datafield: 'Service_Provider_Contact_f__c', groupable:false,width:'10%'},
                              { text: 'Vendor Contact Email', datafield: 'VendorContactEmail', groupable:false,width:'13%'},
                              { text: 'Authorized Signer', datafield: 'AuthorizedSigner', groupable:false,width:'10%'},
                              { text: 'Current Status', datafield: 'Request_Status__c',filtertype: 'text', groupable:false,width:'11%'},
                              { text: 'Client submission<br />date / time', datafield: 'Client_Request_Submission__c',filtertype: 'date',cellsformat: 'MM/dd/yyyy hh:mm tt', groupable:false,width:'9%'},
                              { text: 'Vendor submission<br />date / time', datafield: 'Vendor_App_Submitted__c',filtertype: 'date',cellsformat: 'MM/dd/yyyy hh:mm tt', groupable:false,width:'9%'},
                              { text: 'Date / time request went<br />into Review by {!$Label.TPA_IQVIA_Keyword}', datafield: 'In_IMS_Review__c',filtertype: 'date',cellsformat: 'MM/dd/yyyy hh:mm tt', groupable:false,width:'10%'},
                              { text: 'Date / time agreement was<br />sent for vendor signature', datafield: 'Sent_for_Signature__c',filtertype: 'date',cellsformat: 'MM/dd/yyyy hh:mm tt', groupable:false,width:'10%'},
                              { text: 'Date / time executed<br />agreement was received', datafield: 'Signature_Received__c',filtertype: 'date',cellsformat: 'MM/dd/yyyy hh:mm tt', groupable:false,width:'10%'},
                              { text: 'Effective date', datafield: 'Agreement_Effective_Date__c',filtertype: 'date',cellsformat: 'MM/dd/yyyy', groupable:false,width:'6%'},
                              { text: 'End date', datafield: 'Data_Access_End_Date__c',filtertype: 'date',cellsformat: 'MM/dd/yyyy', groupable:false,width:'6%'},
                              { text: 'Manual review reasons', datafield: 'Manual_Trigger_Reasons__c', groupable:false,width:'16%'},
                              { text: 'How long has it been in the<br />current state (*In Days)', datafield: 'CurrentStateInFrom',filtertype: 'number', groupable:false,width:'17%', cellsrenderer: tooltiprenderer},
                              { text: 'TP Processor assigned', datafield: 'TP_Processor_Name__c', groupable:false,width:'9%'},
                              { text: 'Assigned TP Processor', datafield: 'TPA_Assigned_TP_Processor__r.Name',width:'10%'},
                              { text: 'Internal Pending Status', datafield: 'Internal_Pending_Status__c',width:'10%'},
                              { text: 'Access to executed<br />agreement PDF', datafield: 'TPA_Doc_Link__c',filterable: false, groupable:false,width:'9%', cellsrenderer: tooltiprenderer},
                            ],
                            
                });
            	$("[id$=tableSection]").css("display", "");
                $("#excelExport").jqxButton();
            	$("#excelExport").click(function () {
                	$scope.$log.info($scope.searchData);
                	exportData(JSON.stringify($scope.searchData));
            	});
            }
            $scope.isBulkSelected = false;            
            $scope.validate = function(){
                                //var searchData = {};
            	var startDate = document.getElementById('fromDatePicker').value;
                var date2 = $('#toDatePicker').datepicker('getDate'); 
                if(date2 == null){
                    $scope.popupAlert('Please select the To Date');
                	return;
                }
               	var dd = date2.getDate() + 1;
				let mm = date2.getMonth() + 1;
 				if (dd < 10) {
    				dd = '0' + dd;
				}
				if (mm < 10) {
    				mm = '0' + mm;
				}
				var endDate = mm + '/' + dd + '/' + date2.getFullYear();           	 	var endDate = document.getElementById('toDatePicker').value;
            	var status = $('[id$=status]').val();
            	var reqType = $('[id$=reqType]').val();
            	var requestingCountry = $('#RequestingCountry').select2('data');
                var countryList = [];
                if(requestingCountry != null && requestingCountry.length > 0){
                    $.each(requestingCountry,function(key,value) {
                        if(countryList != ''){
                    		countryList += ';';
                   		}
                    	countryList += value.text;
                        
                    });
            	}
            	console.log('submittingCountry:::'+requestingCountry);
            	var vendorName = $('[id$=vendorText]').val();
            	var clientName = $('[id$=clientText]').val();
            
            	$scope.searchData.startDate = startDate;
            	$scope.searchData.endDate = endDate;
            	$scope.searchData.status = status;
            	$scope.searchData.reqType = reqType;
            	$scope.searchData.requestingCountry = countryList;
            	$scope.searchData.vendorName = vendorName;
            	$scope.searchData.clientName = clientName;
            	console.log(JSON.stringify($scope.searchData)+'-->');
            	if( vendorName.length > 0 && vendorName.length < 5 )
            	{
                	$scope.popupAlert('Please enter at least 5 characters for searching Vendor Name');
                    return;
            	}
            	else if( clientName.length > 0 && clientName.length < 5 )
            	{
                	$scope.popupAlert('Please enter at least 5 characters for searching Client Name');
                    return;
            	}
      			else if($('#fromDatePicker').datepicker('getDate') == null) {
                	$scope.popupAlert('Please select the From Date');
                	return;
            	}
            	else if($('#toDatePicker').datepicker('getDate') == null) {
                	$scope.popupAlert('Please select the To Date');
                	return;
            	}
            	else if($('#fromDatePicker').datepicker('getDate') > $('#toDatePicker').datepicker('getDate')) {
                	$scope.popupAlert('From Date cannot be greater than To Date');
                	return;
            	}
      			else if(countryList.length < 1){
                	$scope.popupAlert('Please select a Country');
                }
      			else if(reqType == ''){
                    $scope.popupAlert('Please select a Request Type');
                }
      			else{
                	//findRequests();
                	//resultList = [];
                    showLoading();
                    resultArray = [];
                    if(reoportType == 'CDL'){
                        $scope.loadCDL(JSON.stringify($scope.searchData), null);
                    }
                    else{
                        if(reqType == 'Bulk'){
							$scope.isBulkSelected = true;
                		}else{
                        	$scope.isBulkSelected = false;
                        }
                        $scope.loadITPR(JSON.stringify($scope.searchData), null);
                    }
            	}
           	}

            $scope.showClearButton = false;
            if(reoportType != null)
            {
                $scope.$log.info('$scope.rootObj.isReportAccessible:::' + $scope.rootObj.isReportAccessible);
                if(!$scope.rootObj.isReportAccessible)
                {
                    $scope.popupAlert("You don't have enough permissions to access this report.");
                    return false;
                }
              if(reoportType == 'CDL')
              {
                $scope.rootObj.reportTitle = 'TPA Detail Report by Client';
                
                $scope.popupAlert($scope.rootObj.clientDetailsAcknowledgeMessage,
                    function(){
                        $scope.rootObj.isAcknowledged = true;
                        //$scope.loadCDL(null);
                    },
                        function(){console.log('close clicked.');
                            window.history.back();
                        },
                        'I Acknowledge',
                        'Close'
                    );
              }
                else if(reoportType == 'ITPR')
                {
                    $scope.rootObj.reportTitle = 'TPA Detail Report by TPA Number';
                   	$scope.showClearButton = true;
                    $scope.rootObj.isAcknowledged = true;
                    $scope.rootObj.isReportAccessible = true;
                }
            }
            
			
        });
        
        $(document).ready(function () {
            $('.ui-jqgrid-hdiv').hide();
            if(reoportType == 'ITPR')
            {
                $('#jqxgrid').addClass( "ITPRClass" );
            }
            $(".datepicker").datepicker({showOn: "button", maxDate: '0',yearRange: "2013:c", buttonImage: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAALdQTFRFMzMyAAAAMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMyMzMy////j2KaIAAAADt0Uk5TAAAEgzuRhtCH6aaF09KLFnt66xoGAwLsBw8Mfnj3GDiBNGyCNW19d/YOHw118hlDmj8UAfAuEBuv9eqZZ685AAAAAWJLR0Q8p2phzwAAAAlwSFlzAAAASAAAAEgARslrPgAAALxJREFUGNM9jIcOgkAQBUcseLZDVzwrKtgL9nr//18qqC+ZvGSy+8Ahm+WHA7l8wXWLxZRCPocqlSvVWq36oVIuKZTGq0P9g4dWNISm33J832n5TaSB0bQ7bbrdpLTBCD3bZzCgb3vIWwQMR2PCkPFoSJCKaMJ0yiRKhTCzcxYL5naWvGiWqzUirFfL76hnN2y3bKyXXMTs9geiiMN+R2xQR06Zb04cFefLNb4FWkQHt/h6OXN/PM0/z8f9BT8gFJGascv+AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTA4LTA1VDA1OjMwOjQ2LTA0OjAwb0yWxAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0wOC0wNVQwNTozMDo0Ni0wNDowMB4RLngAAAAASUVORK5CYII=", buttonImageOnly: true});                    
            $(".datepicker").datepicker( "option", "dateFormat", 'mm/dd/yy' );
            $(".datepicker").datepicker("option","changeYear", true);
            $(".datepicker").datepicker("option","changeMonth", true);
            $(".datepicker").datepicker("option","buttonText","click here to open calendar");
                
            $('#RequestingCountry').select2({placeholder: "Select Country", width: '50%', closeOnSelect:false});
           	$.each('{!CountryList}'.toString().slice(1,-1).split(','),function(k,value){
           		if(k != null )
                	$('#RequestingCountry').append($("<option></option>").attr("value",value.trim()).text(value.trim()));
                    
           	});
        });
        
        var tooltiprenderer = function (row, columnfield, value, defaulthtml, columnproperties, rowdata) {
            return '<div style="margin:4px;width:100%;height:100%;" title="' + decodeHtmlCode(value) + '">' + value + '</div>';
        }
        
        function decodeHtmlCode(encodedStr)
        {
            return $("<div/>").html(encodedStr).text();
        }
        
        function isIE(userAgent) {
            var ua = window.navigator.userAgent;
            return ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
        }

        //*** function to read Query strings Start ***//
        function getParameterByName(name) 
        {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
            var results = regex.exec(location.search);
            return results == null ? "" : results[1].replace(/\+/g, " ");
        }
        //*** function to read Query strings End ***//

        function vendorChange()
        {
            var vendor = $('[id$=vendorText]').val();
            var client = $('[id$=clientText]');
            if( vendor.length > 0 && vendor.length < 5 )
            {
                client.disabled = true;
            }
        }
        
        function clientChange()
        {
            var client = $('[id$=clientText]').val();
            var vendor = $('[id$=vendorText]');
            if( client.length > 0 && client.length < 5 )
            {
                vendor.disabled = true;
            }
        }
        
        function vendorDisable()
        {
            var client = $('[id$=clientText]').val();
            var vendor = $('[id$=vendorText]');
            if( client == '' )
            {
                vendor.disabled = false;
            }
            else
            {
                vendor.disabled = true;
            }
        }
        
        function clientDisable() 
        {
            var vendor = $('[id$=vendorText]').val();
            var client = $('[id$=clientText]');
            if( vendor == '' )
            {
                client.disabled = false;
            }
            else
            {
                client.disabled = true;
            }
        }
    </script>
  <style type="text/css">
    .jqx-fill-state-hover-office{
      background-color:#e3f3ff !important;
      border-color:#aaccf6 !important;
    }
    
    .jqx-icon-close-office{display:none !important;}
    .jqx-menu-vertical-office{width:258px !important;}
    .ITPRClass #columntablejqxgrid, .ITPRClass .jqx-widget-header-office{height:38px !important;}
    
    button.disabled 
    {
        color: #999;
        background: #DDD;
        border: 1px solid #CCC;
    }
    button.disabled:hover
    {
        color: #999 !important;
    }
    .appriseOuter{width: 78% !important;max-width: 78% !important;}
    #page_1 {position:relative; margin: 48px 42px 48px 42px;padding: 0px;border: none;}

    #page_1 #dimg1 {position:absolute;top:0px;right:0;width:178px;height:50px;}
    #page_1 #dimg1 #img1 {width:178px;height:50px;}

    #page_2 {position:relative; overflow: hidden;margin: 48px 0px 48px 42px;padding: 0px;border: none;width: 774px;}

    #page_2 #dimg1 {position:absolute;top:0px;left:567px;z-index:-1;width:178px;height:50px;}
    #page_2 #dimg1 #img1 {width:178px;height:50px;}

    #page_3 {position:relative; overflow: hidden;margin: 48px 0px 86px 29px;padding: 0px;border: none;width: 1027px;}

    #page_3 #dimg1 {position:absolute;top:71px;left:0px;z-index:-1;width:939px;height:592px;}
    #page_3 #dimg1 #img1 {width:939px;height:592px;}

    #page_4 {position:relative; overflow: hidden;margin: 48px 0px 48px 0px;padding: 0px;border: none;width: 1056px;}

    #page_4 #dimg1 {position:absolute;top:0px;left:29px;z-index:-1;width:998px;height:154px;}
    #page_4 #dimg1 #img1 {width:998px;height:154px;}

    .dclr {clear:both;float:none;height:1px;margin:0px;padding:0px;overflow:hidden;}

    .ft0{font: bold 16px 'Calibri';line-height: 19px;}
    .ft1{font: 14px 'Calibri';text-decoration: underline;line-height: 18px;}
    .ft2{font: 14px 'Calibri';line-height: 21px;}
    .ft3{font: 14px 'Calibri';line-height: 21px;}
    .ft4{font: 14px 'Calibri';line-height: 20px;}
    .ft5{font: 14px 'Arial';line-height: 17px;}
    .ft6{font: 14px 'Calibri';margin-left: 17px;line-height: 20px;}
    .ft7{font: 14px 'Calibri';margin-left: 17px;line-height: 18px;}
    .ft8{font: 14px 'Calibri';line-height: 18px;}
    .ft9{font: italic 14px 'Calibri';line-height: 21px;}
    .ft10{font: bold 14px 'Calibri';color: #e36c0a;line-height: 18px;}
    .ft11{font: 14px 'Calibri';text-decoration: underline;color: #0000ff;line-height: 21px;}
    .ft12{font: bold 14px 'Calibri';line-height: 18px;}
    .ft13{font: 1px 'Calibri';line-height: 1px;}
    .ft14{font: bold 13px 'Calibri';line-height: 15px;}
    .ft15{font: bold 9px 'Calibri';line-height: 11px;position: relative; bottom: 7px;}
    .ft16{font: 13px 'Calibri';line-height: 15px;}
    .ft17{font: 1px 'Calibri';line-height: 9px;}
    .ft18{font: 1px 'Calibri';line-height: 8px;}
    .ft19{font: italic 11px 'Calibri';line-height: 13px;}
    .ft20{font: 1px 'Calibri';line-height: 7px;}
    .ft21{font: 1px 'Calibri';line-height: 6px;}
    .ft22{font: 1px 'Calibri';line-height: 10px;}
    .ft23{font: 1px 'Calibri';line-height: 5px;}
    .ft24{font: 1px 'Calibri';line-height: 4px;}
    .ft25{font: italic 13px 'Calibri';line-height: 15px;}
    .ft26{font: 1px 'Calibri';line-height: 12px;}
    .ft27{font: 1px 'Calibri';line-height: 14px;}
    .ft28{font: 1px 'Calibri';line-height: 11px;}
    .ft29{font: 14px 'Calibri';line-height: 19px;}
    .ft30{font: bold 14px 'Calibri';line-height: 22px;}
    .ft31{font: 14px 'Calibri';line-height: 22px;}
    .ft32{font: bold 14px 'Calibri';line-height: 23px;}
    .ft33{font: italic 14px 'Calibri';line-height: 23px;}
    .ft34{font: 14px 'Calibri';line-height: 23px;}
    .ft35{font: 9px 'Calibri';line-height: 11px;position: relative; bottom: 7px;}

    .p0{text-align: center;width:100%;margin-top: 68px;margin-bottom: 0px;}
    .p1{text-align: center;width:100%;margin-top: 2px;margin-bottom: 0px;}
    .p2{text-align: justify;margin-top: 34px;margin-bottom: 0px;}
    .p3{text-align: justify;margin-top: 16px;margin-bottom: 0px;}
    .p4{text-align: justify;margin-top: 12px;margin-bottom: 0px;}
    .p5{text-align: justify;margin-top: 11px;margin-bottom: 0px;}
    .p6{text-align: justify;margin-top: 18px;margin-bottom: 0px;}
    .p7{text-align: justify;margin-top: 16px;margin-bottom: 0px;}
    .p8{text-align: justify;padding-left: 48px;margin-top: 15px;margin-bottom: 0px;text-indent: -24px;}
    .p9{text-align: justify;padding-left: 24px;margin-top: 2px;margin-bottom: 0px;}
    .p10{text-align: justify;padding-left: 24px;margin-top: 3px;margin-bottom: 0px;}
    .p11{text-align: justify;margin-top: 16px;margin-bottom: 0px;}
    .p12{text-align: justify;margin-top: 11px;margin-bottom: 0px;}
    .p13{text-align: center;margin-top: 32px;margin-bottom: 0px;}
    .p14{text-align: justify;margin-top: 34px;margin-bottom: 0px;}
    .p15{text-align: justify;padding-left: 327px;margin-top: 758px;margin-bottom: 0px;}
    .p16{text-align: center;margin-top: 0px;margin-bottom: 0px;}
    .p17{text-align: justify;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p18{text-align: justify;padding-left: 61px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p19{text-align: justify;padding-left: 17px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p20{text-align: justify;padding-left: 57px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p21{text-align: justify;padding-left: 31px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p22{text-align: center;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p23{text-align: justify;padding-left: 39px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p24{text-align: justify;padding-left: 29px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p25{text-align: center;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p26{text-align: justify;padding-left: 49px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p27{text-align: justify;padding-left: 7px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p28{text-align: justify;padding-left: 88px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p29{text-align: justify;padding-left: 70px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p30{text-align: justify;padding-left: 77px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p31{text-align: justify;padding-left: 8px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
    .p32{text-align: justify;margin-top: 33px;margin-bottom: 0px;}
    .p33{text-align: justify;margin-top: 17px;margin-bottom: 0px;}
    .p34{text-align: justify;margin-top: 14px;margin-bottom: 0px;}
    .p35{text-align: justify;margin-top: 5px;margin-bottom: 0px;}
    .p36{text-align: justify;padding-left: 493px;margin-top: 68px;margin-bottom: 0px;}
    .p37{text-align: right;padding-right: 326px;margin-top: 2px;margin-bottom: 0px;}
    .p38{text-align: justify;padding-left: 29px;margin-top: 50px;margin-bottom: 0px;}
    .p39{text-align: justify;padding-left: 483px;margin-top: 529px;margin-bottom: 0px;}

    .td0{border-left: #000000 1px solid;border-right: #000000 1px solid;border-top: #000000 1px solid;border-bottom: #f2f2f2 1px solid;padding: 0px;margin: 0px;width: 133px;vertical-align: bottom;background: #f2f2f2;}
    .td1{border-right: #000000 1px solid;border-top: #000000 1px solid;border-bottom: #f2f2f2 1px solid;padding: 0px;margin: 0px;width: 125px;vertical-align: bottom;background: #f2f2f2;}
    .td2{border-right: #f2f2f2 1px solid;border-top: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 191px;vertical-align: bottom;background: #f2f2f2;}
    .td3{border-top: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #f2f2f2;}
    .td4{border-right: #f2f2f2 1px solid;border-top: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 184px;vertical-align: bottom;background: #f2f2f2;}
    .td5{border-right: #000000 1px solid;border-top: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #f2f2f2;}
    .td6{border-left: #000000 1px solid;border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 133px;vertical-align: bottom;background: #f2f2f2;}
    .td7{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 125px;vertical-align: bottom;background: #f2f2f2;}
    .td8{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 191px;vertical-align: bottom;background: #f2f2f2;}
    .td9{padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #f2f2f2;}
    .td10{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 184px;vertical-align: bottom;background: #f2f2f2;}
    .td11{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #f2f2f2;}
    .td12{border-left: #000000 1px solid;border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 133px;vertical-align: bottom;background: #f2f2f2;}
    .td13{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 125px;vertical-align: bottom;background: #f2f2f2;}
    .td14{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 191px;vertical-align: bottom;background: #f2f2f2;}
    .td15{border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #f2f2f2;}
    .td16{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 184px;vertical-align: bottom;background: #f2f2f2;}
    .td17{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #f2f2f2;}
    .td18{border-left: #000000 1px solid;border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 133px;vertical-align: bottom;}
    .td19{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 125px;vertical-align: bottom;}
    .td20{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 191px;vertical-align: bottom;}
    .td21{padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #ffffcc;}
    .td22{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 184px;vertical-align: bottom;background: #ffffcc;}
    .td23{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #fde9d9;}
    .td24{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 125px;vertical-align: bottom;}
    .td25{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 191px;vertical-align: bottom;}
    .td26{border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #ffffcc;}
    .td27{border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 177px;vertical-align: bottom;background: #ffffcc;}
    .td28{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #ffffcc;}
    .td29{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #fde9d9;}
    .td30{padding: 0px;margin: 0px;width: 177px;vertical-align: bottom;background: #ffffcc;}
    .td31{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #ffffcc;}
    .td32{border-left: #000000 1px solid;border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 133px;vertical-align: bottom;}
    .td33{padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #99ff66;}
    .td34{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 184px;vertical-align: bottom;background: #99ff66;}
    .td35{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #99ff66;}
    .td36{border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #99ff66;}
    .td37{border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 177px;vertical-align: bottom;background: #99ff66;}
    .td38{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #99ff66;}
    .td39{border-right: #000000 1px solid;border-bottom: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #99ff66;}
    .td40{padding: 0px;margin: 0px;width: 177px;vertical-align: bottom;background: #99ff66;}
    .td41{border-right: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #99ff66;}
    .td42{border-right: #000000 1px solid;border-bottom: #99ff66 1px solid;padding: 0px;margin: 0px;width: 184px;vertical-align: bottom;background: #99ff66;}
    .td43{border-right: #000000 1px solid;border-bottom: #99ff66 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #99ff66;}
    .td44{border-bottom: #99ff66 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #99ff66;}
    .td45{border-right: #000000 1px solid;border-top: #000000 1px solid;padding: 0px;margin: 0px;width: 125px;vertical-align: bottom;}
    .td46{border-right: #000000 1px solid;border-top: #000000 1px solid;padding: 0px;margin: 0px;width: 191px;vertical-align: bottom;}
    .td47{border-top: #000000 1px solid;padding: 0px;margin: 0px;width: 7px;vertical-align: bottom;background: #99ff66;}
    .td48{border-right: #000000 1px solid;border-top: #000000 1px solid;padding: 0px;margin: 0px;width: 184px;vertical-align: bottom;background: #99ff66;}
    .td49{border-right: #000000 1px solid;border-top: #000000 1px solid;padding: 0px;margin: 0px;width: 192px;vertical-align: bottom;background: #99ff66;}

    .tr0{height: 20px;}
    .tr1{height: 33px;}
    .tr2{height: 49px;}
    .tr3{height: 16px;}
    .tr4{height: 19px;}
    .tr5{height: 25px;}
    .tr6{height: 9px;}
    .tr7{height: 17px;}
    .tr8{height: 8px;}
    .tr9{height: 15px;}
    .tr10{height: 32px;}
    .tr11{height: 31px;}
    .tr12{height: 24px;}
    .tr13{height: 13px;}
    .tr14{height: 7px;}
    .tr15{height: 6px;}
    .tr16{height: 18px;}
    .tr17{height: 10px;}
    .tr18{height: 23px;}
    .tr19{height: 22px;}
    .tr20{height: 5px;}
    .tr21{height: 4px;}
    .tr22{height: 12px;}
    .tr23{height: 14px;}
    .tr24{height: 11px;}

    .t0{width: 837px;margin-top: 32px;font: 13px 'Calibri';}
  </style>
  </head>
  <body style="background-image: url(/_slds/images/themes/lightning_blue/lightning_blue_background.png),linear-gradient(to top, rgba(160, 180, 206, 0.0) 0, rgba(160, 180, 206, 1.0)); background-repeat: no-repeat; min-height: 100vh">
  	<c:VFC_TPA_LoadingImage />
    <div ng-app="reportingServicesApp" class="slds-m-around_small">
        	<div id="reportingServicesController" ng-controller="reportingServicesController">
           	<div class="slds-page-header">
				<div class="slds-page-header__row slds-p-top_medium slds-p-bottom_medium" >
					<div class="slds-page-header__col-title">
						<div class="slds-media">
						<div class="slds-media__body">
							<div class="slds-page-header__name">
								<div class="slds-page-header__name-title">
									<h1>
										<span class="slds-page-header__title slds-truncate" title="{{rootObj.reportTitle}}">{{rootObj.reportTitle}}</span>
									</h1>
								</div>
							</div>
							</div>
						</div>
					</div>
				</div>
			</div>

            <!-- Filter Section-->
            <div>
                <apex:pageBlock >
                <apex:form id="filterForm">
                    <apex:pageBlockSection id="pbSection" >
                        <apex:inputText label="Vendor Name: " id="vendorText" onChange="vendorChange();" onKeyUp="clientDisable();"/>
                        <apex:inputText label="Client Name: " id="clientText" onChange="clientChange();" onKeyUp="vendorDisable();" />
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="From Date:" />
                            <apex:outputPanel id="opPanel">
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <input type="text" ng-click="popupAlert('Click on the calendar icon next to the text box and select the Date.');" placeholder="Select From Date" readonly="readonly" class="datepicker" id="fromDatePicker"/> 
                                </div>
                            </apex:outputPanel>
                    	</apex:pageBlockSectionItem>
                    	<apex:pageBlockSectionItem >
                            <apex:outputLabel value="To Date:" />
                            <apex:outputPanel id="opPanel">
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <input type="text" ng-click="popupAlert('Click on the calendar icon next to the text box and select the Date.');" placeholder="Select To Date" readonly="readonly" class="datepicker" id="toDatePicker"/> 
                                </div>
                            </apex:outputPanel>
                     	</apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="statusBlock" >
                            <apex:outputText value="Request Status" />
                            <apex:outputPanel layout="block" >
                                <apex:actionRegion >
                                    <apex:selectList size="1" id="status" >
                                        <apex:selectOptions value="{!statusList}"/>
                                    </apex:selectList>
                                </apex:actionRegion>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="requestType" >
                            <apex:outputText value="Request Type" />
                            <apex:outputPanel layout="block" >
                                <apex:actionRegion >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                		<apex:selectList size="1" id="reqType" >
                                        	<apex:selectOptions value="{!requestTypeList}"></apex:selectOptions>
                                    	</apex:selectList>
                                    </div>
                                </apex:actionRegion>
                           	</apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="reqCountry" >
                            <apex:outputText value="Requesting Country: " />
                            <apex:outputPanel layout="block">
                                <div class = 'requiredInput'>
                                    <div class="requiredBlock"></div>
                                    <select id="RequestingCountry" multiple="multiple"></select>
                                </div>
                                
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:outputText />
                        <apex:actionFunction action="{!redirectToExport}" name="exportData" rerender="rrr" >
                        	<apex:param name="searchFil" value="" />
                        </apex:actionFunction>
                    </apex:pageBlockSection>
                </apex:form>
                    <input style="margin-left:45%" ng-click="validate();" type="button" id="runReport" value="Run Report" role="button" class="slds-align_absolute-center jqx-rc-all jqx-button jqx-widget jqx-fill-state-normal slds-button slds-button_outline-brand" aria-disabled="false"  />
               	</apex:pageBlock>
                <div id='rrr'></div>
            </div>
            
            <div id='jqxWidget' style="font-size: 13px; font-family: Verdana;" ng-show="!showStandardPortalPage">
                <div style="width:100%;margin-top:1%" ng-show="rootObj.isReportAccessible && rootObj.isAcknowledged">
                     <input style="margin:5px 5px 5px 2px" type="button" id="excelExport" value="Export to Excel" role="button" class="jqx-rc-all jqx-button jqx-widget jqx-fill-state-normal slds-button slds-button_outline-brand" aria-disabled="false"  />
                </div>
                <div id="jqxgrid" style="margin-top:0.2%">
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        
    </script>
  </body>
  </html>
</apex:page>